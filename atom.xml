<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Yumi&#39;s Blog</title>
  
  <subtitle>活在这珍贵的人间，太阳热烈，水波温柔.</subtitle>
  <link href="https://yumi1.top/atom.xml" rel="self"/>
  
  <link href="https://yumi1.top/"/>
  <updated>2025-08-01T12:26:17.235Z</updated>
  <id>https://yumi1.top/</id>
  
  <author>
    <name>Yichen</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>微信读书客户端 逆向分析</title>
    <link href="https://yumi1.top/weread-security-analysis-1/"/>
    <id>https://yumi1.top/weread-security-analysis-1/</id>
    <published>2025-08-01T12:26:00.000Z</published>
    <updated>2025-08-01T12:26:17.235Z</updated>
    
    <content type="html"><![CDATA[<h2 id="🔍-执行摘要">🔍 执行摘要</h2><p>基于对wx读书Android客户端的逆向工程分析,仅供学习交流<br>微信读书客户端无加固,使用<a href="https://github.com/skylot/jadx">jadx</a>反编译</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/weread-security-analysis-1/2025-08-01-18-27-04.png" alt="开启unicode字符转译"/></div><span class="image-caption">开启unicode字符转译</span></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/weread-security-analysis-1/2025-08-01-18-28-57.png" alt="开启反混淆"/></div><span class="image-caption">开启反混淆</span></div><p>反混淆后的包已经相对较好阅读,使用jadx导出为gradle项目,使用idea/android studio方便阅读</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/weread-security-analysis-1/2025-08-01-19-57-07.png"/></div></div><h2 id="安全风险分析">安全风险分析</h2><h3 id="1-会话管理安全缺陷">1. 会话管理安全缺陷</h3><h4 id="可预测的Session-ID生成">可预测的Session ID生成</h4><ul><li><code>sources/com/tencent/weread/model/domain/Session.java</code></li><li><code>sources/moai/storage/Domain.java</code></li><li><code>sources/com/tencent/weread/WeReadFragmentActivity.java</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Session.java - 会话ID生成逻辑</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Session</span> <span class="keyword">extends</span> <span class="title class_">Domain</span> <span class="keyword">implements</span> <span class="title class_">Parcelable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">generateId</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Domain.hashId(str);  <span class="comment">// 调用Domain层哈希方法</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">generateId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Domain.hashId(<span class="built_in">this</span>.sid);  <span class="comment">// 基于sid生成会话ID</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Domain.java - 哈希算法实现</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">BKDRHashPositiveInt</span><span class="params">(String str)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">iCharAt</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i10</span> <span class="operator">=</span> <span class="number">0</span>; i10 &lt; str.length(); i10++) &#123;</span><br><span class="line">        iCharAt = (iCharAt * WeReadFragmentActivity.ARG_GOTO_SWITCH_LOGIN) + str.charAt(i10);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Integer.MAX_VALUE &amp; iCharAt;  <span class="comment">// 确保返回正整数</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">hashId</span><span class="params">(Object... objArr)</span> &#123;</span><br><span class="line">    <span class="type">Joiner</span> <span class="variable">joiner2</span> <span class="operator">=</span> joiner;</span><br><span class="line">    <span class="keyword">return</span> BKDRHashPositiveInt(joiner2.b(Arrays.asList(objArr)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// WeReadFragmentActivity.java - 哈希乘数常量</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">ARG_GOTO_SWITCH_LOGIN</span> <span class="operator">=</span> <span class="number">131</span>;  <span class="comment">// BKDR哈希乘数</span></span><br></pre></td></tr></table></figure><p><strong>风险评估</strong>：</p><table><thead><tr><th>风险类别</th><th>严重程度</th><th>描述</th></tr></thead><tbody><tr><td>算法可预测性</td><td>高危</td><td>使用确定性BKDR哈希，相同输入产生相同输出</td></tr><tr><td>参数暴露</td><td>高危</td><td>哈希乘数(131)硬编码在客户端代码中</td></tr><tr><td>会话劫持</td><td>高危</td><td>攻击者可计算任意用户的Session ID</td></tr></tbody></table><p><strong>攻击向量</strong>：</p><ol><li><strong>会话ID预测</strong>：通过已知sid值计算对应的Session ID</li><li><strong>用户冒充</strong>：利用计算出的Session ID冒充其他用户</li><li><strong>数据操作</strong>：修改或删除他人的聊天记录和会话数据</li></ol><h3 id="2-财务数据安全风险">2. 财务数据安全风险</h3><h4 id="敏感财务信息明文存储">敏感财务信息明文存储</h4><ul><li><code>sources/com/tencent/weread/model/domain/Account.java</code></li><li><code>app/src/main/java/com/tencent/weread/model/domain/Account.java</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Account.java - 用户账户数据模型</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> <span class="keyword">extends</span> <span class="title class_">Domain</span> <span class="keyword">implements</span> <span class="title class_">Parcelable</span> &#123;</span><br><span class="line">    <span class="comment">// 财务相关敏感字段</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> balance;           <span class="comment">// 账户余额</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> expiryBalance;     <span class="comment">// 过期余额</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> giftBalance;       <span class="comment">// 礼品余额</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> peerBalance;       <span class="comment">// 对等余额</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> peerGiftBalance;   <span class="comment">// 对等礼品余额</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 认证相关敏感字段</span></span><br><span class="line">    <span class="keyword">private</span> String accessToken;       <span class="comment">// 访问令牌</span></span><br><span class="line">    <span class="keyword">private</span> String refreshToken;      <span class="comment">// 刷新令牌</span></span><br><span class="line">    <span class="keyword">private</span> String wxAccessToken;     <span class="comment">// 微信访问令牌</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 数据库表结构定义</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        LinkedHashMap&lt;String, String&gt; linkedHashMap = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;&gt;();</span><br><span class="line">        COLUMNS = linkedHashMap;</span><br><span class="line">        linkedHashMap.put(<span class="string">&quot;accessToken&quot;</span>, <span class="string">&quot;varchar&quot;</span>);      </span><br><span class="line">        linkedHashMap.put(<span class="string">&quot;refreshToken&quot;</span>, <span class="string">&quot;varchar&quot;</span>);     </span><br><span class="line">        linkedHashMap.put(<span class="string">&quot;balance&quot;</span>, <span class="string">&quot;double&quot;</span>);           </span><br><span class="line">        linkedHashMap.put(<span class="string">&quot;peerBalance&quot;</span>, <span class="string">&quot;double&quot;</span>);       </span><br><span class="line">        linkedHashMap.put(<span class="string">&quot;giftBalance&quot;</span>, <span class="string">&quot;double&quot;</span>);       </span><br><span class="line">        linkedHashMap.put(<span class="string">&quot;expiryBalance&quot;</span>, <span class="string">&quot;double&quot;</span>);     </span><br><span class="line">        linkedHashMap.put(<span class="string">&quot;wxAccessToken&quot;</span>, <span class="string">&quot;varchar&quot;</span>);    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>安全风险评估</strong>：</p><table><thead><tr><th>数据类型</th><th>存储方式</th><th>风险等级</th><th>潜在影响</th></tr></thead><tbody><tr><td>账户余额</td><td>明文存储</td><td>严重</td><td>财务数据泄露，可被任意修改</td></tr><tr><td>访问令牌</td><td>明文存储</td><td>严重</td><td>账户完全接管</td></tr><tr><td>刷新令牌</td><td>明文存储</td><td>严重</td><td>长期账户控制</td></tr><tr><td>微信令牌</td><td>明文存储</td><td>高危</td><td>跨平台账户风险</td></tr></tbody></table><p><strong>数据暴露风险</strong>：</p><ol><li><strong>直接数据库访问</strong>：Root设备可直接读取SQLite文件</li><li><strong>应用间数据泄露</strong>：恶意应用可能获取数据库访问权限</li><li><strong>备份数据泄露</strong>：系统备份可能包含明文敏感数据</li></ol><h3 id="3-认证凭证泄露风险">3. 认证凭证泄露风险</h3><h4 id="敏感信息记录到日志">敏感信息记录到日志</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AccountManager.java</span></span><br><span class="line">ELog.INSTANCE.log(<span class="number">3</span>, TAG, <span class="string">&quot;getLoginAccount from db:&quot;</span> + </span><br><span class="line">    account.getVid() + <span class="string">&#x27;,&#x27;</span> + </span><br><span class="line">    account.getAccessToken() + <span class="string">&#x27;,&#x27;</span> + </span><br><span class="line">    account.getRefreshToken() + <span class="string">&#x27;,&#x27;</span> + </span><br><span class="line">    account.getFirstLogin());</span><br></pre></td></tr></table></figure><p><strong>安全隐患</strong>：</p><ul><li>访问令牌和刷新令牌被明文记录到日志文件</li><li>日志文件可本地随意读取 易导致令牌泄露</li></ul><h3 id="4-硬编码加密密钥风险">4. 硬编码加密密钥风险</h3><h4 id="AES密钥硬编码在客户端">AES密钥硬编码在客户端</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AESEncrypt.java - 加密工具类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AESEncrypt</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ALGORITHM</span> <span class="operator">=</span> <span class="string">&quot;AES&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TRANSFORMATION</span> <span class="operator">=</span> <span class="string">&quot;AES/CTR/NoPadding&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 硬编码的AES密钥 - 严重安全缺陷</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SDK_APP_SECRET</span> <span class="operator">=</span> <span class="string">&quot;isvrbeT7qUywVEZ1Ia0/aUVA/TcFaeV0wC8qFLc8rg4=&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 默认加密方法直接使用硬编码密钥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">encrypt</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> encrypt(SDK_APP_SECRET, str);  <span class="comment">// 所有用户共享同一密钥</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e10) &#123;</span><br><span class="line">            e10.getLocalizedMessage();</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 解密方法同样使用硬编码密钥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">decrypt</span><span class="params">(String str, String str2)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 使用硬编码密钥进行解密操作</span></span><br><span class="line">        <span class="type">SecretKeySpec</span> <span class="variable">secretKeySpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecretKeySpec</span>(a.b(str), ALGORITHM);</span><br><span class="line">        <span class="comment">// ... 解密逻辑</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>该硬编码密钥在以下位置被引用：</p><ul><li><code>sources/ga/b.java</code> - 数据解密操作</li><li><code>app/src/main/java/ga/C9415b.java</code> - 加密标签处理</li></ul><p><strong>安全风险评估</strong>：</p><table><thead><tr><th>风险维度</th><th>严重程度</th><th>具体描述</th></tr></thead><tbody><tr><td>密钥暴露</td><td>严重</td><td>AES-256密钥完全暴露在客户端代码中</td></tr><tr><td>全局影响</td><td>严重</td><td>所有用户共享同一加密密钥</td></tr><tr><td>密钥轮换</td><td>严重</td><td>无法进行密钥更新和轮换</td></tr><tr><td>数据保护</td><td>严重</td><td>加密形同虚设，任何人都可解密数据</td></tr></tbody></table><p><strong>攻击场景</strong>：</p><ul><li>静态分析攻击：直接从APK中提取密钥</li><li>数据库攻击：解密本地存储的加密数据</li><li>中间人攻击：解密网络传输中的加密数据（如果使用了该密钥）</li><li>批量数据泄露：处理大量用户的加密数据</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 攻击者可以直接使用硬编码密钥解密数据</span><br><span class="line">String hardcodedKey = &quot;isvrbeT7qUywVEZ1Ia0/aUVA/TcFaeV0wC8qFLc8rg4=&quot;;</span><br><span class="line">String decryptedData = AESEncrypt.decrypt(hardcodedKey, encryptedUserData);</span><br></pre></td></tr></table></figure><h3 id="5-支付系统绕过漏洞">5. 支付系统绕过漏洞</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// PaySQLiteHelper.java - 支付相关SQL操作</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">sqlUpdateChapterPaid</span> <span class="operator">=</span> </span><br><span class="line">    <span class="string">&quot;UPDATE Chapter SET paid=1 WHERE bookId=? AND chapterUid IN $inClause$&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">sqlUpdateAllChapterPaid</span> <span class="operator">=</span> </span><br><span class="line">    <span class="string">&quot;UPDATE Chapter SET paid=1 WHERE bookId=?&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">sqlSetBookChapterPaid</span> <span class="operator">=</span> </span><br><span class="line">    <span class="string">&quot;UPDATE Book SET intergrateAttr = intergrateAttr | 128 WHERE bookId=?&quot;</span>;</span><br></pre></td></tr></table></figure><p>小问题 只是本地状态 仍有多个api进行付费状态同步 (当然全hook了也行)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@POST(&quot;/book/chapterInfos&quot;)</span></span><br><span class="line">Observable&lt;ChapterInfoList&gt; <span class="title function_">GetChapterInfos</span><span class="params">(</span></span><br><span class="line"><span class="params">    <span class="meta">@JSONField(&quot;bookIds&quot;)</span> Iterable&lt;String&gt; bookIds,</span></span><br><span class="line"><span class="params">    <span class="meta">@JSONField(&quot;synckeys&quot;)</span> Iterable&lt;Long&gt; syncKeys,</span></span><br><span class="line"><span class="params">    <span class="meta">@JSONField(&quot;paidCount&quot;)</span> Iterable&lt;Integer&gt; paidCounts,  // 付费数量验证</span></span><br><span class="line"><span class="params">    <span class="meta">@JSONField(&quot;price&quot;)</span> Iterable&lt;Double&gt; prices,           // 价格验证</span></span><br><span class="line"><span class="params">    <span class="meta">@JSONField(&quot;maxfreeIdx&quot;)</span> Iterable&lt;Integer&gt; iterable,</span></span><br><span class="line"><span class="params">    <span class="meta">@JSONField(&quot;teenmode&quot;)</span> <span class="type">int</span> i10</span></span><br><span class="line"><span class="params">)</span>;</span><br></pre></td></tr></table></figure><p>章节付费检查</p><ul><li>TTSBookPlayer.java:376</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TTSBookPlayer.java - 阅读时检查付费状态</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">z12</span> <span class="operator">=</span> !BookHelper.isLimitedFree(bookInfoFromDB) &amp;&amp; </span><br><span class="line">              BookHelper.isChapterCostMoney(bookInfoFromDB, </span><br><span class="line">                  chapter.getChapterIdx(), </span><br><span class="line">                  chapter.getPrice(), </span><br><span class="line">                  chapter.getPaid());  <span class="comment">// 综合检查付费状态</span></span><br></pre></td></tr></table></figure><p>会员状态验证</p><ul><li>ComicFragment.java:2560-2562</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ComicFragment.java - 会员和付费状态综合验证</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">zIsNeedPayChapter</span> <span class="operator">=</span> <span class="built_in">this</span>.mReaderCursor.isNeedPayChapter(getMBook(), chapter.getChapterUid());</span><br><span class="line">WRLog.log(<span class="number">3</span>, getTAG(), <span class="string">&quot;checkReaderTips membership:&quot;</span> + isMemberShipValid() + <span class="string">&quot; paid:&quot;</span> + zIsNeedPayChapter);</span><br><span class="line"><span class="keyword">if</span> (!(isMemberShipValid() &amp;&amp; zIsNeedPayChapter &amp;&amp; !AccountManager.Companion.getInstance().getMemberCardSummary().isFreeUsing()))</span><br></pre></td></tr></table></figure><hr><p><em>本文仅用于技术研究和安全教育目的，请勿用于恶意攻击</em></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;🔍-执行摘要&quot;&gt;🔍 执行摘要&lt;/h2&gt;
&lt;p&gt;基于对wx读书Android客户端的逆向工程分析,仅供学习交流&lt;br&gt;
微信读书客户端无加固,使用&lt;a href=&quot;https://github.com/skylot/jadx&quot;&gt;jadx&lt;/a&gt;反编译&lt;/p&gt;
&lt;</summary>
      
    
    
    
    <category term="网络安全" scheme="https://yumi1.top/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
    <category term="移动应用安全" scheme="https://yumi1.top/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="漏洞分析" scheme="https://yumi1.top/tags/%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序实战：WebView上悬浮操作组件</title>
    <link href="https://yumi1.top/unicloud-7/"/>
    <id>https://yumi1.top/unicloud-7/</id>
    <published>2025-03-16T19:48:04.000Z</published>
    <updated>2025-03-16T20:16:09.265Z</updated>
    
    <content type="html"><![CDATA[<h1>微信小程序WebView上的悬浮组件实现</h1><p>在微信小程序开发中，经常会遇到需要加载H5页面的场景，特别是需要展示公众号文章内容时。但由于微信的WebView组件的限制，实现在WebView上方显示任何原生组件都是<font color="red">不允许的</font>。本文将分享如何在小程序WebView上实现悬浮点赞、评论等交互组件的解决方案。</p><h1>问题背景</h1><p>在我的小程序项目中，需要展示大量公众号文章。然而，我们希望用户在跳转阅读公众号文章的同时，能够使用小程序自带的点赞、评论等功能，而不必打开退出公众号文章去进行。这就要求在WebView上方叠加显示悬浮操作按钮。</p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html">官方文档</a>指出，web-view是一个特殊的原生组件，默认会覆盖其它所有组件。这意味着普通的小程序组件无法显示在WebView上方。基本使用方式如下：</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/unicloud-7/2025-03-17-04-02-53.png"/></div></div><h1>解决方案</h1><p>为了实现在WebView上方显示悬浮操作按钮，我们需要使用微信小程序的cover-view和cover-image组件。</p><h2 id="使用cover-view覆盖">使用cover-view覆盖</h2><p>cover-view和cover-image。我们可以利用这两个组件在WebView上方实现悬浮按钮。<br>实现代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">web-view</span> <span class="attr">:src</span>=<span class="string">&quot;url&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">web-view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">v-if</span>=<span class="string">&quot;showActions&quot;</span> <span class="attr">class</span>=<span class="string">&quot;float-actions&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">class</span>=<span class="string">&quot;action-btn view&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cover-image</span> <span class="attr">class</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/icons/view.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">cover-image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">class</span>=<span class="string">&quot;count&quot;</span>&gt;</span>&#123;&#123;views || 0&#125;&#125;<span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">class</span>=<span class="string">&quot;action-btn like&quot;</span> @<span class="attr">tap</span>=<span class="string">&quot;handleLike&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cover-image</span> <span class="attr">class</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;isLiked ? &#x27;/static/icons/liked.png&#x27; : &#x27;/static/icons/like.png&#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">cover-image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">class</span>=<span class="string">&quot;count&quot;</span>&gt;</span>&#123;&#123;likes || 0&#125;&#125;<span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">class</span>=<span class="string">&quot;action-btn comment&quot;</span> @<span class="attr">tap</span>=<span class="string">&quot;handleComment&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cover-image</span> <span class="attr">class</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/icons/comment.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">cover-image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">class</span>=<span class="string">&quot;count&quot;</span>&gt;</span>&#123;&#123;totalComments || 0&#125;&#125;<span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p><font color="red">注意：<br>使用cover-view时，可能pc测试时看不到效果,需要真机测试,而且部分机型可能存在问题</font></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.float-actions</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">999999</span>; <span class="comment">/* 尽可能高的层级 */</span></span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.action-btn</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.6</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">2</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.count</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接下来实现功能逻辑就行 就不进行演示了</p><h2 id="总结">总结</h2><p>通过使用cover-view和cover-image组件，在WebView上方实现悬浮操作按钮, 但是并不确定此方法是微信官方所支持的(或许能在网站上插广告?) ,同时此方法在pc上测试时看不到效果,需要真机测试,而且部分机型可能存在问题</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;微信小程序WebView上的悬浮组件实现&lt;/h1&gt;
&lt;p&gt;在微信小程序开发中，经常会遇到需要加载H5页面的场景，特别是需要展示公众号文章内容时。但由于微信的WebView组件的限制，实现在WebView上方显示任何原生组件都是&lt;font color=&quot;red&quot;&gt;不允许的&lt;</summary>
      
    
    
    
    <category term="技术学习" scheme="https://yumi1.top/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="uniapp" scheme="https://yumi1.top/tags/uniapp/"/>
    
    <category term="unicloud" scheme="https://yumi1.top/tags/unicloud/"/>
    
    <category term="微信小程序" scheme="https://yumi1.top/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    <category term="VUE" scheme="https://yumi1.top/tags/VUE/"/>
    
    <category term="WebView" scheme="https://yumi1.top/tags/WebView/"/>
    
    <category term="悬浮操作组件" scheme="https://yumi1.top/tags/%E6%82%AC%E6%B5%AE%E6%93%8D%E4%BD%9C%E7%BB%84%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序图片优化实战：缓存+压缩</title>
    <link href="https://yumi1.top/unicloud-6/"/>
    <id>https://yumi1.top/unicloud-6/</id>
    <published>2025-03-16T19:36:44.000Z</published>
    <updated>2025-03-16T20:16:33.133Z</updated>
    
    <content type="html"><![CDATA[<h1>问题描述</h1><p>在项目开发后期，我们发现系统存在大量未经压缩的图片资源，导致：</p><ol><li><strong>CDN流量消耗过大</strong>：每次用户浏览页面都会重新请求原图，流量费用激增</li><li><strong>页面加载缓慢</strong>：特别是在网络不佳的情况下，用户体验极差</li><li><strong>反复请求相同图片</strong>：即使是同一张图片（如用户头像），每次展示都会发起新请求<br>由于项目已经接近完工，系统中已有巨量图片资源，重新批量下载并上传压缩后的图片工作量巨大且风险高(主要是怕图片链接改)，需要一个无需修改现有图片URL的解决方案。</li></ol><h1>问题原因</h1><ol><li><strong>前期忽视图片优化</strong>：开发初期未重视图片资源优化</li><li><strong>多端兼容性考虑不足</strong>：未针对微信小程序环境的特点进行适配</li><li><strong>缺乏自动化处理机制</strong>：没有在图片使用环节自动进行压缩和缓存</li></ol><h1>解决方案</h1><p>我们实现了一套完整的图片缓存和压缩解决方案，核心思路是：</p><ol><li><strong>客户端图片压缩</strong>：根据不同场景（列表/详情/头像）智能压缩</li><li><strong>本地缓存机制</strong>：首次加载后缓存到本地，再次请求直接使用缓存</li><li><strong>自动化处理流程</strong>：拦截图片请求，无需手动修改现有代码</li></ol><h1>实现架构</h1><p>该方案包含以下核心组件：</p><ol><li><strong>图片缓存管理器</strong>（<code>utils/imageCache.js</code>）：<br>自动缓存远程图片到本地文件系统<br>设置缓存过期时间（默认7天）<br>限制缓存数量（默认200张）<br>提供同步/异步查询方法</li><li><strong>缓存图片组件</strong>（<code>components/CachedImage.vue</code>）：<br>采用<code>monkey patch</code>覆盖原生&lt;image&gt;标签</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils/globalImageCompression.js 中的关键代码</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">registerGlobalImageCompression</span>(<span class="params">app</span>) &#123;</span><br><span class="line">  <span class="comment">// 获取原始Image组件</span></span><br><span class="line">  <span class="keyword">const</span> originalImage = app.<span class="title function_">component</span>(<span class="string">&#x27;image&#x27;</span>) || app.<span class="title function_">component</span>(<span class="string">&#x27;u-image&#x27;</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (!originalImage) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;无法找到原始Image组件，全局图片压缩可能无法正常工作&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 重新定义Image组件，添加URL处理逻辑 - 这就是Monkey Patch!</span></span><br><span class="line">  app.<span class="title function_">component</span>(<span class="string">&#x27;image&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params">ctx</span>) &#123;</span><br><span class="line">      <span class="comment">// 处理src属性</span></span><br><span class="line">      <span class="keyword">if</span> (ctx.<span class="property">src</span> &amp;&amp; <span class="keyword">typeof</span> ctx.<span class="property">src</span> === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">        ctx.<span class="property">src</span> = <span class="title function_">smartCompressImage</span>(ctx.<span class="property">src</span>, ctx.<span class="property">$el</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// 调用原始Image组件渲染</span></span><br><span class="line">      <span class="keyword">return</span> originalImage.<span class="title function_">render</span>(ctx)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;全局图片压缩已启用&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>自动处理缓存逻辑<br>支持加载状态、错误处理<br>提供强制刷新功能<br>3. <strong>全局压缩工具</strong>（<code>utils/globalImageCompression.js</code>）：<br>集成缓存机制<br>智能识别图片类型（头像/封面/详情图等）<br>根据实际显示尺寸动态调整压缩参数</p><h1>代码实现</h1><h2 id="图片缓存管理器">图片缓存管理器</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils/imageCache.js</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ImageCacheManager</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 缓存配置</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cacheConfig</span> = &#123;</span><br><span class="line">      <span class="attr">expireTime</span>: <span class="number">7</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>, <span class="comment">// 7天</span></span><br><span class="line">      <span class="attr">maxCacheCount</span>: <span class="number">200</span>,</span><br><span class="line">      <span class="attr">cacheKeyPrefix</span>: <span class="string">&#x27;IMG_CACHE_&#x27;</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cacheInfo</span> = &#123;&#125;;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">init</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 从缓存获取图片路径</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getImagePath</span>(<span class="params">url</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!url) <span class="keyword">return</span> url;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 本地图片不处理</span></span><br><span class="line">    <span class="keyword">if</span> (url.<span class="title function_">startsWith</span>(<span class="string">&#x27;/&#x27;</span>) || url.<span class="title function_">startsWith</span>(<span class="string">&#x27;data:&#x27;</span>)) &#123;</span><br><span class="line">      <span class="keyword">return</span> url;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// 尝试从缓存获取</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">cacheImage</span>(url);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;获取图片路径失败:&#x27;</span>, e);</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">compressImageUrl</span>(url);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 缓存图片到本地</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">cacheImage</span>(<span class="params">url</span>) &#123;</span><br><span class="line">    <span class="comment">// 检查缓存</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">isCached</span>(url)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">getCachePath</span>(url);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 下载并缓存</span></span><br><span class="line">    <span class="keyword">const</span> downloadRes = <span class="keyword">await</span> uni.<span class="title function_">downloadFile</span>(&#123; url &#125;);</span><br><span class="line">    <span class="keyword">const</span> saveRes = <span class="keyword">await</span> uni.<span class="title function_">saveFile</span>(&#123; <span class="attr">tempFilePath</span>: downloadRes.<span class="property">tempFilePath</span> &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 更新缓存信息</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">updateCacheInfo</span>(url, saveRes.<span class="property">savedFilePath</span>);</span><br><span class="line">    <span class="keyword">return</span> saveRes.<span class="property">savedFilePath</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出全局方法</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getCachedImagePath</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> imageCacheManager.<span class="title function_">getImagePath</span>(url);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="缓存图片组件">缓存图片组件</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- components/CachedImage.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">image</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">:src</span>=<span class="string">&quot;imageSrc&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">:mode</span>=<span class="string">&quot;mode&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">:lazy-load</span>=<span class="string">&quot;lazyLoad&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">:class</span>=<span class="string">&quot;customClass&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">error</span>=<span class="string">&quot;handleError&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">load</span>=<span class="string">&quot;handleLoad&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; getCachedImagePath, getCachedImagePathSync &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/imageCache.js&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;CachedImage&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">src</span>: &#123; <span class="attr">type</span>: <span class="title class_">String</span>, <span class="attr">default</span>: <span class="string">&#x27;&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">mode</span>: &#123; <span class="attr">type</span>: <span class="title class_">String</span>, <span class="attr">default</span>: <span class="string">&#x27;aspectFill&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">lazyLoad</span>: &#123; <span class="attr">type</span>: <span class="title class_">Boolean</span>, <span class="attr">default</span>: <span class="literal">true</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">forceRefresh</span>: &#123; <span class="attr">type</span>: <span class="title class_">Boolean</span>, <span class="attr">default</span>: <span class="literal">false</span> &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">imageSrc</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">isLoading</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">hasError</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">src</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handler</span>(<span class="params">newSrc</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">loadImage</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">immediate</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">forceRefresh</span>(<span class="params">val</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (val) <span class="variable language_">this</span>.<span class="title function_">loadImage</span>(<span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">async</span> <span class="title function_">loadImage</span>(<span class="params">force = <span class="literal">false</span></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">src</span>) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 本地图片直接使用</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">src</span>.<span class="title function_">startsWith</span>(<span class="string">&#x27;/&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">imageSrc</span> = <span class="variable language_">this</span>.<span class="property">src</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">isLoading</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 尝试使用同步方法获取缓存</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> syncPath = <span class="title function_">getCachedImagePathSync</span>(<span class="variable language_">this</span>.<span class="property">src</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (syncPath !== <span class="variable language_">this</span>.<span class="property">src</span> &amp;&amp; !force) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">imageSrc</span> = syncPath;</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 异步加载和缓存</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">imageSrc</span> = <span class="keyword">await</span> <span class="title function_">getCachedImagePath</span>(<span class="variable language_">this</span>.<span class="property">src</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">catch</span> (e) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">imageSrc</span> = <span class="variable language_">this</span>.<span class="property">src</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">finally</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">isLoading</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>全局压缩拦截器</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils/globalImageCompression.js</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">smartCompressImage</span>(<span class="params">url, element</span>) &#123;</span><br><span class="line">  <span class="comment">// 首先检查缓存</span></span><br><span class="line">  <span class="keyword">const</span> cachedPath = <span class="title function_">getCachedImagePathSync</span>(url);</span><br><span class="line">  <span class="keyword">if</span> (cachedPath &amp;&amp; cachedPath !== url) &#123;</span><br><span class="line">    <span class="keyword">return</span> cachedPath;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 获取元素尺寸</span></span><br><span class="line">  <span class="keyword">const</span> &#123; width, height &#125; = <span class="title function_">getElementSize</span>(element);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 根据不同场景选择压缩策略</span></span><br><span class="line">  <span class="keyword">const</span> classList = (element.<span class="title function_">getAttribute</span>(<span class="string">&#x27;class&#x27;</span>) || <span class="string">&#x27;&#x27;</span>).<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 头像图片</span></span><br><span class="line">  <span class="keyword">if</span> (classList.<span class="title function_">includes</span>(<span class="string">&#x27;avatar&#x27;</span>) || url.<span class="title function_">includes</span>(<span class="string">&#x27;avatar&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">getThumbnailUrl</span>(url, width || <span class="number">150</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 列表缩略图</span></span><br><span class="line">  <span class="keyword">if</span> (classList.<span class="title function_">includes</span>(<span class="string">&#x27;thumbnail&#x27;</span>) || classList.<span class="title function_">includes</span>(<span class="string">&#x27;cover&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">getThumbnailUrl</span>(url, width || <span class="number">200</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 详情大图</span></span><br><span class="line">  <span class="keyword">if</span> (classList.<span class="title function_">includes</span>(<span class="string">&#x27;detail-image&#x27;</span>) || classList.<span class="title function_">includes</span>(<span class="string">&#x27;banner&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">getResponsiveImageUrl</span>(url, <span class="number">95</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 默认压缩</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">getCompressedImageUrl</span>(url, &#123; <span class="attr">quality</span>: <span class="number">80</span> &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册全局拦截器</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">registerGlobalImageCompression</span>(<span class="params">app</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> originalImage = app.<span class="title function_">component</span>(<span class="string">&#x27;image&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  app.<span class="title function_">component</span>(<span class="string">&#x27;image&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params">ctx</span>) &#123;</span><br><span class="line">      <span class="comment">// 处理src属性</span></span><br><span class="line">      <span class="keyword">if</span> (ctx.<span class="property">src</span> &amp;&amp; <span class="keyword">typeof</span> ctx.<span class="property">src</span> === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">        ctx.<span class="property">src</span> = <span class="title function_">smartCompressImage</span>(ctx.<span class="property">src</span>, ctx.<span class="property">$el</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">return</span> originalImage.<span class="title function_">render</span>(ctx);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>优化效果</h1><p>经过实际应用，该方案带来的优化效果显著：<br>1.CDN流量减少约70%：重复图片不再重复请求<br>2.页面加载速度提升约60%：缓存图片秒开<br>3.离线浏览体验改善：已浏览过的图片在离线情况下仍可查看<br>4.零侵入性：现有代码几乎无需修改</p><h1>待优化改进有</h1><ol><li>图片页面预加载</li><li>缓存控制清理</li><li>性能监控</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;问题描述&lt;/h1&gt;
&lt;p&gt;在项目开发后期，我们发现系统存在大量未经压缩的图片资源，导致：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;CDN流量消耗过大&lt;/strong&gt;：每次用户浏览页面都会重新请求原图，流量费用激增&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;页面加载缓慢&lt;/st</summary>
      
    
    
    
    <category term="技术学习" scheme="https://yumi1.top/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="uniapp" scheme="https://yumi1.top/tags/uniapp/"/>
    
    <category term="unicloud" scheme="https://yumi1.top/tags/unicloud/"/>
    
    <category term="微信小程序" scheme="https://yumi1.top/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    <category term="VUE" scheme="https://yumi1.top/tags/VUE/"/>
    
    <category term="图片缓存" scheme="https://yumi1.top/tags/%E5%9B%BE%E7%89%87%E7%BC%93%E5%AD%98/"/>
    
    <category term="图片压缩" scheme="https://yumi1.top/tags/%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序 自定义tabbar switchTab报错 can not switch to xxx page</title>
    <link href="https://yumi1.top/unicloud-5/"/>
    <id>https://yumi1.top/unicloud-5/</id>
    <published>2025-03-04T18:20:09.000Z</published>
    <updated>2025-03-16T19:43:21.035Z</updated>
    
    <content type="html"><![CDATA[<h1>问题描述</h1><p>微信小程序 自定义tabbar switchTab报错 can not switch to xxx page</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Error: MiniProgramError</span><br><span class="line">&#123;&quot;errMsg&quot;:&quot;switchTab:fail can not switch to no-tabBar page&quot;&#125;</span><br><span class="line">    at Object.errorReport (WAServiceMainContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1)</span><br><span class="line">    at Function.thirdErrorReport (WAServiceMainContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1)</span><br><span class="line">    at Object.thirdErrorReport (WAServiceMainContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1)</span><br><span class="line">    at i (WASubContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1)</span><br><span class="line">    at Object.cb (WASubContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1)</span><br><span class="line">    at V._privEmit (WASubContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1)</span><br><span class="line">    at V.emit (WASubContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1)</span><br><span class="line">    at WASubContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1</span><br><span class="line">    at n (WASubContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1)</span><br><span class="line">    at Fe (WASubContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1)(env: Windows,mp,1.06.2412050; lib: 3.6.5)</span><br></pre></td></tr></table></figure><h1>问题原因</h1><p>在pages.json中注释掉了原生tabBar配置， 但在页面中仍然使用了switchTab方法</p><h1>解决方案</h1><ol><li><p>恢复<code>pages.json</code>中的tabBar配置</p></li><li><p>设为隐藏状态<code>&quot;custom&quot;: true</code></p></li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;tabBar&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;custom&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> </span><br><span class="line">    <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#999999&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;selectedColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#B92525&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#ffffff&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;borderStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;height&quot;</span><span class="punctuation">:</span> <span class="string">&quot;120rpx&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>在页面中使用<code>uni.switchTab</code>方法</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uni.switchTab(&#123;</span><br><span class="line">  url: &#x27;/pages/index/index&#x27;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1>水一篇 下播</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;问题描述&lt;/h1&gt;
&lt;p&gt;微信小程序 自定义tabbar switchTab报错 can not switch to xxx page&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter</summary>
      
    
    
    
    <category term="技术学习" scheme="https://yumi1.top/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="uniapp" scheme="https://yumi1.top/tags/uniapp/"/>
    
    <category term="unicloud" scheme="https://yumi1.top/tags/unicloud/"/>
    
    <category term="微信小程序" scheme="https://yumi1.top/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    <category term="VUE" scheme="https://yumi1.top/tags/VUE/"/>
    
  </entry>
  
  <entry>
    <title>今天,2025.02.09,最大的油猴脚本网站greasyfork已被gfw屏蔽</title>
    <link href="https://yumi1.top/greasyfork/"/>
    <id>https://yumi1.top/greasyfork/</id>
    <published>2025-02-08T16:09:08.000Z</published>
    <updated>2025-02-08T16:38:26.028Z</updated>
    
    <content type="html"><![CDATA[<p>日前,最大的油猴脚本网站greasyfork已被gfw屏蔽,全国无法访问.<br>无法访问</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/greasyfork/2025-02-09-00-12-21.png"/></div></div><p>全国无法解析</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/greasyfork/2025-02-09-00-11-09.png"/></div></div><p>正常dns解析</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/greasyfork/2025-02-09-00-32-45.png"/></div></div><p>被污染的dns</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/greasyfork/2025-02-09-00-32-57.png"/></div></div><blockquote><p>greasyfork 是一个下载油猴脚本的网站<br>油猴脚本是一段代码，它们能够<strong>优化您的网页浏览体验</strong>。安装之后，有些脚本能为网站添加新的功能，有些能使网站的界面更加易用，有些则能隐藏网站上烦人的部分内容。在 Greasy Fork 上的用户脚本都是由用户编写并向全世界发表的，您可以免费安装，轻松体验。</p></blockquote><h2 id="相关链接">相关链接</h2><ul><li><a href="https://yumi1.top/windows-optimize-1">Windows 浏览器优化指南</a> 获取更多油猴脚本资源</li><li><a href="http://yumi1.top/vpn">科学上网如何使用</a> 绕过 GFW 访问</li><li><a href="https://greasyfork.org">Greasy Fork 官网</a></li><li><a href="https://www.tampermonkey.net/">Tampermonkey 官网</a></li><li><a href="https://greasyfork.org/zh-CN/help/installing-user-scripts">如何安装油猴脚本</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;日前,最大的油猴脚本网站greasyfork已被gfw屏蔽,全国无法访问.&lt;br&gt;
无法访问&lt;/p&gt;
&lt;div class=&quot;img-wrap&quot;&gt;&lt;div class=&quot;img-bg&quot;&gt;&lt;img class=&quot;img&quot; src=&quot;/image/../image/greasy</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>微信小程序提审小技巧</title>
    <link href="https://yumi1.top/unicloud-4/"/>
    <id>https://yumi1.top/unicloud-4/</id>
    <published>2025-01-31T16:53:09.000Z</published>
    <updated>2025-01-31T17:10:31.867Z</updated>
    
    <content type="html"><![CDATA[<h2 id="写在最前">写在最前</h2><p>审核失败: 原因存在运营内容不完整问题，违反<a href="https://developers.weixin.qq.com/miniprogram/product/reject.html#_3-3-%E5%8F%AF%E7%94%A8%E6%80%A7%E5%92%8C%E5%AE%8C%E6%95%B4%E6%80%A7">《微信小程序平台运营规范常见拒绝情形3.3》</a></p><p>这里我通过云函数对部分未完成的项目进行隐藏,审核过后再进行显示:<br>即: 审核时,数据库对未完成的项目进行隐藏(设为false),审核过后,再进行显示(设为true) 通过云函数进行判断</p><h2 id="示例">示例</h2><h3 id="数据库">数据库</h3><p>在数据库中创建 <code>project</code> 集合，示例数据结构如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;项目名称&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;项目描述&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;isShow&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 控制显示状态</span></span><br><span class="line"><span class="attr">&quot;isAudit&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span> <span class="comment">// 是否处于审核状态</span></span><br><span class="line"><span class="attr">&quot;createTime&quot;</span><span class="punctuation">:</span> <span class="number">1643673600000</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="云函数">云函数</h3><p>创建 <code>getProjects</code> 云函数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> db = uniCloud.<span class="title function_">database</span>()</span><br><span class="line"><span class="keyword">const</span> collection = db.<span class="title function_">collection</span>(<span class="string">&#x27;project&#x27;</span>)</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">main</span> = <span class="keyword">async</span> (event, context) =&gt; &#123;</span><br><span class="line"><span class="comment">// 获取环境信息</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="variable constant_">PLATFORM</span> &#125; = context</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">let</span> query = &#123;&#125;</span><br><span class="line"><span class="comment">// 如果是微信小程序环境</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable constant_">PLATFORM</span> === <span class="string">&#x27;mp-weixin&#x27;</span>) &#123;</span><br><span class="line"><span class="comment">// 获取当前是否为体验版或审核版本</span></span><br><span class="line"><span class="keyword">const</span> &#123; version &#125; = <span class="keyword">await</span> uniCloud.<span class="title function_">getWXContext</span>()</span><br><span class="line"><span class="comment">// 审核版本时只显示 isShow 为 true 的项目</span></span><br><span class="line"><span class="keyword">if</span> (version === <span class="string">&#x27;trial&#x27;</span> || version === <span class="string">&#x27;audit&#x27;</span>) &#123;</span><br><span class="line">query.<span class="property">isShow</span> = <span class="literal">true</span></span><br><span class="line"><span class="comment">// 更新审核状态</span></span><br><span class="line"><span class="keyword">await</span> collection.<span class="title function_">where</span>(&#123;</span><br><span class="line"><span class="attr">isAudit</span>: <span class="literal">false</span></span><br><span class="line">&#125;).<span class="title function_">update</span>(&#123;</span><br><span class="line"><span class="attr">isAudit</span>: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> &#123; data &#125; = <span class="keyword">await</span> collection</span><br><span class="line">.<span class="title function_">where</span>(query)</span><br><span class="line">.<span class="title function_">orderBy</span>(<span class="string">&#x27;createTime&#x27;</span>, <span class="string">&#x27;desc&#x27;</span>)</span><br><span class="line">.<span class="title function_">get</span>()</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line"><span class="attr">code</span>: <span class="number">0</span>,</span><br><span class="line"><span class="attr">msg</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">data</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line"><span class="attr">code</span>: -<span class="number">1</span>,</span><br><span class="line"><span class="attr">msg</span>: e.<span class="property">message</span>,</span><br><span class="line"><span class="attr">data</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="前端">前端</h3><p>在页面中调用云函数：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">v-for</span>=<span class="string">&quot;item in projectList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span> <span class="attr">class</span>=<span class="string">&quot;project-item&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;project-name&quot;</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;project-desc&quot;</span>&gt;</span>&#123;&#123;item.description&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">projectList</span>: []</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onLoad</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="title function_">getProjectList</span>()</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">async</span> <span class="title function_">getProjectList</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> &#123; result &#125; = <span class="keyword">await</span> uniCloud.<span class="title function_">callFunction</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">name</span>: <span class="string">&#x27;getProjects&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">if</span> (result.<span class="property">code</span> === <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">projectList</span> = result.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">uni.<span class="title function_">showToast</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">title</span>: result.<span class="property">msg</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125; <span class="keyword">catch</span>(e) &#123;</span></span><br><span class="line"><span class="language-javascript">uni.<span class="title function_">showToast</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">title</span>: <span class="string">&#x27;获取项目列表失败&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">padding</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.project-item</span> &#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">margin-bottom</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css"><span class="attribute">padding</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css"><span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css"><span class="attribute">border-radius</span>: <span class="number">8</span>rpx;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.project-name</span> &#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">font-size</span>: <span class="number">32</span>rpx;</span></span><br><span class="line"><span class="language-css"><span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.project-desc</span> &#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span></span><br><span class="line"><span class="language-css"><span class="attribute">color</span>: <span class="number">#666</span>;</span></span><br><span class="line"><span class="language-css"><span class="attribute">margin-top</span>: <span class="number">10</span>rpx;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="实现原理">实现原理</h2><ol><li>在数据库中通过 <code>isShow</code> 字段控制项目是否显示</li><li>通过云函数获取当前环境，判断是否为审核版本</li><li>在审核版本中只返回 <code>isShow</code> 为 true 的项目</li><li>审核通过后，可以通过管理后台或云函数修改 <code>isShow</code> 状态</li></ol><h2 id="注意事项">注意事项</h2><p>可能不符合微信小程序审核规范, 后续被发现违规可能会被官方下线小程序, 但是无奈于小程序的xx审核,所有版块在上线的时候都强制需要有内容</p>]]></content>
    
    
    <summary type="html">审核失败:原因存在运营内容不完整问题，违反《微信小程序平台运营规范常见拒绝情形3.3》</summary>
    
    
    
    <category term="技术学习" scheme="https://yumi1.top/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="uniapp" scheme="https://yumi1.top/tags/uniapp/"/>
    
    <category term="unicloud" scheme="https://yumi1.top/tags/unicloud/"/>
    
    <category term="微信小程序" scheme="https://yumi1.top/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    <category term="VUE" scheme="https://yumi1.top/tags/VUE/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序开发笔记-3  VUE uniapp unicloud</title>
    <link href="https://yumi1.top/unicloud-3/"/>
    <id>https://yumi1.top/unicloud-3/</id>
    <published>2025-01-31T16:45:51.000Z</published>
    <updated>2025-01-31T17:10:54.122Z</updated>
    
    <content type="html"><![CDATA[<h2 id="写在最前">写在最前</h2><p>小型项目中 使用VUE 和 uniapp 开发 使用uniCloud作为云开发服务 技术栈为VUE3+uniapp3+uniCloud,第一个项目纯手撸没用模板框架,应该考虑tdesign的</p><h2 id="一、组件通信">一、组件通信</h2><ol><li>父子组件通信</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">child-component</span> <span class="attr">:msg</span>=<span class="string">&quot;message&quot;</span> @<span class="attr">onCallback</span>=<span class="string">&quot;handleCallback&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 子组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">msg</span>: <span class="title class_">String</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">sendToParent</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;onCallback&#x27;</span>, <span class="string">&#x27;来自子组件的数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="二、状态管理">二、状态管理</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">userInfo</span>: <span class="literal">null</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">SET_USER_INFO</span>(<span class="params">state, userInfo</span>) &#123;</span><br><span class="line">      state.<span class="property">userInfo</span> = userInfo</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">getUserInfo</span>(<span class="params">&#123; commit &#125;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> userInfo = <span class="keyword">await</span> uniCloud.<span class="title function_">callFunction</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;getUserInfo&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="title function_">commit</span>(<span class="string">&#x27;SET_USER_INFO&#x27;</span>, userInfo)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="三、常用工具函数">三、常用工具函数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils/index.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">formatDate</span> = (<span class="params">date, fmt = <span class="string">&#x27;yyyy-MM-dd hh:mm:ss&#x27;</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 日期格式化</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">showToast</span> = (<span class="params">title, duration = <span class="number">2000</span></span>) =&gt; &#123;</span><br><span class="line">  uni.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">    title,</span><br><span class="line">    duration,</span><br><span class="line">    <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">navigateTo</span> = (<span class="params">url</span>) =&gt; &#123;</span><br><span class="line">  uni.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">    url</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="四、全局化富文本编辑器">四、全局化富文本编辑器</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;editor-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 非全屏状态的编辑器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;editor-box&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;!editorFullscreen&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">editor</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;editor&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:id</span>=<span class="string">&quot;editorId&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:placeholder</span>=<span class="string">&quot;placeholder&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">ready</span>=<span class="string">&quot;onEditorReady&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">input</span>=<span class="string">&quot;onEditorInput&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">statuschange</span>=<span class="string">&quot;onStatusChange&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span><span class="tag">&lt;/<span class="name">editor</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;fullscreen-btn&quot;</span> @<span class="attr">tap</span>=<span class="string">&quot;enterFullscreen&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe623;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;btn-text&quot;</span>&gt;</span>全屏编辑<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 全屏状态的编辑器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">v-if</span>=<span class="string">&quot;editorFullscreen&quot;</span> <span class="attr">class</span>=<span class="string">&quot;editor-fullscreen&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;editor-toolbar&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.bold &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;bold&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe61f;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>加粗<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.italic &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;italic&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe61e;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>斜体<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.underline &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;underline&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe61d;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>下划线<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.header === 1 &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;header&#x27;, 1)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe623;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>H1<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.header === 3 &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;header&#x27;, 3)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe622;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>H3<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.align === &#x27;left&#x27; &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;justify&#x27;, &#x27;left&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe648;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>左对齐<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.align === &#x27;center&#x27; &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;justify&#x27;, &#x27;center&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe643;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>居中<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.align === &#x27;right&#x27; &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;justify&#x27;, &#x27;right&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe644;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>右对齐<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.list === &#x27;ordered&#x27; &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;list&#x27;, &#x27;ordered&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe65b;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>有序列表<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.list === &#x27;bullet&#x27; &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;list&#x27;, &#x27;bullet&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe647;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>无序列表<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;insertImage&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe63e;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>插入图片<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">editor</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;editor&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:id</span>=<span class="string">&quot;fullscreenEditorId&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:placeholder</span>=<span class="string">&quot;placeholder&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">ready</span>=<span class="string">&quot;onEditorReady&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">input</span>=<span class="string">&quot;onEditorInput&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">statuschange</span>=<span class="string">&quot;onStatusChange&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span><span class="tag">&lt;/<span class="name">editor</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;return-btn&quot;</span> @<span class="attr">tap</span>=<span class="string">&quot;exitFullscreen&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe64f;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;btn-text&quot;</span>&gt;</span>退出全屏<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;RichEditor&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">modelValue</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">default</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">placeholder</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">default</span>: <span class="string">&#x27;请输入内容&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">editorId</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">default</span>: <span class="string">&#x27;editor&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">fullscreenEditorId</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">default</span>: <span class="string">&#x27;editor-fullscreen&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">editorCtx</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">editorFullscreenCtx</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">editorFullscreen</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">formats</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">currentContent</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">modelValue</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handler</span>(<span class="params">newVal</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;编辑器modelValue变化:&#x27;</span>, newVal)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (newVal !== <span class="variable language_">this</span>.<span class="property">currentContent</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">currentContent</span> = newVal</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;更新编辑器内容为:&#x27;</span>, <span class="variable language_">this</span>.<span class="property">currentContent</span>)</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">updateEditorContent</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">immediate</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">updateEditorContent</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> ctx = <span class="variable language_">this</span>.<span class="property">editorFullscreen</span> ? <span class="variable language_">this</span>.<span class="property">editorFullscreenCtx</span> : <span class="variable language_">this</span>.<span class="property">editorCtx</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;准备更新编辑器内容，当前上下文:&#x27;</span>, ctx ? <span class="string">&#x27;存在&#x27;</span> : <span class="string">&#x27;不存在&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;当前编辑器状态:&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">isFullscreen</span>: <span class="variable language_">this</span>.<span class="property">editorFullscreen</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">hasFullscreenCtx</span>: !!<span class="variable language_">this</span>.<span class="property">editorFullscreenCtx</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">hasNormalCtx</span>: !!<span class="variable language_">this</span>.<span class="property">editorCtx</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">content</span>: <span class="variable language_">this</span>.<span class="property">currentContent</span></span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (ctx &amp;&amp; <span class="variable language_">this</span>.<span class="property">currentContent</span> !== <span class="literal">undefined</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;开始设置编辑器内容:&#x27;</span>, <span class="variable language_">this</span>.<span class="property">currentContent</span>)</span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="title function_">setContents</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">html</span>: <span class="variable language_">this</span>.<span class="property">currentContent</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">success</span>: <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;设置编辑器内容成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;设置编辑器内容失败:&#x27;</span>, err)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 失败后重试一次</span></span></span><br><span class="line"><span class="language-javascript">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;重试设置编辑器内容&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">              ctx.<span class="title function_">setContents</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">html</span>: <span class="variable language_">this</span>.<span class="property">currentContent</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">success</span>: <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;重试设置编辑器内容成功&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;重试设置编辑器内容失败:&#x27;</span>, err)</span></span><br><span class="line"><span class="language-javascript">              &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;, <span class="number">300</span>)</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;无法更新编辑器内容：上下文不存在或内容未定义&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 编辑器准备就绪</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">onEditorReady</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 添加延时，确保编辑器DOM已经渲染完成</span></span></span><br><span class="line"><span class="language-javascript">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">initEditor</span>()</span></span><br><span class="line"><span class="language-javascript">      &#125;, <span class="number">100</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 初始化编辑器</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">initEditor</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> query = uni.<span class="title function_">createSelectorQuery</span>().<span class="title function_">in</span>(<span class="variable language_">this</span>)</span></span><br><span class="line"><span class="language-javascript">        query.<span class="title function_">select</span>(<span class="string">`#<span class="subst">$&#123;<span class="variable language_">this</span>.editorFullscreen ? <span class="variable language_">this</span>.fullscreenEditorId : <span class="variable language_">this</span>.editorId&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">context</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;获取编辑器上下文:&#x27;</span>, res)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (!res || !res.<span class="property">context</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;编辑器上下文不存在，将在300ms后重试&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">              <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">initEditor</span>()</span></span><br><span class="line"><span class="language-javascript">              &#125;, <span class="number">300</span>)</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">editorFullscreen</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">editorFullscreenCtx</span> = res.<span class="property">context</span></span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;设置全屏编辑器上下文成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">editorCtx</span> = res.<span class="property">context</span></span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;设置普通编辑器上下文成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 初始化完成后设置内容</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">updateEditorContent</span>()</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">exec</span>()</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">catch</span> (e) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;初始化编辑器失败:&#x27;</span>, e)</span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">initEditor</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;, <span class="number">300</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 编辑器输入</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">onEditorInput</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!e || !e.<span class="property">detail</span>) <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> html = e.<span class="property">detail</span>.<span class="property">html</span> || <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;编辑器输入:&#x27;</span>, html)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">currentContent</span> = html</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;update:modelValue&#x27;</span>, html)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 编辑器状态变化</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">onStatusChange</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!e || !e.<span class="property">detail</span>) <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">formats</span> = e.<span class="property">detail</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 执行编辑器命令</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">execCommand</span>(<span class="params">name, value = <span class="literal">null</span></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> ctx = <span class="variable language_">this</span>.<span class="property">editorFullscreen</span> ? <span class="variable language_">this</span>.<span class="property">editorFullscreenCtx</span> : <span class="variable language_">this</span>.<span class="property">editorCtx</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!ctx) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;编辑器未准备好&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">switch</span>(name) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">case</span> <span class="string">&#x27;header&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">format</span>(<span class="string">&#x27;header&#x27;</span>, value)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">break</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">case</span> <span class="string">&#x27;justify&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">format</span>(<span class="string">&#x27;align&#x27;</span>, value)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">break</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">case</span> <span class="string">&#x27;list&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">format</span>(<span class="string">&#x27;list&#x27;</span>, value)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">break</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">default</span>:</span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">format</span>(name, value)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">catch</span> (e) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;执行编辑器命令失败:&#x27;</span>, e)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 插入图片</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">insertImage</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> ctx = <span class="variable language_">this</span>.<span class="property">editorFullscreen</span> ? <span class="variable language_">this</span>.<span class="property">editorFullscreenCtx</span> : <span class="variable language_">this</span>.<span class="property">editorCtx</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!ctx) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;编辑器未准备好&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      uni.<span class="title function_">chooseImage</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">count</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          uni.<span class="title function_">showLoading</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">title</span>: <span class="string">&#x27;上传中...&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">          </span></span><br><span class="line"><span class="language-javascript">          uniCloud.<span class="title function_">uploadFile</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">filePath</span>: res.<span class="property">tempFilePaths</span>[<span class="number">0</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">cloudPath</span>: <span class="string">`content/<span class="subst">$&#123;<span class="built_in">Date</span>.now()&#125;</span>-<span class="subst">$&#123;<span class="built_in">Math</span>.random().toString(<span class="number">36</span>).slice(-<span class="number">6</span>)&#125;</span>.<span class="subst">$&#123;res.tempFilePaths[<span class="number">0</span>].split(<span class="string">&#x27;.&#x27;</span>).pop()&#125;</span>`</span></span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">insertImage</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">src</span>: result.<span class="property">fileID</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">success</span>: <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                uni.<span class="title function_">hideLoading</span>()</span></span><br><span class="line"><span class="language-javascript">              &#125;,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;插入图片失败:&#x27;</span>, err)</span></span><br><span class="line"><span class="language-javascript">                uni.<span class="title function_">hideLoading</span>()</span></span><br><span class="line"><span class="language-javascript">                uni.<span class="title function_">showToast</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">title</span>: <span class="string">&#x27;插入图片失败&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;上传图片失败:&#x27;</span>, err)</span></span><br><span class="line"><span class="language-javascript">            uni.<span class="title function_">hideLoading</span>()</span></span><br><span class="line"><span class="language-javascript">            uni.<span class="title function_">showToast</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">title</span>: <span class="string">&#x27;上传图片失败&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 进入全屏</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">enterFullscreen</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;进入全屏，当前内容:&#x27;</span>, <span class="variable language_">this</span>.<span class="property">currentContent</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">editorFullscreen</span> = <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 延时等待全屏编辑器渲染完成后设置内容</span></span></span><br><span class="line"><span class="language-javascript">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> query = uni.<span class="title function_">createSelectorQuery</span>().<span class="title function_">in</span>(<span class="variable language_">this</span>)</span></span><br><span class="line"><span class="language-javascript">        query.<span class="title function_">select</span>(<span class="string">`#<span class="subst">$&#123;<span class="variable language_">this</span>.fullscreenEditorId&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">context</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;获取全屏编辑器上下文:&#x27;</span>, res)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (!res || !res.<span class="property">context</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;全屏编辑器上下文不存在，将在300ms后重试&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">              <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">enterFullscreen</span>()</span></span><br><span class="line"><span class="language-javascript">              &#125;, <span class="number">300</span>)</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">editorFullscreenCtx</span> = res.<span class="property">context</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;设置全屏编辑器上下文成功，准备设置内容:&#x27;</span>, <span class="variable language_">this</span>.<span class="property">currentContent</span>)</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 直接设置内容</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">currentContent</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">editorFullscreenCtx</span>.<span class="title function_">setContents</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">html</span>: <span class="variable language_">this</span>.<span class="property">currentContent</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">success</span>: <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;全屏模式：设置内容成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;全屏模式：设置内容失败&#x27;</span>, err)</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">// 失败后重试一次</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;重试设置全屏编辑器内容&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">editorFullscreenCtx</span>.<span class="title function_">setContents</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">html</span>: <span class="variable language_">this</span>.<span class="property">currentContent</span>,</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">success</span>: <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;重试设置全屏编辑器内容成功&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;重试设置全屏编辑器内容失败:&#x27;</span>, err)</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                  &#125;, <span class="number">300</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">              &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">exec</span>()</span></span><br><span class="line"><span class="language-javascript">      &#125;, <span class="number">300</span>)  <span class="comment">// 增加延时，确保DOM完全渲染</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 退出全屏</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">exitFullscreen</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;退出全屏，当前内容:&#x27;</span>, <span class="variable language_">this</span>.<span class="property">currentContent</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">editorFullscreen</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 延时等待主编辑器渲染完成后设置内容</span></span></span><br><span class="line"><span class="language-javascript">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> query = uni.<span class="title function_">createSelectorQuery</span>().<span class="title function_">in</span>(<span class="variable language_">this</span>)</span></span><br><span class="line"><span class="language-javascript">        query.<span class="title function_">select</span>(<span class="string">`#<span class="subst">$&#123;<span class="variable language_">this</span>.editorId&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">context</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;获取普通编辑器上下文:&#x27;</span>, res)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (!res || !res.<span class="property">context</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;普通编辑器上下文不存在，将在300ms后重试&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">              <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">exitFullscreen</span>()</span></span><br><span class="line"><span class="language-javascript">              &#125;, <span class="number">300</span>)</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">editorCtx</span> = res.<span class="property">context</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;设置普通编辑器上下文成功，准备设置内容:&#x27;</span>, <span class="variable language_">this</span>.<span class="property">currentContent</span>)</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 直接设置内容</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">currentContent</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">editorCtx</span>.<span class="title function_">setContents</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">html</span>: <span class="variable language_">this</span>.<span class="property">currentContent</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">success</span>: <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;退出全屏：设置内容成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;退出全屏：设置内容失败&#x27;</span>, err)</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">// 失败后重试一次</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;重试设置普通编辑器内容&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">editorCtx</span>.<span class="title function_">setContents</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">html</span>: <span class="variable language_">this</span>.<span class="property">currentContent</span>,</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">success</span>: <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;重试设置普通编辑器内容成功&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;重试设置普通编辑器内容失败:&#x27;</span>, err)</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                  &#125;, <span class="number">300</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">              &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">exec</span>()</span></span><br><span class="line"><span class="language-javascript">      &#125;, <span class="number">300</span>)  <span class="comment">// 增加延时，确保DOM完全渲染</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.editor-container</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: <span class="number">1</span>rpx solid <span class="number">#eee</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">8</span>rpx;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">  </span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.editor-box</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.editor</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">min-height</span>: <span class="number">400</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">30</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">word-wrap</span>: break-word;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">word-break</span>: break-all;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">white-space</span>: pre-wrap;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">line-height</span>: <span class="number">1.8</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">      </span></span><br><span class="line"><span class="language-css">      :<span class="built_in">deep</span>() &#123;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">max-width</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">height</span>: auto <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.fullscreen-btn</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">right</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">bottom</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>);</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border-radius</span>: <span class="number">8</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">12</span>rpx <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">gap</span>: <span class="number">8</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">z-index</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">      </span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.iconfont</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      </span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.btn-text</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      </span></span><br><span class="line"><span class="language-css">      &amp;<span class="selector-pseudo">:active</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.editor-fullscreen</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">z-index</span>: <span class="number">9999</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">  </span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.editor-toolbar</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: auto;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">min-height</span>: <span class="number">160</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#f8f8f8</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-bottom</span>: <span class="number">1</span>rpx solid <span class="number">#eee</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex-direction</span>: row;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex-wrap</span>: wrap;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">gap</span>: <span class="number">16</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">z-index</span>: <span class="number">10000</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.tool-item</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">80</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">80</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border-radius</span>: <span class="number">8</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2</span>rpx <span class="number">6</span>rpx <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.05</span>);</span></span><br><span class="line"><span class="language-css">      <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">z-index</span>: <span class="number">10001</span>;</span></span><br><span class="line"><span class="language-css">      </span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.iconfont</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">32</span>rpx;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#666</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin-bottom</span>: <span class="number">4</span>rpx;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      </span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.tool-tip</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#999</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      </span></span><br><span class="line"><span class="language-css">      &amp;<span class="selector-class">.active</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: <span class="number">#e6f7ff</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#2979ff</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2</span>rpx <span class="number">6</span>rpx <span class="built_in">rgba</span>(<span class="number">41</span>, <span class="number">121</span>, <span class="number">255</span>, <span class="number">0.2</span>);</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.iconfont</span> &#123;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">color</span>: <span class="number">#2979ff</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.tool-tip</span> &#123;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">color</span>: <span class="number">#2979ff</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  </span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.editor</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">80</span>rpx <span class="number">30</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-top</span>: <span class="number">160</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">100vh</span> - <span class="number">160</span>rpx);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">1.8</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">word-wrap</span>: break-word;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">word-break</span>: break-all;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">white-space</span>: pre-wrap;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">overflow-y</span>: auto;</span></span><br><span class="line"><span class="language-css">    -webkit-<span class="attribute">overflow</span>-scrolling: touch;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    :<span class="built_in">deep</span>() &#123;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">max-width</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: auto <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      </span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  </span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.return-btn</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">left</span>: <span class="number">30</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">bottom</span>: <span class="number">30</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">z-index</span>: <span class="number">10002</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">100</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.iconfont</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">40</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.btn-text</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-top</span>: <span class="number">4</span>rpx;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span> </span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;写在最前&quot;&gt;写在最前&lt;/h2&gt;
&lt;p&gt;小型项目中 使用VUE 和 uniapp 开发 使用uniCloud作为云开发服务 技术栈为VUE3+uniapp3+uniCloud,第一个项目纯手撸没用模板框架,应该考虑tdesign的&lt;/p&gt;
&lt;h2 id=&quot;一、组件通</summary>
      
    
    
    
    <category term="技术学习" scheme="https://yumi1.top/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="uniapp" scheme="https://yumi1.top/tags/uniapp/"/>
    
    <category term="unicloud" scheme="https://yumi1.top/tags/unicloud/"/>
    
    <category term="微信小程序" scheme="https://yumi1.top/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    <category term="VUE" scheme="https://yumi1.top/tags/VUE/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序开发笔记-2 基础语法</title>
    <link href="https://yumi1.top/unicloud-2/"/>
    <id>https://yumi1.top/unicloud-2/</id>
    <published>2024-11-20T18:38:40.000Z</published>
    <updated>2024-11-21T05:04:46.883Z</updated>
    
    <content type="html"><![CDATA[<h2 id="写在最前">写在最前</h2><div class="tip "><p>本文总结微信小程序开发中的基础语法知识</p></div><h2 id="一、文件结构">一、文件结构</h2><h3 id="1-主要文件类型">1. 主要文件类型</h3><ul><li>.wxml: 页面结构文件(类似HTML)</li><li>.wxss: 样式文件(类似CSS)</li><li>.js: 逻辑文件</li><li>.json: 配置文件</li></ul><h3 id="2-项目结构">2. 项目结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">├── pages // 页面文件夹</span><br><span class="line">│ ├── index // 首页</span><br><span class="line">│ └── logs // 日志页</span><br><span class="line">├── utils // 工具函数</span><br><span class="line">├── app.js // 全局逻辑</span><br><span class="line">├── app.json // 全局配置</span><br><span class="line">└── app.wxss // 全局样式</span><br></pre></td></tr></table></figure><h2 id="二、WXML语法">二、WXML语法</h2><h3 id="1-数据绑定">1. 数据绑定</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; object.key &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; array[0] &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-列表渲染">2. 列表渲染</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;array&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;unique&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123;item&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-条件渲染">3. 条件渲染</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;condition&#125;&#125;&quot;</span>&gt;</span>True<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:elif</span>=<span class="string">&quot;&#123;&#123;condition&#125;&#125;&quot;</span>&gt;</span>Else if<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>&gt;</span>Else<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-事件绑定">4. 事件绑定</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;handleClick&quot;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">bindinput</span>=<span class="string">&quot;handleInput&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5-模板使用">5. 模板使用</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 定义模板 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">name</span>=<span class="string">&quot;msgItem&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;index&#125;&#125;: &#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 使用模板 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">&quot;msgItem&quot;</span> <span class="attr">data</span>=<span class="string">&quot;&#123;&#123;...item&#125;&#125;&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h3 id="6-引用">6. 引用</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">src</span>=<span class="string">&quot;template.wxml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">src</span>=<span class="string">&quot;header.wxml&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h2 id="三、WXSS样式">三、WXSS样式</h2><h3 id="1-尺寸单位">1. 尺寸单位</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">750</span>rpx; <span class="comment">/* rpx是响应式单位,750rpx = 屏幕宽度 */</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>; <span class="comment">/* vh表示视口高度 */</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">28</span>rpx; <span class="comment">/* 一般字体大小 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-选择器">2. 选择器</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.class-name</span> &#123;&#125; <span class="comment">/* 类选择器 */</span></span><br><span class="line"><span class="selector-id">#id-name</span> &#123;&#125; <span class="comment">/* ID选择器 */</span></span><br><span class="line">view &#123;&#125; <span class="comment">/* 标签选择器 */</span></span><br><span class="line"><span class="selector-class">.parent</span> <span class="selector-class">.child</span> &#123;&#125; <span class="comment">/* 后代选择器 */</span></span><br></pre></td></tr></table></figure><h3 id="3-样式导入">3. 样式导入</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;common.wxss&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="4-常用布局">4. 常用布局</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* flex布局 */</span></span><br><span class="line"><span class="selector-class">.flex-container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* grid布局 */</span></span><br><span class="line"><span class="selector-class">.grid-container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(<span class="number">3</span>, <span class="number">1</span>fr);</span><br><span class="line">  <span class="attribute">gap</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="四、JS逻辑">四、JS逻辑</h2><h3 id="1-页面配置">1. 页面配置</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;Hello&#x27;</span>,</span><br><span class="line">    <span class="attr">list</span>: []</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 生命周期函数</span></span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 页面加载时执行</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">onShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 页面显示时执行</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 自定义函数</span></span><br><span class="line">  <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;World&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="2-数据操作">2. 数据操作</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修改数据</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">  <span class="string">&#x27;message&#x27;</span>: <span class="string">&#x27;new value&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;object.key&#x27;</span>: <span class="string">&#x27;value&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;array[0]&#x27;</span>: <span class="string">&#x27;value&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 获取数据</span></span><br><span class="line"><span class="keyword">const</span> value = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">message</span></span><br></pre></td></tr></table></figure><h3 id="3-网络请求">3. 网络请求</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://api.example.com/data&#x27;</span>,</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">fail</span>(<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="4-生命周期函数">4. 生命周期函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;&#125;, <span class="comment">// 页面加载</span></span><br><span class="line">  <span class="title function_">onShow</span>(<span class="params"></span>) &#123;&#125;, <span class="comment">// 页面显示</span></span><br><span class="line">  <span class="title function_">onReady</span>(<span class="params"></span>) &#123;&#125;, <span class="comment">// 页面初次渲染完成</span></span><br><span class="line">  <span class="title function_">onHide</span>(<span class="params"></span>) &#123;&#125;, <span class="comment">// 页面隐藏</span></span><br><span class="line">  <span class="title function_">onUnload</span>(<span class="params"></span>) &#123;&#125;, <span class="comment">// 页面卸载</span></span><br><span class="line">  <span class="title function_">onPullDownRefresh</span>(<span class="params"></span>) &#123;&#125;, <span class="comment">// 下拉刷新</span></span><br><span class="line">  <span class="title function_">onReachBottom</span>(<span class="params"></span>) &#123;&#125;, <span class="comment">// 上拉触底</span></span><br><span class="line">  <span class="title function_">onShareAppMessage</span>(<span class="params"></span>) &#123;&#125; <span class="comment">// 用户分享</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="五、常用API">五、常用API</h2><h3 id="1-界面交互">1. 界面交互</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 显示提示框</span></span><br><span class="line">wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;成功&#x27;</span>,</span><br><span class="line">  <span class="attr">icon</span>: <span class="string">&#x27;success&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 显示加载框</span></span><br><span class="line">wx.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;加载中&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 显示模态框</span></span><br><span class="line">wx.<span class="title function_">showModal</span>(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;提示&#x27;</span>,</span><br><span class="line">  <span class="attr">content</span>: <span class="string">&#x27;确认删除?&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="2-路由跳转">2. 路由跳转</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 保留当前页面</span></span><br><span class="line">wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;/pages/detail/detail?id=1&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 关闭当前页面</span></span><br><span class="line">wx.<span class="title function_">redirectTo</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;/pages/index/index&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 返回上一页</span></span><br><span class="line">wx.<span class="title function_">navigateBack</span>()</span><br></pre></td></tr></table></figure><h3 id="3-数据存储">3. 数据存储</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 存储数据</span></span><br><span class="line">wx.<span class="title function_">setStorage</span>(&#123;</span><br><span class="line">  <span class="attr">key</span>: <span class="string">&#x27;userInfo&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;test&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 获取数据</span></span><br><span class="line">wx.<span class="title function_">getStorage</span>(&#123;</span><br><span class="line">  <span class="attr">key</span>: <span class="string">&#x27;userInfo&#x27;</span>,</span><br><span class="line">  <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="4-图片操作">4. 图片操作</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 选择图片</span></span><br><span class="line">wx.<span class="title function_">chooseImage</span>(&#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">sizeType</span>: [<span class="string">&#x27;original&#x27;</span>, <span class="string">&#x27;compressed&#x27;</span>],</span><br><span class="line">  <span class="attr">sourceType</span>: [<span class="string">&#x27;album&#x27;</span>, <span class="string">&#x27;camera&#x27;</span>],</span><br><span class="line">  <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> tempFilePaths = res.<span class="property">tempFilePaths</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 预览图片</span></span><br><span class="line">wx.<span class="title function_">previewImage</span>(&#123;</span><br><span class="line">  <span class="attr">urls</span>: [<span class="string">&#x27;url1&#x27;</span>, <span class="string">&#x27;url2&#x27;</span>]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="5-位置服务">5. 位置服务</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取位置</span></span><br><span class="line">wx.<span class="title function_">getLocation</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;gcj02&#x27;</span>,</span><br><span class="line">  <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;latitude, longitude&#125; = res</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打开位置</span></span><br><span class="line">wx.<span class="title function_">openLocation</span>(&#123;</span><br><span class="line">  latitude,</span><br><span class="line">  longitude,</span><br><span class="line">  <span class="attr">scale</span>: <span class="number">18</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="6-设备信息">6. 设备信息</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取系统信息</span></span><br><span class="line">wx.<span class="title function_">getSystemInfo</span>(&#123;</span><br><span class="line">  <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">model</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">pixelRatio</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">windowWidth</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">windowHeight</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">language</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">version</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">platform</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="六、组件系统">六、组件系统</h2><h3 id="1-视图容器">1. 视图容器</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span>           <span class="comment">&lt;!-- 块级元素 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span>&gt;</span><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span>   <span class="comment">&lt;!-- 可滚动视图 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">swiper</span>&gt;</span><span class="tag">&lt;/<span class="name">swiper</span>&gt;</span>       <span class="comment">&lt;!-- 轮播图 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">movable-view</span>&gt;</span><span class="tag">&lt;/<span class="name">movable-view</span>&gt;</span> <span class="comment">&lt;!-- 可移动视图 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cover-view</span>&gt;</span><span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span>     <span class="comment">&lt;!-- 覆盖原生组件 --&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-基础内容">2. 基础内容</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span>           </span><br><span class="line"><span class="tag">&lt;<span class="name">rich-text</span>&gt;</span><span class="tag">&lt;/<span class="name">rich-text</span>&gt;</span> <span class="comment">&lt;!-- 富文本 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">icon</span>&gt;</span><span class="tag">&lt;/<span class="name">icon</span>&gt;</span>           <span class="comment">&lt;!-- 图标 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">progress</span>&gt;</span><span class="tag">&lt;/<span class="name">progress</span>&gt;</span>   <span class="comment">&lt;!-- 进度条 --&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-表单组件">3. 表单组件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>       </span><br><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span>           </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span>        </span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span>   <span class="comment">&lt;!-- 多行输入 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span>&gt;</span><span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span>   <span class="comment">&lt;!-- 复选框 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">radio</span>&gt;</span><span class="tag">&lt;/<span class="name">radio</span>&gt;</span>         <span class="comment">&lt;!-- 单选框 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">picker</span>&gt;</span><span class="tag">&lt;/<span class="name">picker</span>&gt;</span>       <span class="comment">&lt;!-- 选择器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">slider</span>&gt;</span><span class="tag">&lt;/<span class="name">slider</span>&gt;</span>       <span class="comment">&lt;!-- 滑动选择器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">switch</span>&gt;</span><span class="tag">&lt;/<span class="name">switch</span>&gt;</span>       <span class="comment">&lt;!-- 开关选择器 --&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-媒体组件">4. 媒体组件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span>        </span><br><span class="line"><span class="tag">&lt;<span class="name">video</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span>        </span><br><span class="line"><span class="tag">&lt;<span class="name">audio</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span>       </span><br><span class="line"><span class="tag">&lt;<span class="name">camera</span>&gt;</span><span class="tag">&lt;/<span class="name">camera</span>&gt;</span>       </span><br><span class="line"><span class="tag">&lt;<span class="name">live-player</span>&gt;</span><span class="tag">&lt;/<span class="name">live-player</span>&gt;</span> <span class="comment">&lt;!-- 直播播放 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">live-pusher</span>&gt;</span><span class="tag">&lt;/<span class="name">live-pusher</span>&gt;</span> <span class="comment">&lt;!-- 直播推流 --&gt;</span></span><br></pre></td></tr></table></figure><h2 id="七、自定义组件">七、自定义组件</h2><h3 id="1-组件定义">1. 组件定义</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// components/custom/custom.js</span></span><br><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">  <span class="comment">// 组件属性</span></span><br><span class="line">  <span class="attr">properties</span>: &#123;</span><br><span class="line">    <span class="attr">title</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">      <span class="attr">value</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 组件内部数据</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 组件方法</span></span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">handleTap</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">count</span> + <span class="number">1</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">// 触发自定义事件</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">triggerEvent</span>(<span class="string">&#x27;customEvent&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">count</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 生命周期</span></span><br><span class="line">  <span class="attr">lifetimes</span>: &#123;</span><br><span class="line">    <span class="title function_">created</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">    <span class="title function_">attached</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">    <span class="title function_">detached</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 页面生命周期</span></span><br><span class="line">  <span class="attr">pageLifetimes</span>: &#123;</span><br><span class="line">    <span class="title function_">show</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">    <span class="title function_">hide</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="2-组件使用">2. 组件使用</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;custom&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/components/custom/custom&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">custom</span> <span class="attr">title</span>=<span class="string">&quot;标题&quot;</span> <span class="attr">bind:customEvent</span>=<span class="string">&quot;onCustomEvent&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h2 id="八、事件系统">八、事件系统</h2><h3 id="1-事件类型">1. 事件类型</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 点击事件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">bindtap</span>=<span class="string">&quot;handleTap&quot;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">catchtap</span>=<span class="string">&quot;handleTap&quot;</span>&gt;</span>阻止冒泡的点击<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 长按事件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">bindlongpress</span>=<span class="string">&quot;handleLongPress&quot;</span>&gt;</span>长按<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 触摸事件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">bindtouchstart</span>=<span class="string">&quot;handleTouchStart&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">bindtouchmove</span>=<span class="string">&quot;handleTouchMove&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">bindtouchend</span>=<span class="string">&quot;handleTouchEnd&quot;</span>&gt;</span></span><br><span class="line">  触摸</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 输入事件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">bindinput</span>=<span class="string">&quot;handleInput&quot;</span> <span class="attr">bindfocus</span>=<span class="string">&quot;handleFocus&quot;</span> <span class="attr">bindblur</span>=<span class="string">&quot;handleBlur&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-事件对象">2. 事件对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="title function_">handleTap</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">type</span>)        <span class="comment">// 事件类型</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>)      <span class="comment">// 触发事件的组件</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">currentTarget</span>) <span class="comment">// 事件绑定的组件</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>)      <span class="comment">// 额外信息</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">touches</span>)     <span class="comment">// 触摸点信息</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="九、页面通信">九、页面通信</h2><h3 id="1-页面间通信">1. 页面间通信</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 页面A: 传递参数</span></span><br><span class="line">wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;/pages/pageB/pageB?id=1&amp;name=test&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 页面B: 接收参数</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(options.<span class="property">id</span>, options.<span class="property">name</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="2-组件通信">2. 组件通信</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父组件向子组件传值</span></span><br><span class="line">&lt;custom-component prop-a=<span class="string">&quot;&#123;&#123;valueA&#125;&#125;&quot;</span> <span class="attr">bind</span>:myevent=<span class="string">&quot;onMyEvent&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子组件向父组件传值</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">triggerEvent</span>(<span class="string">&#x27;myevent&#x27;</span>, &#123; <span class="attr">data</span>: <span class="string">&#x27;value&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 父组件接收</span></span><br><span class="line"><span class="title function_">onMyEvent</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>.<span class="property">data</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-全局状态管理">3. 全局状态管理</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.js</span></span><br><span class="line"><span class="title class_">App</span>(&#123;</span><br><span class="line">  <span class="attr">globalData</span>: &#123;</span><br><span class="line">    <span class="attr">userInfo</span>: <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 页面中使用</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">getApp</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(app.<span class="property">globalData</span>.<span class="property">userInfo</span>)</span><br></pre></td></tr></table></figure><h2 id="十、小程序登录流程">十、小程序登录流程</h2><h3 id="1-登录流程">1. 登录流程</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 获取code</span></span><br><span class="line">wx.<span class="title function_">login</span>(&#123;</span><br><span class="line">  <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">code</span>) &#123;</span><br><span class="line">      <span class="comment">// 2. 发送code到后端</span></span><br><span class="line">      wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://api.example.com/login&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;</span><br><span class="line">          <span class="attr">code</span>: res.<span class="property">code</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">          <span class="comment">// 3. 保存登录状态</span></span><br><span class="line">          wx.<span class="title function_">setStorageSync</span>(<span class="string">&#x27;token&#x27;</span>, res.<span class="property">data</span>.<span class="property">token</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="2-用户信息获取">2. 用户信息获取</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取用户信息</span></span><br><span class="line">wx.<span class="title function_">getUserProfile</span>(&#123;</span><br><span class="line">  <span class="attr">desc</span>: <span class="string">&#x27;用于完善会员资料&#x27;</span>,</span><br><span class="line">  <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">userInfo</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="十一、性能优化">十一、性能优化</h2><h3 id="1-启动优化">1. 启动优化</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 分包加载</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;subpackages&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;root&quot;</span>: <span class="string">&quot;packageA&quot;</span>,</span><br><span class="line">      <span class="string">&quot;pages&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;pages/cat&quot;</span>,</span><br><span class="line">        <span class="string">&quot;pages/dog&quot;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-渲染优化">2. 渲染优化</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用懒加载 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">lazy-load</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;imageUrl&#125;&#125;&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 长列表优化 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">bindscrolltolower</span>=<span class="string">&quot;loadMore&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;list&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;item.name&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-内存优化">3. 内存优化</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 及时清理不需要的数据</span></span><br><span class="line"><span class="title function_">onUnload</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    <span class="attr">list</span>: []</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 合并setData调用</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">  <span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="十二、常见问题">十二、常见问题</h2><h3 id="1-网络请求">1. 网络请求</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置请求拦截</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">request</span> = (<span class="params">options</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      ...options,</span><br><span class="line">      <span class="attr">header</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;Authorization&#x27;</span>: wx.<span class="title function_">getStorageSync</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">success</span>: resolve,</span><br><span class="line">      <span class="attr">fail</span>: reject</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-图片处理">2. 图片处理</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 图片压缩</span></span><br><span class="line">wx.<span class="title function_">compressImage</span>(&#123;</span><br><span class="line">  <span class="attr">src</span>: tempFilePath,</span><br><span class="line">  <span class="attr">quality</span>: <span class="number">80</span>,</span><br><span class="line">  <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">tempFilePath</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 图片上传</span></span><br><span class="line">wx.<span class="title function_">uploadFile</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://api.example.com/upload&#x27;</span>,</span><br><span class="line">  <span class="attr">filePath</span>: tempFilePath,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;file&#x27;</span>,</span><br><span class="line">  <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="3-页面返回刷新">3. 页面返回刷新</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 页面A</span></span><br><span class="line">wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;/pages/pageB/pageB&#x27;</span>,</span><br><span class="line">  <span class="attr">events</span>: &#123;</span><br><span class="line">    <span class="attr">refreshData</span>: <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">loadData</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 页面B</span></span><br><span class="line"><span class="keyword">const</span> eventChannel = <span class="variable language_">this</span>.<span class="title function_">getOpenerEventChannel</span>()</span><br><span class="line">eventChannel.<span class="title function_">emit</span>(<span class="string">&#x27;refreshData&#x27;</span>, &#123; <span class="attr">data</span>: <span class="string">&#x27;refresh&#x27;</span> &#125;)</span><br></pre></td></tr></table></figure><h2 id="拓展阅读">拓展阅读</h2><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^1]"></span><a class="reference-anchor" href="#referto_[^1]">[^1]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://developers.weixin.qq.com/miniprogram/dev/framework/">微信小程序开发文档</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^2]"></span><a class="reference-anchor" href="#referto_[^2]">[^2]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://developers.weixin.qq.com/ebook?action=get_post_info&token=935589521&volumn=1&lang=zh_CN&book=miniprogram&docid=0008aeea9a8978ab0086a685851c0a">小程序框架指南</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^3]"></span><a class="reference-anchor" href="#referto_[^3]">[^3]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://developers.weixin.qq.com/miniprogram/dev/framework/performance/">小程序性能优化指南</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^4]"></span><a class="reference-anchor" href="#referto_[^4]">[^4]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html">小程序登录流程</a></div>]]></content>
    
    
    <summary type="html">微信小程序开发基础语法总结,包括文件结构、生命周期、数据绑定等核心概念</summary>
    
    
    
    <category term="技术学习" scheme="https://yumi1.top/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="微信小程序" scheme="https://yumi1.top/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    <category term="前端" scheme="https://yumi1.top/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序开发笔记-1 云函数环境准备 和 基础配置</title>
    <link href="https://yumi1.top/unicloud-1/"/>
    <id>https://yumi1.top/unicloud-1/</id>
    <published>2024-11-20T17:38:40.000Z</published>
    <updated>2025-01-31T16:44:47.404Z</updated>
    
    <content type="html"><![CDATA[<h2 id="写在最前">写在最前</h2><div class="tip "><p>本系列文章记录我在unicloud开发过程中的一些流程和踩坑</p></div><h2 id="一、安装HBuilderX">一、安装HBuilderX</h2><ol><li>前往<a href="https://www.dcloud.io/hbuilderx.html">DCloud官网</a>下载HBuilderX</li><li>安装完成后打开HBuilderX</li><li>安装插件<ul><li>内置浏览器</li><li>scss/sass编译</li><li>uniapp编译</li><li>eslint语法检查</li></ul></li></ol><h2 id="二、创建uniCloud项目">二、创建uniCloud项目</h2><ol><li>文件-&gt;新建-&gt;项目</li><li>选择uni-app Vue3/Vite</li><li>勾选&quot;启用uniCloud&quot;</li><li>选择阿里云作为服务商</li></ol><h2 id="三、配置云服务空间">三、配置云服务空间</h2><ol><li>打开<a href="https://unicloud.dcloud.net.cn/">uniCloud Web控制台</a></li><li>登录DCloud账号</li><li>创建服务空间</li><li>在HBuilderX中关联服务空间</li></ol><h2 id="四、安装依赖">四、安装依赖</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装项目依赖</span></span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装uniCloud核心依赖</span></span><br><span class="line">npm install @dcloudio/uniCloud-admin <span class="comment"># uniCloud管理后台框架</span></span><br><span class="line">npm install @dcloudio/uni-app <span class="comment"># uni-app框架核心</span></span><br><span class="line">npm install @dcloudio/uni-mp-weixin <span class="comment"># 微信小程序平台支持</span></span><br><span class="line">npm install @dcloudio/uni-h5 <span class="comment"># H5平台支持</span></span><br><span class="line">npm install sass <span class="comment"># CSS预处理器</span></span><br><span class="line">npm install sass-loader <span class="comment"># sass加载器</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 开发依赖</span></span><br><span class="line">npm install -D @dcloudio/types <span class="comment"># TypeScript类型支持</span></span><br><span class="line">npm install -D @dcloudio/uni-automator <span class="comment"># 自动化测试</span></span><br><span class="line">npm install -D @dcloudio/uni-cli-shared <span class="comment"># CLI共享工具</span></span><br><span class="line">npm install -D @dcloudio/vite-plugin-uni <span class="comment"># Vite插件</span></span><br></pre></td></tr></table></figure><h2 id="五、目录结构说明">五、目录结构说明</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">├── uniCloud                    // 云开发目录</span><br><span class="line">│   ├── cloudfunctions         // 云函数</span><br><span class="line">│   └── database               // 数据库</span><br><span class="line">├── src                        // 前端源码</span><br><span class="line">└── pages                      // 页面文件</span><br></pre></td></tr></table></figure><h2 id="六、常用命令">六、常用命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 本地运行</span></span><br><span class="line">npm run dev:h5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发布</span></span><br><span class="line">npm run build:h5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 上传云函数</span></span><br><span class="line">右键cloudfunctions -&gt; 上传所有云函数</span><br></pre></td></tr></table></figure><h1>第二部分：基础配置</h1><h2 id="一、项目配置">一、项目配置</h2><h3 id="1-manifest-json配置">1. manifest.json配置</h3><p>打开项目根目录下的manifest.json,配置基本信息:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;你的应用名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;appid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;应用描述&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;versionName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;versionCode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;100&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;uniCloud&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;provider&quot;</span><span class="punctuation">:</span> <span class="string">&quot;aliyun&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;spaceId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;你的服务空间ID&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;clientSecret&quot;</span><span class="punctuation">:</span> <span class="string">&quot;你的客户端密钥&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="2-pages-json配置">2. pages.json配置</h3><p>配置页面路由和导航栏样式:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;首页&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;globalStyle&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uniCloud示例&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarBackgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#F8F8F8&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#F8F8F8&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="二、云函数配置">二、云函数配置</h2><h3 id="1-创建云函数">1. 创建云函数</h3><ol><li>在<code>uniCloud/cloudfunctions</code>目录右键</li><li>选择&quot;新建云函数&quot;</li><li>输入函数名称(如: hello-world)</li></ol><h3 id="2-云函数示例">2. 云函数示例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">main</span> = <span class="keyword">async</span> (event, context) =&gt; &#123;</span><br><span class="line">  <span class="comment">// event为客户端上传的参数</span></span><br><span class="line">  <span class="comment">// context包含了调用信息和运行状态</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: event</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="3-调用云函数">3. 调用云函数</h3><p>在前端页面中调用:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;view&gt;</span><br><span class="line">    &lt;button @click=&quot;callFunction&quot;&gt;调用云函数&lt;/button&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async callFunction() &#123;</span><br><span class="line">      try &#123;</span><br><span class="line">        const res = await uniCloud.callFunction(&#123;</span><br><span class="line">          name: &#x27;hello-world&#x27;,</span><br><span class="line">          data: &#123;</span><br><span class="line">            name: &#x27;test&#x27;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        console.log(res)</span><br><span class="line">      &#125; catch (e) &#123;</span><br><span class="line">        console.error(e)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="三、数据库配置">三、数据库配置</h2><h3 id="1-创建集合">1. 创建集合</h3><ol><li>在<code>uniCloud/database</code>目录右键</li><li>选择&quot;新建Collection&quot;</li><li>输入集合名称(如: users)</li></ol><h3 id="2-数据库操作示例">2. 数据库操作示例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 云函数中操作数据库</span></span><br><span class="line"><span class="keyword">const</span> db = uniCloud.<span class="title function_">database</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入数据</span></span><br><span class="line"><span class="keyword">await</span> db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询数据</span></span><br><span class="line"><span class="keyword">const</span> res = <span class="keyword">await</span> db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">get</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新数据</span></span><br><span class="line"><span class="keyword">await</span> db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">where</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;test&#x27;</span></span><br><span class="line">&#125;).<span class="title function_">update</span>(&#123;</span><br><span class="line">  <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除数据</span></span><br><span class="line"><span class="keyword">await</span> db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">where</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;test&#x27;</span></span><br><span class="line">&#125;).<span class="title function_">remove</span>()</span><br></pre></td></tr></table></figure><h2 id="拓展阅读">拓展阅读</h2><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^1]"></span><a class="reference-anchor" href="#referto_[^1]">[^1]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://uniapp.dcloud.net.cn/uniCloud/">uniCloud官方文档</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^2]"></span><a class="reference-anchor" href="#referto_[^2]">[^2]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://uniapp.dcloud.net.cn/">uni-app官方教程</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^3]"></span><a class="reference-anchor" href="#referto_[^3]">[^3]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://uniapp.dcloud.net.cn/uniCloud/cf-functions.html">uniCloud云函数文档</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^4]"></span><a class="reference-anchor" href="#referto_[^4]">[^4]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://uniapp.dcloud.net.cn/uniCloud/cf-database.html">uniCloud数据库文档</a></div>]]></content>
    
    
    <summary type="html">unicloud开发环境准备,包括HBuilderX安装、插件配置、云开发环境搭建等</summary>
    
    
    
    <category term="技术学习" scheme="https://yumi1.top/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="uniapp" scheme="https://yumi1.top/tags/uniapp/"/>
    
    <category term="unicloud" scheme="https://yumi1.top/tags/unicloud/"/>
    
    <category term="vue" scheme="https://yumi1.top/tags/vue/"/>
    
    <category term="微信小程序" scheme="https://yumi1.top/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>搜索引擎高级搜索语法完全指南</title>
    <link href="https://yumi1.top/search-operators/"/>
    <id>https://yumi1.top/search-operators/</id>
    <published>2024-11-17T10:50:22.000Z</published>
    <updated>2024-11-17T11:24:32.518Z</updated>
    
    <content type="html"><![CDATA[<div class="note info flat"><p>本文将介绍常用搜索引擎的高级搜索语法，帮助你更快地找到所需信息。</p></div><h2 id="搜索语法">搜索语法</h2><h3 id="1-精确匹配">1. 精确匹配</h3><p>使用双引号可以进行精确匹配搜索</p><div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">语法</button><button type="button" class="tab">示例</button></div><div class="tab-contents"><div class="tab-item-content active"><p><code>&quot;关键词&quot;</code></p></div><div class="tab-item-content"><p><code>&quot;什么是人工智能&quot;</code></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h3 id="2-排除特定词">2. 排除特定词</h3><p>使用减号排除不想要的搜索结果</p><div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">语法</button><button type="button" class="tab">示例</button></div><div class="tab-contents"><div class="tab-item-content active"><p><code>关键词 -排除词</code></p></div><div class="tab-item-content"><p><code>Python -蟒蛇</code>（搜索Python编程而不是蟒蛇）</p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h3 id="3-站内搜索">3. 站内搜索</h3><div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">语法</button><button type="button" class="tab">示例</button></div><div class="tab-contents"><div class="tab-item-content active"><p><code>site:网站域名 关键词</code></p></div><div class="tab-item-content"><p><code>site:github.com 开源项目</code></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h3 id="4-文件类型搜索">4. 文件类型搜索</h3><div class="note primary flat"><p>使用 filetype: 可以搜索特定类型的文件</p></div><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">filetype:pdf 编程教程</span><br><span class="line">filetype:ppt 项目管理</span><br></pre></td></tr></table></figure><h3 id="5-标题搜索">5. 标题搜索</h3><div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">语法</button><button type="button" class="tab">示例</button></div><div class="tab-contents"><div class="tab-item-content active"><p><code>intitle:关键词</code></p></div><div class="tab-item-content"><p><code>intitle:如何学习编程</code></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h3 id="6-时间范围">6. 时间范围</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">关键词 after:2023</span><br><span class="line">关键词 before:2024</span><br></pre></td></tr></table></figure><h2 id="组合使用技巧">组合使用技巧</h2><div class="note warning flat"><p>多个搜索语法可以组合使用，实现更精准的搜索</p></div><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">site:github.com &quot;machine learning&quot; filetype:pdf after:2023</span><br></pre></td></tr></table></figure><h2 id="实用搜索场景">实用搜索场景</h2><details class="folding-tag" ><summary> 学习资料搜索 </summary>              <div class='content'>              <ul><li><code>filetype:pdf site:edu 机器学习</code></li><li><code>intitle:教程 Python site:github.com</code></li></ul>              </div>            </details><details class="folding-tag" ><summary> 技术文档搜索 </summary>              <div class='content'>              <ul><li><code>site:docs.microsoft.com &quot;Azure&quot;</code></li><li><code>site:developer.mozilla.org &quot;JavaScript&quot;</code></li></ul>              </div>            </details><h2 id="搜索引擎特有语法">搜索引擎特有语法</h2><h3 id="Google-特有">Google 特有</h3><div class="note info flat"><ul><li><code>cache:</code> - 查看网页缓存</li><li><code>related:</code> - 查找相似网站</li><li><code>info:</code> - 查看网站信息</li></ul></div><h3 id="Bing-特有">Bing 特有</h3><div class="note info flat"><ul><li><code>contains:</code> - 包含特定文件</li><li><code>language:</code> - 指定语言</li></ul></div><h2 id="相关资源">相关资源</h2><p><a href="https://support.google.com/websearch">Google 搜索帮助</a><br><a href="https://support.microsoft.com/bing">Bing 搜索技巧</a></p>]]></content>
    
    
    <summary type="html">掌握搜索引擎高级搜索语法，让你的搜索更加精准高效</summary>
    
    
    
    <category term="技术教程" scheme="https://yumi1.top/categories/%E6%8A%80%E6%9C%AF%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="搜索技巧" scheme="https://yumi1.top/tags/%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/"/>
    
    <category term="Google" scheme="https://yumi1.top/tags/Google/"/>
    
    <category term="效率工具" scheme="https://yumi1.top/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>mysql 8.0 error 1130 - Host &#39;my.lan&#39; is not allowed to connect to this MySQL server</title>
    <link href="https://yumi1.top/mysql-connecterror/"/>
    <id>https://yumi1.top/mysql-connecterror/</id>
    <published>2024-10-20T03:52:42.000Z</published>
    <updated>2024-11-17T11:27:26.599Z</updated>
    
    <content type="html"><![CDATA[<h2 id="问题描述">问题描述</h2><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/page/2024-10-20-11-54-01.png"/></div></div><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1130 - Host &#x27;my.lan&#x27; is not allowed to connect to this MySQL server</span><br></pre></td></tr></table></figure><p>无法连接至远程mysql服务器，提示<code>Host 'my.lan' is not allowed to connect to this MySQL server</code></p><h2 id="解决方法">解决方法</h2><h3 id="1-mysql配置问题">1.mysql配置问题</h3><p>可能是mysql配置问题导致不允许远程连接，下面提供两种方式解决</p><ol><li>命令行修改权限<br>ssh或rdp进入服务器,root用户下执行<code>mysql -u root -p</code>输入密码，连接到mysql服务器</li></ol><p><em>更改用户权限</em>以允许远程连接：在MySQL命令行中，运行以下命令，其中 <code>user</code> 和 <code>password </code>修改为你允许远程连接的用户名和密码：<br>以下为mysql8.0版本的命令,mysql5.7版本的命令有所不同</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;user&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;password&#x27;</span>;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;user&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><ol start="2"><li>修改mysql配置文件<br>找到mysql配置文件，一般在<code>/etc/my.cnf</code>或<code>/etc/mysql/mysql.conf.d/mysqld.cnf</code><br>搜索<code>bind-address</code>关键字，将<code>bind-address</code>改为<code>0.0.0.0</code>即可允许远程连接</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bind-address = 0.0.0.0</span><br></pre></td></tr></table></figure><h3 id="2-防火墙问题">2.防火墙问题</h3><p>可能是防火墙问题导致不允许远程连接<br><em>查看防火墙状态</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld.service</span><br></pre></td></tr></table></figure><p><em>开启防火墙</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start firewalld.service</span><br></pre></td></tr></table></figure><p><em>允许mysql端口</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p><em>重启mysql服务</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart mysqld.service</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">无法连接至远程mysql服务器，提示`Host &#39;my.lan&#39; is not allowed to connect to this MySQL server`,mysql 8.0 error 1130 - Host &#39;my.an&#39; is not allowed to connect to this MySQL server</summary>
    
    
    
    <category term="问题解决" scheme="https://yumi1.top/categories/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    
    
    <category term="mysql" scheme="https://yumi1.top/tags/mysql/"/>
    
    <category term="error" scheme="https://yumi1.top/tags/error/"/>
    
  </entry>
  
  <entry>
    <title>如何翻阅外国文献(翻墙)-Clash v2rayN 绿色上网</title>
    <link href="https://yumi1.top/vpn/"/>
    <id>https://yumi1.top/vpn/</id>
    <published>2024-10-02T02:51:00.000Z</published>
    <updated>2024-10-02T02:51:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>零 原理</h1><div class="note warning flat"><p>仅做技术探讨分享,请使用时遵守相关法律法规,本站不承担任何责任<br><font color=red >如果你不能自主学会翻墙,那就请你不要翻墙!!健全独立心智,明辨是非,切勿发表不当言论!!!</font></p></div><p>以clash为例 通过配置文件判断,对流量进行分流,使用clash内核进行转发加密</p><div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">架构图</button><button type="button" class="tab">核心组件</button></div><div class="tab-contents"><div class="tab-item-content active"><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/connection-flow.a72146ab.png" style="width:500px;"/></div></div></div><div class="tab-item-content"><ul><li><code>clash.meta</code>是以go语言开发的一个网络转发内核</li><li><code>Inbound</code> 入站是在本地端监听的部分, 它通过打开一个本地端口并监听传入的连接来工作. 当连接进来时, Clash 会查询配置文件中配置的规则, 并决定连接应该去哪个 Outbound 出站.</li><li><code>Outbound</code> 出站是连接到远程端的部分. 根据配置的不同, 它可以是一个特定的网络接口、一个代理服务器或一个策略组.</li></ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><div class="note info flat"><p>clash只是一个网络转发内核,真正提供服务的是你所购买的服务(我们叫做&quot;机场&quot;)<br>通过<code>机场</code>(服务器提供商)+ <code>软件</code> 通过内核转发即可<br>相当于一次购买,全平台全软件支持加速代理</p></div><h1>一 机场购买</h1><p>博主目前用了一年的机场 很干净的ip</p><a class="btn-beautify outline" href="https://going.cngpt-edu.top/#/register?code=FTA1piFp" title="91merry机场"><i class="fa-solid fa-download"></i><span>91merry机场</span></a><p>33元90天 300 Mbps 300GB一月 可同时连接 16 IP</p><!-- # 2.软件下载  根据系统选择相应软件# 3.配置文件  根据软件进行文件配置 详见下文 --> <h1>二 软件下载</h1><p>根据系统选择相应软件</p>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/vpn/2024-10-06-17-54-11.png"/></div></div><h1>Windows</h1><h2 id="1-Clash-for-windows-推荐">1.Clash for windows(推荐)</h2><h3 id="1-1下载Clash-for-windows">1.1下载Clash for windows</h3><div class="note warning flat"><p>因为某些不可抗因素 clash.meta及clash for windows不再提供更新删库或存档,本文提供以下版本</p></div><ul><li>英文版</li></ul><a class="btn-beautify outline" href="https://yumi1.lanzouw.com/igxpo1fv2rqd" title="蓝奏盘 密码:gs4q"><i class="fa-solid fa-download"></i><span>蓝奏盘 密码:gs4q</span></a><a class="btn-beautify outline" href="https://share.weiyun.com/BEuEsAWr" title="腾讯微云"><i class="fa-solid fa-download"></i><span>腾讯微云</span></a><ul><li>中文版(版本稍落后英文版)</li></ul><a class="btn-beautify outline" href="https://share.weiyun.com/VZYqS9aH" title="腾讯微云"><i class="fa-solid fa-download"></i><span>腾讯微云</span></a><a class="btn-beautify outline" href="https://cdn.91merry-2.top/files/Windows.zip" title="其他源"><i class="fa-solid fa-download"></i><span>其他源</span></a><a class="btn-beautify outline" href="https://new.91merry-6.top/cdn/client/Clash.Nyanpasu_1.6.1_x64-setup.exe" title="其他源2"><i class="fa-solid fa-download"></i><span>其他源2</span></a><h3 id="1-2导入配置">1.2导入配置</h3><ol><li>进入你购买好的机场<br>选择<code>配置</code><br><code>允许浏览器打开clash</code></li></ol>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/61502db0d68995da7dc2d4661c19e933.webp"/></div></div><p>在clash中配置页选择刚刚导入的配置</p>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/2d733b7129e6913c3af385fafd8a3145.webp"/></div></div><p>选择好配置</p>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/96fbd3d5e39ab2878859cc14a717f259.webp"/></div></div><p>右键设置配置</p>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/62efcebb14fced82d18c1eedc9be836b.webp"/></div></div><p>设置自动更新为1小时<br>2. 或者你也可以<br>复制clash配置</p>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-05-26-17-02-07.png"/></div></div> <p>粘贴到配置区</p>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-05-26-17-03-29.png"/></div></div><p>选择刚刚导入的配置</p>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/2d733b7129e6913c3af385fafd8a3145.webp"/></div></div><p>选择好配置</p>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/96fbd3d5e39ab2878859cc14a717f259.webp"/></div></div><p>右键设置配置</p>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/62efcebb14fced82d18c1eedc9be836b.webp"/></div></div><p>设置自动更新为1小时</p><h3 id="1-3基础使用">1.3基础使用</h3><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/{7B619BDD-D13A-4e60-8399-088C8CDA5EC8}.webp"/></div></div><p>开启<code>系统代理</code>即可正常使用</p><p>前往Proxies页面选择一个延迟低的节点使用即可</p><h3 id="1-4进阶使用">1.4进阶使用</h3><h4 id="（1）局域网代理共享">（1）局域网代理共享</h4><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/{0946ABFE-232E-48f2-AB04-198A0D21B879}.webp"/></div></div><p>关闭随机端口 开启允许局域网,随后链接本机ip:端口号<br>ep:<br><code>192.168.1.230:9102</code><br>详细信息可看<a href="https://yumi1.top/linux-proxy">linux-proxy/#VMware ubuntu 走本机代理</a><br>同理可用于Switch等设备的代理链接</p><div class="note flat"><p>为保障安全,请无需使用此功能时开启随机端口且关闭允许局域网</p></div><h4 id="（2）TUN-转发模式">（2）TUN 转发模式</h4><p>基于网络侧流量代理,可以用来处理 TCP、UDP、ICMP 流量,简单点说对电脑全局软件强制进行代理,使其无法绕过</p><ul><li>点击<code>服务模式</code></li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/{97E238EA-1A03-46a0-89D1-BB7D3843F212}.png"/></div></div><ul><li><code>安装</code></li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/{46CC7103-8EFF-4a99-8CBE-841F54C7759A}.png"/></div></div><ul><li>开启<code>tun模式</code> <code>同时关闭系统代理模式</code></li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/{4A0E2C1B-6ABE-485c-8F89-0A6A381E2591}.png"/></div></div><p>此时你会发现你的网络连接里多了一个clash tunnel</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/{5783C84B-203D-43fb-B119-DAB0F76FCB9F}.png"/></div></div><p>成功</p><h4 id="（3）clash自定规则绕过网站-不对某些网站进行代理">（3）clash自定规则绕过网站,不对某些网站进行代理</h4><p>1.系统代理绕过(全局模式仍然绕过)<br>进入Settings–点击 System proxy – Bypass Domain、IPNet–右边 Edit–打开编辑界面</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/e6197c5c7c18be9c18f176c7c41361a7.png"/></div></div><p>要增加绕过example.com域名,增加绕过abc.com的所有子域名，<a href="http://xn--d-fr8an20c.abc.com">包括d.abc.com</a>,<a href="http://e.abc.com">e.abc.com</a>，则增加：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bypass:</span><br><span class="line">  - &quot;example.com&quot; # 下面字段可不删除</span><br><span class="line">  - 127.0.0.1</span><br><span class="line">  - &quot;*.abc.com&quot;</span><br><span class="line">  - ...</span><br></pre></td></tr></table></figure><p>2.Mixin模式绕过</p><ul><li>进入 Settings 页面</li><li>滚动至 Profile Mixin 栏</li><li>点击 YAML 右边 Edit 小字打开编辑界面</li><li>修改配置</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mixin: # 注意下面缩进</span><br><span class="line">  rules:</span><br><span class="line">    - &quot;DOMAIN-SUFFIX,bing.com,DIRECT&quot; #直连</span><br><span class="line">    - &quot;DOMAIN-SUFFIX,asodjojasodjasdf.com,REJECT&quot; #丢弃</span><br><span class="line">    - &quot;DOMAIN-SUFFIX,asdfgf.com,Proxy&quot; #代理</span><br></pre></td></tr></table></figure><p>回到 General 页面，打开 Mixin 开关即可。<br>mixin我用的较少 详情请看<a href="https://clash.wiki/configuration/rules.html#%E7%AD%96%E7%95%A5">clash_wiki/规则</a></p><h3 id="1-1-6拓展阅读">1.1.6拓展阅读</h3><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^1]"></span><a class="reference-anchor" href="#referto_[^1]">[^1]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://show.91merry-01.top/doc/#/Windows/Clash-for-Windows">clash for Windows问题大全</a></div><h2 id="2-ShadowsocksR">2.ShadowsocksR</h2><h3 id="2-1-订阅填写">2.1 订阅填写</h3><div class="tag link"><a class="link-card" title="github链接" href="https://github.com/ShadowsocksR-Live/shadowsocksr-native/releases"><div class="left"><img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"/></div><div class="right"><p class="text">github链接</p><p class="url">https://github.com/ShadowsocksR-Live/shadowsocksr-native/releases</p></div></a></div> <a class="btn-beautify outline" href="https://yumi1.lanzn.com/ir9yE2bba09e" title="蓝奏云"><i class="fa-solid fa-download"></i><span>蓝奏云</span></a><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-09-13.png" alt="双击打开"/></div><span class="image-caption">双击打开</span></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-08-53.png"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-10-19.png" alt="add 填入你购买后机场所提供的订阅地址"/></div><span class="image-caption">add 填入你购买后机场所提供的订阅地址</span></div> <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-27-26.png"/></div></div><p>记得打开自动更新</p><h3 id="2-2-切换节点">2.2 切换节点</h3><p>鼠标右键托盘小飞机图标，选择「服务器-&gt;网站名称」里任意节点。</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-13-16.png"/></div></div><h3 id="2-3-启动代理">2.3 启动代理</h3><p>1.鼠标右键托盘小飞机图标，选择「系统代理-&gt;PAC」即可自动代理网站。</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-14-59.png"/></div></div><h2 id="3-v2rayN自改去广告版">3.v2rayN自改去广告版</h2><a class="btn-beautify outline" href="https://yumi1.lanzouw.com/iT0yc1c4yxoj" title="点击下载"><i class="fa-solid fa-download"></i><span>点击下载</span></a><p>v2rayN不过多赘述,下载时记得检查是否有带有内核</p><div class="tag link"><a class="link-card" title="github链接" href="https://github.com/2dust/v2rayn/releases?after=latest"><div class="left"><img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"/></div><div class="right"><p class="text">github链接</p><p class="url">https://github.com/2dust/v2rayn/releases?after=latest</p></div></a></div> <h2 id="4-SSTap">4.SSTap</h2><a class="btn-beautify outline" href="https://91merry.lanzoui.com/icujkvc" title="蓝奏云"><i class="fa-solid fa-download"></i><span>蓝奏云</span></a><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-15-44-47.png" alt="点击打开"/></div><span class="image-caption">点击打开</span></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-15-55-10.png" alt="允许安装"/></div><span class="image-caption">允许安装</span></div><p><code>设置</code>–<code>SSR订阅</code>–<code>SSR订阅管理</code>–将你在机场中购买后获取到的订阅链接复制进 ，点击<code>添加</code></p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-27-15.png"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-15-56-14.png"/></div></div><p>「代理：」选择一个节点，「模式：」仅网页浏览器跳过中国站点；选择后点击「连接」即可用浏览器访问目标站点了</p><h1>Android</h1><h2 id="1-Clash-for-Android">1.Clash for Android</h2><p>与cfw(clash for windows)大差不差</p><ul><li>安装apk</li><li>进入机场 导入配置</li><li>设置自动更新<div class="img-wrap"><div class="img-bg"><img class="img" src="/image/{97542B49-BEA2-4a1f-A0EC-BD10EEE20EEA}.png"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/{3039087E-048B-4c0d-9D4B-D25ECA10FD13}.png"/></div></div></li><li>开启代理</li><li>选择节点</li></ul><a class="btn-beautify outline" href="https://yumi1.lanzouw.com/i8Nwr1fv8apg" title="蓝奏盘"><i class="fa-solid fa-download"></i><span>蓝奏盘</span></a><a class="btn-beautify outline" href="https://share.weiyun.com/lW6PRrLb" title="腾讯微云"><i class="fa-solid fa-download"></i><span>腾讯微云</span></a><div class="tag link"><a class="link-card" title="github项目链接" href="https://github.com/naicfeng/ClashRForAndroid/releases"><div class="left"><img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"/></div><div class="right"><p class="text">github项目链接</p><p class="url">https://github.com/naicfeng/ClashRForAndroid/releases</p></div></a></div> <h2 id="2-ShadowsocksR-2">2.ShadowsocksR</h2><div class="tag link"><a class="link-card" title="github项目链接" href="https://github.com/shadowsocksRb/shadowsocksRb-android/releases"><div class="left"><img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"/></div><div class="right"><p class="text">github项目链接</p><p class="url">https://github.com/shadowsocksRb/shadowsocksRb-android/releases</p></div></a></div> <a class="btn-beautify outline" href="https://yumi1.lanzn.com/iEVPF2bbb1zc" title="蓝奏盘"><i class="fa-solid fa-download"></i><span>蓝奏盘</span></a><h3 id="2-1-导入节点">2.1 导入节点</h3><ol><li>点击左上角 “ShadowsocksR ▼”；</li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-24-11.png"/></div></div><ol start="2"><li>点击右下角 “+”，选择 “添加/升级 SSR 订阅”；</li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-25-28.png"/></div></div><ol start="3"><li>点击 “添加订阅地址”；</li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-26-03.png"/></div></div><ol start="4"><li>填入你购买后机场所提供的订阅地址</li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-27-01.png"/></div></div><ol start="5"><li>打开自动更新，点击「确定并升级」。</li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-28-01.png"/></div></div><h3 id="2-2-选择节点">2.2 选择节点</h3><p>在节点列表中，点击闪电图标检测节点延迟，选择一个可用节点。</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-28-28.png"/></div></div><p>右上角点击小飞机启动代理</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-28-53.png"/></div></div><p>首次启动会弹出一个 “网络连接请求”，点击 “确定” 即可</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-28-59.png"/></div></div><p>注：如果需要全网代理，下划找到 “路由”列表，切换为 “全局”。</p><h2 id="3-v2rayNG">3.v2rayNG</h2><div class="tag link"><a class="link-card" title="github项目链接" href="https://github.com/2dust/v2rayNG/releases"><div class="left"><img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"/></div><div class="right"><p class="text">github项目链接</p><p class="url">https://github.com/2dust/v2rayNG/releases</p></div></a></div> <a class="btn-beautify outline" href="https://yumi1.lanzn.com/i25cy2bbbdkj" title="蓝奏盘"><i class="fa-solid fa-download"></i><span>蓝奏盘</span></a><h1>iOS</h1><h2 id="Shadowrocket">Shadowrocket</h2><p>外区Apple账号 商店搜索<code>Shadowrocket</code>购买安装 2.99$<br>一般机场会送一个apple账号里面带有,登录他人账号有一定风险</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-02-10-28-56.png"/></div></div><h2 id="1-1-配置订阅">1.1 配置订阅</h2><p>safari打开官网–点击<code>配置</code>即可导入</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-02-10-13-56.png"/></div></div><details class="folding-tag" ><summary> 点击`配置`没反应 </summary>              <div class='content'>              <p><code>通用订阅</code>–<code>复制通用订阅Clash</code></p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-02-10-25-39.png"/></div></div>打开Shadowrocket，点击右上角”+“号<div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-02-10-36-47.png"/></div></div>点击类型，选择「Subscribe」类型<div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-02-10-41-45.png"/></div></div>返回,在URL处粘贴刚刚复制的订阅链接保存后点击刷新即可<div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-02-10-44-52.png"/></div></div>`设置`--`订阅`--`打开时更新`<div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-02-10-46-36.png"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-02-10-47-04.png"/></div></div>              </div>            </details><h1>macOS/linux</h1><p>同Windows,不做赘述<br>无Gui linux使用命令行安装 配置文件进行配置<br>有Gui linux可安装v2ray客户端</p><h1>openWRT</h1><p>有点复杂 给我玩崩了几次 有空再更新</p>]]></content>
    
    
    <summary type="html">本文为大家提供了clash的使用方法,以及clash的一些高级用法,如局域网共享,自定规则绕过网站等</summary>
    
    
    
    <category term="技术学习" scheme="https://yumi1.top/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="vpn" scheme="https://yumi1.top/tags/vpn/"/>
    
    <category term="clash" scheme="https://yumi1.top/tags/clash/"/>
    
  </entry>
  
  <entry>
    <title>免费游戏修改器整合管理工具：Game Cheats Manager使用指南</title>
    <link href="https://yumi1.top/game-cheats-manage/"/>
    <id>https://yumi1.top/game-cheats-manage/</id>
    <published>2024-08-21T16:15:03.000Z</published>
    <updated>2024-11-21T22:39:30.378Z</updated>
    
    <content type="html"><![CDATA[<p>3DM<font color=red >整合</font>风灵月影 居然开始收会员费<br>最近找到一个非常方便的风灵月影整合器,可搜索游戏 自动翻译</p><blockquote><p>Game Cheats Manager 为玩家提供了一个高效管理游戏修改器的一站式解决方案。它允许用户在一个便捷的位置浏览、下载和管理所有修改器。每个修改器，通常是一个独立的可执行文件，都可以通过应用程序直接启动或删除，从而简化您的游戏体验。</p></blockquote><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/game-cheats-manage/2024-08-22-00-38-56.png"/></div></div><p>不多说 直接甩仓库地址 <a href="https://github.com/dyang886/Game-Cheats-Manager/releases">GameCheatsManager GITHUB仓库地址</a> 连不上github的<a class="btn-beautify outline blue larger" href="https://share.weiyun.com/qLfKuw3r" title="腾迅微云点我下载"><i class="fa-solid fa-download"></i><span>腾迅微云点我下载</span></a></p><h2 id="使用指南">使用指南</h2><ol><li><p>打开软件后，点击<strong>更新</strong>按钮。<br><img src="../image/game-cheats-manage/2024-08-22-00-49-40.png" alt="点击更新"></p> <div class="tip warning"><p>如果更新过程中显示“更新风灵月影数据库失败”，可能需要使用VPN翻墙。</p></div></li><li><p>更新完成后，你可以在右侧的搜索框中进行联网搜索，并一键下载你需要的修改器。<br><img src="../image/game-cheats-manage/2024-08-22-00-50-25.png" alt="搜索并下载"></p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;3DM&lt;font color=red &gt;整合&lt;/font&gt;风灵月影 居然开始收会员费&lt;br&gt;
最近找到一个非常方便的风灵月影整合器,可搜索游戏 自动翻译&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Game Cheats Manager 为玩家提供了一个高效管理游戏修改器的一站</summary>
      
    
    
    
    
    <category term="游戏修改器" scheme="https://yumi1.top/tags/%E6%B8%B8%E6%88%8F%E4%BF%AE%E6%94%B9%E5%99%A8/"/>
    
    <category term="游戏管理" scheme="https://yumi1.top/tags/%E6%B8%B8%E6%88%8F%E7%AE%A1%E7%90%86/"/>
    
    <category term="风灵月影" scheme="https://yumi1.top/tags/%E9%A3%8E%E7%81%B5%E6%9C%88%E5%BD%B1/"/>
    
    <category term="Game Cheats Manager" scheme="https://yumi1.top/tags/Game-Cheats-Manager/"/>
    
    <category term="免费工具" scheme="https://yumi1.top/tags/%E5%85%8D%E8%B4%B9%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>IDM 最强下载工具2024.8.9激活教程</title>
    <link href="https://yumi1.top/idm-crack/"/>
    <id>https://yumi1.top/idm-crack/</id>
    <published>2024-08-09T15:01:47.000Z</published>
    <updated>2024-11-21T22:40:27.943Z</updated>
    
    <content type="html"><![CDATA[<p>2024.8.9 解决弹窗烦恼<br><a href="https://www.internetdownloadmanager.com/download.html">IDM</a><br>下载神器,支持断点续传,多线程下载,windows一般为单线程下载,网速可能只有2~3MB/s,但是多线程下载可以将文件分成多个部分同时下载,这样下载速度可达到你的网速上限</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/idm.png"/></div></div>可在选项->连接->最大链接数 可将线程数设置为16或更高<div class="img-wrap"><div class="img-bg"><img class="img" src="/image/idm1.png"/></div></div><p>搭配油猴的<a href="https://greasyfork.org/zh-CN/scripts/436446-%E7%BD%91%E7%9B%98%E7%9B%B4%E9%93%BE%E4%B8%8B%E8%BD%BD%E5%8A%A9%E6%89%8B">网盘直链下载助手</a>可实现各大网盘的全速下载,如百度阿里夸克等<br>详情<a href="https://yumi1.top/windows-optimize-1/#%E7%BD%91%E7%9B%98%E7%9B%B4%E9%93%BE%E4%B8%8B%E8%BD%BD%E5%8A%A9%E6%89%8B">windows-optimize-1/#网盘直链下载助手</a></p><div class="tip bell"><p>在安装IDM本体时<font color=red size=6>请不要更改默认安装地址</font>,同时<font color=red size=6>允许IDM安装浏览器拓展</font></p></div><div class="tag link"><a class="link-card" title="IDM官网链接" href="https://www.internetdownloadmanager.com/download.html"><div class="left"><img src="https://www.internetdownloadmanager.com/favicon.ico"/></div><div class="right"><p class="text">IDM官网链接</p><p class="url">https://www.internetdownloadmanager.com/download.html</p></div></a></div><p>同时IDM是一款付费软件,可在官网支持正版 119r永久会员,下载前30天免费使用,以下提供两份破解的方法</p><details class="folding-tag" open><summary> 第一种方法 </summary>              <div class='content'>              <p><a class="btn-beautify outline blue larger" href="https://yumi1.lanzn.com/ijce826zzq5a" title="下载链接"><i class="fa-solid fa-download"></i><span>下载链接</span></a><br>下载后打开<div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/windows-optimize-2/2024-08-09-23-01-05.png"/></div></div>点击crack-&gt;finsh 即可</p>              </div>            </details>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;2024.8.9 解决弹窗烦恼&lt;br&gt;
&lt;a href=&quot;https://www.internetdownloadmanager.com/download.html&quot;&gt;IDM&lt;/a&gt;&lt;br&gt;
下载神器,支持断点续传,多线程下载,windows一般为单线程下载,网速可能只有2</summary>
      
    
    
    
    
    <category term="IDM" scheme="https://yumi1.top/tags/IDM/"/>
    
    <category term="破解" scheme="https://yumi1.top/tags/%E7%A0%B4%E8%A7%A3/"/>
    
  </entry>
  
  <entry>
    <title>刷题日记-906超级回文数</title>
    <link href="https://yumi1.top/exercise-solving-diary-2/"/>
    <id>https://yumi1.top/exercise-solving-diary-2/</id>
    <published>2024-06-09T18:22:31.000Z</published>
    <updated>2024-07-30T10:14:16.450Z</updated>
    
    <content type="html"><![CDATA[<h1>LeetCode 687. 最长同值路径</h1><table><thead><tr><th>Category</th><th>Difficulty</th><th>Total Accepted:</th><th>Total Submissions:</th></tr></thead><tbody><tr><td>algorithms</td><td>Hard (33.09%)</td><td>5.7K</td><td>17.3K</td></tr></tbody></table><p><B>Tags</B><br>greedy</p><p><strong>Companies</strong></p><p>无</p><hr><h2 id="题目">题目:</h2><p>如果一个正整数自身是回文数，而且它也是一个回文数的平方，那么我们称这个数为超级回文数。<br>现在，给定两个正整数 L 和 R （以字符串形式表示），返回包含在范围 [L, R] 中的超级回文数的数目。</p><p>示例:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入：L = &quot;4&quot;, R = &quot;1000&quot;</span><br><span class="line">输出：4</span><br><span class="line">解释：</span><br><span class="line">4，9，121，以及 484 是超级回文数。</span><br><span class="line">注意 676 不是一个超级回文数： 26 * 26 = 676，但是 26 不是回文数。</span><br></pre></td></tr></table></figure><p>提示:</p><ul><li>1 &lt;= len( L ) &lt;= 18</li><li>1 &lt;= len( R ) &lt;= 18</li><li>L 和 R 是表示 [1, 10^18) 范围的整数的字符串。</li><li>int( L ) &lt;= int( R )</li></ul><hr><h2 id="思路">思路</h2><p><strong>greedy</strong></p><p>贪心算法,将数倒置然后进行==运算,最后判断是否在[L,R]区间内. 注意i为右值的平方根</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @lc code=start</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">superpalindromesInRange</span><span class="params">(string left, string right)</span> </span>&#123;</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> leftNum = <span class="built_in">stoll</span>(left);</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> rightNum = <span class="built_in">stoll</span>(right);</span><br><span class="line">        <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">long</span> <span class="type">long</span> i = <span class="built_in">sqrt</span>(leftNum); i &lt;= <span class="built_in">sqrt</span>(rightNum); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">dfsNumber</span>(i) &amp;&amp; <span class="built_in">dfsNumber</span>(i * i)) &#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">dfsNumber</span><span class="params">(<span class="type">long</span> <span class="type">long</span> number)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (number &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> x = number, y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (number &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            y = y * <span class="number">10</span> + number % <span class="number">10</span>;number /= <span class="number">10</span>;<span class="comment">//反转</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> x == y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @lc code=end</span></span><br></pre></td></tr></table></figure><h2 id="测试用例">测试用例</h2><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/exercise-solving-diary-2/2024-06-10-02-31-01.png"/></div></div><center><font color=red size=6>悲</font></center><h2 id="leetcode评论区">leetcode评论区</h2><ol><li><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/exercise-solving-diary-2/2024-06-10-03-05-18.png"/></div></div></li></ol><p>难绷</p><ol start="2"><li>来自评论区<a href="https://leetcode-cn.com/u/ffreturn/">ffreturn</a>佬的<a href="https://leetcode.cn/problems/super-palindromes/solutions/697703/906-czhong-gui-zhong-ju-de-bian-li-jie-f-fxl7">解答</a></li></ol><blockquote><p><strong>解题思路</strong><br>思路其实很直观</p><p>按照范围去找基础数字i，然后构建回文数字m， 然后判断p=r^2是否在范围内和p是回文，是的话则计数器+1<br>i的查找范围： 题目告诉我们范围是10^18，那么R就是10^9,而i保守可以设置到10^5,范围是[1,100000]<br>回文存在两种情况： 偶数和奇数，为了处理简单，也分开来遍历<br>注意事项： 考虑到数值范围，计算得用long</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">&gt;<span class="keyword">public</span>:</span><br><span class="line">   <span class="function"><span class="type">int</span> <span class="title">superpalindromesInRange</span><span class="params">(string left, string right)</span> </span>&#123;</span><br><span class="line">       <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">       <span class="type">long</span> l = <span class="built_in">stol</span>(left);</span><br><span class="line">       <span class="type">long</span> r = <span class="built_in">stol</span>(right);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 先判断偶数的情况 ABCCBA</span></span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; <span class="number">100000</span>; ++i)</span><br><span class="line">       &#123;</span><br><span class="line">           string s = <span class="built_in">to_string</span>(i);</span><br><span class="line">           string s2 = s;</span><br><span class="line">           <span class="built_in">reverse</span>(s2.<span class="built_in">begin</span>(), s2.<span class="built_in">end</span>());</span><br><span class="line">           <span class="type">long</span> m= <span class="built_in">stol</span>(s + s2);</span><br><span class="line">           m *= m;</span><br><span class="line">           <span class="comment">// 超过范围提前结束遍历</span></span><br><span class="line">           <span class="keyword">if</span> (m &gt; r)</span><br><span class="line">           &#123;</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span> <span class="keyword">if</span> (m &gt;= l &amp;&amp; <span class="built_in">IsPalindrom</span>(m))</span><br><span class="line">           &#123;</span><br><span class="line">               ++res;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 再判断奇数的情况 ABCBA</span></span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; <span class="number">100000</span>; ++i)</span><br><span class="line">       &#123;</span><br><span class="line">           string s = <span class="built_in">to_string</span>(i);</span><br><span class="line">           string s2 = s;</span><br><span class="line">           <span class="built_in">reverse</span>(s2.<span class="built_in">begin</span>(), s2.<span class="built_in">end</span>());</span><br><span class="line">           <span class="type">long</span> m= <span class="built_in">stol</span>(s.<span class="built_in">append</span>(s2.<span class="built_in">begin</span>()+<span class="number">1</span>, s2.<span class="built_in">end</span>()));</span><br><span class="line">           m *= m;</span><br><span class="line">           <span class="comment">// 超过范围提前结束遍历</span></span><br><span class="line">           <span class="keyword">if</span> (m &gt; r)</span><br><span class="line">           &#123;</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span> <span class="keyword">if</span> (m &gt;= l &amp;&amp; <span class="built_in">IsPalindrom</span>(m))</span><br><span class="line">           &#123;</span><br><span class="line">               ++res;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> res;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="type">bool</span> <span class="title">IsPalindrom</span><span class="params">(<span class="type">long</span> num)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">       <span class="type">long</span> n = num;</span><br><span class="line">       <span class="comment">// 倒序的数字</span></span><br><span class="line">       <span class="type">long</span> revNum = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">while</span> (n &gt; <span class="number">0</span>)</span><br><span class="line">       &#123;</span><br><span class="line">           revNum = revNum * <span class="number">10</span> + n % <span class="number">10</span>;</span><br><span class="line">           n /= <span class="number">10</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// 直接比较是否相等即可</span></span><br><span class="line">       <span class="keyword">return</span> revNum == num;</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;;</span><br></pre></td></tr></table></figure></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;LeetCode 687. 最长同值路径&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Category&lt;/th&gt;
&lt;th&gt;Difficulty&lt;/th&gt;
&lt;th&gt;Total Accepted:&lt;/th&gt;
&lt;th&gt;Total Submissions:&lt;/th</summary>
      
    
    
    
    <category term="刷题日记" scheme="https://yumi1.top/categories/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0/"/>
    
    <category term="algorithms" scheme="https://yumi1.top/categories/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0/algorithms/"/>
    
    
    <category term="leetcode" scheme="https://yumi1.top/tags/leetcode/"/>
    
    <category term="刷题日记" scheme="https://yumi1.top/tags/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0/"/>
    
    <category term="greedy" scheme="https://yumi1.top/tags/greedy/"/>
    
  </entry>
  
  <entry>
    <title>刷题日记-687最长同值路径</title>
    <link href="https://yumi1.top/exercise-solving-diary-1/"/>
    <id>https://yumi1.top/exercise-solving-diary-1/</id>
    <published>2024-06-06T07:11:19.000Z</published>
    <updated>2024-06-09T18:30:54.060Z</updated>
    
    <content type="html"><![CDATA[<h1>LeetCode 687. 最长同值路径</h1><table><thead><tr><th>Category</th><th>Difficulty</th><th>Likes</th><th>Dislikes</th></tr></thead><tbody><tr><td>algorithms</td><td>Medium (48.06%)</td><td>805</td><td>-</td></tr></tbody></table><p><B>Tags</B></p><p>tree | recursion</p><p><strong>Companies</strong></p><p>google</p><hr><h2 id="题目">题目:</h2><p>给定一个二叉树的 <code>root</code> ，返回最长的路径的长度 ，这个路径中的每个节点具有相同值 。 这条路径可以经过也可以不经过根节点。<br><strong>两个节点之间的路径长度</strong>由它们之间的边数表示。</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/exercise-solving-diary-1/2024-06-06-18-55-46.png"/></div></div><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入：root = [5,4,5,1,1,5]</span><br><span class="line">输出：2</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/exercise-solving-diary-1/2024-06-06-19-11-30.png"/></div></div><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入：root = [1,4,5,4,4,5]</span><br><span class="line">输出：2</span><br></pre></td></tr></table></figure><p>提示:</p><ul><li>树的节点数的范围是 [0, 10<sup>4</sup>]</li><li>-1000 &lt;= Node.val &lt;= 1000</li><li>树的深度将不超过 1000</li></ul><hr><h2 id="思路">思路</h2><p><strong>recursion</strong><br>递归问题,找最长同值路径.从根节点开始,<strong>分别</strong>访问左右子树,如果左右子树的值和根节点的值相同,那么路径长度+1,否则置为0.最后返回左右子树的最长同值路径.</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/exercise-solving-diary-1/5f21629f-3766-4466-b75d-9445f0d46646.svg"/></div></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @lc app=leetcode.cn id=687 lang=cpp</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * [687] 最长同值路径</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// Definition for a binary tree node.</span></span><br><span class="line"><span class="comment">// @lc code=start</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * struct TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode *left;</span></span><br><span class="line"><span class="comment"> *     TreeNode *right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestPath</span><span class="params">(TreeNode *root)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">int</span> longest = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">ArrowLength</span>(root, longest);</span><br><span class="line">        <span class="keyword">return</span> longest;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">ArrowLength</span><span class="params">(TreeNode *node, <span class="type">int</span> &amp;longest)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!node)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> leftLength = <span class="built_in">ArrowLength</span>(node-&gt;left, longest);</span><br><span class="line">        <span class="type">int</span> rightLength = <span class="built_in">ArrowLength</span>(node-&gt;right, longest);</span><br><span class="line">        <span class="type">int</span> left_length = <span class="number">0</span>, right_length = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;left &amp;&amp; node-&gt;left-&gt;val == node-&gt;val)&#123;</span><br><span class="line">            left_length = leftLength + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;right &amp;&amp; node-&gt;right-&gt;val == node-&gt;val)&#123;</span><br><span class="line">            right_length = rightLength + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        longest = std::<span class="built_in">max</span>(longest, left_length + right_length);<span class="comment">//可能包含当前节点以及从左右子节点开始的最长同值路径</span></span><br><span class="line">        <span class="keyword">return</span> std::<span class="built_in">max</span>(left_length, right_length);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>首先看题所给<code>TreeNode</code>二叉树的结构,每个节点有一个<code>val</code>值,以及左右子节点.并含有三种构造函数</p><p>定义一个<code>longest</code>变量,用于存储最长同值路径.<br>定义一个<code>ArrowLength</code>递归函数,用于计算从当前节点开始的最长同值路径.如果当前节点为空,返回0.计算左右子树的最长同值路径,并且判断左右子节点是否和当前节点的值相同,如果相同,路径长度+1.最后返回左右子树的最长同值路径.最后返回<code>longest</code>变量.</p><p><strong>值得注意的是</strong>,在计算<code>longest</code>时,可能包含当前节点以及从左右子节点开始的最长同值路径,所以需要取最大值.</p><pre><code>longest = std::max(longest, left_length + right_length);</code></pre><hr><h2 id="测试用例">测试用例</h2><p>C++:</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/exercise-solving-diary-1/2024-06-08-19-41-18.png"/></div></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;LeetCode 687. 最长同值路径&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Category&lt;/th&gt;
&lt;th&gt;Difficulty&lt;/th&gt;
&lt;th&gt;Likes&lt;/th&gt;
&lt;th&gt;Dislikes&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tb</summary>
      
    
    
    
    <category term="刷题日记" scheme="https://yumi1.top/categories/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0/"/>
    
    <category term="algorithms" scheme="https://yumi1.top/categories/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0/algorithms/"/>
    
    
    <category term="leetcode" scheme="https://yumi1.top/tags/leetcode/"/>
    
    <category term="刷题日记" scheme="https://yumi1.top/tags/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0/"/>
    
    <category term="tree" scheme="https://yumi1.top/tags/tree/"/>
    
    <category term="recursion" scheme="https://yumi1.top/tags/recursion/"/>
    
  </entry>
  
  <entry>
    <title>大学网课自动播放-2.学习通作业自动答题 | 智慧树</title>
    <link href="https://yumi1.top/school-chaoxing-class-2/"/>
    <id>https://yumi1.top/school-chaoxing-class-2/</id>
    <published>2024-05-28T05:35:18.000Z</published>
    <updated>2024-11-13T13:11:38.513Z</updated>
    
    <content type="html"><![CDATA[<h2 id="写在最前">写在最前</h2><div class="tip "><p>此贴仅为技术研究分析,请勿将此教程用于贩卖,使用程序造成的后果自行承担</p></div><div class="note success modern"><p>摆脱学校布置的无用网课 释放垃圾时间(<a href="https://www.bilibili.com/">bilibili</a>,<a href="https://www.icourse163.org/">MOOC</a>,<a href="https://www.youtube.com/">YouTube</a>上有优质课程资源)</p></div><div class="site-card-group"><a class="site-card" href="https://www.yumi1.top/windows-optimize-1/#3-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%A9%E5%B1%95%E5%AE%89%E8%A3%85"><div class="img"><img src="/image/src2.png"/></div><div class="info"><img src="/image/yumi.png"/><span class="title">3.浏览器拓展安装</span><span class="desc">yumi</span></div></a><a class="site-card" href="https://www.yumi1.top/school-chaoxing-class/"><div class="img"><img src="/image/background.jpeg"/></div><div class="info"><img src="/image/yumi.png"/><span class="title">网课自动播放-1</span><span class="desc">yumi</span></div></a></div><h2 id="前置条件">前置条件</h2><ol><li><p>edge浏览器</p></li><li><p>打开拓展 开启开发者模式</p></li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-11-13-21-11-05.png"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-11-13-21-11-30.png"/></div></div><ol start="3"><li>安装<a href="https://microsoftedge.microsoft.com/addons/detail/%E7%AF%A1%E6%94%B9%E7%8C%B4/iikmkjmpaadaobahmlepeloendndfphd">篡改猴</a> (油猴)       <img no-lazy class="inline" src="/image/4.png" style="height:40px;"/><br>(又名Tampermonkey/油猴) 以下称油猴 <a class="btn-beautify outline blue larger" href="https://microsoftedge.microsoft.com/addons/detail/%E7%AF%A1%E6%94%B9%E7%8C%B4/iikmkjmpaadaobahmlepeloendndfphd" title="下载链接"><i class="fa-solid fa-download"></i><span>下载链接</span></a></li></ol><p>油猴安装可见:<br><a href="https://www.yumi1.top/windows-optimize-1/#3-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%A9%E5%B1%95%E5%AE%89%E8%A3%85">浏览器拓展安装</a></p><h2 id="一-学习通作业自动答题">一.学习通作业自动答题</h2><ol><li>安装脚本<br>FCQ网课通助手[全网题库][通用智能适配答题][刷课] <a class="btn-beautify outline} 2. 在弹出的页面中点击安装即可 3. 打开学习通 在右上角开启脚本 {% image /image/../image/school-chaoxing-class-2/2024-05-28-13-28-24.png" href="https://greasyfork.org/zh-CN/scripts/477942-fcq%E7%BD%91%E8%AF%BE%E9%80%9A%E5%8A%A9%E6%89%8B-%E5%85%A8%E7%BD%91%E9%A2%98%E5%BA%93-%E9%80%9A%E7%94%A8%E6%99%BA%E8%83%BD%E9%80%82%E9%85%8D%E7%AD%94%E9%A2%98-%E5%88%B7%E8%AF%BE" title="安装链接"><i class="fa-solid fa-download"></i><span>安装链接</span></a></li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-05-28-13-29-10.png"/></div></div><p>这个脚本的网页适配比较广,不用的时候可以在油猴中关闭</p><ol start="4"><li>刷新网页后在右下角看见如下图标即为开启</li></ol><div class="tip "><p>如果没看到脚本界面可以试试按del</p></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-05-28-13-31-29.png"/></div></div><ol start="5"><li>进入作业界面点击自动做题即可</li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-05-28-13-38-37.png"/></div></div><p><strong>他家题库很全,答题可以识图,是目前最好用的答题脚本,可以考虑买,5000积分够用好久了</strong></p><div class="tip "><p>设置界面可以购买题库,购买时有账户切换选项 <font color=red>账户与学习通账户绑定,其他账户不能使用,通用账户则通用</font></p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-05-29-02-08-53.png"/></div></div></div><h2 id="二-学习通网课自动播放">二.学习通网课自动播放</h2><h3 id="2-1-OCS-网课助手">2.1 OCS 网课助手</h3><p>同样好用 可见<br><a href="https://www.yumi1.top/school-chaoxing-class">大学网课自动播放 1.学习通  OCS</a></p><h3 id="2-2-【超星学习通小助手】【完全免费】视频-章节测试-自动挂机-防清进度-不占资源">2.2 【超星学习通小助手】【完全免费】视频-章节测试|自动挂机|防清进度|不占资源</h3><p>这里我介绍一个正则改的超星脚本 个人感觉比OCS好用</p><a class="btn-beautify outline blue larger" href="https://greasyfork.org/zh-CN/scripts/462748" title="下载链接"><i class="fa-solid fa-download"></i><span>下载链接</span></a><p>同样 安装 打开需要刷课的课程 同时保证没有其他的刷课脚本在运行 需要用时开启即可</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-05-28-13-54-19.png"/></div></div><p>优点: <strong>免费</strong> <strong>挂机</strong> <strong>不占资源</strong></p><h2 id="三-智慧树">三.智慧树</h2><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-06-03-04-51-43.png"/></div></div><p>OCS助手需要下载app 我没有试过 这里提供FCQ的教程</p><h3 id="3-1-安装脚本">3.1 安装脚本</h3><ol><li>安装脚本<br>FCQ网课通助手[全网题库][通用智能适配答题][刷课] <a class="btn-beautify outline" href="/(https:/tcb-w644nfbyxrttaih-2cpr71dbf4b7-1304481250.tcloudbaseapp.com/extra2.user.js)" title="安装链接"><i class="fa-solid fa-download"></i><span>安装链接</span></a> <a class="btn-beautify outline} 2. 在弹出的页面中点击安装即可 3. 打开学习通 在右上角开启脚本 {% image /image/../image/school-chaoxing-class-2/2024-05-28-13-28-24.png" href="https://greasyfork.org/zh-CN/scripts/477942-fcq%E7%BD%91%E8%AF%BE%E9%80%9A%E5%8A%A9%E6%89%8B-%E5%85%A8%E7%BD%91%E9%A2%98%E5%BA%93-%E9%80%9A%E7%94%A8%E6%99%BA%E8%83%BD%E9%80%82%E9%85%8D%E7%AD%94%E9%A2%98-%E5%88%B7%E8%AF%BE" title="安装链接"><i class="fa-solid fa-download"></i><span>安装链接</span></a></li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-05-28-13-29-10.png"/></div></div><p>这个脚本的网页适配比较广,不用的时候可以在油猴中关闭</p><ol start="4"><li>刷新网页后在右下角看见如下图标即为开启</li></ol><div class="tip "><p>如果没看到脚本界面可以试试按del</p></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-05-28-13-31-29.png"/></div></div><h3 id="3-2-开始刷课">3.2 开始刷课</h3><p>快进两百倍-&gt;完成当前课件视频</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-06-03-04-43-09.png"/></div></div><p>然后看到右边变成100%皆可切换下一个视频</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-06-03-04-48-09.png"/></div></div><p>这个脚本的章节切换有点问题 自己手动切一下就行 因为脚本加速200倍的原因可能按键较为难按 狂点即可</p><div class="tip "><p>亲测是不会封号,直接刷完也是够及格的,不用担心</p></div><p>建议一次性把课程刷完后再刷平时测试</p><h3 id="3-3-平时测试">3.3 平时测试</h3><p>使用OCS 或者 FCQ都是可以的 注意使用FCQ时记得把刚刚开的200倍速还原<br>这里不再赘述</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-06-03-04-51-12.png"/></div></div>]]></content>
    
    
    <summary type="html">摆脱学校布置的无用网课 释放垃圾时间,自动刷课,自动答题,网课助手,油猴,篡改猴,网课答题,网课刷课,网课自动答题,网课自动刷课,网课自动播放,网课自动播放器,网课自动播放脚本,网课自动播放插件,网课自动播放器插件,网课自动播放脚本插件,网课自动播放器脚本,网课自动播放器脚本插件</summary>
    
    
    
    <category term="大学小技巧" scheme="https://yumi1.top/categories/%E5%A4%A7%E5%AD%A6%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="school" scheme="https://yumi1.top/tags/school/"/>
    
    <category term="油猴" scheme="https://yumi1.top/tags/%E6%B2%B9%E7%8C%B4/"/>
    
    <category term="超星" scheme="https://yumi1.top/tags/%E8%B6%85%E6%98%9F/"/>
    
    <category term="学习通" scheme="https://yumi1.top/tags/%E5%AD%A6%E4%B9%A0%E9%80%9A/"/>
    
  </entry>
  
  <entry>
    <title>计网期末复习</title>
    <link href="https://yumi1.top/computer-network-exam/"/>
    <id>https://yumi1.top/computer-network-exam/</id>
    <published>2024-05-20T10:43:54.000Z</published>
    <updated>2025-05-07T15:11:14.559Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、选择题-共20题-每题2分-共40分">一、选择题(共20题, 每题2分, 共40分)</h2><ol><li>通常所说的“三网”不包括(<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">B</span></span>)<br>A 电信网络 B 物联网 C.电视网络 D.计算机网络</li><li>计算机网络中可以共享的资源包括( <span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">B</span></span>)<br>A.客户机和服务器 B.硬件.软件和数据<br>C.主机.CPU.内存和外部设备 D.计算机和传输媒体</li><li>调制解调器MODEM的主要功能是 (<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">C</span></span>)<br>A.模拟信号的放大 B.数字信号的整形<br>C.模拟信号与数字信号的转换<br>D.数字信号的编码</li><li>以下不属于协议的三要素的是 (<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">D</span></span>)<br>A.语法 B.语义 C.同步 D.异步</li></ol><details class="folding-tag" ><summary> 查看4题解析 </summary>              <div class='content'>              <p>一个网络协议主要由语法、语义和同步三个要素组成。<br>（1）语法：语法指数据与控制信息的结构或格式，确定通信时采用的数据格式、编码及信号电平等。<br>（2）语义：语义由通信过程的说明构成，它规定了需要发出何种控制信息、完成何种控制动作以及做出何种应答，对发布请求，执行动作以及返回应答予以解释，并确定用于协调和差错处理的控制信息。<br>（3）同步：同步是对事件实现顺序的详细说明，指出事件的顺序以及速度匹配和排序。</p>              </div>            </details><ol start="5"><li>一个网络层数据报首部长度可能是(<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">B</span></span>)<br>A.16字节 B.24字节 C.26字节 D.64字节</li></ol><details class="folding-tag" green><summary> 查看5题解析 </summary>              <div class='content'>              <p>IP数据报的首部长度在20~60之间，并且是4字节的整数倍</p>              </div>            </details><ol start="6"><li>在一条带宽为200kHz的无噪声信道上，若采用4个幅值的ASK调制，则该信道的最大数据传输速率是(<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">C</span></span>)<br>A.200kb/s B. 400kb/s C.800kb/s 0.1600kb/s</li></ol><details class="folding-tag" green><summary> 查看6题解析 </summary>              <div class='content'>              <p>无噪声-&gt;奈氏准则<br><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>C</mi><mo>=</mo><mn>2</mn><mi>W</mi><mi>l</mi><mi>o</mi><msub><mi>g</mi><mrow><mn>2</mn></mrow></msub><mi>V</mi></math><br>C -&gt;  信道中允许的信号最大传输速率<br>H -&gt;  信道频率<br>V -&gt;  信道传输信号的离散级数<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>W</mi><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>V</mi><mo>⇒</mo><mn>2</mn><mo>∗</mo><mn>200</mn><mo>∗</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mn>4</mn><mo>=</mo><mn>800</mn></mrow><annotation encoding="application/x-tex">2Wlog_{2} V\Rightarrow 2*200*log_{2}4=800</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">200</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">800</span></span></span></span></p>              </div>            </details><ol start="7"><li>对于由集线器连接起来的10Mbit/s的共享式以太网。若共有10个用户，则每个用户能够占有的平均带宽为(<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">A</span></span>)<br>A.1Mbit/s B.2Mbit/s C.10Mbit/s D, 100Mbit/s</li></ol><details class="folding-tag" green><summary> 查看7题解析 </summary>              <div class='content'>              <p>集线器 共用10/10=1 交换机 10=10</p>              </div>            </details><ol start="8"><li>下列关于虚拟局域网的描述中，不正确的是(<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">C</span></span>)<br>A.虚拟局域网是建立在局域网交换技术基础上的<br>B.虚拟局域网可将局域网上的节点划分成若干逻辑工作组，那么一个逻辑工作组就是一个虚拟局域网<br>C.虚拟局域网建立在网络交换机之上，它以硬件方式来实现逻辑工作组的划分与管理<br>D.逻辑工作组的节点组成不受物理位置的限制</li></ol><details class="folding-tag" green><summary> 查看8题解析 </summary>              <div class='content'>              <p>[解析]<br>选项A)，虚拟局域网建立在交换技术的基础上；<br>选项B)，将局域网上的结点按工作性质与需要划分成若十个“逻辑工作组”，则一个逻辑工作组就是个虚拟网络；<br>选项C)，虚拟网络建立在局域网交换机的基础上，它以软件方式实现逻辑工作组的划分与管理;<br>选项D)，逻辑工作组中的结点不受物理位置的的限制。</p>              </div>            </details><ol start="9"><li>根据CSMA/CD 协议的工作原理，发送数据的帧至多经过(<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">C</span></span>)时间后能最终检测到冲突<br>A.端对端时延 B.数据帧的发送时间的两倍 C.两倍的端对端时延 D.不能确定</li></ol><details class="folding-tag" green><summary> 查看9题解析 </summary>              <div class='content'>              <p>CSMA/CD 重要特性<br>使用CSMA/CD协议的以太网不能进行全双工通信而只能进行双向交替通信（半双工通信）。每个站在发送数据之后的一小段时间内，存在着遭遇碰撞的可能性。这种发送的不确定性使整个以太网的平均通信量远小于以太网的最高数据率。<br>最先发送数据帧的站，在发送数据帧后至多经过时间2t（两倍的端到端往返时延）就可知道发送的数据帧是否遭受了碰撞。 以太网的端到端往返时延2t称为争用期，或碰撞窗口。 经过争用期这段时间还没有检测到碰撞，才能肯定这次发送不会发生碰撞。</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/computer-network-exam/2024-05-20-20-24-29.png"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/computer-network-exam/2024-05-20-20-24-23.png"/></div></div>              </div>            </details><ol start="10"><li>IP 协议提供的服务类型(<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">B</span></span>).<br>A.面向连接的数据报服务 B.无连接的数据报服务<br>C.面向连接的虚电路服务 D.无连接的虚电路服务</li></ol><details class="folding-tag" green><summary> 查看10题解析 </summary>              <div class='content'>              <p>IP服务的三个特点为不可靠、面向无连接和尽最大努力投递。<br>IP由IP协议控制传输的协议单元称为IP数据报。IP协议屏蔽下层各种物理网络的差异,向上层（主要是TCP层或UDP层）提供统一的IP数据报。作为一种互联网协议，运行于网络层，屏蔽各个物理网络的细节和差异，为其高层用户提供如下3种服务：</p><ol><li>不可靠的数据投递服务。数据报的投递没有任何品质保证，数据报可能被正确投递，也可能被丢弃；</li><li>面向无连接的传输服务。这种方式不管数据报的传输经过哪些结点，甚至可以不管数据报起始和终止的计算机。数据报的传输可能经过不同的传输路径，而且这些数据报在传输过程中有可能丢失，也有可能正确传输到目的结点；</li><li>尽最大努力投递服务。IP不会随意丢包，除非系统的资源耗尽、接收出现错误、或者网路出现故障的情况下，才不得不丢弃报文</li></ol>              </div>            </details><ol start="11"><li>在以下给出的地址中,属于地址块192.168.15.19/28的主机地址是(<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">A</span></span>)<br>A.192.168.15.17 B.192.168.15.14<br>C.192.168.15.16 D. 192.168.15.31</li></ol><details class="folding-tag" green><summary> 查看11题解析 </summary>              <div class='content'>              <p>给定地址：192.168.15.19<br>子网掩码：/28，这意味着子网掩码是255.255.255.240（因为28个1表示的子网掩码是11111111.11111111.11111111.11110000）。<br>确定网络地址:ip地址二进制与子网掩码二进制进行按位与</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">11000000.10101000.00001111.00010011 (IP地址)</span><br><span class="line">11111111.11111111.11111111.11110000 (子网掩码)</span><br><span class="line">------------------------------------</span><br><span class="line">11000000.10101000.00001111.00010000 (网络地址)&#123;192.168.15.16&#125;</span><br></pre></td></tr></table></figure><p>广播地址是在网络地址的基础上，主机部分全为1<br>则<br>11000000.10101000.00001111.00011111 (广播地址){192.168.15.31}<br>可用的主机地址范围：11000000.10101000.00001111.00010000-11000000.10101000.00001111.00011111<br>可用的主机地址范围是从网络地址之后一个地址到广播地址之前一个地址。<br>可用的主机地址范围：192.168.15.17 到 192.168.15.30</p>              </div>            </details><ol start="12"><li>若某主机的IP地址是183.80.72.48, 子网掩码是255.255.255.192, 则该主机所在网络的网络地址是(<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">C</span></span>)<br>A.183.80.0.0 B.183 80.64.0<br>C.183.80.72.0 D. 183.80.192.0</li></ol><details class="folding-tag" green><summary> 查看12题解析 </summary>              <div class='content'>              <p>主机的IP地址: 183.80.72.48<br>子网掩码: 255.255.255.192<br>按位与</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">10110111.01010000.01001000.00110000 (IP地址)</span><br><span class="line">11111111.11111111.11111111.11000000 (子网掩码)</span><br><span class="line">--------------------------------------</span><br><span class="line">10110111.01010000.01001000.00000000 (网络地址)</span><br></pre></td></tr></table></figure>              </div>            </details><ol start="13"><li>以下的4个子网掩码哪个是推荐使用的 (<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">D</span></span>)<br>A.176.0.0.0 B.96.0.0.0 C.127.192.0.0 D.255.128.0.0</li></ol><details class="folding-tag" green><summary> 查看13题解析 </summary>              <div class='content'>              <p>有效的子网掩码应该是连续的1，紧接着是连续的0，并且这种模式必须从左到右不间断。<br>转二进制可得 D 合法</p>              </div>            </details><ol start="14"><li>一个理想的路由选择算法应能够自动适应网络拓扑和(<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">B</span></span>)<br>A.路径变化 B.通信量变化 C.源节点变化 D.目标节点变化</li></ol><details class="folding-tag" green><summary> 查看14题解析 </summary>              <div class='content'>              <p>通信量变化即路径的拥塞程度和整体网络性能</p>              </div>            </details><ol start="15"><li>如果用户程序使用UDP进行数据传输，那么(<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">D</span></span>)必须承担可靠性方面的工作<br>A.数据链路层 B.网络层 C.传输层 D.应用层</li><li>设主机甲通过TCP向电机乙发送数据，甲在t0时刻发送一个序号seq=501.封装200B数据的段，在t1时刻收到乙发送的序号seq=601.确认序号ack=501.接收窗rwnd=500B 的段,则甲在收到新的确认段之前, 可以继续向乙发送的数据序号范围是(<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">A</span></span>)<br>A. 501~1000<br>B. 601~1100<br>C. 701~1000<br>D. 801~1100</li></ol><details class="folding-tag" green><summary> 查看16题解析 </summary>              <div class='content'>              <p>确认序号（ack）：501<br>接收窗口（rwnd）：500字节<br>乙已经准备好接收从序号501开始的数据,期待从501开始的数据。<br>接收窗口rwnd=500字节表示乙当前可以接收从确认序号501开始的最多500个字节的数据。<br>甲可以继续发送的数据序号范围从501开始，并且最多发送500个字节的数据，这样的序号范围是：<br>501到 501+500−1=1000<br>501（起始序号） 到 501+500−1=1000<br>A. 501~1000</p>              </div>            </details><ol start="17"><li>在TCP中，发送方的窗口大小取决于(<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">C</span></span>)<br>A.接收方允许的窗口大小<br>B.发送方允许的窗口大小和拥塞窗口大小<br>C.接收方允许的窗口大小和拥塞窗口大小<br>D.接收方允许的窗口大小和发送方允许的窗口大小</li></ol><details class="folding-tag" green><summary> 查看17题解析 </summary>              <div class='content'>              <p>在TCP（传输控制协议）中，发送方的窗口大小实际上是受到两个因素的影响：接收方允许的窗口大小（接收窗口）和拥塞控制算法决定的窗口大小（拥塞窗口）。接收窗口是接收方告诉发送方它有多少可用的缓冲区空间，而拥塞窗口是发送方根据网络拥塞情况动态调整的。</p>              </div>            </details><p>所以，答案是C.接收方允许的窗口大小和拥塞窗口大小。<br>18. 域名系统 DNS 用来解析(<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">B</span></span>)<br>A.IP地址和MAC 地址 B.主机名和IP 地址<br>C.TCP 端口名和主机名 D.主机名和MAC 地址<br>19. 在WWW中, 标识分布在整个 Internet 上的文档采用的是(<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">A</span></span>)<br>A URL B HTTP C HTML D.搜索引擎</p><details class="folding-tag" green><summary> 查看19题解析 </summary>              <div class='content'>              <p>在万维网（WWW）中，用于标识分布在整个Internet上的文档的是URL（统一资源定位符）。URL为互联网上的资源提供了位置和访问方式，它是一个唯一的地址，用于定位和检索网页。<br>所以，答案是A. URL。</p>              </div>            </details><ol start="20"><li>常用的数据传输速率单位有kbit/s.Mbit/s.Gbit/s。1Gbit/s 等于(<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">1000Mbit/s =1x10<sup>6</sup>Kbit/s</span></span>)<br>选项看不清</li></ol><h2 id="二、填空题-共10空-每空1分-计10分">二、填空题(共10空, 每空1分, 计10分)</h2><ol><li>已知C类的IP地址，如果拿出5位作为子网掩码，则子网掩码为<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content"><u>255.255.255.248</u></span></span>.</li></ol><details class="folding-tag" green><summary> 查看解析 </summary>              <div class='content'>              <p>11111111.11111111.11111111.11111000<br>255.255.255.248</p>              </div>            </details><ol start="2"><li>数据通信系统一般由源系统、<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content"><u>传输系统</u></span></span>和<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content"><u>目标系统</u></span></span>组成。</li></ol><span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">A</span></span><details class="folding-tag" green><summary> 查看解析 </summary>              <div class='content'>              <p>源系统（或发送端、 发送方）、 传输系统（或传输网络）和目的系统（或接收端、接收方）。</p>              </div>            </details><ol start="3"><li>数据链路层的三个基本功能是封装成帧、<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content"><u>透明传输</u></span></span>、<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content"><u>差错检测</u></span></span>。</li><li>在 TCP可靠传输的实现中，如果发送端发了1.2.3.4四个报文，接收项收到了报文1.2,4; 3没有收到，那么它发网的确认号应为<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">3</span></span>.</li></ol><details class="folding-tag" green><summary> 查看解析 </summary>              <div class='content'>              <p>下一个期待接收的报文序号</p>              </div>            </details><ol start="5"><li>地址块134.14.13.0/20的最大地址是<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">134.14.15.255</span></span>子网掩码是<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">255.255.240.0</span></span></li></ol><details class="folding-tag" green><summary> 查看解析 </summary>              <div class='content'>              <p>134.14.13-&gt; 10000110.00001110.00001101.00000000(网络地址)<br><B>10000110.00001110.0000</B>1111.11111111<br>134.14.15.255</p><p>/20-&gt;11111111.11111111.11110000.00000000-&gt;255.255.240.0(子网掩码)</p>              </div>            </details><ol start="6"><li>IPV6地址的地址位数为<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">128</span></span></li></ol><details class="folding-tag" green><summary> 查看解析 </summary>              <div class='content'>              <p>IPv6地址长度为128位，表示为&quot;X:X:X:X:X:X:X:X&quot;, 每个X代表4个十六进制值字符，以冒号分隔，一共被分为8组。</p>              </div>            </details><ol start="7"><li>HTTP的熟知端口号是<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案</button><span class="hide-content">80</span></span>.</li></ol><h2 id="三、计算题-共8题-计50分">三、计算题 (共8题,计50分)</h2><p>1.求下列每个地址的类别(3分)<br>(1) 228.12.16.67 (2)193.14.56.22 (3)14.25.120.68</p><details class="folding-tag" green><summary> 查看解析 </summary>              <div class='content'>              <p>A 类地址范围：0.0.0.0 到 127.255.255.255<br>B 类地址范围：128.0.0.0 到 191.255.255.255<br>C 类地址范围：192.0.0.0 到 223.255.255.255<br>D 类地址范围：224.0.0.0 到 239.255.255.255（用于多播）<br>E 类地址范围：240.0.0.0 到 255.255.255.255（保留未分配）<br>D 类 C 类 A 类</p>              </div>            </details><p>2.具有四个站进行码分多址CDMA通信。四个站的码片序列为：<br>A:(+1+1+1+1+1+1-1-1) B:(-1-1+1-1+1+1+1-1)<br>C.(-1+1-1+1+1+1-1-1) D.(+1+1-1-1-1-1+1-1) 现收到这样的码片序列:<br>(-1+1-3+1-1-3+1+1)。问哪个站发送了数据?发送数据的站发送的1还是0?<br>(6分 注意：不给出具体计算过程的不给分)</p><details class="folding-tag" green><summary> 查看解析 </summary>              <div class='content'>              <p>结果1 发送1<br>结果0 无发送<br>结果-1 发送0</p>              </div>            </details><p>3.设要传输的信息M=101110, 采用的CRC多项式为P(x)=x<sup>4</sup>+x³+1,试求出冗余码和要传输的信息。(6分 注意：要有大致的解题思路，真接给出结果不给分)</p><details class="folding-tag" green><summary> 查看解析 </summary>              <div class='content'>              <p>CRC<br>将信息M后附加与多项式P的阶数相同的零位。P的阶数为4（最高次幂是4），所以在信息后附加4个零： 即101110<font color='orange'>0000</font><br>P(x): x<sup>4</sup>+x³+1即为11001</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/computer-network-exam/2024-05-21-03-04-48.png"/></div></div>CRC=原数+余数 = <b>101110</b>0110冗余码是0110，要传输的信息是1011100110。              </div>            </details><p>4.一个PPP帧的数据部分(以十六进制给出) 是7D 5E 46 FE 7D 27 7D 5D 7D 5D 65 7D 5E,试问真正的数据是什么? (5分)</p><details class="folding-tag" green><summary> 查看解析 </summary>              <div class='content'>              <p>PPP异步传输时,转移符定义为0x7D,RFC1662规定了如下填充方法：<br>(1)0x7E-&gt;(0x7D，0x5E)。<br>(2)0x7D-&gt;(0x7D，0x5D)。<br>(3)如果数值小于0x20-&gt;0x7D,数值+20</p><p>7E 46 FE 07 7D 7D 65 7E</p>              </div>            </details><p>5.一个数据报长度为4000字节(固定首部长度)。现在经过一个网络传送，但此网络能够传送的最大数据长度为1500字节，试问应当划分为几个短些的数据报片?各个数据报片的数据字段长度.片偏移和分片后传送的总的数据报长度为多少?(6分)</p><details class="folding-tag" green><summary> 查看解析 </summary>              <div class='content'>              <div class="tip "><p>原数据报总长度是 4000 字节，数据部分长度是 3980 字节（减去20字节首部）。</p></div>每个数据报片需要包含20字节的首部 最大数据长度为1500 - 20 = 1480字节4000 / 1480 = 2.7个数据报片 取整3个片1：数据字段长度：1480字节片偏移量：0总长度（首部 + 数据）：1500字节片2：数据字段长度：1480字节片偏移量：1480 / 8 = 185（片偏移量以8字节为单位）总长度（首部 + 数据）：1500字节片3：数据字段长度：3980 - 2 * 1480 = 1020字节片偏移量：(1480 + 1480)/ 8 = 370总长度（首部 + 数据）：1020 + 20 = 1040字节总长 4000+20+20=4040              </div>            </details><p>6.假定网络中的路由器B的路由表有如下项目(三列分别表示“目的网络”.“距离”和下一跳路由器)</p><table><thead><tr><th>目的网络</th><th>距离</th><th>下一跳路由器</th></tr></thead><tbody><tr><td>N1</td><td>7</td><td>A</td></tr><tr><td>N2</td><td>2</td><td>C</td></tr><tr><td>N4</td><td>8</td><td>F</td></tr><tr><td>N5</td><td>4</td><td>E</td></tr></tbody></table><p>现B收到从C发来的路由信息(格式上题) 为: N2  4 ;N4 4;N5 3<br>试求出路由器B更新后的路由表(8分 注意，给出每条路由选择的理由，否则不给分)</p><details class="folding-tag" green><summary> 查看解析 </summary>              <div class='content'>              <ol><li>B收到从C发来的路由信息:</li></ol><table><thead><tr><th>目的网络</th><th>距离</th><th>下一跳路由器</th></tr></thead><tbody><tr><td>N2</td><td>5</td><td>C</td></tr><tr><td>N4</td><td>5</td><td>C</td></tr><tr><td>N5</td><td>4</td><td>C</td></tr></tbody></table><ol start="2"><li>进行比较并筛选,得到最终路由表:</li></ol><table><thead><tr><th>目的网络</th><th>距离</th><th>下一跳路由器</th><th>选择理由</th></tr></thead><tbody><tr><td>N1</td><td>7</td><td>A</td><td>不变</td></tr><tr><td>N2</td><td>5</td><td>C</td><td>同目的网络,同路由,更新</td></tr><tr><td>N4</td><td>5</td><td>C</td><td>同目的网络,距离优先</td></tr><tr><td>N5</td><td>4</td><td>E</td><td>距离相同 不变</td></tr></tbody></table>              </div>            </details><p>7.某单位分配到一个地址块170.56.24.0/24，现在需要进一步划分为4个子网， 子网A的机器数为110台，子网B的机器数为60台，子网C的机器数为28台，子网D的机器数为20台。试问：<br>(1)每个子网的网络前缀有多长?(4分)<br>(2)每个子网的地址块是多少?(4分)<br>(3)每个子网的子网掩码是什么?(2分)</p><details class="folding-tag" green><summary> 查看解析 </summary>              <div class='content'>              <p>(1) 每个子网的网络前缀有多长？</p><p>子网A: 需要容纳110台机器，所以需要112个地址（110 + 2 两个特殊地址）。这需要7位，因为<br>2<sup>7</sup>=128<br>所以网络前缀长度为32 - 7 = 25。<br>子网B: 需要容纳60台机器，所以需要62个地址（60 + 2）。这需要6位，因为<br>2<sup>7</sup>=64<br>所以网络前缀长度为32 - 6 = 26。<br>子网C: 需要容纳28台机器，所以需要30个地址（28 + 2）。这需要5位，因为<br>2<sup>5</sup>=32<br>所以网络前缀长度为32 - 5 = 27。<br>子网D: 需要容纳20台机器，所以需要22个地址（20 + 2）。这需要5位，因为<br>2<sup>5</sup>=32<br>所以网络前缀长度为32 - 5 = 27。<br>(2) 每个子网的地址块是多少？<br>子网A: 170.56.24.0/25 到 170.56.24.127/25<br>子网B: 170.56.24.128/26 到 170.56.24.191/26<br>子网C: 170.56.24.192/27 到 170.56.24.223/27<br>子网D: 170.56.24.224/27 到 170.56.24.255/27<br>(3) 每个子网的子网掩码是什么？<br>子网A: 255.255.255.128<br>子网B: 255.255.255.192<br>子网C: 255.255.255.224<br>子网D: 255.255.255.224</p>              </div>            </details><p>8.TCP 拥塞窗口cwnd大小与传输轮次n的关系如下衣。(6分)</p><table><thead><tr><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td><strong>轮次</strong></td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td></tr><tr><td><strong>cwnd</strong></td><td>1</td><td>2</td><td>4</td><td>8</td><td>16</td><td>32</td><td>33</td><td>34</td><td>35</td><td>36</td><td>37</td><td>38</td><td>39</td></tr><tr><td><strong>轮次</strong></td><td>14</td><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td></tr><tr><td><strong>cwnd</strong></td><td>40</td><td>41</td><td>42</td><td>21</td><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>1</td><td>2</td><td>4</td><td>8</td></tr></tbody></table><p>(1)慢开始的初始门限值是多少?<br>(2)网络一次产生拥塞是cwnd为多少?<br>(3)请写出27轮次的拥塞窗口值分别是多少?</p><details class="folding-tag" green><summary> 查看解析 </summary>              <div class='content'>              <ul><li><ol><li>1-6轮：cwnd从1增长到32，每轮翻倍（指数增长），说明这是慢开始阶段<br>7-16轮：cwnd从33增长到42，每轮增加1（线性增长），说明已进入拥塞避免阶段<br>从慢开始转入拥塞避免的临界点是cwnd=32，此时慢开始阶段结束。根据TCP拥塞控制算法，当cwnd值达到慢开始门限值(ssthresh)时，就会从慢开始阶段转入拥塞避免阶段。</li></ol></li><li><ol start="2"><li>当cwnd = 42时网络产生了第一次拥塞。<br>观察表格可知：第16轮时cwnd = 42，但到第17轮时突然降为21（减半），这表明在cwnd = 42时网络发生了拥塞，触发了拥塞避免机制。</li></ol></li><li><ol start="3"><li>第23轮发生了超时重传，cwnd重置为1<br>之后进入慢开始阶段，cwnd呈现指数增长：1→2→4→8<br>第26轮cwnd为8，按照慢开始阶段的指数增长规律，第27轮应为16</li></ol></li></ul><ol><li>32</li><li>42</li><li>16</li></ol>              </div>            </details>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;一、选择题-共20题-每题2分-共40分&quot;&gt;一、选择题(共20题, 每题2分, 共40分)&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;通常所说的“三网”不包括(&lt;span class=&quot;hide-inline&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;hide</summary>
      
    
    
    
    
    <category term="考试" scheme="https://yumi1.top/tags/%E8%80%83%E8%AF%95/"/>
    
    <category term="计算机网络" scheme="https://yumi1.top/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>如何免费搭建一个hexo博客</title>
    <link href="https://yumi1.top/hexo/"/>
    <id>https://yumi1.top/hexo/</id>
    <published>2024-05-18T10:01:05.000Z</published>
    <updated>2024-05-30T21:18:06.416Z</updated>
    
    <content type="html"><![CDATA[<div class="tip bell"><p>这篇写的比较匆忙,改天重写</p></div><p>视频教程:<a href="https://meeting.tencent.com/crw/lRMMGrDNf6">https://meeting.tencent.com/crw/lRMMGrDNf6</a><br>如何自己搭建一个免费的静态网站如<a href="https://webmastery.top/">https://webmastery.top/</a></p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-18-13-08.png"/></div></div><p>或hexo博客 如本站 <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-18-13-27.png"/></div></div></p><h1>一、静态网页</h1><h2 id="1-1-注册github账户">1.1 注册github账户</h2><p><a href="http://github.com">github.com</a>  打不开下载 <a class="btn-beautify outline blue larger" href="https://gitee.com/rmbgame/SteamTools/releases/download/2.8.6/Steam%20%20_win_x64_v2.8.6.exe" title="下载链接"><i class="fa-solid fa-download"></i><span>下载链接</span></a><br>进行加速 github</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-18-02-20.png"/></div></div><h2 id="1-2-创建github仓库">1.2 创建github仓库</h2><h3 id="1-2-1复刻他人项目">1.2.1复刻他人项目</h3><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-12-02.png"/></div></div><p>这里使用<a href="https://github.com/fangkuai767/EatKun">https://github.com/fangkuai767/EatKun</a></p><h3 id="1-2-2自建仓库上传">1.2.2自建仓库上传</h3><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-13-11.png"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-13-26.png"/></div></div><p>视频中使用源码<a href="https://yumi1.lanzn.com/i3Ylh1z3m77g">https://yumi1.lanzn.com/i3Ylh1z3m77g</a></p><h2 id="2-1-netlify部署">2.1 netlify部署</h2><p><a href="https://www.netlify.com/">https://www.netlify.com/</a></p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-18-14-47.png"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-18-15-01.png"/></div></div><p>选择刚刚上传/复刻的仓库<br>部署即可</p><h2 id="3-netlify绑定域名">3.netlify绑定域名</h2><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-17-55.png"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-19-27.png"/></div></div>复制所给域名<div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-20-26.png"/></div></div><p>选 CNAME,填入刚刚那个域名</p><h1>二、hexo博客</h1><h2 id="1-前置下载">1.前置下载</h2><p>nodejs: <a href="https://nodejs.org/">https://nodejs.org/</a>   网站打不开可以蓝奏云下载<a class="btn-beautify outline blue larger" href="https://yumi1.lanzn.com/iBNHC1z3nr3i" title="密码:i8ug"><i class="fa-solid fa-download"></i><span>密码:i8ug</span></a><br>密码:i8ug<br>git: <a href="https://git-scm.com/download/win">https://git-scm.com/download/win</a> 网站打不开可以蓝奏云下载<a class="btn-beautify outline blue larger" href="https://yumi1.lanzn.com/iZhtm1z3o44h" title="下载链接"><i class="fa-solid fa-download"></i><span>下载链接</span></a></p><h2 id="2-安装hexo">2.安装hexo</h2><p><i class="fa-brands fa-windows"></i> + <kbd>R</kbd>输入 <code>powershell</code><br>powershell中输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-25-46.png"/></div></div><h2 id="3-初始化hexo">3.初始化hexo</h2><p>新建一个你想要存放博客的文件夹<br>打开文件夹</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-23-39.png"/></div></div><p>地址栏输入cmd</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-24-15.png"/></div></div><p>cmd里显示的路径是你刚刚创的路径就是对的</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-24-37.png"/></div></div><p>输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>初始化完后<br>输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><h2 id="4-hexo-部署至github">4.hexo 部署至github</h2><h3 id="4-1-github-sshkey-配置">4.1 github sshkey 配置</h3><p><i class="fa-brands fa-windows"></i> + <kbd>R</kbd>输入 <code>powershell</code><br>powershell中输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;xxx@xxx.com&quot;</span><br></pre></td></tr></table></figure><p><a href="mailto:xxx@xxx.com">xxx@xxx.com</a> 替换至自己的github注册邮箱<br>之后会生成一个id_rsa.pub 一般路径在<code>C:\Users\你的用户名\.ssh</code>里<br>如图</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-31-49.png"/></div></div><p>如果找不到.ssh文件夹可以</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-33-16.png"/></div></div><p><a href="https://support.microsoft.com/zh-cn/windows/%E5%9C%A8-windows-%E4%B8%AD%E6%9F%A5%E7%9C%8B%E9%9A%90%E8%97%8F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E6%96%87%E4%BB%B6%E5%A4%B9-97fbc472-c603-9d90-91d0-1166d1d9f4b5">在 Windows 中查看隐藏的文件和文件夹<br></a></p><h3 id="4-2-github新建仓库">4.2 github新建仓库</h3><p>github上新建一个空仓库</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-37-28.png"/></div></div><p>复制这个.git结尾的连接 后续有用</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-37-39.png"/></div></div><h3 id="4-2修改-config-yml">4.2修改_config.yml</h3><p>打开刚刚初始化的文件夹<br>找到根目录下的_config.yml</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-35-26.png"/></div></div><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  - type: git</span><br><span class="line">    repo: 填写刚刚复制的.git结尾的连接</span><br><span class="line">    branch: main</span><br></pre></td></tr></table></figure><h3 id="4-3-hexo-渲染部署">4.3 hexo 渲染部署</h3><p>vscode打开刚刚初始化hexo的文件夹</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-40-15.png"/></div></div><kbd>ctrl</kbd>+<kbd>J</kbd> <p>输入<code>hexo g -d</code> 即可渲染并上传至github</p><h2 id="5-部署至netlify">5.部署至netlify</h2><p><a href="https://www.netlify.com/">https://www.netlify.com/</a></p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-18-14-47.png"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-18-15-01.png"/></div></div><p>选择刚刚创建的仓库<br>部署即可</p><h2 id="6-绑定域名">6.绑定域名</h2><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-17-55.png"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-19-27.png"/></div></div>复制所给域名<div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/hexo/2024-05-18-20-20-26.png"/></div></div><p>选 CNAME,填入刚刚那个域名</p><h2 id="hexo-指令">hexo 指令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hexo c        #清除缓存文件 db.json 和已生成的静态文件 public</span><br><span class="line">hexo g        #生成网站静态文件到默认设置的 public 文件夹(hexo generate 的缩写)</span><br><span class="line">hexo d        #自动生成网站静态文件，并部署到设定的仓库(hexo deploy 的缩写)</span><br><span class="line">hexo g -d     #生成静态文件并部署</span><br><span class="line">hexo s        #hexo本地测试 用于写代码测试用</span><br><span class="line">hexo new page #新建页面</span><br></pre></td></tr></table></figure><h1>拓展阅读</h1><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^1]"></span><a class="reference-anchor" href="#referto_[^1]">[^1]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://akilar.top/posts/615e2dec/">hexo butterfly主题语法</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^2]"></span><a class="reference-anchor" href="#referto_[^2]">[^2]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://weixiabing.github.io/blog/2022/01/26/Markdown-%E7%AE%80%E6%98%8E%E8%AF%AD%E6%B3%95%E6%89%8B%E5%86%8C/">markdown语法</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^3]"></span><a class="reference-anchor" href="#referto_[^3]">[^3]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.zhheo.com/create.html">hexo 美化</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^4]"></span><a class="reference-anchor" href="#referto_[^4]">[^4]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://hexo.io/zh-cn/docs/themes">hexo config.yml配置</a></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;tip bell&quot;&gt;&lt;p&gt;这篇写的比较匆忙,改天重写&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;视频教程:&lt;a href=&quot;https://meeting.tencent.com/crw/lRMMGrDNf6&quot;&gt;https://meeting.tencent.com/c</summary>
      
    
    
    
    <category term="hexo博客优化" scheme="https://yumi1.top/categories/hexo%E5%8D%9A%E5%AE%A2%E4%BC%98%E5%8C%96/"/>
    
    
    <category term="hexo" scheme="https://yumi1.top/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>校园网进行路由器拨号 WiFi</title>
    <link href="https://yumi1.top/school-net-2/"/>
    <id>https://yumi1.top/school-net-2/</id>
    <published>2024-04-26T05:14:11.000Z</published>
    <updated>2024-05-30T21:42:25.774Z</updated>
    
    <content type="html"><![CDATA[<div class="site-card-group"><a class="site-card" href="https://www.yumi1.top/school-net"><div class="img"><img src="/image/bbh%20(2).webp"/></div><div class="info"><img src="/image/yumi.png"/><span class="title">校园网开机自动拨号+断线重连</span><span class="desc">yumi</span></div></a></div><p>继承上篇,本文可减少甚至解决拨号断网问题</p><h1>1.设备</h1><p><strong>小米4a千兆版</strong><br>咸鱼55元可入手,有能力可刷openwrt,后续会更新教程(挖坑)</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-net-2/2024-04-27-04-48-33.png"/></div></div><h1>2.配置路由器</h1><h2 id="2-1连接路由器">2.1连接路由器</h2><h3 id="2-1-1-电脑有线连接-推荐">2.1.1 电脑有线连接(推荐)</h3><p>使用网线（RJ45）连接电脑和路由器lan口<br>2024-04-26-14-58-59.png</p><p>一般第一个口为wan口,下面会标,建议连第二口</p><h3 id="2-1-2-WAN口连接">2.1.2 WAN口连接</h3><div class="tip bell"><p><font size=3 color=red>WAN口需要连接学校提供的入户网线或面板</font></p></div><ol><li>如果入户网线为网线,可直接连接到路由器WAN口</li><li>如果学校只在墙上提供一个网线插口,需要使用一根网线连接到路由器WAN口,再使用网线连接到这个插口</li></ol><p>路由器中一般第一个口为wan口,下面会标,建议连第一口</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-net-2/2024-04-27-04-45-30.png"/></div></div><h3 id="2-1-3-电脑，手机无线连接">2.1.3 电脑，手机无线连接</h3><p><strong>建议有线连接设置好WiFI名与密码后进行</strong><br>连接路由器wifi 可在路由器背后找到wifi名称和密码,如没有 可以找到重置按钮,开机时拿针插入重置按钮,等待指示灯变化,即可重置密码</p><h2 id="2-2寻找网关">2.2寻找网关</h2><ol><li>可在路由器背后找到网关地址,或管理后台链接</li><li>如未找到可试试以下方法<br><i class="fa-brands fa-windows"></i> + <kbd>R</kbd> 输入<code>cmd</code>回车</li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/school-net-2/2024-04-26-14-55-56.png"/></div></div><p>输入<code>ipconfig</code>查看本机ip地址与网关地址</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/school-net-2/2024-04-26-14-56-29.png"/></div></div><p>复制网关地址 一般以192.168开头.1结尾<br>我这里是<code>192.168.31.1</code></p><h2 id="2-3登录">2.3登录</h2><p>浏览器打开网关地址</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/school-net-2/2024-04-26-15-01-01.png"/></div></div><p>密码:</p><ol><li>一般密码在路由器背面,如果没写可以试试直接进,第一次配置会提示设置密码</li><li>如果未提示且不知道密码,可以找到路由器上的重置按钮,开机时拿针插入重置按钮,等待指示灯变化,即可重置密码</li></ol><h2 id="2-4普通设置">2.4普通设置</h2><p>这里以小米路由器原版系统为例</p><h3 id="2-4-1-wifi设置">2.4.1 wifi设置</h3><p>不建议开双频合一 <font size=3 color=red>避免部分设备频繁切换导致掉线</font><br>建议将2.4G命名为 xxx+2.4G<br>平时距离较近连5G即可 不支持设备或距离较远连2.4G 功率设置为穿墙模式</p><table><thead><tr><th>频段</th><th>穿墙</th><th>速度</th></tr></thead><tbody><tr><td>2.4G</td><td>优秀</td><td>慢</td></tr><tr><td>5G</td><td>弱</td><td>快</td></tr></tbody></table><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/school-net-2/2024-04-26-15-20-56.png"/></div></div><h3 id="2-4-2-拨号上网">2.4.2 拨号上网</h3><p>我校登录抓包可得上网方式为 <strong>PPPoe拨号</strong><br>宽带账号: 学号+后缀<br>联通的后缀为<code>@unicom</code>移动的后缀为<code>@cmcc</code>电信的后缀为<code>@telecom</code><br>宽带密码: 身份证后六位</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-net-2/2024-04-26-15-47-33.png"/></div></div><div class="tip bell"><p><font size=3 color=red>上网设置下面可设置WAN口速率 设置为1000M</font></p></div><p>至此你已经成功拨号上网了<br>其他设置可根据自己需求设置</p><h2 id="2-5其他设置">2.5其他设置</h2><h3 id="2-5-1-DHCP">2.5.1 DHCP</h3><p>DHCP是一种自动分配IP地址的协议,一般路由器默认开启 并2880分钟更改一次ip<br>若关闭DHCP 需要手动设置设备IP地址</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-net-2/2024-04-27-05-03-59.png"/></div></div><p>如有访问设备需求 建议将常用设备mac与ip绑定(看见我onecloud了不，挖坑下次写)</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-net-2/2024-04-27-05-04-05.png" alt="即可使用ip在局域网内访问固定设备"/></div><span class="image-caption">即可使用ip在局域网内访问固定设备</span></div><h3 id="2-5-2-DMZ">2.5.2 DMZ</h3><p>将设备端口以一对一的形式穿透，并将其ip暴露外网，我校为公网IP，开启DMZ后可直接访问设备（不推荐）</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-net-2/2024-04-27-05-31-26.png"/></div></div><h3 id="2-5-3-端口转发">2.5.3 端口转发</h3><p>可将局域网的任意设备按任意规则转发到外网，例如将<code>192.168.31.2</code>的<code>10001</code>端口<code>TCP</code>,<code>UDP</code>转发到<code>80</code></p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-net-2/2024-04-27-05-34-57.png"/></div></div><p>此时获取本机公网ip<div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-net-2/2024-04-27-05-37-23.png"/></div></div><br>浏览器可通过 <code>18.163.117.80:80</code> 访问网站 (仅为示例,实际上ip应该在赣州 :)<br>此方案方便 安全 可按需转发 并支持多设备穿透外网</p><h3 id="2-5-4-UPnP">2.5.4 UPnP</h3><p>UPnP摆脱端口限制 可以直接穿透路由器进行访问 qbittorrent等软件需要使用其进行bt种子的p2p分享与下载<br>建议管理好UPnP设备,关闭不需要的设备,bilibili等直播软件与某些华为设备会自动开启UPnP占用你的网速</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-net-2/2024-04-27-05-43-42.png"/></div></div><p>注意按时清理或直接关闭此功能</p><p>下次更 刷老毛子openwrt教程</p>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;site-card-group&quot;&gt;&lt;a class=&quot;site-card&quot; href=&quot;https://www.yumi1.top/school-net&quot;&gt;&lt;div class=&quot;img&quot;&gt;&lt;img src=&quot;/image/bbh%20(2).webp&quot;/</summary>
      
    
    
    
    <category term="大学小技巧" scheme="https://yumi1.top/categories/%E5%A4%A7%E5%AD%A6%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="school" scheme="https://yumi1.top/tags/school/"/>
    
    <category term="pppoe" scheme="https://yumi1.top/tags/pppoe/"/>
    
    <category term="WiFi" scheme="https://yumi1.top/tags/WiFi/"/>
    
  </entry>
  
</feed>

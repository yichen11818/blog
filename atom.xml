<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Yumi&#39;s Blog</title>
  
  <subtitle>活在这珍贵的人间，太阳热烈，水波温柔.</subtitle>
  <link href="https://yumi1.top/atom.xml" rel="self"/>
  
  <link href="https://yumi1.top/"/>
  <updated>2025-08-04T14:39:48.987Z</updated>
  <id>https://yumi1.top/</id>
  
  <author>
    <name>Yichen</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>微信读书客户端 逆向 api文档-3</title>
    <link href="https://yumi1.top/weread-security-analysis-4/"/>
    <id>https://yumi1.top/weread-security-analysis-4/</id>
    <published>2025-08-04T12:31:02.000Z</published>
    <updated>2025-08-04T14:39:48.987Z</updated>
    
    <content type="html"><![CDATA[<div class="note flat"><p>CC BY-NC-SA 4.0</p></div><p>通用<code>headers</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">      <span class="string">&#x27;vid&#x27;</span>: vid.<span class="title function_">toString</span>(),</span><br><span class="line">      <span class="string">&#x27;skey&#x27;</span>: skey,</span><br><span class="line">      <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>登录在<a href="https://yumi1.top/weread-security-analysis-2/">微信读书逆向分析-1</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 使用 refresh_token 登录</span></span><br><span class="line"><span class="keyword">const</span> loginResponse = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`<span class="subst">$&#123;API_BASE&#125;</span>/login`</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123; <span class="string">&#x27;User-Agent&#x27;</span>: <span class="variable constant_">USER_AGENT</span> &#125;,</span><br><span class="line">  <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">    <span class="attr">deviceId</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">    <span class="attr">refCgi</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">refreshToken</span>: <span class="string">&#x27;your_refresh_token&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; vid, skey &#125; = <span class="keyword">await</span> loginResponse.<span class="title function_">json</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 使用 vid 和 skey 调用其他 API</span></span><br><span class="line"><span class="keyword">const</span> userProfile = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`<span class="subst">$&#123;API_BASE&#125;</span>/user/profile`</span>, &#123;</span><br><span class="line">  <span class="attr">headers</span>: <span class="title function_">getHeaders</span>(vid, skey)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1>错误码</h1><h2 id="通用错误码">通用错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>0</td><td>SUCCESS</td><td>成功</td></tr><tr><td>-2001</td><td>ErrorUnknown</td><td>未知错误</td></tr><tr><td>-2002</td><td>ErrorUndone</td><td>未完成</td></tr><tr><td>-2003</td><td>ErrorInvalidParam</td><td>无效参数</td></tr><tr><td>-2014</td><td>ErrorOverFreq</td><td>请求过于频繁</td></tr><tr><td>-2016</td><td>ErrorSvrReadOnly</td><td>服务器只读模式</td></tr><tr><td>-2018</td><td>ErrorAppVersionOut</td><td>应用版本过期</td></tr><tr><td>-2020</td><td>ErrorConnFail</td><td>连接失败</td></tr><tr><td>-2051</td><td>ErrorOverLimit</td><td>超出限制</td></tr><tr><td>-2053</td><td>ErrorSensitiveWord</td><td>敏感词汇</td></tr></tbody></table><h2 id="认证相关错误码">认证相关错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2004</td><td>ErrorInvalidVid</td><td>无效的用户ID</td></tr><tr><td>-2005</td><td>ErrorInvalidSkey</td><td>无效的会话密钥</td></tr><tr><td>-2006</td><td>ErrorInvalidOpenid</td><td>无效的OpenID</td></tr><tr><td>-2010</td><td>ErrorNoVid</td><td>用户不存在</td></tr><tr><td>-2011</td><td>ErrorGenSkey</td><td>生成会话密钥失败</td></tr><tr><td>-2012</td><td>ErrorSessionTimeout</td><td>登录超时</td></tr><tr><td>-2013</td><td>ErrorAuth</td><td>认证失败</td></tr><tr><td>-2017</td><td>ErrorVidReadOnly</td><td>用户只读模式</td></tr><tr><td>-2041</td><td>ErrorNeedVerify</td><td>需要验证</td></tr><tr><td>-2050</td><td>ErrorVidBlacked</td><td>用户被拉黑</td></tr><tr><td>-2054</td><td>ErrorInvalidToken</td><td>无效的令牌</td></tr><tr><td>-2063</td><td>ErrorVerExpired</td><td>验证过期</td></tr><tr><td>-2080</td><td>ErrorWeChatComm</td><td>微信通信错误</td></tr><tr><td>-2081</td><td>ErrorWeChatConnect</td><td>微信连接错误</td></tr></tbody></table><h2 id="用户相关错误码">用户相关错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2026</td><td>ErrorAccountSvrFail</td><td>账户服务失败</td></tr><tr><td>-2060</td><td>ErrorNotFriend</td><td>不是好友</td></tr><tr><td>-2061</td><td>ErrorUserInfoFail</td><td>获取用户信息失败</td></tr><tr><td>-2090</td><td>ErrorAntispamComm</td><td>反垃圾通信错误</td></tr><tr><td>-2704</td><td>ErrorUserForbidChat</td><td>用户禁止聊天</td></tr><tr><td>-2997</td><td>ErrorAccountAlreadyDeleted</td><td>账户已删除</td></tr><tr><td>-2998</td><td>ErrorAccountRevoked</td><td>账户已撤销</td></tr></tbody></table><h2 id="书籍相关错误码">书籍相关错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2008</td><td>ErrorInvalidBookid</td><td>无效的书籍ID</td></tr><tr><td>-2024</td><td>ErrorBookSvrFail</td><td>书籍服务失败</td></tr><tr><td>-2030</td><td>ErrorNoBook</td><td>书籍不存在</td></tr><tr><td>-2031</td><td>ErrorNoReview</td><td>书评不存在</td></tr><tr><td>-2032</td><td>ErrorNoRate</td><td>评分不存在</td></tr><tr><td>-2033</td><td>ErrorNoBookInfo</td><td>书籍信息不存在</td></tr><tr><td>-2034</td><td>ErrorNoMark</td><td>标记不存在</td></tr><tr><td>-2035</td><td>ErrorNoComment</td><td>评论不存在</td></tr><tr><td>-2037</td><td>ErrorNoBookInventory</td><td>书籍库存不足</td></tr><tr><td>-2040</td><td>ErrorBookLackContent</td><td>书籍缺少内容</td></tr><tr><td>-2311</td><td>ErrorBorrowFreeBook</td><td>借阅免费书籍错误</td></tr><tr><td>-2312</td><td>ErrorBorrowPaid</td><td>借阅已付费</td></tr><tr><td>-2313</td><td>ErrorBorrowNotPaid</td><td>借阅未付费</td></tr><tr><td>-2314</td><td>ErrorBorrowInvalidStatus</td><td>借阅状态无效</td></tr><tr><td>-2315</td><td>ErrorBorrowInvalidData</td><td>借阅数据无效</td></tr><tr><td>-2316</td><td>ErrorBorrowOut</td><td>借阅超时</td></tr><tr><td>-2317</td><td>ErrorBorrowing</td><td>正在借阅中</td></tr><tr><td>-2531</td><td>ErrorBookRunning</td><td>书籍处理中</td></tr><tr><td>-2533</td><td>ErrorInvalidBookInfo</td><td>无效的书籍信息</td></tr><tr><td>-2534</td><td>ErrorNoChapterInData</td><td>数据中无章节</td></tr><tr><td>-2538</td><td>ErrorPreSellBook</td><td>预售书籍</td></tr><tr><td>-2999</td><td>ErrorUploadBookOverLimit</td><td>上传书籍超出限制</td></tr></tbody></table><h2 id="支付相关错误码">支付相关错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2009</td><td>ErrorInvalidPrice</td><td>无效价格</td></tr><tr><td>-2027</td><td>ErrorPaySvrFail</td><td>支付服务失败</td></tr><tr><td>-2101</td><td>ErrorPayKvSelect</td><td>支付KV查询失败</td></tr><tr><td>-2102</td><td>ErrorPayKvInsert</td><td>支付KV插入失败</td></tr><tr><td>-2103</td><td>ErrorPayKvUpdate</td><td>支付KV更新失败</td></tr><tr><td>-2104</td><td>ErrorPayKvParse</td><td>支付KV解析失败</td></tr><tr><td>-2105</td><td>ErrorPayKvDump</td><td>支付KV导出失败</td></tr><tr><td>-2111</td><td>ErrorPayFetchBalance</td><td>获取余额失败</td></tr><tr><td>-2112</td><td>ErrorPayBalanceNotEnough</td><td>余额不足</td></tr><tr><td>-2113</td><td>ErrorPayPayApi</td><td>支付API错误</td></tr><tr><td>-2114</td><td>ErrorPayPresentApi</td><td>赠送API错误</td></tr><tr><td>-2115</td><td>ErrorPayMidasSysErr</td><td>米大师系统错误</td></tr><tr><td>-2116</td><td>ErrorPayMidasLogicErr</td><td>米大师逻辑错误</td></tr><tr><td>-2117</td><td>ErrorPayRollbackSucc</td><td>支付回滚成功</td></tr><tr><td>-2118</td><td>ErrorPayRollbackFail</td><td>支付回滚失败</td></tr><tr><td>-2119</td><td>ErrorPayAppType</td><td>支付应用类型错误</td></tr><tr><td>-2121</td><td>ErrorPayPresentAuth</td><td>赠送授权错误</td></tr><tr><td>-2123</td><td>ErrPayMemberCardNotEnough</td><td>会员卡不足</td></tr><tr><td>-2201</td><td>ErrorPayPayingBook</td><td>书籍支付中</td></tr><tr><td>-2202</td><td>ErrorPayBookPaidAlready</td><td>书籍已付费</td></tr><tr><td>-2203</td><td>ErrorPayBookNotExist</td><td>支付书籍不存在</td></tr><tr><td>-2204</td><td>ErrorPayFetchBookPrice</td><td>获取书籍价格失败</td></tr><tr><td>-2205</td><td>ErrorPayFetchNotEntireBook</td><td>获取非完整书籍失败</td></tr><tr><td>-2206</td><td>ErrorPayFreeBook</td><td>支付免费书籍</td></tr><tr><td>-2207</td><td>ErrorPayLimitFreeBook</td><td>限制免费书籍</td></tr><tr><td>-2208</td><td>ErrorPayNoBillno</td><td>无账单号</td></tr><tr><td>-2221</td><td>ErrorPayChaptersPaying</td><td>章节支付中</td></tr><tr><td>-2222</td><td>ErrorPayChapterIdsNull</td><td>章节ID为空</td></tr><tr><td>-2223</td><td>ErrorPayChapterAutoPayDisable</td><td>章节自动支付禁用</td></tr><tr><td>-2224</td><td>ErrorPayChapterFree</td><td>章节免费</td></tr><tr><td>-2225</td><td>ErrorPayChapterPriceEntireBook</td><td>章节价格为整本书</td></tr><tr><td>-2226</td><td>ErrorPayChapterPriceLack</td><td>章节价格不足</td></tr><tr><td>-2227</td><td>ErrorPayChaptersPartBoughtAlready</td><td>章节部分已购买</td></tr><tr><td>-2228</td><td>ErrorPayChaptersAllBoughtAlready</td><td>章节全部已购买</td></tr><tr><td>-2229</td><td>ErrorPayChaptersAutoPayClosed</td><td>章节自动支付关闭</td></tr><tr><td>-2281</td><td>ErrorPayPriceChanged</td><td>价格已变更</td></tr><tr><td>-2282</td><td>ErrorPayBookNumLimit</td><td>书籍数量限制</td></tr><tr><td>-2283</td><td>ErrorPayChargeNumLimit</td><td>充值数量限制</td></tr><tr><td>-2284</td><td>ErrorPaySoldOut</td><td>已售罄</td></tr><tr><td>-2285</td><td>ErrorPayDuplicated</td><td>重复支付</td></tr><tr><td>-2288</td><td>ErrorPayCollageCard</td><td>拼团卡错误</td></tr><tr><td>-2290</td><td>ErrorCouponUsed</td><td>优惠券已使用</td></tr><tr><td>-2298</td><td>ErrPayMoneyNotSendBook</td><td>付费未发书</td></tr><tr><td>-2299</td><td>ErrorPayUnknown</td><td>支付未知错误</td></tr></tbody></table><h2 id="书评相关错误码">书评相关错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2301</td><td>ErrorReviewUid</td><td>书评UID错误</td></tr><tr><td>-2302</td><td>ErrorReviewNotFound</td><td>书评不存在</td></tr><tr><td>-2303</td><td>ErrorReviewDeleted</td><td>书评已删除</td></tr><tr><td>-2304</td><td>ErrorReviewRefactorFail</td><td>书评重构失败</td></tr><tr><td>-2305</td><td>ErrorReviewFljBlock</td><td>书评被屏蔽</td></tr><tr><td>-2306</td><td>ErrorReviewTooLarge</td><td>书评过大</td></tr><tr><td>-2307</td><td>ErrorReviewInfoCorrupted</td><td>书评信息损坏</td></tr><tr><td>-2351</td><td>ErrorBookmarkUid</td><td>书签UID错误</td></tr><tr><td>-2352</td><td>ErrorBookmarkNotFound</td><td>书签不存在</td></tr></tbody></table><h2 id="网络相关错误码">网络相关错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2021</td><td>ErrorSQLTruncated</td><td>SQL截断</td></tr><tr><td>-2022</td><td>ErrorSQLExecFail</td><td>SQL执行失败</td></tr><tr><td>-2023</td><td>ErrorStrkvFail</td><td>字符串KV失败</td></tr><tr><td>-2025</td><td>ErrorStoreSvrFail</td><td>商店服务失败</td></tr><tr><td>-2028</td><td>ErrorKvFail</td><td>KV操作失败</td></tr><tr><td>-2029</td><td>ErrorOtherSvrFail</td><td>其他服务失败</td></tr><tr><td>-2500</td><td>ErrorRemoteFail</td><td>远程调用失败</td></tr><tr><td>-2539</td><td>ErrorXingeErr</td><td>信鸽推送错误</td></tr></tbody></table><h2 id="文件操作错误码">文件操作错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2501</td><td>ErrorDbOpErr</td><td>数据库操作错误</td></tr><tr><td>-2502</td><td>ErrorParseFail</td><td>解析失败</td></tr><tr><td>-2503</td><td>ErrorArgsMiss</td><td>参数缺失</td></tr><tr><td>-2504</td><td>ErrorTypeErr</td><td>类型错误</td></tr><tr><td>-2505</td><td>ErrorArgsErr</td><td>参数错误</td></tr><tr><td>-2506</td><td>ErrorHttpDownload</td><td>HTTP下载错误</td></tr><tr><td>-2507</td><td>ErrorFileNotExist</td><td>文件不存在</td></tr><tr><td>-2508</td><td>ErrorConvert</td><td>转换错误</td></tr><tr><td>-2509</td><td>ErrorDocNotObejct</td><td>文档非对象</td></tr><tr><td>-2510</td><td>ErrorOpenFile</td><td>打开文件错误</td></tr><tr><td>-2511</td><td>ErrorWriteFile</td><td>写文件错误</td></tr><tr><td>-2512</td><td>ErrorUnknownArgs</td><td>未知参数</td></tr><tr><td>-2513</td><td>ErrorLoadFile</td><td>加载文件错误</td></tr><tr><td>-2514</td><td>ErrorFileOutTime</td><td>文件超时</td></tr><tr><td>-2515</td><td>ErrorGetInfo</td><td>获取信息错误</td></tr><tr><td>-2516</td><td>ErrorNotLoadFile</td><td>未加载文件</td></tr><tr><td>-2517</td><td>ErrorNotArray</td><td>非数组类型</td></tr><tr><td>-2518</td><td>ErrorFileContent</td><td>文件内容错误</td></tr><tr><td>-2519</td><td>ErrorStatFileFail</td><td>文件状态失败</td></tr><tr><td>-2520</td><td>ErrorChapSzNotMatch</td><td>章节大小不匹配</td></tr><tr><td>-2521</td><td>ErrorDBNoUpdate</td><td>数据库无更新</td></tr><tr><td>-2522</td><td>ErrorUnknow</td><td>未知错误</td></tr><tr><td>-2523</td><td>ErrorkvTypeErr</td><td>KV类型错误</td></tr><tr><td>-2524</td><td>ErrorEpubDownloadErr</td><td>EPUB下载错误</td></tr><tr><td>-2525</td><td>ErrorParseCss</td><td>CSS解析错误</td></tr><tr><td>-2526</td><td>ErrorZipOp</td><td>ZIP操作错误</td></tr><tr><td>-2527</td><td>ErrorHTMLOP</td><td>HTML操作错误</td></tr><tr><td>-2528</td><td>ErrorParseXML</td><td>XML解析错误</td></tr><tr><td>-2529</td><td>ErrorPosTrans</td><td>位置转换错误</td></tr><tr><td>-2530</td><td>ErrorUidNotFound</td><td>UID未找到</td></tr><tr><td>-2532</td><td>ErrorSerilizeStr</td><td>序列化字符串错误</td></tr><tr><td>-2535</td><td>ErrorCheckLevel</td><td>检查级别错误</td></tr><tr><td>-2536</td><td>ErrorNoUpdate</td><td>无更新</td></tr><tr><td>-2537</td><td>ErrorSetColumnFail</td><td>设置列失败</td></tr><tr><td>-2540</td><td>ErrorPosConvertErr</td><td>位置转换错误</td></tr><tr><td>-2541</td><td>ErrorHTMLToTextErr</td><td>HTML转文本错误</td></tr><tr><td>-2542</td><td>ErrorGetAbstractErr</td><td>获取摘要错误</td></tr><tr><td>-2062</td><td>ErrorZipFail</td><td>ZIP失败</td></tr></tbody></table><h2 id="特殊功能错误码">特殊功能错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2015</td><td>ErrorPwd</td><td>密码错误</td></tr><tr><td>-2600</td><td>ErrorForgetSendMail</td><td>忘记发送邮件</td></tr><tr><td>-2601</td><td>ErrorCheckTokenFail</td><td>检查令牌失败</td></tr><tr><td>-2602</td><td>ErrorEmailFormat</td><td>邮件格式错误</td></tr><tr><td>-2603</td><td>ErrorEmail</td><td>邮件错误</td></tr><tr><td>-2650</td><td>ErrorInvalidAssistCount</td><td>无效助力次数</td></tr><tr><td>-2651</td><td>ErrorInvalidPromoBook</td><td>无效推广书籍</td></tr><tr><td>-2652</td><td>ErrorInvalidSelfAssist</td><td>无效自助</td></tr><tr><td>-2653</td><td>ErrorLimitCount</td><td>限制次数</td></tr><tr><td>-2654</td><td>ErrorGenerateGiftErr</td><td>生成礼品错误</td></tr><tr><td>-2655</td><td>ErrorSelfReceive</td><td>自己接收</td></tr><tr><td>-2656</td><td>ErrorActivityEnd</td><td>活动结束</td></tr><tr><td>-2657</td><td>ErrorGiftBagReceived</td><td>礼品袋已接收</td></tr><tr><td>-2666</td><td>ErrorLimitFreeNoQualified</td><td>限免无资格</td></tr><tr><td>-2700</td><td>ErrorMissImg</td><td>缺少图片</td></tr><tr><td>-2701</td><td>ErrorReject</td><td>拒绝</td></tr><tr><td>-2801</td><td>ErrorArticleLockOccupied</td><td>文章锁定被占用</td></tr><tr><td>-2809</td><td>ErrorArticleReleaseAgain</td><td>文章重复发布</td></tr><tr><td>-2810</td><td>ErrorArticleNoArticle</td><td>无文章</td></tr><tr><td>-2880</td><td>ErrorReadFundAlreadyObtained</td><td>阅读基金已获得</td></tr><tr><td>-2910</td><td>ErrorArticleQRScanLoginTimeOut</td><td>文章二维码扫描登录超时</td></tr><tr><td>-2924</td><td>ErrorTeenRestrict</td><td>青少年限制</td></tr><tr><td>-2958</td><td>ErrorMPArticleDeleted</td><td>公众号文章已删除</td></tr><tr><td>-2992</td><td>ErrorCollageExpired</td><td>拼团过期</td></tr></tbody></table><h1>勋章系统 API</h1><p>微信读书勋章系统相关的 API 接口，包括勋章获取、展示、排序和管理功能。</p><h2 id="获取勋章列表">获取勋章列表</h2><h3 id="GET-medal-list">GET /medal/list</h3><p>获取用户的勋章列表，包括已解锁和未解锁的勋章。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;auto&quot;</span>: <span class="number">1</span>,                           <span class="comment">// 自动获取 (0: 手动, 1: 自动)</span></span><br><span class="line">  <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_123456&quot;</span>,            <span class="comment">// 用户VID</span></span><br><span class="line">  <span class="string">&quot;count&quot;</span>: <span class="number">20</span>                          <span class="comment">// 获取数量</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;medals&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;medalId&quot;</span>: <span class="string">&quot;medal_001&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;阅读达人&quot;</span>,</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;连续阅读30天&quot;</span>,</span><br><span class="line">        <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;https://example.com/medal1.png&quot;</span>,</span><br><span class="line">        <span class="string">&quot;level&quot;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="string">&quot;progress&quot;</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="string">&quot;maxProgress&quot;</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="string">&quot;unlocked&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;unlockTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">        <span class="string">&quot;category&quot;</span>: <span class="string">&quot;reading&quot;</span>,</span><br><span class="line">        <span class="string">&quot;rarity&quot;</span>: <span class="string">&quot;rare&quot;</span>,</span><br><span class="line">        <span class="string">&quot;requirements&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="string">&quot;consecutive_days&quot;</span>,</span><br><span class="line">          <span class="string">&quot;target&quot;</span>: <span class="number">30</span>,</span><br><span class="line">          <span class="string">&quot;current&quot;</span>: <span class="number">30</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;medalId&quot;</span>: <span class="string">&quot;medal_002&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;书评专家&quot;</span>,</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;发表100篇书评&quot;</span>,</span><br><span class="line">        <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;https://example.com/medal2.png&quot;</span>,</span><br><span class="line">        <span class="string">&quot;level&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="string">&quot;progress&quot;</span>: <span class="number">75</span>,</span><br><span class="line">        <span class="string">&quot;maxProgress&quot;</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="string">&quot;unlocked&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;category&quot;</span>: <span class="string">&quot;social&quot;</span>,</span><br><span class="line">        <span class="string">&quot;rarity&quot;</span>: <span class="string">&quot;epic&quot;</span>,</span><br><span class="line">        <span class="string">&quot;requirements&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="string">&quot;review_count&quot;</span>,</span><br><span class="line">          <span class="string">&quot;target&quot;</span>: <span class="number">100</span>,</span><br><span class="line">          <span class="string">&quot;current&quot;</span>: <span class="number">75</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">50</span>,</span><br><span class="line">    <span class="string">&quot;unlockedCount&quot;</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="string">&quot;displayMedals&quot;</span>: [<span class="string">&quot;medal_001&quot;</span>, <span class="string">&quot;medal_003&quot;</span>, <span class="string">&quot;medal_005&quot;</span>],</span><br><span class="line">    <span class="string">&quot;categories&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;reading&quot;</span>,</span><br><span class="line">        <span class="string">&quot;displayName&quot;</span>: <span class="string">&quot;阅读成就&quot;</span>,</span><br><span class="line">        <span class="string">&quot;count&quot;</span>: <span class="number">15</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;social&quot;</span>,</span><br><span class="line">        <span class="string">&quot;displayName&quot;</span>: <span class="string">&quot;社交成就&quot;</span>,</span><br><span class="line">        <span class="string">&quot;count&quot;</span>: <span class="number">10</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;special&quot;</span>,</span><br><span class="line">        <span class="string">&quot;displayName&quot;</span>: <span class="string">&quot;特殊成就&quot;</span>,</span><br><span class="line">        <span class="string">&quot;count&quot;</span>: <span class="number">5</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="勋章排序管理">勋章排序管理</h2><h3 id="POST-https-i-weread-qq-com-medal-sort">POST <a href="https://i.weread.qq.com/medal/sort">https://i.weread.qq.com/medal/sort</a></h3><p>更改用户展示勋章的排序。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;medals&quot;</span>: [<span class="string">&quot;medal_001&quot;</span>, <span class="string">&quot;medal_003&quot;</span>, <span class="string">&quot;medal_005&quot;</span>]  <span class="comment">// 勋章ID数组（按显示顺序）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;success&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;displayMedals&quot;</span>: [<span class="string">&quot;medal_001&quot;</span>, <span class="string">&quot;medal_003&quot;</span>, <span class="string">&quot;medal_005&quot;</span>],</span><br><span class="line">    <span class="string">&quot;message&quot;</span>: <span class="string">&quot;勋章排序更新成功&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="勋章展示设置">勋章展示设置</h2><h3 id="设置展示勋章">设置展示勋章</h3><h4 id="POST-https-i-weread-qq-com-medal-display">POST <a href="https://i.weread.qq.com/medal/display">https://i.weread.qq.com/medal/display</a></h4><p>设置在个人资料中展示的勋章。</p><p><strong>前端实现:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">setDisplayMedals</span>(<span class="params">medalIds, vid, skey</span>) &#123;</span><br><span class="line">  <span class="comment">// 限制最多展示3个勋章</span></span><br><span class="line">  <span class="keyword">const</span> displayMedals = medalIds.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://i.weread.qq.com/medal/display&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;vid&#x27;</span>: vid.<span class="title function_">toString</span>(),</span><br><span class="line">      <span class="string">&#x27;skey&#x27;</span>: skey,</span><br><span class="line">      <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">      <span class="attr">medals</span>: displayMedals</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用示例</span></span><br><span class="line"><span class="keyword">const</span> displayResult = <span class="keyword">await</span> <span class="title function_">setDisplayMedals</span>([<span class="string">&#x27;medal_001&#x27;</span>, <span class="string">&#x27;medal_002&#x27;</span>], vid, skey);</span><br></pre></td></tr></table></figure><h2 id="勋章进度查询">勋章进度查询</h2><h3 id="获取勋章进度">获取勋章进度</h3><p>查询特定勋章的解锁进度。</p><p><strong>前端实现:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getMedalProgress</span>(<span class="params">medalId, vid, skey</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> medals = <span class="keyword">await</span> <span class="title function_">getMedalList</span>(<span class="number">1</span>, vid, <span class="number">100</span>, vid, skey);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (medals.<span class="property">errcode</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> medal = medals.<span class="property">data</span>.<span class="property">medals</span>.<span class="title function_">find</span>(<span class="function"><span class="params">m</span> =&gt;</span> m.<span class="property">medalId</span> === medalId);</span><br><span class="line">    <span class="keyword">if</span> (medal) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">medalId</span>: medal.<span class="property">medalId</span>,</span><br><span class="line">        <span class="attr">name</span>: medal.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">progress</span>: medal.<span class="property">progress</span>,</span><br><span class="line">        <span class="attr">maxProgress</span>: medal.<span class="property">maxProgress</span>,</span><br><span class="line">        <span class="attr">progressPercentage</span>: <span class="title class_">Math</span>.<span class="title function_">round</span>((medal.<span class="property">progress</span> / medal.<span class="property">maxProgress</span>) * <span class="number">100</span>),</span><br><span class="line">        <span class="attr">unlocked</span>: medal.<span class="property">unlocked</span>,</span><br><span class="line">        <span class="attr">requirements</span>: medal.<span class="property">requirements</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>纸质书与章节 API</h1><p>微信读书纸质书服务和章节服务相关的 API 接口，包括购物车管理和章节信息获取。</p><h2 id="纸质书购物车-API">纸质书购物车 API</h2><h3 id="添加到购物车">添加到购物车</h3><h4 id="POST-https-i-weread-qq-com-paper-commonset">POST <a href="https://i.weread.qq.com/paper/commonset">https://i.weread.qq.com/paper/commonset</a></h4><p>将纸质书添加到购物车。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;content&quot;</span>: &#123;                         <span class="comment">// 内容对象</span></span><br><span class="line">    <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,</span><br><span class="line">    <span class="string">&quot;title&quot;</span>: <span class="string">&quot;书籍标题&quot;</span>,</span><br><span class="line">    <span class="string">&quot;author&quot;</span>: <span class="string">&quot;作者姓名&quot;</span>,</span><br><span class="line">    <span class="string">&quot;price&quot;</span>: <span class="number">29.99</span>,</span><br><span class="line">    <span class="string">&quot;quantity&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;封面URL&quot;</span>,</span><br><span class="line">    <span class="string">&quot;isbn&quot;</span>: <span class="string">&quot;978-7-xxx-xxxxx-x&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="string">&quot;add&quot;</span>                        <span class="comment">// 操作类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;cartId&quot;</span>: <span class="string">&quot;cart_123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;items&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;书籍标题&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: <span class="string">&quot;作者姓名&quot;</span>,</span><br><span class="line">        <span class="string">&quot;price&quot;</span>: <span class="number">29.99</span>,</span><br><span class="line">        <span class="string">&quot;quantity&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;封面URL&quot;</span>,</span><br><span class="line">        <span class="string">&quot;addTime&quot;</span>: <span class="number">1640995200</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;totalPrice&quot;</span>: <span class="number">29.99</span>,</span><br><span class="line">    <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取购物车">获取购物车</h3><h4 id="GET-paper-commonget">GET /paper/commonget</h4><p>获取用户的纸质书购物车内容。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,               <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="string">&quot;cart&quot;</span>                      <span class="comment">// 类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;cartId&quot;</span>: <span class="string">&quot;cart_123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;items&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;书籍1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: <span class="string">&quot;作者1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;price&quot;</span>: <span class="number">29.99</span>,</span><br><span class="line">        <span class="string">&quot;quantity&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;封面URL1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;addTime&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">        <span class="string">&quot;available&quot;</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_2&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;书籍2&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: <span class="string">&quot;作者2&quot;</span>,</span><br><span class="line">        <span class="string">&quot;price&quot;</span>: <span class="number">39.99</span>,</span><br><span class="line">        <span class="string">&quot;quantity&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;封面URL2&quot;</span>,</span><br><span class="line">        <span class="string">&quot;addTime&quot;</span>: <span class="number">1640995300</span>,</span><br><span class="line">        <span class="string">&quot;available&quot;</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">&quot;totalPrice&quot;</span>: <span class="number">99.97</span>,</span><br><span class="line">    <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">    <span class="string">&quot;lastUpdateTime&quot;</span>: <span class="number">1640995400</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="购物车操作类型">购物车操作类型</h3><p>购物车支持多种操作类型：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">CartOperations</span> = &#123;</span><br><span class="line">  <span class="attr">ADD</span>: <span class="string">&#x27;add&#x27;</span>,           <span class="comment">// 添加商品</span></span><br><span class="line">  <span class="attr">REMOVE</span>: <span class="string">&#x27;remove&#x27;</span>,     <span class="comment">// 移除商品</span></span><br><span class="line">  <span class="attr">UPDATE</span>: <span class="string">&#x27;update&#x27;</span>,     <span class="comment">// 更新数量</span></span><br><span class="line">  <span class="attr">CLEAR</span>: <span class="string">&#x27;clear&#x27;</span>        <span class="comment">// 清空购物车</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除商品</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">removeFromCart</span>(<span class="params">bookId, vid, skey</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> content = &#123; <span class="attr">bookId</span>: bookId &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> <span class="title function_">addShoppingCart</span>(content, <span class="title class_">CartOperations</span>.<span class="property">REMOVE</span>, vid, skey);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新商品数量</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">updateCartQuantity</span>(<span class="params">bookId, quantity, vid, skey</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> content = &#123; </span><br><span class="line">    <span class="attr">bookId</span>: bookId, </span><br><span class="line">    <span class="attr">quantity</span>: quantity </span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> <span class="title function_">addShoppingCart</span>(content, <span class="title class_">CartOperations</span>.<span class="property">UPDATE</span>, vid, skey);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 清空购物车</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">clearCart</span>(<span class="params">vid, skey</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> <span class="title function_">addShoppingCart</span>(&#123;&#125;, <span class="title class_">CartOperations</span>.<span class="property">CLEAR</span>, vid, skey);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="章节信息-API">章节信息 API</h2><h3 id="基础章节信息获取">基础章节信息获取</h3><h4 id="POST-https-i-weread-qq-com-book-chapterInfos">POST <a href="https://i.weread.qq.com/book/chapterInfos">https://i.weread.qq.com/book/chapterInfos</a></h4><p>获取书籍的章节信息列表。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookIds&quot;</span>: [<span class="string">&quot;book1&quot;</span>, <span class="string">&quot;book2&quot;</span>],       <span class="comment">// 书籍ID数组</span></span><br><span class="line">  <span class="string">&quot;synckeys&quot;</span>: [<span class="number">123456789</span>, <span class="number">123456790</span>],  <span class="comment">// 同步键数组</span></span><br><span class="line">  <span class="string">&quot;teenmode&quot;</span>: <span class="number">0</span>,                       <span class="comment">// 青少年模式</span></span><br><span class="line">  <span class="string">&quot;updateTimes&quot;</span>: [<span class="number">1640995200</span>, <span class="number">1640995300</span>], <span class="comment">// 更新时间数组（可选）</span></span><br><span class="line">  <span class="string">&quot;maxfreeIdx&quot;</span>: [<span class="number">5</span>, <span class="number">10</span>]                <span class="comment">// 最大免费章节索引（可选）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;book1&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;chapters&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="string">&quot;title&quot;</span>: <span class="string">&quot;第一章 开始&quot;</span>,</span><br><span class="line">          <span class="string">&quot;level&quot;</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="string">&quot;wordCount&quot;</span>: <span class="number">2500</span>,</span><br><span class="line">          <span class="string">&quot;readingTime&quot;</span>: <span class="number">300</span>,</span><br><span class="line">          <span class="string">&quot;isFree&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="string">&quot;price&quot;</span>: <span class="number">0</span>,</span><br><span class="line">          <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995200</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;chapterUid&quot;</span>: <span class="number">2</span>,</span><br><span class="line">          <span class="string">&quot;title&quot;</span>: <span class="string">&quot;第二章 发展&quot;</span>,</span><br><span class="line">          <span class="string">&quot;level&quot;</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="string">&quot;wordCount&quot;</span>: <span class="number">3000</span>,</span><br><span class="line">          <span class="string">&quot;readingTime&quot;</span>: <span class="number">360</span>,</span><br><span class="line">          <span class="string">&quot;isFree&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="string">&quot;price&quot;</span>: <span class="number">0.99</span>,</span><br><span class="line">          <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995300</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&quot;synckey&quot;</span>: <span class="number">123456791</span>,</span><br><span class="line">      <span class="string">&quot;totalChapters&quot;</span>: <span class="number">20</span>,</span><br><span class="line">      <span class="string">&quot;freeChapters&quot;</span>: <span class="number">5</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="带付费数量的章节信息">带付费数量的章节信息</h3><h4 id="POST-https-i-weread-qq-com-book-chapterInfos-2">POST <a href="https://i.weread.qq.com/book/chapterInfos">https://i.weread.qq.com/book/chapterInfos</a></h4><p>获取包含付费章节数量信息的章节列表。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookIds&quot;</span>: [<span class="string">&quot;book1&quot;</span>, <span class="string">&quot;book2&quot;</span>],       <span class="comment">// 书籍ID数组</span></span><br><span class="line">  <span class="string">&quot;synckeys&quot;</span>: [<span class="number">123456789</span>, <span class="number">123456790</span>],  <span class="comment">// 同步键数组</span></span><br><span class="line">  <span class="string">&quot;paidCount&quot;</span>: [<span class="number">10</span>, <span class="number">15</span>],               <span class="comment">// 已付费章节数量数组</span></span><br><span class="line">  <span class="string">&quot;maxfreeIdx&quot;</span>: [<span class="number">5</span>, <span class="number">8</span>],                <span class="comment">// 最大免费章节索引（可选）</span></span><br><span class="line">  <span class="string">&quot;teenmode&quot;</span>: <span class="number">0</span>                        <span class="comment">// 青少年模式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="带价格的章节信息">带价格的章节信息</h3><h4 id="POST-https-i-weread-qq-com-book-chapterInfos-3">POST <a href="https://i.weread.qq.com/book/chapterInfos">https://i.weread.qq.com/book/chapterInfos</a></h4><p>获取包含章节价格信息的章节列表。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookIds&quot;</span>: [<span class="string">&quot;book1&quot;</span>, <span class="string">&quot;book2&quot;</span>],       <span class="comment">// 书籍ID数组</span></span><br><span class="line">  <span class="string">&quot;synckeys&quot;</span>: [<span class="number">123456789</span>, <span class="number">123456790</span>],  <span class="comment">// 同步键数组</span></span><br><span class="line">  <span class="string">&quot;price&quot;</span>: [<span class="number">0.99</span>, <span class="number">1.99</span>],               <span class="comment">// 章节价格数组</span></span><br><span class="line">  <span class="string">&quot;maxfreeIdx&quot;</span>: [<span class="number">5</span>, <span class="number">8</span>],                <span class="comment">// 最大免费章节索引（可选）</span></span><br><span class="line">  <span class="string">&quot;teenmode&quot;</span>: <span class="number">0</span>                        <span class="comment">// 青少年模式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>支付服务 API</h1><p>微信读书支付服务相关的 API 接口，包括书籍购买、章节购买、会员卡、账户余额、消费记录等功能。</p><h2 id="书籍购买-API">书籍购买 API</h2><h3 id="购买整本书籍">购买整本书籍</h3><h4 id="POST-https-i-weread-qq-com-pay-buyBook">POST <a href="https://i.weread.qq.com/pay/buyBook">https://i.weread.qq.com/pay/buyBook</a></h4><p>购买完整的书籍。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,             <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;pf&quot;</span>: <span class="string">&quot;android&quot;</span>,                     <span class="comment">// 平台标识</span></span><br><span class="line">  <span class="string">&quot;zoneid&quot;</span>: <span class="string">&quot;zone_001&quot;</span>,                <span class="comment">// 区域ID</span></span><br><span class="line">  <span class="string">&quot;price&quot;</span>: <span class="number">29.99</span>,                      <span class="comment">// 价格</span></span><br><span class="line">  <span class="string">&quot;release&quot;</span>: <span class="number">1</span>,                        <span class="comment">// 发布版本</span></span><br><span class="line">  <span class="string">&quot;cpName&quot;</span>: <span class="string">&quot;出版社名称&quot;</span>,               <span class="comment">// 版权方名称</span></span><br><span class="line">  <span class="string">&quot;payType&quot;</span>: <span class="number">1</span>,                        <span class="comment">// 支付类型</span></span><br><span class="line">  <span class="string">&quot;isMCard&quot;</span>: <span class="number">0</span>,                        <span class="comment">// 是否使用会员卡 (0: 否, 1: 是)</span></span><br><span class="line">  <span class="string">&quot;discount&quot;</span>: <span class="number">85</span>                       <span class="comment">// 折扣（可选，百分比）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;orderId&quot;</span>: <span class="string">&quot;order_789012&quot;</span>,</span><br><span class="line">    <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;title&quot;</span>: <span class="string">&quot;人工智能简史&quot;</span>,</span><br><span class="line">    <span class="string">&quot;originalPrice&quot;</span>: <span class="number">29.99</span>,</span><br><span class="line">    <span class="string">&quot;finalPrice&quot;</span>: <span class="number">25.49</span>,</span><br><span class="line">    <span class="string">&quot;discount&quot;</span>: <span class="number">85</span>,</span><br><span class="line">    <span class="string">&quot;paymentMethod&quot;</span>: <span class="string">&quot;wechat_pay&quot;</span>,</span><br><span class="line">    <span class="string">&quot;transactionId&quot;</span>: <span class="string">&quot;tx_345678&quot;</span>,</span><br><span class="line">    <span class="string">&quot;purchaseTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">    <span class="string">&quot;status&quot;</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">    <span class="string">&quot;receipt&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;receiptId&quot;</span>: <span class="string">&quot;receipt_901234&quot;</span>,</span><br><span class="line">      <span class="string">&quot;downloadUrl&quot;</span>: <span class="string">&quot;https://example.com/receipt.pdf&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;bookAccess&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;unlocked&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">&quot;expiryTime&quot;</span>: <span class="literal">null</span>,              <span class="comment">// null表示永久有效</span></span><br><span class="line">      <span class="string">&quot;downloadAllowed&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">&quot;printAllowed&quot;</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="免费获取书籍">免费获取书籍</h3><h4 id="POST-https-i-weread-qq-com-gift-newuser">POST <a href="https://i.weread.qq.com/gift/newuser">https://i.weread.qq.com/gift/newuser</a></h4><p>新用户免费获取书籍。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,             <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;from&quot;</span>: <span class="string">&quot;newuser_gift&quot;</span>               <span class="comment">// 来源标识</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="章节购买-API">章节购买 API</h2><h3 id="购买指定章节">购买指定章节</h3><h4 id="POST-https-i-weread-qq-com-pay-buyChapters">POST <a href="https://i.weread.qq.com/pay/buyChapters">https://i.weread.qq.com/pay/buyChapters</a></h4><p>购买书籍的指定章节。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,             <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;chapterIds&quot;</span>: <span class="string">&quot;1,2,3&quot;</span>,               <span class="comment">// 章节ID列表（逗号分隔）</span></span><br><span class="line">  <span class="string">&quot;isautopay&quot;</span>: <span class="string">&quot;0&quot;</span>,                    <span class="comment">// 是否自动支付</span></span><br><span class="line">  <span class="string">&quot;totalprice&quot;</span>: <span class="number">5.99</span>,                  <span class="comment">// 总价格</span></span><br><span class="line">  <span class="string">&quot;pf&quot;</span>: <span class="string">&quot;android&quot;</span>,                     <span class="comment">// 平台标识</span></span><br><span class="line">  <span class="string">&quot;zoneid&quot;</span>: <span class="string">&quot;zone_001&quot;</span>,                <span class="comment">// 区域ID</span></span><br><span class="line">  <span class="string">&quot;release&quot;</span>: <span class="number">1</span>,                        <span class="comment">// 发布版本</span></span><br><span class="line">  <span class="string">&quot;payType&quot;</span>: <span class="number">1</span>,                        <span class="comment">// 支付类型</span></span><br><span class="line">  <span class="string">&quot;isMCard&quot;</span>: <span class="number">0</span>                         <span class="comment">// 是否使用会员卡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用优惠券购买章节">使用优惠券购买章节</h3><h4 id="GET-coupon-buyChapter">GET /coupon/buyChapter</h4><p>使用优惠券购买章节。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,             <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;chapterIds&quot;</span>: <span class="string">&quot;1,2,3&quot;</span>                <span class="comment">// 章节ID列表（逗号分隔）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="取消自动购买">取消自动购买</h3><h4 id="POST-https-i-weread-qq-com-pay-cancelAutoBuy">POST <a href="https://i.weread.qq.com/pay/cancelAutoBuy">https://i.weread.qq.com/pay/cancelAutoBuy</a></h4><p>取消书籍的自动购买设置。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,             <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">1</span>,                           <span class="comment">// 类型</span></span><br><span class="line">  <span class="string">&quot;userVid&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 用户VID</span></span><br><span class="line">  <span class="string">&quot;isautopay&quot;</span>: <span class="number">0</span>                       <span class="comment">// 自动支付状态</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="消费记录-API">消费记录 API</h2><h3 id="获取消费记录">获取消费记录</h3><h4 id="GET-pay-consumeHistory">GET /pay/consumeHistory</h4><p>获取用户的消费历史记录。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;maxIdx&quot;</span>: <span class="number">100</span>,                       <span class="comment">// 最大索引</span></span><br><span class="line">  <span class="string">&quot;count&quot;</span>: <span class="number">20</span>,                         <span class="comment">// 获取数量（可选）</span></span><br><span class="line">  <span class="string">&quot;pf&quot;</span>: <span class="string">&quot;android&quot;</span>                      <span class="comment">// 平台标识</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;records&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;recordId&quot;</span>: <span class="string">&quot;record_123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;book_purchase&quot;</span>,</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_789012&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;人工智能简史&quot;</span>,</span><br><span class="line">        <span class="string">&quot;amount&quot;</span>: <span class="number">29.99</span>,</span><br><span class="line">        <span class="string">&quot;currency&quot;</span>: <span class="string">&quot;CNY&quot;</span>,</span><br><span class="line">        <span class="string">&quot;paymentMethod&quot;</span>: <span class="string">&quot;wechat_pay&quot;</span>,</span><br><span class="line">        <span class="string">&quot;transactionId&quot;</span>: <span class="string">&quot;tx_345678&quot;</span>,</span><br><span class="line">        <span class="string">&quot;purchaseTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="string">&quot;completed&quot;</span>,</span><br><span class="line">        <span class="string">&quot;refundable&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;chapterInfo&quot;</span>: <span class="literal">null</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;recordId&quot;</span>: <span class="string">&quot;record_123457&quot;</span>,</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;chapter_purchase&quot;</span>,</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_789013&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;机器学习实战&quot;</span>,</span><br><span class="line">        <span class="string">&quot;amount&quot;</span>: <span class="number">2.99</span>,</span><br><span class="line">        <span class="string">&quot;currency&quot;</span>: <span class="string">&quot;CNY&quot;</span>,</span><br><span class="line">        <span class="string">&quot;paymentMethod&quot;</span>: <span class="string">&quot;balance&quot;</span>,</span><br><span class="line">        <span class="string">&quot;transactionId&quot;</span>: <span class="string">&quot;tx_345679&quot;</span>,</span><br><span class="line">        <span class="string">&quot;purchaseTime&quot;</span>: <span class="number">1640995100000</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="string">&quot;completed&quot;</span>,</span><br><span class="line">        <span class="string">&quot;refundable&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;chapterInfo&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;chapterIds&quot;</span>: [<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">          <span class="string">&quot;chapterTitles&quot;</span>: [<span class="string">&quot;第一章&quot;</span>, <span class="string">&quot;第二章&quot;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">    <span class="string">&quot;maxIdx&quot;</span>: <span class="number">102</span>,</span><br><span class="line">    <span class="string">&quot;hasMore&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;totalAmount&quot;</span>: <span class="number">156.78</span>,</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">25</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="删除消费记录">删除消费记录</h3><h4 id="GET-pay-consumeHistory-delete">GET /pay/consumeHistory/delete</h4><p>删除指定的消费记录。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;hid&quot;</span>: <span class="string">&quot;record_123456&quot;</span>,              <span class="comment">// 记录ID</span></span><br><span class="line">  <span class="string">&quot;source&quot;</span>: <span class="string">&quot;user_delete&quot;</span>              <span class="comment">// 删除来源</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取自动购买历史">获取自动购买历史</h3><h4 id="GET-pay-autoBuyHistory">GET /pay/autoBuyHistory</h4><p>获取自动购买的历史记录。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;maxIdx&quot;</span>: <span class="number">100</span>,                       <span class="comment">// 最大索引</span></span><br><span class="line">  <span class="string">&quot;count&quot;</span>: <span class="number">20</span>                          <span class="comment">// 获取数量（可选）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="会员卡服务-API">会员卡服务 API</h2><h3 id="获取会员卡消费历史">获取会员卡消费历史</h3><h4 id="GET-pay-consumeHistory-2">GET /pay/consumeHistory</h4><p>获取会员卡的消费历史记录。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;maxIdx&quot;</span>: <span class="number">100</span>,                       <span class="comment">// 最大索引</span></span><br><span class="line">  <span class="string">&quot;source&quot;</span>: <span class="string">&quot;member_card&quot;</span>,             <span class="comment">// 来源</span></span><br><span class="line">  <span class="string">&quot;pf&quot;</span>: <span class="string">&quot;android&quot;</span>                      <span class="comment">// 平台标识</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="购买产品">购买产品</h3><h4 id="POST-https-i-weread-qq-com-pay-buygoodid">POST <a href="https://i.weread.qq.com/pay/buygoodid">https://i.weread.qq.com/pay/buygoodid</a></h4><p>购买指定的产品（如会员卡等）。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;pf&quot;</span>: <span class="string">&quot;android&quot;</span>,                     <span class="comment">// 平台标识</span></span><br><span class="line">  <span class="string">&quot;zoneid&quot;</span>: <span class="string">&quot;zone_001&quot;</span>,                <span class="comment">// 区域ID</span></span><br><span class="line">  <span class="string">&quot;num&quot;</span>: <span class="number">1</span>,                            <span class="comment">// 购买数量</span></span><br><span class="line">  <span class="string">&quot;goodid&quot;</span>: <span class="string">&quot;member_monthly&quot;</span>,          <span class="comment">// 商品ID</span></span><br><span class="line">  <span class="string">&quot;price&quot;</span>: <span class="number">19</span>                          <span class="comment">// 价格</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="活动与礼品-API">活动与礼品 API</h2><h3 id="接收活动书籍">接收活动书籍</h3><h4 id="POST-https-i-weread-qq-com-act-sendGift">POST <a href="https://i.weread.qq.com/act/sendGift">https://i.weread.qq.com/act/sendGift</a></h4><p>接收活动赠送的书籍。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;act&quot;</span>: <span class="string">&quot;newuser_gift&quot;</span>,               <span class="comment">// 活动标识</span></span><br><span class="line">  <span class="string">&quot;actType&quot;</span>: <span class="string">&quot;book_gift&quot;</span>,              <span class="comment">// 活动类型</span></span><br><span class="line">  <span class="string">&quot;bookIds&quot;</span>: [<span class="string">&quot;book_123&quot;</span>, <span class="string">&quot;book_456&quot;</span>]  <span class="comment">// 书籍ID列表</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="接收无限卡">接收无限卡</h3><h4 id="GET-act-sendinfinite">GET /act/sendinfinite</h4><p>接收无限阅读卡。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bitmapId&quot;</span>: <span class="string">&quot;bitmap_123&quot;</span>,            <span class="comment">// 位图ID</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="string">&quot;infinite_card&quot;</span>,             <span class="comment">// 类型</span></span><br><span class="line">  <span class="string">&quot;source&quot;</span>: <span class="string">&quot;activity&quot;</span>,                <span class="comment">// 来源</span></span><br><span class="line">  <span class="string">&quot;cmd&quot;</span>: <span class="string">&quot;receive&quot;</span>                     <span class="comment">// 命令</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="新接收无限卡">新接收无限卡</h3><h4 id="GET-act-recvinfinite">GET /act/recvinfinite</h4><p>新版本的无限卡接收接口。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;cmd&quot;</span>: <span class="string">&quot;receive&quot;</span>,                    <span class="comment">// 命令</span></span><br><span class="line">  <span class="string">&quot;action&quot;</span>: <span class="string">&quot;get_card&quot;</span>,                <span class="comment">// 动作</span></span><br><span class="line">  <span class="string">&quot;from&quot;</span>: <span class="string">&quot;activity&quot;</span>                   <span class="comment">// 来源</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="取消激励">取消激励</h3><h4 id="POST-https-i-weread-qq-com-incentive-cancelFirstCharge">POST <a href="https://i.weread.qq.com/incentive/cancelFirstCharge">https://i.weread.qq.com/incentive/cancelFirstCharge</a></h4><p>取消首次充值激励。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,             <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>                      <span class="comment">// 章节UID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>阅读数据 API</h1><p>阅读数据相关的 API 接口，包括阅读统计和挑战数据。</p><h2 id="获取阅读数据详情">获取阅读数据详情</h2><h3 id="GET-readdata-detail">GET /readdata/detail</h3><p>获取用户的阅读数据详情，支持不同时间维度的数据查询。</p><p><strong>数据模式枚举:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ReadDataMode</span> = &#123;</span><br><span class="line">  <span class="attr">WEEKLY</span>: <span class="string">&#x27;weekly&#x27;</span>,     <span class="comment">// 周数据</span></span><br><span class="line">  <span class="attr">MONTHLY</span>: <span class="string">&#x27;monthly&#x27;</span>,   <span class="comment">// 月数据</span></span><br><span class="line">  <span class="attr">ANNUALLY</span>: <span class="string">&#x27;anually&#x27;</span>,  <span class="comment">// 年数据</span></span><br><span class="line">  <span class="attr">OVERALL</span>: <span class="string">&#x27;overall&#x27;</span>    <span class="comment">// 总体数据</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;baseTime&quot;</span>: <span class="string">&quot;0&quot;</span>,              <span class="comment">// 基准时间</span></span><br><span class="line">  <span class="string">&quot;defaultPreferBook&quot;</span>: <span class="string">&quot;0&quot;</span>,     <span class="comment">// 默认偏好书籍</span></span><br><span class="line">  <span class="string">&quot;mode&quot;</span>: <span class="string">&quot;overall&quot;</span>             <span class="comment">// 数据模式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;v&quot;</span>: <span class="string">&quot;7.4.2.23&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;readingTime&quot;</span>: <span class="number">86400</span>,         <span class="comment">// 总阅读时长(秒)</span></span><br><span class="line">    <span class="string">&quot;readingDays&quot;</span>: <span class="number">30</span>,            <span class="comment">// 阅读天数</span></span><br><span class="line">    <span class="string">&quot;readingCount&quot;</span>: <span class="number">150</span>,          <span class="comment">// 阅读书籍数量</span></span><br><span class="line">    <span class="string">&quot;noteCount&quot;</span>: <span class="number">200</span>,             <span class="comment">// 笔记数量</span></span><br><span class="line">    <span class="string">&quot;reviewCount&quot;</span>: <span class="number">50</span>,            <span class="comment">// 书评数量</span></span><br><span class="line">    <span class="string">&quot;readingGoal&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;target&quot;</span>: <span class="number">50</span>,               <span class="comment">// 目标书籍数</span></span><br><span class="line">      <span class="string">&quot;current&quot;</span>: <span class="number">30</span>,              <span class="comment">// 当前完成数</span></span><br><span class="line">      <span class="string">&quot;progress&quot;</span>: <span class="number">0.6</span>             <span class="comment">// 完成进度</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;readingStats&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;avgReadingTime&quot;</span>: <span class="number">2880</span>,     <span class="comment">// 平均每日阅读时长(秒)</span></span><br><span class="line">      <span class="string">&quot;longestStreak&quot;</span>: <span class="number">15</span>,        <span class="comment">// 最长连续阅读天数</span></span><br><span class="line">      <span class="string">&quot;currentStreak&quot;</span>: <span class="number">5</span>,         <span class="comment">// 当前连续阅读天数</span></span><br><span class="line">      <span class="string">&quot;favoriteGenre&quot;</span>: <span class="string">&quot;科技&quot;</span>      <span class="comment">// 最喜欢的类型</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;monthlyData&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;month&quot;</span>: <span class="string">&quot;2024-01&quot;</span>,</span><br><span class="line">        <span class="string">&quot;readingTime&quot;</span>: <span class="number">7200</span>,</span><br><span class="line">        <span class="string">&quot;booksRead&quot;</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="string">&quot;notesCount&quot;</span>: <span class="number">20</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;weeklyData&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;week&quot;</span>: <span class="string">&quot;2024-W01&quot;</span>,</span><br><span class="line">        <span class="string">&quot;readingTime&quot;</span>: <span class="number">1800</span>,</span><br><span class="line">        <span class="string">&quot;readingDays&quot;</span>: <span class="number">5</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="获取挑战详情">获取挑战详情</h2><h3 id="GET-challenge-detail">GET /challenge/detail</h3><p>获取阅读挑战的详情信息。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;scene&quot;</span>: <span class="string">&quot;1&quot;</span>    <span class="comment">// 场景ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;v&quot;</span>: <span class="string">&quot;7.4.2.23&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;challenges&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;30天阅读挑战&quot;</span>,</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;连续30天每天阅读至少30分钟&quot;</span>,</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;daily_reading&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="string">&quot;in_progress&quot;</span>,    <span class="comment">// in_progress, completed, failed</span></span><br><span class="line">        <span class="string">&quot;progress&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;current&quot;</span>: <span class="number">15</span>,</span><br><span class="line">          <span class="string">&quot;target&quot;</span>: <span class="number">30</span>,</span><br><span class="line">          <span class="string">&quot;percentage&quot;</span>: <span class="number">0.5</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;startTime&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">        <span class="string">&quot;endTime&quot;</span>: <span class="number">1643587200</span>,</span><br><span class="line">        <span class="string">&quot;reward&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="string">&quot;badge&quot;</span>,</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;阅读达人&quot;</span>,</span><br><span class="line">          <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;https://example.com/badge.png&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;月度阅读目标&quot;</span>,</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;本月完成10本书的阅读&quot;</span>,</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;monthly_books&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="string">&quot;completed&quot;</span>,</span><br><span class="line">        <span class="string">&quot;progress&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;current&quot;</span>: <span class="number">12</span>,</span><br><span class="line">          <span class="string">&quot;target&quot;</span>: <span class="number">10</span>,</span><br><span class="line">          <span class="string">&quot;percentage&quot;</span>: <span class="number">1.2</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;reward&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="string">&quot;points&quot;</span>,</span><br><span class="line">          <span class="string">&quot;amount&quot;</span>: <span class="number">500</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;totalChallenges&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;completedChallenges&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;activeChallenges&quot;</span>: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>通用记录系统 API</h1><p>微信读书通用记录系统相关的 API 接口，用于存储和管理各种用户数据记录。</p><h2 id="获取所有记录">获取所有记录</h2><h3 id="POST-https-i-weread-qq-com-comm-record">POST <a href="https://i.weread.qq.com/comm/record">https://i.weread.qq.com/comm/record</a></h3><p>获取用户的所有通用记录数据。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;cmd&quot;</span>: <span class="string">&quot;get&quot;</span>                     <span class="comment">// 命令类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;records&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;reading_preferences&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;fontSize&quot;</span>: <span class="number">16</span>,</span><br><span class="line">        <span class="string">&quot;theme&quot;</span>: <span class="string">&quot;light&quot;</span>,</span><br><span class="line">        <span class="string">&quot;autoBookmark&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;reading_goals&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;dailyMinutes&quot;</span>: <span class="number">60</span>,</span><br><span class="line">        <span class="string">&quot;weeklyBooks&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="string">&quot;monthlyPages&quot;</span>: <span class="number">1000</span>,</span><br><span class="line">        <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;user_settings&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;notifications&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;autoSync&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;privacy&quot;</span>: <span class="string">&quot;friends&quot;</span>,</span><br><span class="line">        <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;totalRecords&quot;</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">&quot;lastUpdated&quot;</span>: <span class="number">1640995200</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="获取指定记录">获取指定记录</h2><h3 id="POST-https-i-weread-qq-com-comm-record-2">POST <a href="https://i.weread.qq.com/comm/record">https://i.weread.qq.com/comm/record</a></h3><p>获取指定键的记录数据。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;key&quot;</span>: <span class="string">&quot;record_key&quot;</span>,             <span class="comment">// 记录键</span></span><br><span class="line">  <span class="string">&quot;cmd&quot;</span>: <span class="string">&quot;get&quot;</span>                     <span class="comment">// 命令类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;key&quot;</span>: <span class="string">&quot;reading_preferences&quot;</span>,</span><br><span class="line">    <span class="string">&quot;value&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;fontSize&quot;</span>: <span class="number">16</span>,</span><br><span class="line">      <span class="string">&quot;theme&quot;</span>: <span class="string">&quot;light&quot;</span>,</span><br><span class="line">      <span class="string">&quot;autoBookmark&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="设置记录">设置记录</h2><h3 id="POST-https-i-weread-qq-com-comm-record-3">POST <a href="https://i.weread.qq.com/comm/record">https://i.weread.qq.com/comm/record</a></h3><p>设置或更新通用记录值。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;key&quot;</span>: <span class="string">&quot;record_key&quot;</span>,             <span class="comment">// 记录键</span></span><br><span class="line">  <span class="string">&quot;value&quot;</span>: &#123;                       <span class="comment">// 记录值（任意JSON对象）</span></span><br><span class="line">    <span class="string">&quot;data&quot;</span>: <span class="string">&quot;value_data&quot;</span>,</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>,</span><br><span class="line">    <span class="string">&quot;settings&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;option1&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">&quot;option2&quot;</span>: <span class="string">&quot;value&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200</span>,         <span class="comment">// 时间戳</span></span><br><span class="line">  <span class="string">&quot;signature&quot;</span>: <span class="string">&quot;signature_string&quot;</span>, <span class="comment">// 签名（可选）</span></span><br><span class="line">  <span class="string">&quot;cmd&quot;</span>: <span class="string">&quot;set&quot;</span>                     <span class="comment">// 命令类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;success&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;key&quot;</span>: <span class="string">&quot;record_key&quot;</span>,</span><br><span class="line">    <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>好友 API</h1><p>好友相关的 API 接口，包括社交功能和排行榜查询。</p><h2 id="查询阅读排名">查询阅读排名</h2><h3 id="GET-friend-ranking">GET /friend/ranking</h3><p>查询好友阅读排名，获取好友间的阅读数据对比。</p><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;ranking&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;vid&quot;</span>: <span class="number">12345</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">        <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar1.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;readingTime&quot;</span>: <span class="number">7200</span>,      <span class="comment">// 本周阅读时长(秒)</span></span><br><span class="line">        <span class="string">&quot;readingDays&quot;</span>: <span class="number">5</span>,         <span class="comment">// 本周阅读天数</span></span><br><span class="line">        <span class="string">&quot;rank&quot;</span>: <span class="number">1</span>,                <span class="comment">// 排名</span></span><br><span class="line">        <span class="string">&quot;readingMinutes&quot;</span>: <span class="number">120</span>     <span class="comment">// 本周阅读分钟数</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;vid&quot;</span>: <span class="number">12346</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;李四&quot;</span>,</span><br><span class="line">        <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar2.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;readingTime&quot;</span>: <span class="number">5400</span>,</span><br><span class="line">        <span class="string">&quot;readingDays&quot;</span>: <span class="number">4</span>,</span><br><span class="line">        <span class="string">&quot;rank&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="string">&quot;readingMinutes&quot;</span>: <span class="number">90</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;myRank&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;vid&quot;</span>: <span class="number">12345</span>,</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;我的昵称&quot;</span>,</span><br><span class="line">      <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/my_avatar.jpg&quot;</span>,</span><br><span class="line">      <span class="string">&quot;readingTime&quot;</span>: <span class="number">7200</span>,</span><br><span class="line">      <span class="string">&quot;readingDays&quot;</span>: <span class="number">5</span>,</span><br><span class="line">      <span class="string">&quot;rank&quot;</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="string">&quot;readingMinutes&quot;</span>: <span class="number">120</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;totalFriends&quot;</span>: <span class="number">50</span>,</span><br><span class="line">    <span class="string">&quot;weekStartTime&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">    <span class="string">&quot;weekEndTime&quot;</span>: <span class="number">1641599999</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>错误响应:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用户不存在</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: -<span class="number">2010</span>,</span><br><span class="line">  <span class="string">&quot;errlog&quot;</span>: <span class="string">&quot;C3LkAop&quot;</span>,</span><br><span class="line">  <span class="string">&quot;errmsg&quot;</span>: <span class="string">&quot;用户不存在&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 登录超时</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: -<span class="number">2012</span>,</span><br><span class="line">  <span class="string">&quot;errlog&quot;</span>: <span class="string">&quot;C6rM756&quot;</span>,</span><br><span class="line">  <span class="string">&quot;errmsg&quot;</span>: <span class="string">&quot;登录超时&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="好友关注-API">好友关注 API</h2><h3 id="关注-取消关注用户">关注/取消关注用户</h3><h4 id="POST-https-i-weread-qq-com-friend-follow">POST <a href="https://i.weread.qq.com/friend/follow">https://i.weread.qq.com/friend/follow</a></h4><p>关注或取消关注指定用户。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="number">123456</span>,                       <span class="comment">// 用户VID</span></span><br><span class="line">  <span class="string">&quot;isUnfollow&quot;</span>: <span class="number">0</span>,                     <span class="comment">// 是否取消关注 (0: 关注, 1: 取消关注)</span></span><br><span class="line">  <span class="string">&quot;isBlack&quot;</span>: <span class="number">0</span>                         <span class="comment">// 是否拉黑 (0: 否, 1: 是)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;success&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;userVid&quot;</span>: <span class="number">123456</span>,</span><br><span class="line">    <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar.jpg&quot;</span>,</span><br><span class="line">    <span class="string">&quot;action&quot;</span>: <span class="string">&quot;followed&quot;</span>,               <span class="comment">// 操作结果: followed/unfollowed</span></span><br><span class="line">    <span class="string">&quot;followTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">    <span class="string">&quot;mutualFollow&quot;</span>: <span class="literal">false</span>,              <span class="comment">// 是否互相关注</span></span><br><span class="line">    <span class="string">&quot;followerCount&quot;</span>: <span class="number">1250</span>,              <span class="comment">// 该用户的粉丝数</span></span><br><span class="line">    <span class="string">&quot;followingCount&quot;</span>: <span class="number">89</span>,               <span class="comment">// 该用户的关注数</span></span><br><span class="line">    <span class="string">&quot;relationshipStatus&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;isFollowing&quot;</span>: <span class="literal">true</span>,              <span class="comment">// 我是否关注了他</span></span><br><span class="line">      <span class="string">&quot;isFollower&quot;</span>: <span class="literal">false</span>,              <span class="comment">// 他是否关注了我</span></span><br><span class="line">      <span class="string">&quot;isFriend&quot;</span>: <span class="literal">false</span>                 <span class="comment">// 是否为好友（互相关注）</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="批量关注-取消关注">批量关注/取消关注</h3><h4 id="POST-https-i-weread-qq-com-friend-follow-2">POST <a href="https://i.weread.qq.com/friend/follow">https://i.weread.qq.com/friend/follow</a></h4><p>批量关注或取消关注多个用户。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vids&quot;</span>: [<span class="number">123456</span>, <span class="number">789012</span>, <span class="number">345678</span>],    <span class="comment">// 用户VID列表</span></span><br><span class="line">  <span class="string">&quot;isUnfollow&quot;</span>: <span class="number">0</span>                      <span class="comment">// 是否取消关注 (0: 关注, 1: 取消关注)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取关注列表">获取关注列表</h3><h4 id="GET-friend-following">GET /friend/following</h4><p>获取我关注的用户列表。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;syncver&quot;</span>: <span class="number">987654321</span>                 <span class="comment">// 同步版本</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;users&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">        <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar1.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;level&quot;</span>: <span class="number">15</span>,</span><br><span class="line">        <span class="string">&quot;followTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">        <span class="string">&quot;mutualFollow&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;lastActiveTime&quot;</span>: <span class="number">1640995300000</span>,</span><br><span class="line">        <span class="string">&quot;readingStats&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;totalBooks&quot;</span>: <span class="number">156</span>,</span><br><span class="line">          <span class="string">&quot;readingTime&quot;</span>: <span class="number">25600</span>,</span><br><span class="line">          <span class="string">&quot;weeklyReadingTime&quot;</span>: <span class="number">1200</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;recentActivity&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="string">&quot;review&quot;</span>,</span><br><span class="line">          <span class="string">&quot;content&quot;</span>: <span class="string">&quot;刚刚发布了一篇书评&quot;</span>,</span><br><span class="line">          <span class="string">&quot;time&quot;</span>: <span class="number">1640995250000</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">89</span>,</span><br><span class="line">    <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">    <span class="string">&quot;syncver&quot;</span>: <span class="number">987654322</span>,</span><br><span class="line">    <span class="string">&quot;hasMore&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取粉丝列表">获取粉丝列表</h3><h4 id="GET-friend-follower">GET /friend/follower</h4><p>获取关注我的用户列表（粉丝）。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;syncver&quot;</span>: <span class="number">987654321</span>                 <span class="comment">// 同步版本</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="订阅-取消订阅用户">订阅/取消订阅用户</h3><h4 id="POST-https-i-weread-qq-com-friend-subscribe">POST <a href="https://i.weread.qq.com/friend/subscribe">https://i.weread.qq.com/friend/subscribe</a></h4><p>订阅或取消订阅用户的动态。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: [<span class="number">123456</span>, <span class="number">789012</span>],             <span class="comment">// 用户VID列表</span></span><br><span class="line">  <span class="string">&quot;unsubscribe&quot;</span>: <span class="number">0</span>                     <span class="comment">// 是否取消订阅 (0: 订阅, 1: 取消订阅)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="隐藏-显示我的状态">隐藏/显示我的状态</h3><h4 id="POST-https-i-weread-qq-com-friend-hideMe">POST <a href="https://i.weread.qq.com/friend/hideMe">https://i.weread.qq.com/friend/hideMe</a></h4><p>对指定用户隐藏或显示我的在线状态。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: [<span class="number">123456</span>, <span class="number">789012</span>],             <span class="comment">// 用户VID列表</span></span><br><span class="line">  <span class="string">&quot;unhideMe&quot;</span>: <span class="number">0</span>                        <span class="comment">// 是否取消隐藏 (0: 隐藏, 1: 显示)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="好友申请-API">好友申请 API</h2><h3 id="获取关注申请列表">获取关注申请列表</h3><h4 id="GET-friend-applylist">GET /friend/applylist</h4><p>获取申请关注我的用户列表。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>                 <span class="comment">// 同步键</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;applications&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;applyVid&quot;</span>: <span class="number">123456</span>,</span><br><span class="line">        <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;申请者1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar1.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;level&quot;</span>: <span class="number">12</span>,</span><br><span class="line">        <span class="string">&quot;applyTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">        <span class="string">&quot;applyMessage&quot;</span>: <span class="string">&quot;希望能关注您，一起交流读书心得&quot;</span>,</span><br><span class="line">        <span class="string">&quot;mutualFriends&quot;</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_789&quot;</span>,</span><br><span class="line">            <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;共同好友1&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;mutualFriendsCount&quot;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="string">&quot;readingStats&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;totalBooks&quot;</span>: <span class="number">89</span>,</span><br><span class="line">          <span class="string">&quot;readingTime&quot;</span>: <span class="number">15600</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;commonInterests&quot;</span>: [<span class="string">&quot;科技&quot;</span>, <span class="string">&quot;历史&quot;</span>, <span class="string">&quot;文学&quot;</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="string">&quot;unreadCount&quot;</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">    <span class="string">&quot;hasMore&quot;</span>: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="同意关注申请">同意关注申请</h3><h4 id="POST-https-i-weread-qq-com-friend-agreeFollow">POST <a href="https://i.weread.qq.com/friend/agreeFollow">https://i.weread.qq.com/friend/agreeFollow</a></h4><p>同意单个用户的关注申请。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;applyVid&quot;</span>: <span class="number">123456</span>,                  <span class="comment">// 申请者VID</span></span><br><span class="line">  <span class="string">&quot;cmd&quot;</span>: <span class="number">1</span>                             <span class="comment">// 命令 (1: 同意, 0: 拒绝)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="批量同意关注申请">批量同意关注申请</h3><h4 id="POST-https-i-weread-qq-com-friend-agreeFollow-2">POST <a href="https://i.weread.qq.com/friend/agreeFollow">https://i.weread.qq.com/friend/agreeFollow</a></h4><p>批量同意多个用户的关注申请。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;batchvid&quot;</span>: [<span class="number">123456</span>, <span class="number">789012</span>, <span class="number">345678</span>], <span class="comment">// 申请者VID列表</span></span><br><span class="line">  <span class="string">&quot;cmd&quot;</span>: <span class="number">1</span>                             <span class="comment">// 命令 (1: 同意, 0: 拒绝)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="微信好友-API">微信好友 API</h2><h3 id="获取微信授权状态">获取微信授权状态</h3><h4 id="GET-wx-scope">GET /wx/scope</h4><p>获取微信授权的状态信息。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;123456789&quot;</span>,                  <span class="comment">// 用户VID</span></span><br><span class="line">  <span class="string">&quot;refresh&quot;</span>: <span class="number">0</span>                         <span class="comment">// 是否刷新 (0: 否, 1: 是)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;authStatus&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;isAuthorized&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">&quot;scope&quot;</span>: [<span class="string">&quot;snsapi_userinfo&quot;</span>, <span class="string">&quot;snsapi_base&quot;</span>],</span><br><span class="line">      <span class="string">&quot;authTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">      <span class="string">&quot;expireTime&quot;</span>: <span class="number">1672531200000</span>,</span><br><span class="line">      <span class="string">&quot;refreshToken&quot;</span>: <span class="string">&quot;refresh_token_string&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;permissions&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;canReadFriends&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">&quot;canShareToTimeline&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">&quot;canSendMessage&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;userInfo&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;openid&quot;</span>: <span class="string">&quot;openid_string&quot;</span>,</span><br><span class="line">      <span class="string">&quot;unionid&quot;</span>: <span class="string">&quot;unionid_string&quot;</span>,</span><br><span class="line">      <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;微信昵称&quot;</span>,</span><br><span class="line">      <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/wx_avatar.jpg&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取微信好友列表">获取微信好友列表</h3><h4 id="GET-friend-wechat">GET /friend/wechat</h4><p>获取微信好友在微信读书中的信息。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;syncver&quot;</span>: <span class="number">987654321</span>,                <span class="comment">// 同步版本</span></span><br><span class="line">  <span class="string">&quot;detailInfo&quot;</span>: <span class="number">1</span>,                     <span class="comment">// 是否获取详细信息</span></span><br><span class="line">  <span class="string">&quot;force&quot;</span>: <span class="number">0</span>,                          <span class="comment">// 是否强制刷新</span></span><br><span class="line">  <span class="string">&quot;userClick&quot;</span>: <span class="number">1</span>                       <span class="comment">// 是否用户点击</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;wechatFriends&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;wechatInfo&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;openid&quot;</span>: <span class="string">&quot;openid_123&quot;</span>,</span><br><span class="line">          <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;微信昵称&quot;</span>,</span><br><span class="line">          <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/wx_avatar.jpg&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;wereadInfo&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;微信读书昵称&quot;</span>,</span><br><span class="line">          <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/wr_avatar.jpg&quot;</span>,</span><br><span class="line">          <span class="string">&quot;level&quot;</span>: <span class="number">15</span>,</span><br><span class="line">          <span class="string">&quot;isRegistered&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="string">&quot;registrationTime&quot;</span>: <span class="number">1640995200000</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;relationshipStatus&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;isFollowing&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="string">&quot;isFollower&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="string">&quot;isFriend&quot;</span>: <span class="literal">false</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;readingStats&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;totalBooks&quot;</span>: <span class="number">89</span>,</span><br><span class="line">          <span class="string">&quot;readingTime&quot;</span>: <span class="number">15600</span>,</span><br><span class="line">          <span class="string">&quot;lastActiveTime&quot;</span>: <span class="number">1640995300000</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;commonBooks&quot;</span>: <span class="number">12</span>,</span><br><span class="line">        <span class="string">&quot;mutualFriends&quot;</span>: <span class="number">5</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">156</span>,</span><br><span class="line">    <span class="string">&quot;registeredCount&quot;</span>: <span class="number">89</span>,</span><br><span class="line">    <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">    <span class="string">&quot;syncver&quot;</span>: <span class="number">987654322</span>,</span><br><span class="line">    <span class="string">&quot;hasMore&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="邀请好友">邀请好友</h3><h4 id="GET-friend-invite">GET /friend/invite</h4><p>获取可邀请的好友列表。</p><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;inviteUsers&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;潜在用户1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar1.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;source&quot;</span>: <span class="string">&quot;wechat&quot;</span>,              <span class="comment">// 来源：wechat/phone/email</span></span><br><span class="line">        <span class="string">&quot;inviteStatus&quot;</span>: <span class="string">&quot;not_invited&quot;</span>,   <span class="comment">// 邀请状态</span></span><br><span class="line">        <span class="string">&quot;mutualFriends&quot;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="string">&quot;estimatedInterest&quot;</span>: <span class="number">0.85</span>        <span class="comment">// 预估兴趣度</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="string">&quot;inviteQuota&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;daily&quot;</span>: <span class="number">10</span>,</span><br><span class="line">      <span class="string">&quot;used&quot;</span>: <span class="number">3</span>,</span><br><span class="line">      <span class="string">&quot;remaining&quot;</span>: <span class="number">7</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;inviteRewards&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;perInvite&quot;</span>: <span class="number">100</span>,                  <span class="comment">// 每邀请一人的奖励</span></span><br><span class="line">      <span class="string">&quot;currency&quot;</span>: <span class="string">&quot;reading_coins&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取好友排名">获取好友排名</h3><h4 id="GET-friend-ranking-2">GET /friend/ranking</h4><p>获取好友阅读排名信息。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;mine&quot;</span>: <span class="number">1</span>                            <span class="comment">// 是否包含我的排名</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;rankings&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;rank&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;阅读达人&quot;</span>,</span><br><span class="line">        <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar1.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;readingTime&quot;</span>: <span class="number">3600</span>,             <span class="comment">// 本周阅读时间（秒）</span></span><br><span class="line">        <span class="string">&quot;readingDays&quot;</span>: <span class="number">7</span>,                <span class="comment">// 本周阅读天数</span></span><br><span class="line">        <span class="string">&quot;booksFinished&quot;</span>: <span class="number">2</span>,              <span class="comment">// 本周完成书籍数</span></span><br><span class="line">        <span class="string">&quot;trend&quot;</span>: <span class="string">&quot;up&quot;</span>,                   <span class="comment">// 排名趋势：up/down/stable</span></span><br><span class="line">        <span class="string">&quot;lastWeekRank&quot;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="string">&quot;isMe&quot;</span>: <span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;rank&quot;</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_789012&quot;</span>,</span><br><span class="line">        <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;我&quot;</span>,</span><br><span class="line">        <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/my_avatar.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;readingTime&quot;</span>: <span class="number">2400</span>,</span><br><span class="line">        <span class="string">&quot;readingDays&quot;</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="string">&quot;booksFinished&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;trend&quot;</span>: <span class="string">&quot;up&quot;</span>,</span><br><span class="line">        <span class="string">&quot;lastWeekRank&quot;</span>: <span class="number">8</span>,</span><br><span class="line">        <span class="string">&quot;isMe&quot;</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;myRanking&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;rank&quot;</span>: <span class="number">5</span>,</span><br><span class="line">      <span class="string">&quot;totalFriends&quot;</span>: <span class="number">89</span>,</span><br><span class="line">      <span class="string">&quot;percentile&quot;</span>: <span class="number">0.75</span>,                <span class="comment">// 超过75%的好友</span></span><br><span class="line">      <span class="string">&quot;weeklyGoal&quot;</span>: <span class="number">3600</span>,                <span class="comment">// 周目标</span></span><br><span class="line">      <span class="string">&quot;progress&quot;</span>: <span class="number">0.67</span>                   <span class="comment">// 目标完成度</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">    <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995200000</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="点赞好友排名">点赞好友排名</h3><h4 id="POST-https-i-weread-qq-com-friend-like">POST <a href="https://i.weread.qq.com/friend/like">https://i.weread.qq.com/friend/like</a></h4><p>为好友的排名点赞。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="number">123456</span>,                       <span class="comment">// 好友VID</span></span><br><span class="line">  <span class="string">&quot;like&quot;</span>: <span class="number">1</span>,                           <span class="comment">// 点赞操作 (1: 点赞, 0: 取消点赞)</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">1</span>                            <span class="comment">// 点赞类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="礼品接收">礼品接收</h3><h4 id="GET-friend-invited">GET /friend/invited</h4><p>接收邀请好友的礼品奖励。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;actionType&quot;</span>: <span class="string">&quot;receive_gift&quot;</span>,        <span class="comment">// 操作类型</span></span><br><span class="line">  <span class="string">&quot;extInfo&quot;</span>: <span class="string">&quot;invite_reward_123&quot;</span>       <span class="comment">// 扩展信息</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;gift&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;giftId&quot;</span>: <span class="string">&quot;gift_123456&quot;</span>,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;reading_coins&quot;</span>,</span><br><span class="line">      <span class="string">&quot;amount&quot;</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="string">&quot;description&quot;</span>: <span class="string">&quot;邀请好友奖励&quot;</span>,</span><br><span class="line">      <span class="string">&quot;receiveTime&quot;</span>: <span class="number">1640995200000</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;totalRewards&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;readingCoins&quot;</span>: <span class="number">500</span>,</span><br><span class="line">      <span class="string">&quot;freeBooks&quot;</span>: <span class="number">2</span>,</span><br><span class="line">      <span class="string">&quot;vipDays&quot;</span>: <span class="number">7</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;inviteStats&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;totalInvited&quot;</span>: <span class="number">5</span>,</span><br><span class="line">      <span class="string">&quot;successfulInvites&quot;</span>: <span class="number">3</span>,</span><br><span class="line">      <span class="string">&quot;pendingInvites&quot;</span>: <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="好友书架-API">好友书架 API</h2><h3 id="获取好友书架">获取好友书架</h3><h4 id="GET-shelf-friendCommon">GET /shelf/friendCommon</h4><p>获取好友的共同书架信息。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;123456789&quot;</span>,              <span class="comment">// 好友用户VID</span></span><br><span class="line">  <span class="string">&quot;minCount&quot;</span>: <span class="number">3</span>,                       <span class="comment">// 最小数量</span></span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;showPrivate&quot;</span>: <span class="number">0</span>,                    <span class="comment">// 是否显示私密书籍 (0: 否, 1: 是)</span></span><br><span class="line">  <span class="string">&quot;album&quot;</span>: <span class="number">0</span>                           <span class="comment">// 专辑标识</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;friendInfo&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;123456789&quot;</span>,</span><br><span class="line">      <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">      <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar.jpg&quot;</span>,</span><br><span class="line">      <span class="string">&quot;readingStats&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;totalBooks&quot;</span>: <span class="number">156</span>,</span><br><span class="line">        <span class="string">&quot;readingTime&quot;</span>: <span class="number">25600</span>,</span><br><span class="line">        <span class="string">&quot;readingDays&quot;</span>: <span class="number">89</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;commonBooks&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;人工智能简史&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">        <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;https://example.com/cover1.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;category&quot;</span>: <span class="string">&quot;科技&quot;</span>,</span><br><span class="line">        <span class="string">&quot;myProgress&quot;</span>: <span class="number">0.75</span>,              <span class="comment">// 我的阅读进度</span></span><br><span class="line">        <span class="string">&quot;friendProgress&quot;</span>: <span class="number">0.85</span>,          <span class="comment">// 好友的阅读进度</span></span><br><span class="line">        <span class="string">&quot;myRating&quot;</span>: <span class="number">4.5</span>,                 <span class="comment">// 我的评分</span></span><br><span class="line">        <span class="string">&quot;friendRating&quot;</span>: <span class="number">4.0</span>,             <span class="comment">// 好友的评分</span></span><br><span class="line">        <span class="string">&quot;addTime&quot;</span>: <span class="number">1640995200000</span>,        <span class="comment">// 添加时间</span></span><br><span class="line">        <span class="string">&quot;isPrivate&quot;</span>: <span class="literal">false</span>,              <span class="comment">// 是否私密</span></span><br><span class="line">        <span class="string">&quot;commonNotes&quot;</span>: <span class="number">3</span>                 <span class="comment">// 共同笔记数量</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;recommendBooks&quot;</span>: [                  <span class="comment">// 基于共同兴趣推荐的书籍</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_789012&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;机器学习实战&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: <span class="string">&quot;李四&quot;</span>,</span><br><span class="line">        <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;https://example.com/cover2.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;你们都喜欢科技类书籍&quot;</span>,</span><br><span class="line">        <span class="string">&quot;similarity&quot;</span>: <span class="number">0.85</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">    <span class="string">&quot;hasMore&quot;</span>: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="设置虚拟书架">设置虚拟书架</h3><h4 id="POST-https-i-weread-qq-com-shelf-setTaste">POST <a href="https://i.weread.qq.com/shelf/setTaste">https://i.weread.qq.com/shelf/setTaste</a></h4><p>设置用户的阅读品味书架（虚拟书架）。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;items&quot;</span>: [                           <span class="comment">// 虚拟书籍列表</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;fake_book_001&quot;</span>,</span><br><span class="line">      <span class="string">&quot;title&quot;</span>: <span class="string">&quot;推荐书籍1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;author&quot;</span>: <span class="string">&quot;作者1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;https://example.com/cover1.jpg&quot;</span>,</span><br><span class="line">      <span class="string">&quot;category&quot;</span>: <span class="string">&quot;文学&quot;</span>,</span><br><span class="line">      <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;展示阅读品味&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;fake_book_002&quot;</span>,</span><br><span class="line">      <span class="string">&quot;title&quot;</span>: <span class="string">&quot;推荐书籍2&quot;</span>,</span><br><span class="line">      <span class="string">&quot;author&quot;</span>: <span class="string">&quot;作者2&quot;</span>,</span><br><span class="line">      <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;https://example.com/cover2.jpg&quot;</span>,</span><br><span class="line">      <span class="string">&quot;category&quot;</span>: <span class="string">&quot;科技&quot;</span>,</span><br><span class="line">      <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;个人兴趣&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="作品列表-API">作品列表 API</h2><h3 id="获取用户作品列表">获取用户作品列表</h3><h4 id="GET-shelf-opus">GET /shelf/opus</h4><p>获取用户的作品列表（如书评、笔记等）。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;123456789&quot;</span>,              <span class="comment">// 用户VID</span></span><br><span class="line">  <span class="string">&quot;count&quot;</span>: <span class="number">20</span>,                         <span class="comment">// 获取数量</span></span><br><span class="line">  <span class="string">&quot;listType&quot;</span>: <span class="number">1</span>,                       <span class="comment">// 列表类型</span></span><br><span class="line">  <span class="string">&quot;listMode&quot;</span>: <span class="number">1</span>,                       <span class="comment">// 列表模式</span></span><br><span class="line">  <span class="string">&quot;album&quot;</span>: <span class="number">0</span>                           <span class="comment">// 专辑标识</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;userInfo&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;123456789&quot;</span>,</span><br><span class="line">      <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">      <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar.jpg&quot;</span>,</span><br><span class="line">      <span class="string">&quot;level&quot;</span>: <span class="number">15</span>,</span><br><span class="line">      <span class="string">&quot;totalWorks&quot;</span>: <span class="number">45</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;works&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;workId&quot;</span>: <span class="string">&quot;work_123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;review&quot;</span>,                <span class="comment">// 作品类型: review(书评), note(笔记), quote(摘录)</span></span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;《人工智能简史》读后感&quot;</span>,</span><br><span class="line">        <span class="string">&quot;content&quot;</span>: <span class="string">&quot;这本书深入浅出地介绍了人工智能的发展历程...&quot;</span>,</span><br><span class="line">        <span class="string">&quot;bookInfo&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_789012&quot;</span>,</span><br><span class="line">          <span class="string">&quot;title&quot;</span>: <span class="string">&quot;人工智能简史&quot;</span>,</span><br><span class="line">          <span class="string">&quot;author&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">          <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;https://example.com/cover.jpg&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;stats&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;likeCount&quot;</span>: <span class="number">25</span>,               <span class="comment">// 点赞数</span></span><br><span class="line">          <span class="string">&quot;commentCount&quot;</span>: <span class="number">8</span>,             <span class="comment">// 评论数</span></span><br><span class="line">          <span class="string">&quot;shareCount&quot;</span>: <span class="number">3</span>,               <span class="comment">// 分享数</span></span><br><span class="line">          <span class="string">&quot;readCount&quot;</span>: <span class="number">156</span>               <span class="comment">// 阅读数</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;createTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">        <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995300000</span>,</span><br><span class="line">        <span class="string">&quot;isPublic&quot;</span>: <span class="literal">true</span>,                <span class="comment">// 是否公开</span></span><br><span class="line">        <span class="string">&quot;tags&quot;</span>: [<span class="string">&quot;科技&quot;</span>, <span class="string">&quot;AI&quot;</span>, <span class="string">&quot;读后感&quot;</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;workId&quot;</span>: <span class="string">&quot;work_123457&quot;</span>,</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;note&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;关于机器学习的思考&quot;</span>,</span><br><span class="line">        <span class="string">&quot;content&quot;</span>: <span class="string">&quot;机器学习的核心在于数据和算法的结合...&quot;</span>,</span><br><span class="line">        <span class="string">&quot;bookInfo&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_789013&quot;</span>,</span><br><span class="line">          <span class="string">&quot;title&quot;</span>: <span class="string">&quot;机器学习实战&quot;</span>,</span><br><span class="line">          <span class="string">&quot;author&quot;</span>: <span class="string">&quot;李四&quot;</span>,</span><br><span class="line">          <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;https://example.com/cover2.jpg&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;chapterInfo&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;chapterUid&quot;</span>: <span class="number">5</span>,</span><br><span class="line">          <span class="string">&quot;chapterTitle&quot;</span>: <span class="string">&quot;第五章：神经网络&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;stats&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;likeCount&quot;</span>: <span class="number">12</span>,</span><br><span class="line">          <span class="string">&quot;commentCount&quot;</span>: <span class="number">3</span>,</span><br><span class="line">          <span class="string">&quot;shareCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="string">&quot;readCount&quot;</span>: <span class="number">89</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;createTime&quot;</span>: <span class="number">1640995100000</span>,</span><br><span class="line">        <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995150000</span>,</span><br><span class="line">        <span class="string">&quot;isPublic&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;tags&quot;</span>: [<span class="string">&quot;机器学习&quot;</span>, <span class="string">&quot;笔记&quot;</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;hasMore&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;nextCursor&quot;</span>: <span class="string">&quot;cursor_abc123&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="黑名单管理-API">黑名单管理 API</h2><h3 id="获取黑名单">获取黑名单</h3><h4 id="GET-friend-blacklist">GET /friend/blacklist</h4><p>获取用户的黑名单列表。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">1</span>                            <span class="comment">// 黑名单类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;blacklist&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;被拉黑用户1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar1.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;blackTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">        <span class="string">&quot;blackReason&quot;</span>: <span class="string">&quot;spam&quot;</span>,</span><br><span class="line">        <span class="string">&quot;blackType&quot;</span>: <span class="number">1</span>,                  <span class="comment">// 黑名单类型</span></span><br><span class="line">        <span class="string">&quot;isGlobalBlack&quot;</span>: <span class="literal">false</span>,          <span class="comment">// 是否全局拉黑</span></span><br><span class="line">        <span class="string">&quot;canUnblock&quot;</span>: <span class="literal">true</span>               <span class="comment">// 是否可以解除拉黑</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_789012&quot;</span>,</span><br><span class="line">        <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;被拉黑用户2&quot;</span>,</span><br><span class="line">        <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar2.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;blackTime&quot;</span>: <span class="number">1640995100000</span>,</span><br><span class="line">        <span class="string">&quot;blackReason&quot;</span>: <span class="string">&quot;harassment&quot;</span>,</span><br><span class="line">        <span class="string">&quot;blackType&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;isGlobalBlack&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;canUnblock&quot;</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">15</span>,</span><br><span class="line">    <span class="string">&quot;blacklistStats&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;userBlackCount&quot;</span>: <span class="number">12</span>,              <span class="comment">// 用户拉黑数量</span></span><br><span class="line">      <span class="string">&quot;globalBlackCount&quot;</span>: <span class="number">3</span>,             <span class="comment">// 全局拉黑数量</span></span><br><span class="line">      <span class="string">&quot;recentBlackCount&quot;</span>: <span class="number">2</span>              <span class="comment">// 最近拉黑数量</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;blackReasons&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;spam&quot;</span>,</span><br><span class="line">        <span class="string">&quot;count&quot;</span>: <span class="number">8</span>,</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;发送垃圾信息&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;harassment&quot;</span>,</span><br><span class="line">        <span class="string">&quot;count&quot;</span>: <span class="number">4</span>,</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;骚扰行为&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;inappropriate&quot;</span>,</span><br><span class="line">        <span class="string">&quot;count&quot;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;不当内容&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="全局拉黑-解除拉黑用户">全局拉黑/解除拉黑用户</h3><h4 id="POST-https-i-weread-qq-com-friend-globalBlack">POST <a href="https://i.weread.qq.com/friend/globalBlack">https://i.weread.qq.com/friend/globalBlack</a></h4><p>对用户进行全局拉黑或解除拉黑操作。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: [<span class="number">123456</span>, <span class="number">789012</span>, <span class="number">345678</span>],     <span class="comment">// 用户VID列表</span></span><br><span class="line">  <span class="string">&quot;unBlack&quot;</span>: <span class="number">0</span>                         <span class="comment">// 是否解除拉黑 (0: 拉黑, 1: 解除拉黑)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;success&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;processedUsers&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;userVid&quot;</span>: <span class="number">123456</span>,</span><br><span class="line">        <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;用户1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">        <span class="string">&quot;action&quot;</span>: <span class="string">&quot;blocked&quot;</span>              <span class="comment">// 操作结果: blocked/unblocked</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;userVid&quot;</span>: <span class="number">789012</span>,</span><br><span class="line">        <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;用户2&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">        <span class="string">&quot;action&quot;</span>: <span class="string">&quot;blocked&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;userVid&quot;</span>: <span class="number">345678</span>,</span><br><span class="line">        <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;用户3&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="string">&quot;failed&quot;</span>,</span><br><span class="line">        <span class="string">&quot;error&quot;</span>: <span class="string">&quot;用户不存在&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;successCount&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;failedCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;operationTime&quot;</span>: <span class="number">1640995200000</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="移除粉丝">移除粉丝</h3><h4 id="POST-https-i-weread-qq-com-friend-removeFollowers">POST <a href="https://i.weread.qq.com/friend/removeFollowers">https://i.weread.qq.com/friend/removeFollowers</a></h4><p>移除指定的粉丝。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: [<span class="number">123456</span>, <span class="number">789012</span>, <span class="number">345678</span>]      <span class="comment">// 要移除的粉丝VID列表</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;success&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;removedFollowers&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;userVid&quot;</span>: <span class="number">123456</span>,</span><br><span class="line">        <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;粉丝1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="string">&quot;removed&quot;</span>,</span><br><span class="line">        <span class="string">&quot;removeTime&quot;</span>: <span class="number">1640995200000</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;userVid&quot;</span>: <span class="number">789012</span>,</span><br><span class="line">        <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;粉丝2&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="string">&quot;removed&quot;</span>,</span><br><span class="line">        <span class="string">&quot;removeTime&quot;</span>: <span class="number">1640995200000</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;userVid&quot;</span>: <span class="number">345678</span>,</span><br><span class="line">        <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;粉丝3&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="string">&quot;failed&quot;</span>,</span><br><span class="line">        <span class="string">&quot;error&quot;</span>: <span class="string">&quot;用户未关注&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;successCount&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;failedCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;remainingFollowers&quot;</span>: <span class="number">1248</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>配置管理 API</h1><p>微信读书配置管理相关的 API 接口，包括设备配置、Hub Token 管理和应用宝配置。</p><h2 id="解绑-Hub-Token">解绑 Hub Token</h2><h3 id="POST-https-i-weread-qq-com-updateConfig">POST <a href="https://i.weread.qq.com/updateConfig">https://i.weread.qq.com/updateConfig</a></h3><p>解绑设备的 Hub Token。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;disHubToken&quot;</span>: <span class="number">123456789</span>,    <span class="comment">// 要解绑的 Hub Token</span></span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_id_here&quot;</span> <span class="comment">// 设备 ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;errmsg&quot;</span>: <span class="string">&quot;success&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="更新应用宝配置">更新应用宝配置</h2><h3 id="POST-https-i-weread-qq-com-updateConfig-2">POST <a href="https://i.weread.qq.com/updateConfig">https://i.weread.qq.com/updateConfig</a></h3><p>更新应用宝相关配置。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;trackId&quot;</span>: <span class="string">&quot;track_id_here&quot;</span>,  <span class="comment">// 跟踪 ID</span></span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_id_here&quot;</span> <span class="comment">// 设备 ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;errmsg&quot;</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;trackId&quot;</span>: <span class="string">&quot;track_id_here&quot;</span>,</span><br><span class="line">    <span class="string">&quot;status&quot;</span>: <span class="string">&quot;updated&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="设备配置管理">设备配置管理</h2><h3 id="批量配置更新">批量配置更新</h3><h4 id="POST-https-i-weread-qq-com-updateConfig-3">POST <a href="https://i.weread.qq.com/updateConfig">https://i.weread.qq.com/updateConfig</a></h4><p>支持批量更新多种配置项。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_id_here&quot;</span>,</span><br><span class="line">  <span class="string">&quot;disHubToken&quot;</span>: <span class="number">123456789</span>,        <span class="comment">// 可选：解绑 Hub Token</span></span><br><span class="line">  <span class="string">&quot;trackId&quot;</span>: <span class="string">&quot;track_id_here&quot;</span>,      <span class="comment">// 可选：应用宝跟踪 ID</span></span><br><span class="line">  <span class="string">&quot;accountsets&quot;</span>: &#123;                 <span class="comment">// 可选：账户设置</span></span><br><span class="line">    <span class="string">&quot;setting1&quot;</span>: <span class="string">&quot;value1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;setting2&quot;</span>: <span class="string">&quot;value2&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;pushSettings&quot;</span>: &#123;                <span class="comment">// 可选：推送设置</span></span><br><span class="line">    <span class="string">&quot;enablePush&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;pushTypes&quot;</span>: [<span class="string">&quot;reading&quot;</span>, <span class="string">&quot;social&quot;</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>英文阅读 API</h1><p>微信读书英文阅读功能相关的 API 接口，包括英文书籍阅读状态管理、翻译功能等。</p><h2 id="英文书籍阅读">英文书籍阅读</h2><h3 id="POST-https-i-weread-qq-com-en-bookread">POST <a href="https://i.weread.qq.com/en/bookread">https://i.weread.qq.com/en/bookread</a></h3><p>处理英文书籍的阅读状态、翻译和免费试读功能。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,        <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;read&quot;</span>: [                        <span class="comment">// 阅读状态数组</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,             <span class="comment">// 章节UID</span></span><br><span class="line">      <span class="string">&quot;status&quot;</span>: <span class="string">&quot;reading&quot;</span>,         <span class="comment">// 阅读状态: reading, completed, paused</span></span><br><span class="line">      <span class="string">&quot;progress&quot;</span>: <span class="number">0.5</span>,             <span class="comment">// 阅读进度 (0-1)</span></span><br><span class="line">      <span class="string">&quot;readTime&quot;</span>: <span class="number">1800</span>,            <span class="comment">// 阅读时长（秒）</span></span><br><span class="line">      <span class="string">&quot;startTime&quot;</span>: <span class="number">1640995200</span>,     <span class="comment">// 开始时间戳</span></span><br><span class="line">      <span class="string">&quot;endTime&quot;</span>: <span class="number">1640997000</span>        <span class="comment">// 结束时间戳</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;reference&quot;</span>: &#123;                   <span class="comment">// 参考信息</span></span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;translation&quot;</span>,         <span class="comment">// 类型: translation, dictionary, grammar</span></span><br><span class="line">    <span class="string">&quot;source&quot;</span>: <span class="string">&quot;google&quot;</span>,            <span class="comment">// 翻译源: google, baidu, youdao</span></span><br><span class="line">    <span class="string">&quot;targetLanguage&quot;</span>: <span class="string">&quot;zh-CN&quot;</span>,     <span class="comment">// 目标语言</span></span><br><span class="line">    <span class="string">&quot;originalText&quot;</span>: <span class="string">&quot;Hello world&quot;</span>, <span class="comment">// 原文</span></span><br><span class="line">    <span class="string">&quot;translatedText&quot;</span>: <span class="string">&quot;你好世界&quot;</span>    <span class="comment">// 译文</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;freeTrial&quot;</span>: <span class="number">1</span>,                  <span class="comment">// 免费试读标识 (0: 否, 1: 是)</span></span><br><span class="line">  <span class="string">&quot;settings&quot;</span>: &#123;                    <span class="comment">// 阅读设置</span></span><br><span class="line">    <span class="string">&quot;autoTranslate&quot;</span>: <span class="literal">true</span>,         <span class="comment">// 自动翻译</span></span><br><span class="line">    <span class="string">&quot;showPinyin&quot;</span>: <span class="literal">false</span>,           <span class="comment">// 显示拼音</span></span><br><span class="line">    <span class="string">&quot;fontSize&quot;</span>: <span class="number">16</span>,                <span class="comment">// 字体大小</span></span><br><span class="line">    <span class="string">&quot;lineSpacing&quot;</span>: <span class="number">1.5</span>             <span class="comment">// 行间距</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;success&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;readingProgress&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;totalChapters&quot;</span>: <span class="number">20</span>,</span><br><span class="line">      <span class="string">&quot;completedChapters&quot;</span>: <span class="number">5</span>,</span><br><span class="line">      <span class="string">&quot;currentChapter&quot;</span>: <span class="number">6</span>,</span><br><span class="line">      <span class="string">&quot;overallProgress&quot;</span>: <span class="number">0.25</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;translationStats&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;wordsTranslated&quot;</span>: <span class="number">150</span>,</span><br><span class="line">      <span class="string">&quot;phrasesLearned&quot;</span>: <span class="number">25</span>,</span><br><span class="line">      <span class="string">&quot;dailyGoal&quot;</span>: <span class="number">200</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;achievements&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;reading_streak&quot;</span>,</span><br><span class="line">        <span class="string">&quot;days&quot;</span>: <span class="number">7</span>,</span><br><span class="line">        <span class="string">&quot;reward&quot;</span>: <span class="string">&quot;连续阅读7天&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="翻译功能">翻译功能</h2><h3 id="实时翻译">实时翻译</h3><p>支持多种翻译源的实时翻译功能。</p><p><strong>翻译源配置:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">TranslationSources</span> = &#123;</span><br><span class="line">  <span class="attr">GOOGLE</span>: <span class="string">&#x27;google&#x27;</span>,</span><br><span class="line">  <span class="attr">BAIDU</span>: <span class="string">&#x27;baidu&#x27;</span>, </span><br><span class="line">  <span class="attr">YOUDAO</span>: <span class="string">&#x27;youdao&#x27;</span>,</span><br><span class="line">  <span class="attr">MICROSOFT</span>: <span class="string">&#x27;microsoft&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">SupportedLanguages</span> = &#123;</span><br><span class="line">  <span class="attr">ENGLISH</span>: <span class="string">&#x27;en&#x27;</span>,</span><br><span class="line">  <span class="attr">CHINESE_SIMPLIFIED</span>: <span class="string">&#x27;zh-CN&#x27;</span>,</span><br><span class="line">  <span class="attr">CHINESE_TRADITIONAL</span>: <span class="string">&#x27;zh-TW&#x27;</span>,</span><br><span class="line">  <span class="attr">JAPANESE</span>: <span class="string">&#x27;ja&#x27;</span>,</span><br><span class="line">  <span class="attr">KOREAN</span>: <span class="string">&#x27;ko&#x27;</span>,</span><br><span class="line">  <span class="attr">FRENCH</span>: <span class="string">&#x27;fr&#x27;</span>,</span><br><span class="line">  <span class="attr">GERMAN</span>: <span class="string">&#x27;de&#x27;</span>,</span><br><span class="line">  <span class="attr">SPANISH</span>: <span class="string">&#x27;es&#x27;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;note flat&quot;&gt;&lt;p&gt;CC BY-NC-SA 4.0&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;通用&lt;code&gt;headers&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class</summary>
      
    
    
    
    <category term="微信读书客户端逆向" scheme="https://yumi1.top/categories/%E5%BE%AE%E4%BF%A1%E8%AF%BB%E4%B9%A6%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%80%86%E5%90%91/"/>
    
    
    <category term="漏洞分析" scheme="https://yumi1.top/tags/%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>微信读书客户端 逆向 api文档-2</title>
    <link href="https://yumi1.top/weread-security-analysis-3/"/>
    <id>https://yumi1.top/weread-security-analysis-3/</id>
    <published>2025-08-04T12:31:01.000Z</published>
    <updated>2025-08-04T14:39:44.947Z</updated>
    
    <content type="html"><![CDATA[<div class="note flat"><p>CC BY-NC-SA 4.0</p></div><p>通用<code>headers</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">      <span class="string">&#x27;vid&#x27;</span>: vid.<span class="title function_">toString</span>(),</span><br><span class="line">      <span class="string">&#x27;skey&#x27;</span>: skey,</span><br><span class="line">      <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>登录在<a href="https://yumi1.top/weread-security-analysis-2/">微信读书逆向分析-1</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 使用 refresh_token 登录</span></span><br><span class="line"><span class="keyword">const</span> loginResponse = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`<span class="subst">$&#123;API_BASE&#125;</span>/login`</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123; <span class="string">&#x27;User-Agent&#x27;</span>: <span class="variable constant_">USER_AGENT</span> &#125;,</span><br><span class="line">  <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">    <span class="attr">deviceId</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">    <span class="attr">refCgi</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">refreshToken</span>: <span class="string">&#x27;your_refresh_token&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; vid, skey &#125; = <span class="keyword">await</span> loginResponse.<span class="title function_">json</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 使用 vid 和 skey 调用其他 API</span></span><br><span class="line"><span class="keyword">const</span> userProfile = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`<span class="subst">$&#123;API_BASE&#125;</span>/user/profile`</span>, &#123;</span><br><span class="line">  <span class="attr">headers</span>: <span class="title function_">getHeaders</span>(vid, skey)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1>错误码</h1><h2 id="通用错误码">通用错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>0</td><td>SUCCESS</td><td>成功</td></tr><tr><td>-2001</td><td>ErrorUnknown</td><td>未知错误</td></tr><tr><td>-2002</td><td>ErrorUndone</td><td>未完成</td></tr><tr><td>-2003</td><td>ErrorInvalidParam</td><td>无效参数</td></tr><tr><td>-2014</td><td>ErrorOverFreq</td><td>请求过于频繁</td></tr><tr><td>-2016</td><td>ErrorSvrReadOnly</td><td>服务器只读模式</td></tr><tr><td>-2018</td><td>ErrorAppVersionOut</td><td>应用版本过期</td></tr><tr><td>-2020</td><td>ErrorConnFail</td><td>连接失败</td></tr><tr><td>-2051</td><td>ErrorOverLimit</td><td>超出限制</td></tr><tr><td>-2053</td><td>ErrorSensitiveWord</td><td>敏感词汇</td></tr></tbody></table><h2 id="认证相关错误码">认证相关错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2004</td><td>ErrorInvalidVid</td><td>无效的用户ID</td></tr><tr><td>-2005</td><td>ErrorInvalidSkey</td><td>无效的会话密钥</td></tr><tr><td>-2006</td><td>ErrorInvalidOpenid</td><td>无效的OpenID</td></tr><tr><td>-2010</td><td>ErrorNoVid</td><td>用户不存在</td></tr><tr><td>-2011</td><td>ErrorGenSkey</td><td>生成会话密钥失败</td></tr><tr><td>-2012</td><td>ErrorSessionTimeout</td><td>登录超时</td></tr><tr><td>-2013</td><td>ErrorAuth</td><td>认证失败</td></tr><tr><td>-2017</td><td>ErrorVidReadOnly</td><td>用户只读模式</td></tr><tr><td>-2041</td><td>ErrorNeedVerify</td><td>需要验证</td></tr><tr><td>-2050</td><td>ErrorVidBlacked</td><td>用户被拉黑</td></tr><tr><td>-2054</td><td>ErrorInvalidToken</td><td>无效的令牌</td></tr><tr><td>-2063</td><td>ErrorVerExpired</td><td>验证过期</td></tr><tr><td>-2080</td><td>ErrorWeChatComm</td><td>微信通信错误</td></tr><tr><td>-2081</td><td>ErrorWeChatConnect</td><td>微信连接错误</td></tr></tbody></table><h2 id="用户相关错误码">用户相关错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2026</td><td>ErrorAccountSvrFail</td><td>账户服务失败</td></tr><tr><td>-2060</td><td>ErrorNotFriend</td><td>不是好友</td></tr><tr><td>-2061</td><td>ErrorUserInfoFail</td><td>获取用户信息失败</td></tr><tr><td>-2090</td><td>ErrorAntispamComm</td><td>反垃圾通信错误</td></tr><tr><td>-2704</td><td>ErrorUserForbidChat</td><td>用户禁止聊天</td></tr><tr><td>-2997</td><td>ErrorAccountAlreadyDeleted</td><td>账户已删除</td></tr><tr><td>-2998</td><td>ErrorAccountRevoked</td><td>账户已撤销</td></tr></tbody></table><h2 id="书籍相关错误码">书籍相关错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2008</td><td>ErrorInvalidBookid</td><td>无效的书籍ID</td></tr><tr><td>-2024</td><td>ErrorBookSvrFail</td><td>书籍服务失败</td></tr><tr><td>-2030</td><td>ErrorNoBook</td><td>书籍不存在</td></tr><tr><td>-2031</td><td>ErrorNoReview</td><td>书评不存在</td></tr><tr><td>-2032</td><td>ErrorNoRate</td><td>评分不存在</td></tr><tr><td>-2033</td><td>ErrorNoBookInfo</td><td>书籍信息不存在</td></tr><tr><td>-2034</td><td>ErrorNoMark</td><td>标记不存在</td></tr><tr><td>-2035</td><td>ErrorNoComment</td><td>评论不存在</td></tr><tr><td>-2037</td><td>ErrorNoBookInventory</td><td>书籍库存不足</td></tr><tr><td>-2040</td><td>ErrorBookLackContent</td><td>书籍缺少内容</td></tr><tr><td>-2311</td><td>ErrorBorrowFreeBook</td><td>借阅免费书籍错误</td></tr><tr><td>-2312</td><td>ErrorBorrowPaid</td><td>借阅已付费</td></tr><tr><td>-2313</td><td>ErrorBorrowNotPaid</td><td>借阅未付费</td></tr><tr><td>-2314</td><td>ErrorBorrowInvalidStatus</td><td>借阅状态无效</td></tr><tr><td>-2315</td><td>ErrorBorrowInvalidData</td><td>借阅数据无效</td></tr><tr><td>-2316</td><td>ErrorBorrowOut</td><td>借阅超时</td></tr><tr><td>-2317</td><td>ErrorBorrowing</td><td>正在借阅中</td></tr><tr><td>-2531</td><td>ErrorBookRunning</td><td>书籍处理中</td></tr><tr><td>-2533</td><td>ErrorInvalidBookInfo</td><td>无效的书籍信息</td></tr><tr><td>-2534</td><td>ErrorNoChapterInData</td><td>数据中无章节</td></tr><tr><td>-2538</td><td>ErrorPreSellBook</td><td>预售书籍</td></tr><tr><td>-2999</td><td>ErrorUploadBookOverLimit</td><td>上传书籍超出限制</td></tr></tbody></table><h2 id="支付相关错误码">支付相关错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2009</td><td>ErrorInvalidPrice</td><td>无效价格</td></tr><tr><td>-2027</td><td>ErrorPaySvrFail</td><td>支付服务失败</td></tr><tr><td>-2101</td><td>ErrorPayKvSelect</td><td>支付KV查询失败</td></tr><tr><td>-2102</td><td>ErrorPayKvInsert</td><td>支付KV插入失败</td></tr><tr><td>-2103</td><td>ErrorPayKvUpdate</td><td>支付KV更新失败</td></tr><tr><td>-2104</td><td>ErrorPayKvParse</td><td>支付KV解析失败</td></tr><tr><td>-2105</td><td>ErrorPayKvDump</td><td>支付KV导出失败</td></tr><tr><td>-2111</td><td>ErrorPayFetchBalance</td><td>获取余额失败</td></tr><tr><td>-2112</td><td>ErrorPayBalanceNotEnough</td><td>余额不足</td></tr><tr><td>-2113</td><td>ErrorPayPayApi</td><td>支付API错误</td></tr><tr><td>-2114</td><td>ErrorPayPresentApi</td><td>赠送API错误</td></tr><tr><td>-2115</td><td>ErrorPayMidasSysErr</td><td>米大师系统错误</td></tr><tr><td>-2116</td><td>ErrorPayMidasLogicErr</td><td>米大师逻辑错误</td></tr><tr><td>-2117</td><td>ErrorPayRollbackSucc</td><td>支付回滚成功</td></tr><tr><td>-2118</td><td>ErrorPayRollbackFail</td><td>支付回滚失败</td></tr><tr><td>-2119</td><td>ErrorPayAppType</td><td>支付应用类型错误</td></tr><tr><td>-2121</td><td>ErrorPayPresentAuth</td><td>赠送授权错误</td></tr><tr><td>-2123</td><td>ErrPayMemberCardNotEnough</td><td>会员卡不足</td></tr><tr><td>-2201</td><td>ErrorPayPayingBook</td><td>书籍支付中</td></tr><tr><td>-2202</td><td>ErrorPayBookPaidAlready</td><td>书籍已付费</td></tr><tr><td>-2203</td><td>ErrorPayBookNotExist</td><td>支付书籍不存在</td></tr><tr><td>-2204</td><td>ErrorPayFetchBookPrice</td><td>获取书籍价格失败</td></tr><tr><td>-2205</td><td>ErrorPayFetchNotEntireBook</td><td>获取非完整书籍失败</td></tr><tr><td>-2206</td><td>ErrorPayFreeBook</td><td>支付免费书籍</td></tr><tr><td>-2207</td><td>ErrorPayLimitFreeBook</td><td>限制免费书籍</td></tr><tr><td>-2208</td><td>ErrorPayNoBillno</td><td>无账单号</td></tr><tr><td>-2221</td><td>ErrorPayChaptersPaying</td><td>章节支付中</td></tr><tr><td>-2222</td><td>ErrorPayChapterIdsNull</td><td>章节ID为空</td></tr><tr><td>-2223</td><td>ErrorPayChapterAutoPayDisable</td><td>章节自动支付禁用</td></tr><tr><td>-2224</td><td>ErrorPayChapterFree</td><td>章节免费</td></tr><tr><td>-2225</td><td>ErrorPayChapterPriceEntireBook</td><td>章节价格为整本书</td></tr><tr><td>-2226</td><td>ErrorPayChapterPriceLack</td><td>章节价格不足</td></tr><tr><td>-2227</td><td>ErrorPayChaptersPartBoughtAlready</td><td>章节部分已购买</td></tr><tr><td>-2228</td><td>ErrorPayChaptersAllBoughtAlready</td><td>章节全部已购买</td></tr><tr><td>-2229</td><td>ErrorPayChaptersAutoPayClosed</td><td>章节自动支付关闭</td></tr><tr><td>-2281</td><td>ErrorPayPriceChanged</td><td>价格已变更</td></tr><tr><td>-2282</td><td>ErrorPayBookNumLimit</td><td>书籍数量限制</td></tr><tr><td>-2283</td><td>ErrorPayChargeNumLimit</td><td>充值数量限制</td></tr><tr><td>-2284</td><td>ErrorPaySoldOut</td><td>已售罄</td></tr><tr><td>-2285</td><td>ErrorPayDuplicated</td><td>重复支付</td></tr><tr><td>-2288</td><td>ErrorPayCollageCard</td><td>拼团卡错误</td></tr><tr><td>-2290</td><td>ErrorCouponUsed</td><td>优惠券已使用</td></tr><tr><td>-2298</td><td>ErrPayMoneyNotSendBook</td><td>付费未发书</td></tr><tr><td>-2299</td><td>ErrorPayUnknown</td><td>支付未知错误</td></tr></tbody></table><h2 id="书评相关错误码">书评相关错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2301</td><td>ErrorReviewUid</td><td>书评UID错误</td></tr><tr><td>-2302</td><td>ErrorReviewNotFound</td><td>书评不存在</td></tr><tr><td>-2303</td><td>ErrorReviewDeleted</td><td>书评已删除</td></tr><tr><td>-2304</td><td>ErrorReviewRefactorFail</td><td>书评重构失败</td></tr><tr><td>-2305</td><td>ErrorReviewFljBlock</td><td>书评被屏蔽</td></tr><tr><td>-2306</td><td>ErrorReviewTooLarge</td><td>书评过大</td></tr><tr><td>-2307</td><td>ErrorReviewInfoCorrupted</td><td>书评信息损坏</td></tr><tr><td>-2351</td><td>ErrorBookmarkUid</td><td>书签UID错误</td></tr><tr><td>-2352</td><td>ErrorBookmarkNotFound</td><td>书签不存在</td></tr></tbody></table><h2 id="网络相关错误码">网络相关错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2021</td><td>ErrorSQLTruncated</td><td>SQL截断</td></tr><tr><td>-2022</td><td>ErrorSQLExecFail</td><td>SQL执行失败</td></tr><tr><td>-2023</td><td>ErrorStrkvFail</td><td>字符串KV失败</td></tr><tr><td>-2025</td><td>ErrorStoreSvrFail</td><td>商店服务失败</td></tr><tr><td>-2028</td><td>ErrorKvFail</td><td>KV操作失败</td></tr><tr><td>-2029</td><td>ErrorOtherSvrFail</td><td>其他服务失败</td></tr><tr><td>-2500</td><td>ErrorRemoteFail</td><td>远程调用失败</td></tr><tr><td>-2539</td><td>ErrorXingeErr</td><td>信鸽推送错误</td></tr></tbody></table><h2 id="文件操作错误码">文件操作错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2501</td><td>ErrorDbOpErr</td><td>数据库操作错误</td></tr><tr><td>-2502</td><td>ErrorParseFail</td><td>解析失败</td></tr><tr><td>-2503</td><td>ErrorArgsMiss</td><td>参数缺失</td></tr><tr><td>-2504</td><td>ErrorTypeErr</td><td>类型错误</td></tr><tr><td>-2505</td><td>ErrorArgsErr</td><td>参数错误</td></tr><tr><td>-2506</td><td>ErrorHttpDownload</td><td>HTTP下载错误</td></tr><tr><td>-2507</td><td>ErrorFileNotExist</td><td>文件不存在</td></tr><tr><td>-2508</td><td>ErrorConvert</td><td>转换错误</td></tr><tr><td>-2509</td><td>ErrorDocNotObejct</td><td>文档非对象</td></tr><tr><td>-2510</td><td>ErrorOpenFile</td><td>打开文件错误</td></tr><tr><td>-2511</td><td>ErrorWriteFile</td><td>写文件错误</td></tr><tr><td>-2512</td><td>ErrorUnknownArgs</td><td>未知参数</td></tr><tr><td>-2513</td><td>ErrorLoadFile</td><td>加载文件错误</td></tr><tr><td>-2514</td><td>ErrorFileOutTime</td><td>文件超时</td></tr><tr><td>-2515</td><td>ErrorGetInfo</td><td>获取信息错误</td></tr><tr><td>-2516</td><td>ErrorNotLoadFile</td><td>未加载文件</td></tr><tr><td>-2517</td><td>ErrorNotArray</td><td>非数组类型</td></tr><tr><td>-2518</td><td>ErrorFileContent</td><td>文件内容错误</td></tr><tr><td>-2519</td><td>ErrorStatFileFail</td><td>文件状态失败</td></tr><tr><td>-2520</td><td>ErrorChapSzNotMatch</td><td>章节大小不匹配</td></tr><tr><td>-2521</td><td>ErrorDBNoUpdate</td><td>数据库无更新</td></tr><tr><td>-2522</td><td>ErrorUnknow</td><td>未知错误</td></tr><tr><td>-2523</td><td>ErrorkvTypeErr</td><td>KV类型错误</td></tr><tr><td>-2524</td><td>ErrorEpubDownloadErr</td><td>EPUB下载错误</td></tr><tr><td>-2525</td><td>ErrorParseCss</td><td>CSS解析错误</td></tr><tr><td>-2526</td><td>ErrorZipOp</td><td>ZIP操作错误</td></tr><tr><td>-2527</td><td>ErrorHTMLOP</td><td>HTML操作错误</td></tr><tr><td>-2528</td><td>ErrorParseXML</td><td>XML解析错误</td></tr><tr><td>-2529</td><td>ErrorPosTrans</td><td>位置转换错误</td></tr><tr><td>-2530</td><td>ErrorUidNotFound</td><td>UID未找到</td></tr><tr><td>-2532</td><td>ErrorSerilizeStr</td><td>序列化字符串错误</td></tr><tr><td>-2535</td><td>ErrorCheckLevel</td><td>检查级别错误</td></tr><tr><td>-2536</td><td>ErrorNoUpdate</td><td>无更新</td></tr><tr><td>-2537</td><td>ErrorSetColumnFail</td><td>设置列失败</td></tr><tr><td>-2540</td><td>ErrorPosConvertErr</td><td>位置转换错误</td></tr><tr><td>-2541</td><td>ErrorHTMLToTextErr</td><td>HTML转文本错误</td></tr><tr><td>-2542</td><td>ErrorGetAbstractErr</td><td>获取摘要错误</td></tr><tr><td>-2062</td><td>ErrorZipFail</td><td>ZIP失败</td></tr></tbody></table><h2 id="特殊功能错误码">特殊功能错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2015</td><td>ErrorPwd</td><td>密码错误</td></tr><tr><td>-2600</td><td>ErrorForgetSendMail</td><td>忘记发送邮件</td></tr><tr><td>-2601</td><td>ErrorCheckTokenFail</td><td>检查令牌失败</td></tr><tr><td>-2602</td><td>ErrorEmailFormat</td><td>邮件格式错误</td></tr><tr><td>-2603</td><td>ErrorEmail</td><td>邮件错误</td></tr><tr><td>-2650</td><td>ErrorInvalidAssistCount</td><td>无效助力次数</td></tr><tr><td>-2651</td><td>ErrorInvalidPromoBook</td><td>无效推广书籍</td></tr><tr><td>-2652</td><td>ErrorInvalidSelfAssist</td><td>无效自助</td></tr><tr><td>-2653</td><td>ErrorLimitCount</td><td>限制次数</td></tr><tr><td>-2654</td><td>ErrorGenerateGiftErr</td><td>生成礼品错误</td></tr><tr><td>-2655</td><td>ErrorSelfReceive</td><td>自己接收</td></tr><tr><td>-2656</td><td>ErrorActivityEnd</td><td>活动结束</td></tr><tr><td>-2657</td><td>ErrorGiftBagReceived</td><td>礼品袋已接收</td></tr><tr><td>-2666</td><td>ErrorLimitFreeNoQualified</td><td>限免无资格</td></tr><tr><td>-2700</td><td>ErrorMissImg</td><td>缺少图片</td></tr><tr><td>-2701</td><td>ErrorReject</td><td>拒绝</td></tr><tr><td>-2801</td><td>ErrorArticleLockOccupied</td><td>文章锁定被占用</td></tr><tr><td>-2809</td><td>ErrorArticleReleaseAgain</td><td>文章重复发布</td></tr><tr><td>-2810</td><td>ErrorArticleNoArticle</td><td>无文章</td></tr><tr><td>-2880</td><td>ErrorReadFundAlreadyObtained</td><td>阅读基金已获得</td></tr><tr><td>-2910</td><td>ErrorArticleQRScanLoginTimeOut</td><td>文章二维码扫描登录超时</td></tr><tr><td>-2924</td><td>ErrorTeenRestrict</td><td>青少年限制</td></tr><tr><td>-2958</td><td>ErrorMPArticleDeleted</td><td>公众号文章已删除</td></tr><tr><td>-2992</td><td>ErrorCollageExpired</td><td>拼团过期</td></tr></tbody></table><h1>书评管理 API</h1><p>微信读书书评管理相关的完整 API 接口，包括书评创建、编辑、删除、互动、举报等全生命周期功能。</p><h2 id="书评创建-API">书评创建 API</h2><h3 id="添加普通书评">添加普通书评</h3><h4 id="POST-https-i-weread-qq-com-review-add">POST <a href="https://i.weread.qq.com/review/add">https://i.weread.qq.com/review/add</a></h4><p>创建普通的书籍书评。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,             <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;content&quot;</span>: <span class="string">&quot;这本书非常精彩...&quot;</span>,       <span class="comment">// 书评内容</span></span><br><span class="line">  <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,                     <span class="comment">// 章节UID</span></span><br><span class="line">  <span class="string">&quot;chapterName&quot;</span>: <span class="string">&quot;第一章&quot;</span>,             <span class="comment">// 章节名称</span></span><br><span class="line">  <span class="string">&quot;range&quot;</span>: <span class="string">&quot;100-200&quot;</span>,                  <span class="comment">// 引用范围</span></span><br><span class="line">  <span class="string">&quot;translateMode&quot;</span>: <span class="string">&quot;zh&quot;</span>,               <span class="comment">// 翻译模式</span></span><br><span class="line">  <span class="string">&quot;shareMsg&quot;</span>: <span class="string">&quot;分享消息&quot;</span>,              <span class="comment">// 分享消息</span></span><br><span class="line">  <span class="string">&quot;contextAbstract&quot;</span>: <span class="string">&quot;上下文摘要&quot;</span>,     <span class="comment">// 上下文摘要</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">1</span>,                           <span class="comment">// 书评类型</span></span><br><span class="line">  <span class="string">&quot;bookVersion&quot;</span>: <span class="number">1</span>,                    <span class="comment">// 书籍版本</span></span><br><span class="line">  <span class="string">&quot;atUserVids&quot;</span>: [],                    <span class="comment">// @用户列表</span></span><br><span class="line">  <span class="string">&quot;isPrivate&quot;</span>: <span class="number">0</span>,                      <span class="comment">// 是否私密 (0: 公开, 1: 私密)</span></span><br><span class="line">  <span class="string">&quot;friendship&quot;</span>: <span class="number">0</span>,                     <span class="comment">// 好友可见性</span></span><br><span class="line">  <span class="string">&quot;refReviewId&quot;</span>: <span class="literal">null</span>,                 <span class="comment">// 引用书评ID</span></span><br><span class="line">  <span class="string">&quot;originalReviewId&quot;</span>: <span class="literal">null</span>,            <span class="comment">// 原始书评ID</span></span><br><span class="line">  <span class="string">&quot;htmlContent&quot;</span>: <span class="string">&quot;&lt;p&gt;HTML内容&lt;/p&gt;&quot;</span>,    <span class="comment">// HTML格式内容</span></span><br><span class="line">  <span class="string">&quot;topicRanges&quot;</span>: [],                   <span class="comment">// 话题范围</span></span><br><span class="line">  <span class="string">&quot;title&quot;</span>: <span class="string">&quot;书评标题&quot;</span>,                 <span class="comment">// 书评标题</span></span><br><span class="line">  <span class="string">&quot;shareToGroup&quot;</span>: <span class="number">0</span>,                   <span class="comment">// 分享到群组</span></span><br><span class="line">  <span class="string">&quot;notVisibleToFriends&quot;</span>: <span class="number">0</span>,            <span class="comment">// 对好友不可见</span></span><br><span class="line">  <span class="string">&quot;isFullImageReview&quot;</span>: <span class="number">0</span>,              <span class="comment">// 是否全图书评</span></span><br><span class="line">  <span class="string">&quot;pencilNote&quot;</span>: <span class="literal">null</span>,                  <span class="comment">// 手写笔记</span></span><br><span class="line">  <span class="string">&quot;colorStyle&quot;</span>: <span class="number">1</span>                      <span class="comment">// 颜色样式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>,</span><br><span class="line">    <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;content&quot;</span>: <span class="string">&quot;这本书非常精彩...&quot;</span>,</span><br><span class="line">    <span class="string">&quot;author&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_123&quot;</span>,</span><br><span class="line">      <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">      <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar.jpg&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;stats&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;likeCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;commentCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;shareCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;readCount&quot;</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;createTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">    <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">    <span class="string">&quot;status&quot;</span>: <span class="string">&quot;published&quot;</span>,</span><br><span class="line">    <span class="string">&quot;visibility&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;isPrivate&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">&quot;friendship&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;notVisibleToFriends&quot;</span>: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;bookInfo&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;title&quot;</span>: <span class="string">&quot;人工智能简史&quot;</span>,</span><br><span class="line">      <span class="string">&quot;author&quot;</span>: <span class="string">&quot;作者名&quot;</span>,</span><br><span class="line">      <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;https://example.com/cover.jpg&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="添加音频书评">添加音频书评</h3><h4 id="POST-https-i-weread-qq-com-review-add-2">POST <a href="https://i.weread.qq.com/review/add">https://i.weread.qq.com/review/add</a></h4><p>创建带音频的书评。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,             <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,                     <span class="comment">// 章节UID</span></span><br><span class="line">  <span class="string">&quot;range&quot;</span>: <span class="string">&quot;100-200&quot;</span>,                  <span class="comment">// 引用范围</span></span><br><span class="line">  <span class="string">&quot;shareMsg&quot;</span>: <span class="string">&quot;分享消息&quot;</span>,              <span class="comment">// 分享消息</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">2</span>,                           <span class="comment">// 类型（音频书评）</span></span><br><span class="line">  <span class="string">&quot;bookVersion&quot;</span>: <span class="number">1</span>,                    <span class="comment">// 书籍版本</span></span><br><span class="line">  <span class="string">&quot;audioId&quot;</span>: <span class="string">&quot;audio_789012&quot;</span>,           <span class="comment">// 音频ID</span></span><br><span class="line">  <span class="string">&quot;auInterval&quot;</span>: <span class="number">300</span>,                   <span class="comment">// 音频间隔（秒）</span></span><br><span class="line">  <span class="string">&quot;audioArticleId&quot;</span>: <span class="string">&quot;article_456&quot;</span>      <span class="comment">// 音频文章ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="添加公众号书评">添加公众号书评</h3><h4 id="POST-https-i-weread-qq-com-review-add-3">POST <a href="https://i.weread.qq.com/review/add">https://i.weread.qq.com/review/add</a></h4><p>为公众号文章创建书评。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;mp_article_123&quot;</span>,          <span class="comment">// 公众号文章ID</span></span><br><span class="line">  <span class="string">&quot;content&quot;</span>: <span class="string">&quot;这篇文章观点很新颖&quot;</span>,     <span class="comment">// 书评内容</span></span><br><span class="line">  <span class="string">&quot;range&quot;</span>: <span class="string">&quot;100-200&quot;</span>,                  <span class="comment">// 引用范围</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">1</span>,                           <span class="comment">// 书评类型</span></span><br><span class="line">  <span class="string">&quot;bookVersion&quot;</span>: <span class="number">1</span>,                    <span class="comment">// 版本</span></span><br><span class="line">  <span class="string">&quot;isPrivate&quot;</span>: <span class="number">0</span>,                      <span class="comment">// 是否私密</span></span><br><span class="line">  <span class="string">&quot;friendship&quot;</span>: <span class="number">0</span>,                     <span class="comment">// 好友可见性</span></span><br><span class="line">  <span class="string">&quot;refMpInfo&quot;</span>: &#123;                       <span class="comment">// 公众号信息</span></span><br><span class="line">    <span class="string">&quot;mpId&quot;</span>: <span class="string">&quot;mp_123&quot;</span>,</span><br><span class="line">    <span class="string">&quot;title&quot;</span>: <span class="string">&quot;文章标题&quot;</span>,</span><br><span class="line">    <span class="string">&quot;author&quot;</span>: <span class="string">&quot;公众号名称&quot;</span>,</span><br><span class="line">    <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://mp.weixin.qq.com/s/xxx&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;shareMsg&quot;</span>: <span class="string">&quot;分享消息&quot;</span>,              <span class="comment">// 分享消息</span></span><br><span class="line">  <span class="string">&quot;notVisibleToFriends&quot;</span>: <span class="number">0</span>             <span class="comment">// 对好友不可见</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="添加群组书评">添加群组书评</h3><h4 id="POST-https-i-weread-qq-com-review-add-4">POST <a href="https://i.weread.qq.com/review/add">https://i.weread.qq.com/review/add</a></h4><p>在群组中创建书评。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;content&quot;</span>: <span class="string">&quot;群组书评内容&quot;</span>,           <span class="comment">// 书评内容</span></span><br><span class="line">  <span class="string">&quot;groupId&quot;</span>: <span class="string">&quot;group_123&quot;</span>,             <span class="comment">// 群组ID</span></span><br><span class="line">  <span class="string">&quot;pictures&quot;</span>: [],                     <span class="comment">// 图片数组</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">1</span>,                          <span class="comment">// 书评类型</span></span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,            <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;notShareToFriend&quot;</span>: <span class="number">0</span>,              <span class="comment">// 不分享给好友</span></span><br><span class="line">  <span class="string">&quot;link&quot;</span>: <span class="literal">null</span>,                       <span class="comment">// 链接对象</span></span><br><span class="line">  <span class="string">&quot;topics&quot;</span>: [],                       <span class="comment">// 话题列表</span></span><br><span class="line">  <span class="string">&quot;isPrivate&quot;</span>: <span class="number">0</span>,                     <span class="comment">// 是否私密</span></span><br><span class="line">  <span class="string">&quot;friendship&quot;</span>: <span class="number">0</span>,                    <span class="comment">// 好友可见性</span></span><br><span class="line">  <span class="string">&quot;notVisibleToFriends&quot;</span>: <span class="number">0</span>            <span class="comment">// 对好友不可见</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="添加带评分的书评">添加带评分的书评</h3><h4 id="POST-https-i-weread-qq-com-review-add-5">POST <a href="https://i.weread.qq.com/review/add">https://i.weread.qq.com/review/add</a></h4><p>创建带星级评分的书评。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,             <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;content&quot;</span>: <span class="string">&quot;书评内容&quot;</span>,               <span class="comment">// 书评内容</span></span><br><span class="line">  <span class="string">&quot;range&quot;</span>: <span class="string">&quot;100-200&quot;</span>,                  <span class="comment">// 引用范围</span></span><br><span class="line">  <span class="string">&quot;translateMode&quot;</span>: <span class="string">&quot;zh&quot;</span>,               <span class="comment">// 翻译模式</span></span><br><span class="line">  <span class="string">&quot;shareMsg&quot;</span>: <span class="string">&quot;分享消息&quot;</span>,              <span class="comment">// 分享消息</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">1</span>,                           <span class="comment">// 书评类型</span></span><br><span class="line">  <span class="string">&quot;bookVersion&quot;</span>: <span class="number">1</span>,                    <span class="comment">// 书籍版本</span></span><br><span class="line">  <span class="string">&quot;atUserVids&quot;</span>: [],                    <span class="comment">// @用户列表</span></span><br><span class="line">  <span class="string">&quot;star&quot;</span>: <span class="number">5</span>,                           <span class="comment">// 星级评分 (1-5)</span></span><br><span class="line">  <span class="string">&quot;isPrivate&quot;</span>: <span class="number">0</span>,                      <span class="comment">// 是否私密</span></span><br><span class="line">  <span class="string">&quot;friendship&quot;</span>: <span class="number">0</span>,                     <span class="comment">// 好友可见性</span></span><br><span class="line">  <span class="string">&quot;htmlContent&quot;</span>: <span class="string">&quot;&lt;p&gt;HTML内容&lt;/p&gt;&quot;</span>,    <span class="comment">// HTML格式内容</span></span><br><span class="line">  <span class="string">&quot;topicRanges&quot;</span>: [],                   <span class="comment">// 话题范围</span></span><br><span class="line">  <span class="string">&quot;title&quot;</span>: <span class="string">&quot;书评标题&quot;</span>,                 <span class="comment">// 书评标题</span></span><br><span class="line">  <span class="string">&quot;notVisibleToFriends&quot;</span>: <span class="number">0</span>             <span class="comment">// 对好友不可见</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="添加专辑书评">添加专辑书评</h3><h4 id="POST-https-i-weread-qq-com-review-add-6">POST <a href="https://i.weread.qq.com/review/add">https://i.weread.qq.com/review/add</a></h4><p>为专辑创建书评。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;content&quot;</span>: <span class="string">&quot;专辑书评内容&quot;</span>,           <span class="comment">// 书评内容</span></span><br><span class="line">  <span class="string">&quot;trackId&quot;</span>: <span class="string">&quot;track_123&quot;</span>,             <span class="comment">// 音轨ID</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">3</span>,                          <span class="comment">// 类型（专辑书评）</span></span><br><span class="line">  <span class="string">&quot;isPrivate&quot;</span>: <span class="number">0</span>,                     <span class="comment">// 是否私密</span></span><br><span class="line">  <span class="string">&quot;friendship&quot;</span>: <span class="number">0</span>,                    <span class="comment">// 好友可见性</span></span><br><span class="line">  <span class="string">&quot;albumId&quot;</span>: <span class="string">&quot;album_456&quot;</span>,             <span class="comment">// 专辑ID</span></span><br><span class="line">  <span class="string">&quot;star&quot;</span>: <span class="number">4</span>,                          <span class="comment">// 星级评分</span></span><br><span class="line">  <span class="string">&quot;notVisibleToFriends&quot;</span>: <span class="number">0</span>            <span class="comment">// 对好友不可见</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="书评编辑-API">书评编辑 API</h2><h3 id="编辑书评内容">编辑书评内容</h3><h4 id="POST-https-i-weread-qq-com-review-useredit">POST <a href="https://i.weread.qq.com/review/useredit">https://i.weread.qq.com/review/useredit</a></h4><p>编辑已发布的书评内容和设置。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>,         <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;content&quot;</span>: <span class="string">&quot;修改后的书评内容&quot;</span>,       <span class="comment">// 新的书评内容</span></span><br><span class="line">  <span class="string">&quot;isPrivate&quot;</span>: <span class="number">0</span>,                      <span class="comment">// 是否私密</span></span><br><span class="line">  <span class="string">&quot;friendship&quot;</span>: <span class="number">0</span>,                     <span class="comment">// 好友可见性</span></span><br><span class="line">  <span class="string">&quot;notVisibleToFriends&quot;</span>: <span class="number">0</span>,            <span class="comment">// 对好友不可见</span></span><br><span class="line">  <span class="string">&quot;star&quot;</span>: <span class="number">4</span>,                           <span class="comment">// 星级评分</span></span><br><span class="line">  <span class="string">&quot;pictures&quot;</span>: [],                      <span class="comment">// 图片数组</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">1</span>,                           <span class="comment">// 书评类型</span></span><br><span class="line">  <span class="string">&quot;notShareToFriend&quot;</span>: <span class="number">0</span>,               <span class="comment">// 不分享给好友</span></span><br><span class="line">  <span class="string">&quot;link&quot;</span>: <span class="literal">null</span>,                        <span class="comment">// 链接对象</span></span><br><span class="line">  <span class="string">&quot;topics&quot;</span>: [],                        <span class="comment">// 话题列表</span></span><br><span class="line">  <span class="string">&quot;groupId&quot;</span>: <span class="literal">null</span>,                     <span class="comment">// 群组ID</span></span><br><span class="line">  <span class="string">&quot;bookVersion&quot;</span>: <span class="number">1</span>,                    <span class="comment">// 书籍版本</span></span><br><span class="line">  <span class="string">&quot;refMpInfo&quot;</span>: <span class="literal">null</span>,                   <span class="comment">// 公众号信息</span></span><br><span class="line">  <span class="string">&quot;shareMsg&quot;</span>: <span class="string">&quot;分享消息&quot;</span>,              <span class="comment">// 分享消息</span></span><br><span class="line">  <span class="string">&quot;trackId&quot;</span>: <span class="literal">null</span>,                     <span class="comment">// 音轨ID</span></span><br><span class="line">  <span class="string">&quot;albumId&quot;</span>: <span class="literal">null</span>,                     <span class="comment">// 专辑ID</span></span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,             <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,                     <span class="comment">// 章节UID</span></span><br><span class="line">  <span class="string">&quot;chapterName&quot;</span>: <span class="string">&quot;第一章&quot;</span>,             <span class="comment">// 章节名称</span></span><br><span class="line">  <span class="string">&quot;range&quot;</span>: <span class="string">&quot;100-200&quot;</span>,                  <span class="comment">// 引用范围</span></span><br><span class="line">  <span class="string">&quot;contextAbstract&quot;</span>: <span class="string">&quot;上下文摘要&quot;</span>,     <span class="comment">// 上下文摘要</span></span><br><span class="line">  <span class="string">&quot;atUserVids&quot;</span>: [],                    <span class="comment">// @用户列表</span></span><br><span class="line">  <span class="string">&quot;refReviewId&quot;</span>: <span class="literal">null</span>,                 <span class="comment">// 引用书评ID</span></span><br><span class="line">  <span class="string">&quot;originalReviewId&quot;</span>: <span class="literal">null</span>,            <span class="comment">// 原始书评ID</span></span><br><span class="line">  <span class="string">&quot;htmlContent&quot;</span>: <span class="string">&quot;&lt;p&gt;HTML内容&lt;/p&gt;&quot;</span>,    <span class="comment">// HTML格式内容</span></span><br><span class="line">  <span class="string">&quot;topicRanges&quot;</span>: [],                   <span class="comment">// 话题范围</span></span><br><span class="line">  <span class="string">&quot;title&quot;</span>: <span class="string">&quot;书评标题&quot;</span>,                 <span class="comment">// 书评标题</span></span><br><span class="line">  <span class="string">&quot;shareToGroup&quot;</span>: <span class="number">0</span>,                   <span class="comment">// 分享到群组</span></span><br><span class="line">  <span class="string">&quot;pencilNote&quot;</span>: <span class="literal">null</span>,                  <span class="comment">// 手写笔记</span></span><br><span class="line">  <span class="string">&quot;colorStyle&quot;</span>: <span class="number">1</span>                      <span class="comment">// 颜色样式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>,</span><br><span class="line">    <span class="string">&quot;content&quot;</span>: <span class="string">&quot;修改后的书评内容&quot;</span>,</span><br><span class="line">    <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995300000</span>,</span><br><span class="line">    <span class="string">&quot;editHistory&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;editTime&quot;</span>: <span class="number">1640995300000</span>,</span><br><span class="line">        <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;内容更新&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="简单编辑书评">简单编辑书评</h3><h4 id="POST-https-i-weread-qq-com-review-edit">POST <a href="https://i.weread.qq.com/review/edit">https://i.weread.qq.com/review/edit</a></h4><p>简单编辑书评的基本信息。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>,         <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,             <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,                     <span class="comment">// 章节UID</span></span><br><span class="line">  <span class="string">&quot;range&quot;</span>: <span class="string">&quot;100-200&quot;</span>                   <span class="comment">// 引用范围</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="书评互动-API">书评互动 API</h2><h3 id="点赞书评">点赞书评</h3><h4 id="POST-https-i-weread-qq-com-review-like">POST <a href="https://i.weread.qq.com/review/like">https://i.weread.qq.com/review/like</a></h4><p>为书评点赞或取消点赞。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>,         <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;isUnlike&quot;</span>: <span class="number">0</span>                        <span class="comment">// 是否取消点赞 (0: 点赞, 1: 取消点赞)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="不喜欢书评">不喜欢书评</h3><h4 id="POST-https-i-weread-qq-com-review-dislike">POST <a href="https://i.weread.qq.com/review/dislike">https://i.weread.qq.com/review/dislike</a></h4><p>标记不喜欢某个书评。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>,         <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;cancel&quot;</span>: <span class="number">0</span>                          <span class="comment">// 是否取消不喜欢 (0: 不喜欢, 1: 取消)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="转发书评">转发书评</h3><h4 id="POST-https-i-weread-qq-com-review-repost">POST <a href="https://i.weread.qq.com/review/repost">https://i.weread.qq.com/review/repost</a></h4><p>转发书评到自己的动态。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>,         <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;repost&quot;</span>: <span class="number">1</span>                          <span class="comment">// 转发标识 (1: 转发, 0: 取消转发)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="书评管理-API">书评管理 API</h2><h3 id="获取单个书评">获取单个书评</h3><h4 id="GET-review-single">GET /review/single</h4><p>获取指定书评的详细信息。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>,         <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;bookReviewCount&quot;</span>: <span class="number">10</span>,               <span class="comment">// 书评数量</span></span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;commentsCount&quot;</span>: <span class="number">20</span>,                 <span class="comment">// 评论数量</span></span><br><span class="line">  <span class="string">&quot;commentsDirection&quot;</span>: <span class="number">1</span>,              <span class="comment">// 评论方向</span></span><br><span class="line">  <span class="string">&quot;likesCount&quot;</span>: <span class="number">50</span>,                    <span class="comment">// 点赞数量</span></span><br><span class="line">  <span class="string">&quot;likesDirection&quot;</span>: <span class="number">1</span>,                 <span class="comment">// 点赞方向</span></span><br><span class="line">  <span class="string">&quot;groupId&quot;</span>: <span class="string">&quot;group_123&quot;</span>               <span class="comment">// 群组ID（可选）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;review&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>,</span><br><span class="line">      <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,</span><br><span class="line">      <span class="string">&quot;content&quot;</span>: <span class="string">&quot;这本书非常精彩...&quot;</span>,</span><br><span class="line">      <span class="string">&quot;author&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_123&quot;</span>,</span><br><span class="line">        <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">        <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;level&quot;</span>: <span class="number">15</span>,</span><br><span class="line">        <span class="string">&quot;isFollowing&quot;</span>: <span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;bookInfo&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;人工智能简史&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: <span class="string">&quot;作者名&quot;</span>,</span><br><span class="line">        <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;https://example.com/cover.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;isbn&quot;</span>: <span class="string">&quot;9787111234567&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;stats&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;likeCount&quot;</span>: <span class="number">156</span>,</span><br><span class="line">        <span class="string">&quot;commentCount&quot;</span>: <span class="number">23</span>,</span><br><span class="line">        <span class="string">&quot;shareCount&quot;</span>: <span class="number">8</span>,</span><br><span class="line">        <span class="string">&quot;readCount&quot;</span>: <span class="number">1250</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;createTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">      <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995300000</span>,</span><br><span class="line">      <span class="string">&quot;isLiked&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">&quot;isFollowed&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">&quot;visibility&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;isPrivate&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;friendship&quot;</span>: <span class="number">0</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;comments&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;commentId&quot;</span>: <span class="string">&quot;comment_123&quot;</span>,</span><br><span class="line">        <span class="string">&quot;content&quot;</span>: <span class="string">&quot;说得很有道理&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_456&quot;</span>,</span><br><span class="line">          <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;李四&quot;</span>,</span><br><span class="line">          <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar2.jpg&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;createTime&quot;</span>: <span class="number">1640995250000</span>,</span><br><span class="line">        <span class="string">&quot;likeCount&quot;</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="string">&quot;isLiked&quot;</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;likes&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_789&quot;</span>,</span><br><span class="line">        <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;王五&quot;</span>,</span><br><span class="line">        <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar3.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;likeTime&quot;</span>: <span class="number">1640995220000</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="加载更多书评评论">加载更多书评评论</h3><h4 id="GET-review-single-2">GET /review/single</h4><p>加载指定书评的更多评论。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>,         <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;commentsMaxIdx&quot;</span>: <span class="number">20</span>,                <span class="comment">// 评论最大索引</span></span><br><span class="line">  <span class="string">&quot;commentsCount&quot;</span>: <span class="number">10</span>,                 <span class="comment">// 评论数量</span></span><br><span class="line">  <span class="string">&quot;commentsDirection&quot;</span>: <span class="number">1</span>               <span class="comment">// 评论方向</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="加载更多书评点赞">加载更多书评点赞</h3><h4 id="GET-review-single-3">GET /review/single</h4><p>加载指定书评的更多点赞信息。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>,         <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;likesMaxIdx&quot;</span>: <span class="number">50</span>,                   <span class="comment">// 点赞最大索引</span></span><br><span class="line">  <span class="string">&quot;likesCount&quot;</span>: <span class="number">20</span>,                    <span class="comment">// 点赞数量</span></span><br><span class="line">  <span class="string">&quot;likesDirection&quot;</span>: <span class="number">1</span>                  <span class="comment">// 点赞方向</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="删除书评">删除书评</h3><h4 id="POST-https-i-weread-qq-com-review-delete">POST <a href="https://i.weread.qq.com/review/delete">https://i.weread.qq.com/review/delete</a></h4><p>删除指定的书评。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>          <span class="comment">// 书评ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="举报书评">举报书评</h3><h4 id="POST-https-i-weread-qq-com-review-accuse">POST <a href="https://i.weread.qq.com/review/accuse">https://i.weread.qq.com/review/accuse</a></h4><p>举报不当的书评内容。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;id&quot;</span>: <span class="string">&quot;review_789012&quot;</span>,               <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;reason&quot;</span>: [<span class="string">&quot;spam&quot;</span>, <span class="string">&quot;inappropriate&quot;</span>], <span class="comment">// 举报原因列表</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="string">&quot;review&quot;</span>,                    <span class="comment">// 举报类型</span></span><br><span class="line">  <span class="string">&quot;isBlack&quot;</span>: <span class="number">0</span>                         <span class="comment">// 是否拉黑 (0: 否, 1: 是)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="评论管理-API">评论管理 API</h2><h3 id="添加评论">添加评论</h3><h4 id="POST-https-i-weread-qq-com-review-comment">POST <a href="https://i.weread.qq.com/review/comment">https://i.weread.qq.com/review/comment</a></h4><p>为书评添加评论。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>,         <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;content&quot;</span>: <span class="string">&quot;这个观点很有意思&quot;</span>       <span class="comment">// 评论内容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="回复评论">回复评论</h3><h4 id="POST-https-i-weread-qq-com-review-comment-2">POST <a href="https://i.weread.qq.com/review/comment">https://i.weread.qq.com/review/comment</a></h4><p>回复指定用户的评论。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>,         <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;content&quot;</span>: <span class="string">&quot;回复内容&quot;</span>,               <span class="comment">// 回复内容</span></span><br><span class="line">  <span class="string">&quot;toUserVid&quot;</span>: <span class="number">123456</span>,                 <span class="comment">// 被回复用户VID</span></span><br><span class="line">  <span class="string">&quot;toCommentId&quot;</span>: <span class="string">&quot;comment_123&quot;</span>         <span class="comment">// 被回复评论ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="打赏评论">打赏评论</h3><h4 id="POST-https-i-weread-qq-com-review-comment-3">POST <a href="https://i.weread.qq.com/review/comment">https://i.weread.qq.com/review/comment</a></h4><p>为评论进行打赏。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>,         <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;content&quot;</span>: <span class="string">&quot;打赏评论内容&quot;</span>,           <span class="comment">// 打赏评论内容</span></span><br><span class="line">  <span class="string">&quot;isReward&quot;</span>: <span class="number">1</span>                        <span class="comment">// 是否为打赏评论 (1: 是)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="点赞评论">点赞评论</h3><h4 id="POST-https-i-weread-qq-com-review-commentlike">POST <a href="https://i.weread.qq.com/review/commentlike">https://i.weread.qq.com/review/commentlike</a></h4><p>为评论点赞或取消点赞。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;commentId&quot;</span>: <span class="string">&quot;comment_123&quot;</span>,          <span class="comment">// 评论ID</span></span><br><span class="line">  <span class="string">&quot;isUnlike&quot;</span>: <span class="number">0</span>                        <span class="comment">// 是否取消点赞 (0: 点赞, 1: 取消点赞)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="加载更多评论">加载更多评论</h3><h4 id="GET-review-commentloadmore">GET /review/commentloadmore</h4><p>加载更多评论内容。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>,         <span class="comment">// 书评ID（可选）</span></span><br><span class="line">  <span class="string">&quot;booklistId&quot;</span>: <span class="string">&quot;booklist_123&quot;</span>,        <span class="comment">// 书单ID（可选）</span></span><br><span class="line">  <span class="string">&quot;commentId&quot;</span>: <span class="string">&quot;comment_456&quot;</span>,          <span class="comment">// 评论ID（可选）</span></span><br><span class="line">  <span class="string">&quot;maxIdx&quot;</span>: <span class="number">20</span>,                        <span class="comment">// 最大索引（可选）</span></span><br><span class="line">  <span class="string">&quot;count&quot;</span>: <span class="number">10</span>,                         <span class="comment">// 获取数量（可选）</span></span><br><span class="line">  <span class="string">&quot;isExpandAll&quot;</span>: <span class="number">1</span>                     <span class="comment">// 是否展开全部</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="删除评论">删除评论</h3><h4 id="POST-https-i-weread-qq-com-review-delComment">POST <a href="https://i.weread.qq.com/review/delComment">https://i.weread.qq.com/review/delComment</a></h4><p>删除指定的评论。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;commentId&quot;</span>: <span class="string">&quot;comment_123&quot;</span>           <span class="comment">// 评论ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="相关内容-API">相关内容 API</h2><h3 id="获取相关书单">获取相关书单</h3><h4 id="GET-review-relatedbooklist">GET /review/relatedbooklist</h4><p>获取与书评相关的书单。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>          <span class="comment">// 书评ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;relatedBooklists&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;booklistId&quot;</span>: <span class="string">&quot;booklist_123&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;人工智能必读书单&quot;</span>,</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;精选人工智能领域经典书籍&quot;</span>,</span><br><span class="line">        <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;https://example.com/booklist_cover.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;bookCount&quot;</span>: <span class="number">15</span>,</span><br><span class="line">        <span class="string">&quot;followerCount&quot;</span>: <span class="number">2580</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_456&quot;</span>,</span><br><span class="line">          <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;AI专家&quot;</span>,</span><br><span class="line">          <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar.jpg&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;createTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">        <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995300000</span>,</span><br><span class="line">        <span class="string">&quot;tags&quot;</span>: [<span class="string">&quot;人工智能&quot;</span>, <span class="string">&quot;技术&quot;</span>, <span class="string">&quot;科普&quot;</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="string">&quot;relevanceScore&quot;</span>: <span class="number">0.85</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取相关书评">获取相关书评</h3><h4 id="GET-review-relatedReviews">GET /review/relatedReviews</h4><p>获取与当前书评相关的其他书评。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>,         <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;count&quot;</span>: <span class="number">10</span>                          <span class="comment">// 获取数量</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;relatedReviews&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_456789&quot;</span>,</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_654321&quot;</span>,</span><br><span class="line">        <span class="string">&quot;content&quot;</span>: <span class="string">&quot;同样讨论人工智能的精彩书评...&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_789&quot;</span>,</span><br><span class="line">          <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;科技爱好者&quot;</span>,</span><br><span class="line">          <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar2.jpg&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;bookInfo&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;title&quot;</span>: <span class="string">&quot;机器学习实战&quot;</span>,</span><br><span class="line">          <span class="string">&quot;author&quot;</span>: <span class="string">&quot;作者名&quot;</span>,</span><br><span class="line">          <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;https://example.com/cover2.jpg&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;stats&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;likeCount&quot;</span>: <span class="number">89</span>,</span><br><span class="line">          <span class="string">&quot;commentCount&quot;</span>: <span class="number">12</span>,</span><br><span class="line">          <span class="string">&quot;shareCount&quot;</span>: <span class="number">5</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;createTime&quot;</span>: <span class="number">1640995100000</span>,</span><br><span class="line">        <span class="string">&quot;similarity&quot;</span>: <span class="number">0.78</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="string">&quot;hasMore&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="书评查询-API">书评查询 API</h2><h3 id="获取用户书评列表">获取用户书评列表</h3><h4 id="GET-review-list">GET /review/list</h4><p>获取指定书籍的用户书评列表。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,             <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;listType&quot;</span>: <span class="number">1</span>,                       <span class="comment">// 列表类型</span></span><br><span class="line">  <span class="string">&quot;mine&quot;</span>: <span class="number">1</span>,                           <span class="comment">// 是否只看自己的 (0: 所有, 1: 仅自己)</span></span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;listMode&quot;</span>: <span class="number">1</span>                        <span class="comment">// 列表模式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;reviews&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;content&quot;</span>: <span class="string">&quot;这本书非常精彩...&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_789&quot;</span>,</span><br><span class="line">          <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">          <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar.jpg&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;stats&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;likeCount&quot;</span>: <span class="number">25</span>,</span><br><span class="line">          <span class="string">&quot;commentCount&quot;</span>: <span class="number">8</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;createTime&quot;</span>: <span class="number">1640995200000</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">    <span class="string">&quot;hasMore&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">156</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取用户所有书评">获取用户所有书评</h3><h4 id="GET-review-list-2">GET /review/list</h4><p>获取用户的所有书评（不限定书籍）。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;uservid&quot;</span>: <span class="string">&quot;user_123456&quot;</span>,            <span class="comment">// 用户VID</span></span><br><span class="line">  <span class="string">&quot;listType&quot;</span>: <span class="number">1</span>,                       <span class="comment">// 列表类型</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">1</span>,                           <span class="comment">// 类型</span></span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;listMode&quot;</span>: <span class="number">1</span>                        <span class="comment">// 列表模式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="高级书评功能">高级书评功能</h2><h3 id="获取书籍章节书评列表">获取书籍章节书评列表</h3><h4 id="GET-review-list-3">GET /review/list</h4><p>获取指定书籍章节的书评列表。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;listType&quot;</span>: <span class="number">1</span>,                       <span class="comment">// 列表类型</span></span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,             <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,                     <span class="comment">// 章节UID</span></span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;listMode&quot;</span>: <span class="number">1</span>                        <span class="comment">// 列表模式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;reviews&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;chapterTitle&quot;</span>: <span class="string">&quot;第一章&quot;</span>,</span><br><span class="line">        <span class="string">&quot;content&quot;</span>: <span class="string">&quot;这一章的内容非常精彩...&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_789&quot;</span>,</span><br><span class="line">          <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">          <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar.jpg&quot;</span>,</span><br><span class="line">          <span class="string">&quot;level&quot;</span>: <span class="number">15</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;stats&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;likeCount&quot;</span>: <span class="number">25</span>,</span><br><span class="line">          <span class="string">&quot;commentCount&quot;</span>: <span class="number">8</span>,</span><br><span class="line">          <span class="string">&quot;shareCount&quot;</span>: <span class="number">3</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;createTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">        <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995300000</span>,</span><br><span class="line">        <span class="string">&quot;isWonderful&quot;</span>: <span class="literal">true</span>,             <span class="comment">// 是否精彩书评</span></span><br><span class="line">        <span class="string">&quot;tags&quot;</span>: [<span class="string">&quot;深度思考&quot;</span>, <span class="string">&quot;精彩&quot;</span>],</span><br><span class="line">        <span class="string">&quot;relatedQuote&quot;</span>: &#123;                <span class="comment">// 相关引用</span></span><br><span class="line">          <span class="string">&quot;text&quot;</span>: <span class="string">&quot;人工智能将改变世界&quot;</span>,</span><br><span class="line">          <span class="string">&quot;range&quot;</span>: <span class="string">&quot;100-120&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">    <span class="string">&quot;hasMore&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">156</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取好友书评列表">获取好友书评列表</h3><h4 id="GET-review-list-4">GET /review/list</h4><p>获取好友的书评列表。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;listType&quot;</span>: <span class="number">2</span>,                       <span class="comment">// 列表类型（好友书评）</span></span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,             <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;listMode&quot;</span>: <span class="number">1</span>                        <span class="comment">// 列表模式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="讲座书评-API">讲座书评 API</h2><h3 id="添加讲座书评">添加讲座书评</h3><h4 id="POST-https-i-weread-qq-com-review-add-7">POST <a href="https://i.weread.qq.com/review/add">https://i.weread.qq.com/review/add</a></h4><p>添加讲座相关的书评。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;lecture_123456&quot;</span>,          <span class="comment">// 讲座ID</span></span><br><span class="line">  <span class="string">&quot;content&quot;</span>: <span class="string">&quot;这个讲座非常有启发性...&quot;</span>, <span class="comment">// 书评内容</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">2</span>,                           <span class="comment">// 书评类型（讲座）</span></span><br><span class="line">  <span class="string">&quot;lectureInfo&quot;</span>: &#123;                     <span class="comment">// 讲座信息</span></span><br><span class="line">    <span class="string">&quot;lectureId&quot;</span>: <span class="string">&quot;lecture_123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;title&quot;</span>: <span class="string">&quot;人工智能前沿技术&quot;</span>,</span><br><span class="line">    <span class="string">&quot;speaker&quot;</span>: <span class="string">&quot;张教授&quot;</span>,</span><br><span class="line">    <span class="string">&quot;duration&quot;</span>: <span class="number">3600</span>,</span><br><span class="line">    <span class="string">&quot;category&quot;</span>: <span class="string">&quot;科技&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;isPrivate&quot;</span>: <span class="number">0</span>,                      <span class="comment">// 是否私密</span></span><br><span class="line">  <span class="string">&quot;shareToGroup&quot;</span>: <span class="number">0</span>,                   <span class="comment">// 分享到群组</span></span><br><span class="line">  <span class="string">&quot;atUserVids&quot;</span>: [],                    <span class="comment">// @用户列表</span></span><br><span class="line">  <span class="string">&quot;htmlContent&quot;</span>: <span class="string">&quot;&lt;p&gt;HTML内容&lt;/p&gt;&quot;</span>,    <span class="comment">// HTML格式内容</span></span><br><span class="line">  <span class="string">&quot;colorStyle&quot;</span>: <span class="number">1</span>                      <span class="comment">// 颜色样式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_789012&quot;</span>,</span><br><span class="line">    <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;lecture_123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;content&quot;</span>: <span class="string">&quot;这个讲座非常有启发性...&quot;</span>,</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;createTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">    <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">    <span class="string">&quot;stats&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;likeCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;commentCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;shareCount&quot;</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取讲座书评列表">获取讲座书评列表</h3><h4 id="GET-review-list-5">GET /review/list</h4><p>获取讲座的书评列表。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;lecture_123456&quot;</span>,          <span class="comment">// 讲座ID</span></span><br><span class="line">  <span class="string">&quot;listType&quot;</span>: <span class="number">3</span>,                       <span class="comment">// 列表类型（讲座书评）</span></span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;listMode&quot;</span>: <span class="number">1</span>                        <span class="comment">// 列表模式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>福利系统 API</h1><p>微信读书福利系统相关的 API 接口，包括福利查询、获取和管理功能。</p><h2 id="查询福利">查询福利</h2><h3 id="GET-reader-welfareCoin">GET /reader/welfareCoin</h3><p>查询阅读器福利信息，包括可用福利、福利条件等。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,        <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,                 <span class="comment">// 章节UID（可选）</span></span><br><span class="line">  <span class="string">&quot;action&quot;</span>: <span class="string">&quot;query&quot;</span>                <span class="comment">// 操作类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;availableWelfare&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;key&quot;</span>: <span class="string">&quot;reading_time_bonus&quot;</span>,</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;coin&quot;</span>,</span><br><span class="line">        <span class="string">&quot;amount&quot;</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="string">&quot;condition&quot;</span>: <span class="string">&quot;阅读30分钟&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="string">&quot;available&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;key&quot;</span>: <span class="string">&quot;chapter_complete_bonus&quot;</span>,</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;coin&quot;</span>, </span><br><span class="line">        <span class="string">&quot;amount&quot;</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="string">&quot;condition&quot;</span>: <span class="string">&quot;完成章节阅读&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="string">&quot;claimed&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;totalCoins&quot;</span>: <span class="number">150</span>,</span><br><span class="line">    <span class="string">&quot;dailyLimit&quot;</span>: <span class="number">50</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="获取福利">获取福利</h2><h3 id="GET-reader-welfareCoin-2">GET /reader/welfareCoin</h3><p>获取福利奖励，领取可用的福利。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,        <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;key&quot;</span>: <span class="string">&quot;welfare_key&quot;</span>,            <span class="comment">// 福利键</span></span><br><span class="line">  <span class="string">&quot;action&quot;</span>: <span class="string">&quot;get&quot;</span>                  <span class="comment">// 操作类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;success&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;reward&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;coin&quot;</span>,</span><br><span class="line">      <span class="string">&quot;amount&quot;</span>: <span class="number">10</span>,</span><br><span class="line">      <span class="string">&quot;description&quot;</span>: <span class="string">&quot;阅读时长奖励&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;newBalance&quot;</span>: <span class="number">160</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>奖励与礼品 API</h1><p>微信读书奖励与礼品相关的 API 接口，包括周报兑换、礼品购买、礼品发送、礼品历史等功能。</p><h2 id="周报兑换-API">周报兑换 API</h2><h2 id="查询所有可兑换奖励">查询所有可兑换奖励</h2><h3 id="POST-https-i-weread-qq-com-weekly-exchange">POST <a href="https://i.weread.qq.com/weekly/exchange">https://i.weread.qq.com/weekly/exchange</a></h3><p>查询所有可兑换的奖励列表，用于展示可用的奖励选项。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;awardLevelId&quot;</span>: <span class="number">0</span>,        <span class="comment">// 奖励等级ID (0表示查询所有)</span></span><br><span class="line">  <span class="string">&quot;awardChoiceType&quot;</span>: <span class="number">0</span>,     <span class="comment">// 奖励选择类型 (0表示查询)</span></span><br><span class="line">  <span class="string">&quot;isExchangeAward&quot;</span>: <span class="number">0</span>,     <span class="comment">// 是否兑换奖励 (0表示查询, 1表示兑换)</span></span><br><span class="line">  <span class="string">&quot;pf&quot;</span>: <span class="string">&quot;weread_wx-2001-iap-2001-iphone&quot;</span>  <span class="comment">// 平台标识</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;awards&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;7天无限卡体验&quot;</span>,</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;7天无限阅读体验卡&quot;</span>,</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;experience_card&quot;</span>,</span><br><span class="line">        <span class="string">&quot;duration&quot;</span>: <span class="number">7</span>,              <span class="comment">// 天数</span></span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="number">1</span>,                <span class="comment">// 1: 可兑换, 0: 不可兑换</span></span><br><span class="line">        <span class="string">&quot;cost&quot;</span>: <span class="number">100</span>,                <span class="comment">// 所需积分</span></span><br><span class="line">        <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;https://example.com/card1.png&quot;</span>,</span><br><span class="line">        <span class="string">&quot;validUntil&quot;</span>: <span class="number">1640995200</span>    <span class="comment">// 有效期截止时间</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;3天无限卡体验&quot;</span>,</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;3天无限阅读体验卡&quot;</span>,</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;experience_card&quot;</span>,</span><br><span class="line">        <span class="string">&quot;duration&quot;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;cost&quot;</span>: <span class="number">50</span>,</span><br><span class="line">        <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;https://example.com/card2.png&quot;</span>,</span><br><span class="line">        <span class="string">&quot;validUntil&quot;</span>: <span class="number">1640995200</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;1天无限卡体验&quot;</span>,</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;1天无限阅读体验卡&quot;</span>,</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;experience_card&quot;</span>,</span><br><span class="line">        <span class="string">&quot;duration&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="number">0</span>,                <span class="comment">// 已兑换或不可兑换</span></span><br><span class="line">        <span class="string">&quot;cost&quot;</span>: <span class="number">20</span>,</span><br><span class="line">        <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;https://example.com/card3.png&quot;</span>,</span><br><span class="line">        <span class="string">&quot;validUntil&quot;</span>: <span class="number">1640995200</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;userPoints&quot;</span>: <span class="number">150</span>,              <span class="comment">// 用户当前积分</span></span><br><span class="line">    <span class="string">&quot;weeklyPoints&quot;</span>: <span class="number">80</span>,             <span class="comment">// 本周获得积分</span></span><br><span class="line">    <span class="string">&quot;nextWeekReset&quot;</span>: <span class="number">1641599999</span>     <span class="comment">// 下周重置时间</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="兑换体验卡">兑换体验卡</h2><h3 id="POST-https-i-weread-qq-com-weekly-exchange-2">POST <a href="https://i.weread.qq.com/weekly/exchange">https://i.weread.qq.com/weekly/exchange</a></h3><p>兑换指定的体验卡奖励。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;awardLevelId&quot;</span>: <span class="number">1</span>,        <span class="comment">// 要兑换的奖励ID</span></span><br><span class="line">  <span class="string">&quot;awardChoiceType&quot;</span>: <span class="number">1</span>,     <span class="comment">// 奖励选择类型 (1表示兑换体验卡)</span></span><br><span class="line">  <span class="string">&quot;isExchangeAward&quot;</span>: <span class="number">1</span>,     <span class="comment">// 是否兑换奖励 (1表示兑换)</span></span><br><span class="line">  <span class="string">&quot;pf&quot;</span>: <span class="string">&quot;weread_wx-2001-iap-2001-iphone&quot;</span>  <span class="comment">// 平台标识</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;success&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;awardId&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;awardName&quot;</span>: <span class="string">&quot;7天无限卡体验&quot;</span>,</span><br><span class="line">    <span class="string">&quot;exchangeTime&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">    <span class="string">&quot;validUntil&quot;</span>: <span class="number">1641599999</span>,</span><br><span class="line">    <span class="string">&quot;remainingPoints&quot;</span>: <span class="number">50</span>     <span class="comment">// 兑换后剩余积分</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>错误响应:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: -<span class="number">3001</span>,</span><br><span class="line">  <span class="string">&quot;errmsg&quot;</span>: <span class="string">&quot;积分不足&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: -<span class="number">3002</span>,</span><br><span class="line">  <span class="string">&quot;errmsg&quot;</span>: <span class="string">&quot;奖励已兑换&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: -<span class="number">3003</span>,</span><br><span class="line">  <span class="string">&quot;errmsg&quot;</span>: <span class="string">&quot;奖励已过期&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="礼品服务-API">礼品服务 API</h2><h3 id="购买并发送礼品">购买并发送礼品</h3><h4 id="POST-https-i-weread-qq-com-gift-send">POST <a href="https://i.weread.qq.com/gift/send">https://i.weread.qq.com/gift/send</a></h4><p>购买并发送礼品给其他用户。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,             <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;giftMsg&quot;</span>: <span class="string">&quot;送你一本好书&quot;</span>,            <span class="comment">// 礼品消息</span></span><br><span class="line">  <span class="string">&quot;audioId&quot;</span>: <span class="string">&quot;audio_123&quot;</span>,              <span class="comment">// 音频ID</span></span><br><span class="line">  <span class="string">&quot;duration&quot;</span>: <span class="number">3600</span>,                    <span class="comment">// 时长（秒）</span></span><br><span class="line">  <span class="string">&quot;payType&quot;</span>: <span class="number">1</span>,                        <span class="comment">// 支付类型（可选）</span></span><br><span class="line">  <span class="string">&quot;price&quot;</span>: <span class="number">29.99</span>,                      <span class="comment">// 价格</span></span><br><span class="line">  <span class="string">&quot;count&quot;</span>: <span class="number">1</span>,                          <span class="comment">// 数量（可选）</span></span><br><span class="line">  <span class="string">&quot;source&quot;</span>: <span class="string">&quot;app&quot;</span>,                     <span class="comment">// 来源</span></span><br><span class="line">  <span class="string">&quot;pf&quot;</span>: <span class="string">&quot;android&quot;</span>,                     <span class="comment">// 平台</span></span><br><span class="line">  <span class="string">&quot;zoneId&quot;</span>: <span class="string">&quot;zone_001&quot;</span>,                <span class="comment">// 区域ID</span></span><br><span class="line">  <span class="string">&quot;release&quot;</span>: <span class="number">1</span>                         <span class="comment">// 发布版本</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;giftId&quot;</span>: <span class="string">&quot;gift_789012&quot;</span>,</span><br><span class="line">    <span class="string">&quot;orderId&quot;</span>: <span class="string">&quot;order_345678&quot;</span>,</span><br><span class="line">    <span class="string">&quot;status&quot;</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">    <span class="string">&quot;message&quot;</span>: <span class="string">&quot;礼品发送成功&quot;</span>,</span><br><span class="line">    <span class="string">&quot;recipient&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;userId&quot;</span>: <span class="string">&quot;user_456&quot;</span>,</span><br><span class="line">      <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;接收者昵称&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;gift&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,</span><br><span class="line">      <span class="string">&quot;title&quot;</span>: <span class="string">&quot;书籍标题&quot;</span>,</span><br><span class="line">      <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;封面URL&quot;</span>,</span><br><span class="line">      <span class="string">&quot;price&quot;</span>: <span class="number">29.99</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;sendTime&quot;</span>: <span class="number">1640995200000</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="发送免费推广礼品">发送免费推广礼品</h3><h4 id="POST-https-i-weread-qq-com-free-send">POST <a href="https://i.weread.qq.com/free/send">https://i.weread.qq.com/free/send</a></h4><p>发送免费的推广礼品。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,             <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;giftMsg&quot;</span>: <span class="string">&quot;免费体验推荐&quot;</span>,            <span class="comment">// 礼品消息</span></span><br><span class="line">  <span class="string">&quot;audioId&quot;</span>: <span class="string">&quot;audio_123&quot;</span>,              <span class="comment">// 音频ID</span></span><br><span class="line">  <span class="string">&quot;duration&quot;</span>: <span class="number">1800</span>,                    <span class="comment">// 时长（秒）</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">1</span>                            <span class="comment">// 推广类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="查看礼品历史">查看礼品历史</h3><h4 id="GET-gift-list">GET /gift/list</h4><p>获取用户的礼品历史记录。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>                 <span class="comment">// 同步键</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;gifts&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;giftId&quot;</span>: <span class="string">&quot;gift_789012&quot;</span>,</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;书籍标题&quot;</span>,</span><br><span class="line">        <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;封面URL&quot;</span>,</span><br><span class="line">        <span class="string">&quot;giftMsg&quot;</span>: <span class="string">&quot;送你一本好书&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sender&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;userId&quot;</span>: <span class="string">&quot;user_123&quot;</span>,</span><br><span class="line">          <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;发送者昵称&quot;</span>,</span><br><span class="line">          <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;头像URL&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;recipient&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;userId&quot;</span>: <span class="string">&quot;user_456&quot;</span>,</span><br><span class="line">          <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;接收者昵称&quot;</span>,</span><br><span class="line">          <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;头像URL&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;price&quot;</span>: <span class="number">29.99</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="string">&quot;received&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sendTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">        <span class="string">&quot;receiveTime&quot;</span>: <span class="number">1640995300000</span>,</span><br><span class="line">        <span class="string">&quot;isRead&quot;</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">    <span class="string">&quot;hasMore&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">&quot;unreadCount&quot;</span>: <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="查看礼品详情">查看礼品详情</h3><h4 id="GET-gift-detail">GET /gift/detail</h4><p>查看指定礼品的详细信息。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;giftId&quot;</span>: <span class="string">&quot;gift_789012&quot;</span>              <span class="comment">// 礼品ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="查看书籍礼品信息">查看书籍礼品信息</h3><h4 id="GET-gift-view">GET /gift/view</h4><p>查看指定书籍的礼品相关信息。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>              <span class="comment">// 书籍ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="更新礼品信息">更新礼品信息</h3><h4 id="POST-https-i-weread-qq-com-gift-update">POST <a href="https://i.weread.qq.com/gift/update">https://i.weread.qq.com/gift/update</a></h4><p>更新已发送礼品的信息。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;giftId&quot;</span>: <span class="string">&quot;gift_789012&quot;</span>,             <span class="comment">// 礼品ID</span></span><br><span class="line">  <span class="string">&quot;giftMsg&quot;</span>: <span class="string">&quot;更新后的礼品消息&quot;</span>,        <span class="comment">// 新的礼品消息</span></span><br><span class="line">  <span class="string">&quot;audioId&quot;</span>: <span class="string">&quot;audio_new&quot;</span>,              <span class="comment">// 新的音频ID</span></span><br><span class="line">  <span class="string">&quot;duration&quot;</span>: <span class="number">7200</span>                     <span class="comment">// 新的时长</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="删除礼品记录">删除礼品记录</h3><h4 id="GET-gift-delete">GET /gift/delete</h4><p>删除指定的礼品历史记录。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;giftId&quot;</span>: <span class="string">&quot;gift_789012&quot;</span>              <span class="comment">// 要删除的礼品ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="清除未读标记">清除未读标记</h3><h4 id="GET-gift-list-2">GET /gift/list</h4><p>清除所有礼品的未读标记。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;markall&quot;</span>: <span class="string">&quot;1&quot;</span>                       <span class="comment">// 标记所有为已读</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>用户 API</h1><p>用户相关的 API 接口，包括用户资料管理、设备管理和账户操作。</p><h2 id="获取用户资料">获取用户资料</h2><h3 id="GET-user-profile">GET /user/profile</h3><p>获取用户的详细资料信息，包括阅读统计、关注数据等。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;articleBookId&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;articleCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;articleReadCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;articleSubscribeCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;articleWordCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;audioCommentedCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;audioCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;audioLikedCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;audioListenCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;authorTotalReadCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;bookReviewCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;booklistCollectCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;booklistCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;buyCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;canExchange&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;canExchangeDay&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;continueReadDays&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;curMonthReadTime&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;followerCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;followerListCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;followingCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;followingListCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;gameInfo&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;gender&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;likeBookCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;location&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;medalInfo&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;noteBookCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;readCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;readHistory&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;readingTeam&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;reviewCommentedCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;reviewCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;reviewLikedCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;signature&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;totalLikedCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;totalNoteCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;totalReadingTime&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;unfinishOrderCount&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;vDesc&quot;</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;v&quot;</span>: <span class="string">&quot;7.4.2.23&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;user&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;用户昵称&quot;</span>,</span><br><span class="line">    <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;头像URL&quot;</span>,</span><br><span class="line">    <span class="string">&quot;signature&quot;</span>: <span class="string">&quot;个人签名&quot;</span>,</span><br><span class="line">    <span class="string">&quot;gender&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;location&quot;</span>: <span class="string">&quot;地理位置&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;readingStats&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;readCount&quot;</span>: <span class="number">150</span>,</span><br><span class="line">    <span class="string">&quot;totalReadingTime&quot;</span>: <span class="number">86400</span>,</span><br><span class="line">    <span class="string">&quot;continueReadDays&quot;</span>: <span class="number">30</span>,</span><br><span class="line">    <span class="string">&quot;curMonthReadTime&quot;</span>: <span class="number">7200</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;socialStats&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;followerCount&quot;</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="string">&quot;followingCount&quot;</span>: <span class="number">50</span>,</span><br><span class="line">    <span class="string">&quot;totalLikedCount&quot;</span>: <span class="number">200</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取其他用户资料">获取其他用户资料</h3><h4 id="GET-user-profile-查看他人资料">GET /user/profile (查看他人资料)</h4><p>获取指定用户的详细资料信息，支持查看其他用户的公开信息。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;target_user_vid&quot;</span>,           <span class="comment">// 目标用户 VID</span></span><br><span class="line">  <span class="string">&quot;gender&quot;</span>: <span class="number">1</span>,                            <span class="comment">// 性别信息</span></span><br><span class="line">  <span class="string">&quot;signature&quot;</span>: <span class="number">1</span>,                         <span class="comment">// 签名信息</span></span><br><span class="line">  <span class="string">&quot;vDesc&quot;</span>: <span class="number">1</span>,                            <span class="comment">// 用户描述</span></span><br><span class="line">  <span class="string">&quot;location&quot;</span>: <span class="number">1</span>,                         <span class="comment">// 位置信息</span></span><br><span class="line">  <span class="string">&quot;totalReadingTime&quot;</span>: <span class="number">1</span>,                 <span class="comment">// 总阅读时长</span></span><br><span class="line">  <span class="string">&quot;currentReadingTime&quot;</span>: <span class="number">1</span>,               <span class="comment">// 当前阅读时长</span></span><br><span class="line">  <span class="string">&quot;finishedBookCount&quot;</span>: <span class="number">1</span>,                <span class="comment">// 完成书籍数量</span></span><br><span class="line">  <span class="string">&quot;followerCount&quot;</span>: <span class="number">1</span>,                    <span class="comment">// 粉丝数量</span></span><br><span class="line">  <span class="string">&quot;followingCount&quot;</span>: <span class="number">1</span>,                   <span class="comment">// 关注数量</span></span><br><span class="line">  <span class="string">&quot;buyCount&quot;</span>: <span class="number">1</span>,                         <span class="comment">// 购买数量</span></span><br><span class="line">  <span class="string">&quot;reviewCount&quot;</span>: <span class="number">1</span>,                      <span class="comment">// 书评数量</span></span><br><span class="line">  <span class="string">&quot;reviewLikedCount&quot;</span>: <span class="number">1</span>,                 <span class="comment">// 书评点赞数</span></span><br><span class="line">  <span class="string">&quot;sameFollowing&quot;</span>: <span class="number">1</span>,                    <span class="comment">// 共同关注</span></span><br><span class="line">  <span class="string">&quot;reviewCommentedCount&quot;</span>: <span class="number">1</span>,             <span class="comment">// 书评评论数</span></span><br><span class="line">  <span class="string">&quot;likeBookCount&quot;</span>: <span class="number">1</span>,                    <span class="comment">// 喜欢书籍数</span></span><br><span class="line">  <span class="string">&quot;isFollowing&quot;</span>: <span class="number">1</span>,                      <span class="comment">// 是否关注</span></span><br><span class="line">  <span class="string">&quot;isFollower&quot;</span>: <span class="number">1</span>,                       <span class="comment">// 是否粉丝</span></span><br><span class="line">  <span class="string">&quot;isBlackMe&quot;</span>: <span class="number">1</span>,                        <span class="comment">// 是否拉黑我</span></span><br><span class="line">  <span class="string">&quot;isInBlackList&quot;</span>: <span class="number">1</span>,                    <span class="comment">// 是否在黑名单</span></span><br><span class="line">  <span class="string">&quot;bookReviewCount&quot;</span>: <span class="number">1</span>,                  <span class="comment">// 书评数量</span></span><br><span class="line">  <span class="string">&quot;noteBookCount&quot;</span>: <span class="number">1</span>,                    <span class="comment">// 笔记书籍数</span></span><br><span class="line">  <span class="string">&quot;exchangedMoney&quot;</span>: <span class="number">1</span>,                   <span class="comment">// 兑换金额</span></span><br><span class="line">  <span class="string">&quot;recentReadingBooks&quot;</span>: <span class="number">1</span>,               <span class="comment">// 最近阅读书籍</span></span><br><span class="line">  <span class="string">&quot;booklistCount&quot;</span>: <span class="number">1</span>,                    <span class="comment">// 书单数量</span></span><br><span class="line">  <span class="string">&quot;booklistCollectCount&quot;</span>: <span class="number">1</span>,             <span class="comment">// 书单收藏数</span></span><br><span class="line">  <span class="string">&quot;articleBookId&quot;</span>: <span class="number">1</span>,                    <span class="comment">// 文章书籍 ID</span></span><br><span class="line">  <span class="string">&quot;articleCount&quot;</span>: <span class="number">1</span>,                     <span class="comment">// 文章数量</span></span><br><span class="line">  <span class="string">&quot;articleDraftCount&quot;</span>: <span class="number">1</span>,                <span class="comment">// 文章草稿数</span></span><br><span class="line">  <span class="string">&quot;articleReadCount&quot;</span>: <span class="number">1</span>,                 <span class="comment">// 文章阅读数</span></span><br><span class="line">  <span class="string">&quot;articleSubscribeCount&quot;</span>: <span class="number">1</span>,            <span class="comment">// 文章订阅数</span></span><br><span class="line">  <span class="string">&quot;articleWordCount&quot;</span>: <span class="number">1</span>,                 <span class="comment">// 文章字数</span></span><br><span class="line">  <span class="string">&quot;audioCount&quot;</span>: <span class="number">1</span>,                       <span class="comment">// 音频数量</span></span><br><span class="line">  <span class="string">&quot;audioListenCount&quot;</span>: <span class="number">1</span>,                 <span class="comment">// 音频收听数</span></span><br><span class="line">  <span class="string">&quot;audioLikedCount&quot;</span>: <span class="number">1</span>,                  <span class="comment">// 音频点赞数</span></span><br><span class="line">  <span class="string">&quot;audioCommentedCount&quot;</span>: <span class="number">1</span>,              <span class="comment">// 音频评论数</span></span><br><span class="line">  <span class="string">&quot;totalLikedCount&quot;</span>: <span class="number">1</span>,                  <span class="comment">// 总点赞数</span></span><br><span class="line">  <span class="string">&quot;mpAccount&quot;</span>: <span class="number">1</span>,                        <span class="comment">// 公众号账户</span></span><br><span class="line">  <span class="string">&quot;canExchange&quot;</span>: <span class="number">1</span>,                      <span class="comment">// 可兑换</span></span><br><span class="line">  <span class="string">&quot;canExchangeDay&quot;</span>: <span class="number">1</span>,                   <span class="comment">// 可兑换天数</span></span><br><span class="line">  <span class="string">&quot;isSubscribing&quot;</span>: <span class="number">1</span>,                    <span class="comment">// 是否订阅</span></span><br><span class="line">  <span class="string">&quot;hideMe&quot;</span>: <span class="number">1</span>,                           <span class="comment">// 隐藏我</span></span><br><span class="line">  <span class="string">&quot;wechatFriendCount&quot;</span>: <span class="number">1</span>,                <span class="comment">// 微信好友数</span></span><br><span class="line">  <span class="string">&quot;wechatFriendSubscribeCount&quot;</span>: <span class="number">1</span>,       <span class="comment">// 微信好友订阅数</span></span><br><span class="line">  <span class="string">&quot;isHide&quot;</span>: <span class="number">1</span>,                           <span class="comment">// 是否隐藏</span></span><br><span class="line">  <span class="string">&quot;readingTeam&quot;</span>: <span class="number">1</span>,                      <span class="comment">// 阅读团队</span></span><br><span class="line">  <span class="string">&quot;readHistory&quot;</span>: <span class="number">1</span>,                      <span class="comment">// 阅读历史</span></span><br><span class="line">  <span class="string">&quot;gameInfo&quot;</span>: <span class="number">1</span>,                         <span class="comment">// 游戏信息</span></span><br><span class="line">  <span class="string">&quot;authorTotalReadCount&quot;</span>: <span class="number">1</span>,             <span class="comment">// 作者总阅读数</span></span><br><span class="line">  <span class="string">&quot;unfinishOrderCount&quot;</span>: <span class="number">1</span>,               <span class="comment">// 未完成订单数</span></span><br><span class="line">  <span class="string">&quot;unfinishShoppingCartCount&quot;</span>: <span class="number">1</span>,        <span class="comment">// 未完成购物车数</span></span><br><span class="line">  <span class="string">&quot;totalNoteCount&quot;</span>: <span class="number">1</span>,                   <span class="comment">// 总笔记数</span></span><br><span class="line">  <span class="string">&quot;medalInfo&quot;</span>: <span class="number">1</span>,                        <span class="comment">// 勋章信息</span></span><br><span class="line">  <span class="string">&quot;profileVisibleToAll&quot;</span>: <span class="number">1</span>,              <span class="comment">// 资料对所有人可见</span></span><br><span class="line">  <span class="string">&quot;curMonthReadTime&quot;</span>: <span class="number">1</span>,                 <span class="comment">// 当月阅读时长</span></span><br><span class="line">  <span class="string">&quot;continueReadDays&quot;</span>: <span class="number">1</span>,                 <span class="comment">// 连续阅读天数</span></span><br><span class="line">  <span class="string">&quot;readCount&quot;</span>: <span class="number">1</span>                         <span class="comment">// 阅读数量</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="邀请相关功能">邀请相关功能</h2><h3 id="获取邀请信息">获取邀请信息</h3><h4 id="GET-user-profile-邀请版本">GET /user/profile (邀请版本)</h4><p>获取用户邀请相关信息，这是 <code>/user/profile</code> 端点的一个特殊用法。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;totalReadingTime&quot;</span>: <span class="number">1</span>,      <span class="comment">// 总阅读时长</span></span><br><span class="line">  <span class="string">&quot;finishedBookCount&quot;</span>: <span class="number">1</span>,     <span class="comment">// 完成书籍数量</span></span><br><span class="line">  <span class="string">&quot;exchangedMoney&quot;</span>: <span class="number">1</span>,        <span class="comment">// 兑换金额</span></span><br><span class="line">  <span class="string">&quot;recentReadingBooks&quot;</span>: <span class="number">1</span>,    <span class="comment">// 最近阅读书籍</span></span><br><span class="line">  <span class="string">&quot;registTime&quot;</span>: <span class="number">1</span>,            <span class="comment">// 注册时间</span></span><br><span class="line">  <span class="string">&quot;gender&quot;</span>: <span class="number">1</span>                 <span class="comment">// 性别</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;inviteCode&quot;</span>: <span class="string">&quot;ABC123&quot;</span>,</span><br><span class="line">    <span class="string">&quot;inviteCount&quot;</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="string">&quot;inviteReward&quot;</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="string">&quot;canInvite&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;inviteUrl&quot;</span>: <span class="string">&quot;https://weread.qq.com/invite/ABC123&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="设备会话管理">设备会话管理</h2><h3 id="获取设备会话列表">获取设备会话列表</h3><h4 id="GET-device-sessionlist">GET /device/sessionlist</h4><p>获取指定设备的会话列表。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_id_here&quot;</span>,</span><br><span class="line">  <span class="string">&quot;onlyCnt&quot;</span>: <span class="string">&quot;1&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="移除设备会话">移除设备会话</h3><h4 id="POST-https-i-weread-qq-com-device-sessionremove">POST <a href="https://i.weread.qq.com/device/sessionremove">https://i.weread.qq.com/device/sessionremove</a></h4><p>移除指定的设备会话。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;removeDeviceIds&quot;</span>: [<span class="string">&quot;device1&quot;</span>, <span class="string">&quot;device2&quot;</span>],</span><br><span class="line">  <span class="string">&quot;currentDeviceId&quot;</span>: <span class="string">&quot;current_device&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="手机号检查">手机号检查</h2><h3 id="GET-phoneCheck">GET /phoneCheck</h3><p>检查手机号是否有效。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;tel&quot;</span>: <span class="string">&quot;13800138000&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="账户注销">账户注销</h2><h3 id="注销账户">注销账户</h3><h4 id="GET-deregister">GET /deregister</h4><p>注销用户账户。</p><h2 id="用户配置">用户配置</h2><h3 id="更新用户签名">更新用户签名</h3><h4 id="POST-https-i-weread-qq-com-user-signature">POST <a href="https://i.weread.qq.com/user/signature">https://i.weread.qq.com/user/signature</a></h4><p>更新用户签名和个人信息。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;content&quot;</span>: <span class="string">&quot;个人签名内容&quot;</span>,</span><br><span class="line">  <span class="string">&quot;vDesc&quot;</span>: <span class="string">&quot;个人描述&quot;</span>,</span><br><span class="line">  <span class="string">&quot;nick&quot;</span>: <span class="string">&quot;昵称&quot;</span>,</span><br><span class="line">  <span class="string">&quot;region&quot;</span>: <span class="string">&quot;地区&quot;</span>,</span><br><span class="line">  <span class="string">&quot;gender&quot;</span>: <span class="number">1</span>  <span class="comment">// 1: 男, 2: 女, 0: 未知</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="恢复微信头像">恢复微信头像</h3><h4 id="POST-https-i-weread-qq-com-user-signature-2">POST <a href="https://i.weread.qq.com/user/signature">https://i.weread.qq.com/user/signature</a></h4><p>恢复或清除微信头像。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;clearAvatar&quot;</span>: <span class="number">1</span>  <span class="comment">// 1: 清除头像, 0: 恢复头像</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="同步配置">同步配置</h3><h4 id="GET-config">GET /config</h4><p>同步用户配置信息。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>  <span class="comment">// 同步键</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="更新配置">更新配置</h3><h4 id="POST-https-i-weread-qq-com-updateConfig">POST <a href="https://i.weread.qq.com/updateConfig">https://i.weread.qq.com/updateConfig</a></h4><p>更新用户账户配置。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;accountsets&quot;</span>: &#123;</span><br><span class="line">    <span class="comment">// 账户设置对象</span></span><br><span class="line">    <span class="string">&quot;setting1&quot;</span>: <span class="string">&quot;value1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;setting2&quot;</span>: <span class="string">&quot;value2&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_id_here&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>故事流 API</h1><p>微信读书故事流相关的 API 接口，包括故事流内容获取、互动、举报等功能。</p><h2 id="故事流阅读提示">故事流阅读提示</h2><h3 id="POST-https-i-weread-qq-com-story-benefitrecv">POST <a href="https://i.weread.qq.com/story/benefitrecv">https://i.weread.qq.com/story/benefitrecv</a></h3><p>获取故事流的阅读收益提示，用于激励用户阅读。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_123456&quot;</span>,         <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;random&quot;</span>: <span class="string">&quot;random_string&quot;</span>,           <span class="comment">// 随机字符串</span></span><br><span class="line">  <span class="string">&quot;timestamp&quot;</span>: <span class="string">&quot;1640995200&quot;</span>,           <span class="comment">// 时间戳</span></span><br><span class="line">  <span class="string">&quot;sign&quot;</span>: <span class="string">&quot;signature_string&quot;</span>           <span class="comment">// 签名</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;benefits&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;reading_time&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;阅读时长奖励&quot;</span>,</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;今日阅读30分钟，获得10阅读币&quot;</span>,</span><br><span class="line">        <span class="string">&quot;reward&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="string">&quot;coin&quot;</span>,</span><br><span class="line">          <span class="string">&quot;amount&quot;</span>: <span class="number">10</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;https://example.com/time_icon.png&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;story_interaction&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;故事互动奖励&quot;</span>,</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;参与故事讨论，获得5经验值&quot;</span>,</span><br><span class="line">        <span class="string">&quot;reward&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="string">&quot;exp&quot;</span>,</span><br><span class="line">          <span class="string">&quot;amount&quot;</span>: <span class="number">5</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;https://example.com/interaction_icon.png&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;totalRewards&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;coins&quot;</span>: <span class="number">10</span>,</span><br><span class="line">      <span class="string">&quot;exp&quot;</span>: <span class="number">5</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;nextTip&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;time&quot;</span>: <span class="number">1641081600</span>,</span><br><span class="line">      <span class="string">&quot;message&quot;</span>: <span class="string">&quot;明天继续阅读可获得更多奖励&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="故事流举报">故事流举报</h2><h3 id="POST-https-i-weread-qq-com-storyfeed-report">POST <a href="https://i.weread.qq.com/storyfeed/report">https://i.weread.qq.com/storyfeed/report</a></h3><p>举报故事流中的不当内容。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">1</span>,                           <span class="comment">// 举报类型 (1: 垃圾信息, 2: 不当内容, 3: 侵权)</span></span><br><span class="line">  <span class="string">&quot;metas&quot;</span>: [                           <span class="comment">// 举报元数据</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;storyId&quot;</span>: <span class="string">&quot;story_123&quot;</span>,</span><br><span class="line">      <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;spam&quot;</span>,                <span class="comment">// 举报原因: spam, inappropriate, copyright</span></span><br><span class="line">      <span class="string">&quot;description&quot;</span>: <span class="string">&quot;垃圾内容&quot;</span>,       <span class="comment">// 详细描述</span></span><br><span class="line">      <span class="string">&quot;evidence&quot;</span>: [                    <span class="comment">// 证据链接（可选）</span></span><br><span class="line">        <span class="string">&quot;https://example.com/evidence1.jpg&quot;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;reportId&quot;</span>: <span class="string">&quot;report_789012&quot;</span>,</span><br><span class="line">    <span class="string">&quot;status&quot;</span>: <span class="string">&quot;submitted&quot;</span>,</span><br><span class="line">    <span class="string">&quot;message&quot;</span>: <span class="string">&quot;举报已提交，我们会在24小时内处理&quot;</span>,</span><br><span class="line">    <span class="string">&quot;processTime&quot;</span>: <span class="string">&quot;24小时内&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="故事流管理">故事流管理</h2><h3 id="故事流内容类型">故事流内容类型</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">StoryTypes</span> = &#123;</span><br><span class="line">  <span class="attr">BOOK_REVIEW</span>: <span class="string">&#x27;book_review&#x27;</span>,      <span class="comment">// 书评故事</span></span><br><span class="line">  <span class="attr">READING_NOTE</span>: <span class="string">&#x27;reading_note&#x27;</span>,    <span class="comment">// 阅读笔记</span></span><br><span class="line">  <span class="attr">BOOK_QUOTE</span>: <span class="string">&#x27;book_quote&#x27;</span>,        <span class="comment">// 书籍引用</span></span><br><span class="line">  <span class="attr">READING_GOAL</span>: <span class="string">&#x27;reading_goal&#x27;</span>,    <span class="comment">// 阅读目标</span></span><br><span class="line">  <span class="attr">BOOK_RECOMMENDATION</span>: <span class="string">&#x27;book_rec&#x27;</span>   <span class="comment">// 书籍推荐</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ReportReasons</span> = &#123;</span><br><span class="line">  <span class="attr">SPAM</span>: <span class="string">&#x27;spam&#x27;</span>,                    <span class="comment">// 垃圾信息</span></span><br><span class="line">  <span class="attr">INAPPROPRIATE</span>: <span class="string">&#x27;inappropriate&#x27;</span>,   <span class="comment">// 不当内容</span></span><br><span class="line">  <span class="attr">COPYRIGHT</span>: <span class="string">&#x27;copyright&#x27;</span>,          <span class="comment">// 侵权内容</span></span><br><span class="line">  <span class="attr">HARASSMENT</span>: <span class="string">&#x27;harassment&#x27;</span>,        <span class="comment">// 骚扰内容</span></span><br><span class="line">  <span class="attr">FAKE_INFO</span>: <span class="string">&#x27;fake_info&#x27;</span>          <span class="comment">// 虚假信息</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>书架 API</h1><p>微信读书书架服务相关的 API 接口，包括书架管理、归档、置顶、私密书籍等功能。</p><h2 id="书架基础操作">书架基础操作</h2><h3 id="添加书籍到书架">添加书籍到书架</h3><h4 id="POST-https-i-weread-qq-com-shelf-add">POST <a href="https://i.weread.qq.com/shelf/add">https://i.weread.qq.com/shelf/add</a></h4><p>将书籍或专辑添加到书架。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookIds&quot;</span>: [<span class="string">&quot;book1&quot;</span>, <span class="string">&quot;book2&quot;</span>],       <span class="comment">// 书籍ID数组</span></span><br><span class="line">  <span class="string">&quot;albumIds&quot;</span>: [<span class="string">&quot;album1&quot;</span>, <span class="string">&quot;album2&quot;</span>],    <span class="comment">// 专辑ID数组</span></span><br><span class="line">  <span class="string">&quot;promoteId&quot;</span>: <span class="string">&quot;promote_id_here&quot;</span>,      <span class="comment">// 推广ID</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">1</span>                            <span class="comment">// 类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;success&quot;</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="从书架删除书籍">从书架删除书籍</h3><h4 id="POST-https-i-weread-qq-com-shelf-delete">POST <a href="https://i.weread.qq.com/shelf/delete">https://i.weread.qq.com/shelf/delete</a></h4><p>从书架中删除指定的书籍、专辑或归档。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookIds&quot;</span>: [<span class="string">&quot;book1&quot;</span>, <span class="string">&quot;book2&quot;</span>],       <span class="comment">// 要删除的书籍ID数组</span></span><br><span class="line">  <span class="string">&quot;albumIds&quot;</span>: [<span class="string">&quot;album1&quot;</span>],              <span class="comment">// 要删除的专辑ID数组</span></span><br><span class="line">  <span class="string">&quot;archiveIds&quot;</span>: [<span class="number">1</span>, <span class="number">2</span>]                 <span class="comment">// 要删除的归档ID数组</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="置顶书籍">置顶书籍</h3><h4 id="POST-https-i-weread-qq-com-shelf-top">POST <a href="https://i.weread.qq.com/shelf/top">https://i.weread.qq.com/shelf/top</a></h4><p>将书籍或专辑置顶到书架顶部。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookIds&quot;</span>: [<span class="string">&quot;book1&quot;</span>, <span class="string">&quot;book2&quot;</span>],       <span class="comment">// 书籍ID数组</span></span><br><span class="line">  <span class="string">&quot;albumIds&quot;</span>: [<span class="string">&quot;album1&quot;</span>],              <span class="comment">// 专辑ID数组</span></span><br><span class="line">  <span class="string">&quot;archiveIds&quot;</span>: [<span class="number">1</span>, <span class="number">2</span>],                <span class="comment">// 归档ID数组</span></span><br><span class="line">  <span class="string">&quot;isDel&quot;</span>: <span class="literal">false</span>                       <span class="comment">// 是否取消置顶</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="书架归档管理">书架归档管理</h2><h3 id="创建归档">创建归档</h3><h4 id="POST-https-i-weread-qq-com-shelf-archive">POST <a href="https://i.weread.qq.com/shelf/archive">https://i.weread.qq.com/shelf/archive</a></h4><p>创建新的归档分类并将书籍添加到其中。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookIds&quot;</span>: [<span class="string">&quot;book1&quot;</span>, <span class="string">&quot;book2&quot;</span>],       <span class="comment">// 要归档的书籍ID数组</span></span><br><span class="line">  <span class="string">&quot;albumIds&quot;</span>: [<span class="string">&quot;album1&quot;</span>],              <span class="comment">// 要归档的专辑ID数组</span></span><br><span class="line">  <span class="string">&quot;archiveId&quot;</span>: <span class="number">0</span>,                      <span class="comment">// 归档ID（0表示创建新归档）</span></span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;科技类书籍&quot;</span>                  <span class="comment">// 归档名称</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;success&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;archiveId&quot;</span>: <span class="number">123</span>,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;科技类书籍&quot;</span>,</span><br><span class="line">    <span class="string">&quot;bookCount&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;createTime&quot;</span>: <span class="number">1640995200</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="重命名归档">重命名归档</h3><h4 id="POST-https-i-weread-qq-com-shelf-archive-2">POST <a href="https://i.weread.qq.com/shelf/archive">https://i.weread.qq.com/shelf/archive</a></h4><p>重命名现有的归档分类。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;archiveId&quot;</span>: <span class="number">123</span>,                    <span class="comment">// 归档ID</span></span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;新的归档名称&quot;</span>,               <span class="comment">// 新名称</span></span><br><span class="line">  <span class="string">&quot;bookIds&quot;</span>: [<span class="string">&quot;book1&quot;</span>, <span class="string">&quot;book2&quot;</span>],       <span class="comment">// 归档中的书籍ID数组</span></span><br><span class="line">  <span class="string">&quot;lectureBookIds&quot;</span>: [<span class="string">&quot;lecture1&quot;</span>],      <span class="comment">// 讲座书籍ID数组</span></span><br><span class="line">  <span class="string">&quot;albumIds&quot;</span>: [<span class="string">&quot;album1&quot;</span>]               <span class="comment">// 专辑ID数组</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="删除归档">删除归档</h3><h4 id="POST-https-i-weread-qq-com-shelf-deleteArchive">POST <a href="https://i.weread.qq.com/shelf/deleteArchive">https://i.weread.qq.com/shelf/deleteArchive</a></h4><p>删除指定的归档分类。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;archiveId&quot;</span>: <span class="number">123</span>,                    <span class="comment">// 要删除的归档ID</span></span><br><span class="line">  <span class="string">&quot;removeBooks&quot;</span>: <span class="number">1</span>                     <span class="comment">// 是否同时删除归档中的书籍</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="书架特殊功能">书架特殊功能</h2><h3 id="添加私密书籍">添加私密书籍</h3><h4 id="POST-https-i-weread-qq-com-book-secret">POST <a href="https://i.weread.qq.com/book/secret">https://i.weread.qq.com/book/secret</a></h4><p>将书籍设置为私密状态。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookIds&quot;</span>: [<span class="string">&quot;book1&quot;</span>, <span class="string">&quot;book2&quot;</span>],       <span class="comment">// 书籍ID数组</span></span><br><span class="line">  <span class="string">&quot;albumIds&quot;</span>: [<span class="string">&quot;album1&quot;</span>],              <span class="comment">// 专辑ID数组</span></span><br><span class="line">  <span class="string">&quot;private&quot;</span>: <span class="number">1</span>                         <span class="comment">// 1: 设为私密, 0: 取消私密</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="书架同步">书架同步</h2><h3 id="同步书架数据">同步书架数据</h3><h4 id="GET-shelf-sync">GET /shelf/sync</h4><p>同步书架数据，获取最新的书架状态。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;teenmode&quot;</span>: <span class="number">0</span>,                       <span class="comment">// 青少年模式</span></span><br><span class="line">  <span class="string">&quot;album&quot;</span>: <span class="number">1</span>,                          <span class="comment">// 是否包含专辑</span></span><br><span class="line">  <span class="string">&quot;onlyBookid&quot;</span>: <span class="number">0</span>,                     <span class="comment">// 是否只返回书籍ID</span></span><br><span class="line">  <span class="string">&quot;localBookCount&quot;</span>: <span class="number">100</span>                <span class="comment">// 本地书籍数量</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;books&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;书籍标题&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: <span class="string">&quot;作者&quot;</span>,</span><br><span class="line">        <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;封面URL&quot;</span>,</span><br><span class="line">        <span class="string">&quot;progress&quot;</span>: <span class="number">0.5</span>,</span><br><span class="line">        <span class="string">&quot;isTop&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;isPrivate&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;archiveId&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;addTime&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">        <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995300</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;archives&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;archiveId&quot;</span>: <span class="number">123</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;我的收藏&quot;</span>,</span><br><span class="line">        <span class="string">&quot;bookCount&quot;</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="string">&quot;createTime&quot;</span>: <span class="number">1640995200</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">    <span class="string">&quot;hasMore&quot;</span>: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取书架数据信息">获取书架数据信息</h3><h4 id="POST-https-i-weread-qq-com-shelf-syncbook">POST <a href="https://i.weread.qq.com/shelf/syncbook">https://i.weread.qq.com/shelf/syncbook</a></h4><p>获取指定书籍和专辑的书架数据信息。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookIds&quot;</span>: [<span class="string">&quot;book1&quot;</span>, <span class="string">&quot;book2&quot;</span>],       <span class="comment">// 书籍ID数组</span></span><br><span class="line">  <span class="string">&quot;albumIds&quot;</span>: [<span class="string">&quot;album1&quot;</span>, <span class="string">&quot;album2&quot;</span>]     <span class="comment">// 专辑ID数组</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="同步书架信息">同步书架信息</h3><h4 id="POST-https-i-weread-qq-com-book-shelfinfos">POST <a href="https://i.weread.qq.com/book/shelfinfos">https://i.weread.qq.com/book/shelfinfos</a></h4><p>同步书架中书籍的详细信息。</p><p><strong>方式一：同步指定书籍</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">syncBookShelfInfo</span>(<span class="params">bookIds, vid, skey</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://i.weread.qq.com/book/shelfinfos&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;vid&#x27;</span>: vid.<span class="title function_">toString</span>(),</span><br><span class="line">      <span class="string">&#x27;skey&#x27;</span>: skey,</span><br><span class="line">      <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">      <span class="attr">bookIds</span>: bookIds</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>方式二：同步用户书架信息</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">syncShelfInfo</span>(<span class="params">userVid, forceBookIds = [], vid, skey</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://i.weread.qq.com/book/shelfinfos&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;vid&#x27;</span>: vid.<span class="title function_">toString</span>(),</span><br><span class="line">      <span class="string">&#x27;skey&#x27;</span>: skey,</span><br><span class="line">      <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">      <span class="attr">vid</span>: userVid,</span><br><span class="line">      <span class="attr">forceBookIds</span>: forceBookIds</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>实用工具 API</h1><p>微信读书实用工具相关的 API 接口，包括 OCR 扫描、通知管理、公众号文章等功能。</p><h2 id="OCR-扫描-API">OCR 扫描 API</h2><h3 id="书籍扫描识别">书籍扫描识别</h3><h4 id="POST-https-i-weread-qq-com-book-scan">POST <a href="https://i.weread.qq.com/book/scan">https://i.weread.qq.com/book/scan</a></h4><p>通过图片 OCR 识别书籍信息。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;picUrl&quot;</span>: <span class="string">&quot;https://example.com/book_cover.jpg&quot;</span>,  <span class="comment">// 图片URL</span></span><br><span class="line">  <span class="string">&quot;scene&quot;</span>: <span class="number">1</span>,                                      <span class="comment">// 扫描场景</span></span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,                         <span class="comment">// 书籍ID（可选）</span></span><br><span class="line">  <span class="string">&quot;sid&quot;</span>: <span class="string">&quot;session_id_here&quot;</span>,                        <span class="comment">// 会话ID</span></span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_123&quot;</span>                         <span class="comment">// 书评ID（可选）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;bookInfo&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,</span><br><span class="line">      <span class="string">&quot;title&quot;</span>: <span class="string">&quot;人工智能简史&quot;</span>,</span><br><span class="line">      <span class="string">&quot;author&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">      <span class="string">&quot;isbn&quot;</span>: <span class="string">&quot;9787111234567&quot;</span>,</span><br><span class="line">      <span class="string">&quot;publisher&quot;</span>: <span class="string">&quot;机械工业出版社&quot;</span>,</span><br><span class="line">      <span class="string">&quot;publishDate&quot;</span>: <span class="string">&quot;2023-01-01&quot;</span>,</span><br><span class="line">      <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;https://example.com/cover.jpg&quot;</span>,</span><br><span class="line">      <span class="string">&quot;description&quot;</span>: <span class="string">&quot;这是一本关于人工智能发展历程的书籍&quot;</span>,</span><br><span class="line">      <span class="string">&quot;category&quot;</span>: <span class="string">&quot;科技&quot;</span>,</span><br><span class="line">      <span class="string">&quot;price&quot;</span>: <span class="number">59.00</span>,</span><br><span class="line">      <span class="string">&quot;pageCount&quot;</span>: <span class="number">320</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;confidence&quot;</span>: <span class="number">0.95</span>,                            <span class="comment">// 识别置信度</span></span><br><span class="line">    <span class="string">&quot;scanResult&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;textBlocks&quot;</span>: [                              <span class="comment">// 识别的文本块</span></span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;text&quot;</span>: <span class="string">&quot;人工智能简史&quot;</span>,</span><br><span class="line">          <span class="string">&quot;position&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;x&quot;</span>: <span class="number">100</span>,</span><br><span class="line">            <span class="string">&quot;y&quot;</span>: <span class="number">50</span>,</span><br><span class="line">            <span class="string">&quot;width&quot;</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="string">&quot;height&quot;</span>: <span class="number">30</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">&quot;confidence&quot;</span>: <span class="number">0.98</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&quot;detectedLanguage&quot;</span>: <span class="string">&quot;zh-CN&quot;</span>,                 <span class="comment">// 检测到的语言</span></span><br><span class="line">      <span class="string">&quot;orientation&quot;</span>: <span class="number">0</span>                             <span class="comment">// 图片方向</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;recommendations&quot;</span>: [                           <span class="comment">// 推荐的相关书籍</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_789012&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;机器学习实战&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: <span class="string">&quot;李四&quot;</span>,</span><br><span class="line">        <span class="string">&quot;similarity&quot;</span>: <span class="number">0.85</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>扫描场景说明:</strong></p><ul><li><code>scene: 1</code> - 书籍封面扫描</li><li><code>scene: 2</code> - 书籍内页扫描</li><li><code>scene: 3</code> - 书籍条形码扫描</li><li><code>scene: 4</code> - 文字内容扫描</li></ul><h2 id="公众号文章-API">公众号文章 API</h2><h3 id="阅读公众号文章">阅读公众号文章</h3><h4 id="POST-https-i-weread-qq-com-mp-read">POST <a href="https://i.weread.qq.com/mp/read">https://i.weread.qq.com/mp/read</a></h4><p>记录公众号文章的阅读行为。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_123456&quot;</span>,         <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://mp.weixin.qq.com/s/xxx&quot;</span>,  <span class="comment">// 文章URL</span></span><br><span class="line">  <span class="string">&quot;title&quot;</span>: <span class="string">&quot;文章标题&quot;</span>,                  <span class="comment">// 文章标题</span></span><br><span class="line">  <span class="string">&quot;thumbUrl&quot;</span>: <span class="string">&quot;https://example.com/thumb.jpg&quot;</span>,  <span class="comment">// 缩略图URL</span></span><br><span class="line">  <span class="string">&quot;account&quot;</span>: <span class="string">&quot;公众号名称&quot;</span>,              <span class="comment">// 公众号账号名</span></span><br><span class="line">  <span class="string">&quot;isDelete&quot;</span>: <span class="number">0</span>,                       <span class="comment">// 是否删除 (0: 否, 1: 是)</span></span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;mp_article_123&quot;</span>           <span class="comment">// 文章ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;readId&quot;</span>: <span class="string">&quot;read_789012&quot;</span>,</span><br><span class="line">    <span class="string">&quot;articleInfo&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;mp_article_123&quot;</span>,</span><br><span class="line">      <span class="string">&quot;title&quot;</span>: <span class="string">&quot;文章标题&quot;</span>,</span><br><span class="line">      <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://mp.weixin.qq.com/s/xxx&quot;</span>,</span><br><span class="line">      <span class="string">&quot;thumbUrl&quot;</span>: <span class="string">&quot;https://example.com/thumb.jpg&quot;</span>,</span><br><span class="line">      <span class="string">&quot;account&quot;</span>: <span class="string">&quot;公众号名称&quot;</span>,</span><br><span class="line">      <span class="string">&quot;publishTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">      <span class="string">&quot;readTime&quot;</span>: <span class="number">1640995300000</span>,</span><br><span class="line">      <span class="string">&quot;readProgress&quot;</span>: <span class="number">0.5</span>,</span><br><span class="line">      <span class="string">&quot;wordCount&quot;</span>: <span class="number">2500</span>,</span><br><span class="line">      <span class="string">&quot;estimatedReadTime&quot;</span>: <span class="number">600</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;mpInfo&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;mpId&quot;</span>: <span class="string">&quot;mp_123&quot;</span>,</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;公众号名称&quot;</span>,</span><br><span class="line">      <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar.jpg&quot;</span>,</span><br><span class="line">      <span class="string">&quot;description&quot;</span>: <span class="string">&quot;公众号简介&quot;</span>,</span><br><span class="line">      <span class="string">&quot;verified&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">&quot;followerCount&quot;</span>: <span class="number">100000</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;readStats&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;totalReadTime&quot;</span>: <span class="number">3600</span>,</span><br><span class="line">      <span class="string">&quot;articlesRead&quot;</span>: <span class="number">25</span>,</span><br><span class="line">      <span class="string">&quot;favoriteCount&quot;</span>: <span class="number">5</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="更新阅读时间">更新阅读时间</h3><h4 id="POST-https-i-weread-qq-com-mp-read-2">POST <a href="https://i.weread.qq.com/mp/read">https://i.weread.qq.com/mp/read</a></h4><p>更新公众号文章的阅读时间记录。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;mp_article_123&quot;</span>           <span class="comment">// 文章ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取视频封面">获取视频封面</h3><h4 id="GET-video-cover">GET /video/cover</h4><p>获取企鹅号视频的封面信息。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;video_123456&quot;</span>             <span class="comment">// 视频ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;https://example.com/video_cover.jpg&quot;</span>,</span><br><span class="line">    <span class="string">&quot;title&quot;</span>: <span class="string">&quot;视频标题&quot;</span>,</span><br><span class="line">    <span class="string">&quot;duration&quot;</span>: <span class="number">1800</span>,                  <span class="comment">// 视频时长（秒）</span></span><br><span class="line">    <span class="string">&quot;resolution&quot;</span>: <span class="string">&quot;1920x1080&quot;</span>,         <span class="comment">// 分辨率</span></span><br><span class="line">    <span class="string">&quot;size&quot;</span>: <span class="number">52428800</span>,                  <span class="comment">// 文件大小（字节）</span></span><br><span class="line">    <span class="string">&quot;format&quot;</span>: <span class="string">&quot;mp4&quot;</span>,                   <span class="comment">// 视频格式</span></span><br><span class="line">    <span class="string">&quot;thumbnails&quot;</span>: [                    <span class="comment">// 缩略图列表</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;time&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://example.com/thumb_0.jpg&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;time&quot;</span>: <span class="number">300</span>,</span><br><span class="line">        <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://example.com/thumb_300.jpg&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;videoInfo&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;bitrate&quot;</span>: <span class="number">2000</span>,                 <span class="comment">// 码率</span></span><br><span class="line">      <span class="string">&quot;fps&quot;</span>: <span class="number">30</span>,                       <span class="comment">// 帧率</span></span><br><span class="line">      <span class="string">&quot;codec&quot;</span>: <span class="string">&quot;h264&quot;</span>                  <span class="comment">// 编码格式</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取公众号付费信息">获取公众号付费信息</h3><h4 id="POST-https-i-weread-qq-com-mp-getpaidinfo">POST <a href="https://i.weread.qq.com/mp/getpaidinfo">https://i.weread.qq.com/mp/getpaidinfo</a></h4><p>获取公众号文章的付费信息。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;urls&quot;</span>: [                            <span class="comment">// 文章URL列表</span></span><br><span class="line">    <span class="string">&quot;https://mp.weixin.qq.com/s/xxx&quot;</span>,</span><br><span class="line">    <span class="string">&quot;https://mp.weixin.qq.com/s/yyy&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;need_content&quot;</span>: <span class="literal">true</span>                 <span class="comment">// 是否需要内容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;paidInfoList&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://mp.weixin.qq.com/s/xxx&quot;</span>,</span><br><span class="line">        <span class="string">&quot;isPaid&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;price&quot;</span>: <span class="number">9.9</span>,</span><br><span class="line">        <span class="string">&quot;currency&quot;</span>: <span class="string">&quot;CNY&quot;</span>,</span><br><span class="line">        <span class="string">&quot;paymentStatus&quot;</span>: <span class="string">&quot;paid&quot;</span>,</span><br><span class="line">        <span class="string">&quot;purchaseTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">        <span class="string">&quot;validUntil&quot;</span>: <span class="number">1672531200000</span>,</span><br><span class="line">        <span class="string">&quot;content&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;title&quot;</span>: <span class="string">&quot;付费文章标题&quot;</span>,</span><br><span class="line">          <span class="string">&quot;summary&quot;</span>: <span class="string">&quot;文章摘要内容...&quot;</span>,</span><br><span class="line">          <span class="string">&quot;wordCount&quot;</span>: <span class="number">3500</span>,</span><br><span class="line">          <span class="string">&quot;readTime&quot;</span>: <span class="number">8</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;mpId&quot;</span>: <span class="string">&quot;mp_123&quot;</span>,</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;公众号名称&quot;</span>,</span><br><span class="line">          <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/mp_avatar.jpg&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;totalPaidAmount&quot;</span>: <span class="number">19.8</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取公众号书评ID">获取公众号书评ID</h3><h4 id="POST-https-i-weread-qq-com-mp-getreviewid">POST <a href="https://i.weread.qq.com/mp/getreviewid">https://i.weread.qq.com/mp/getreviewid</a></h4><p>通过URL获取公众号文章的书评ID。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;urls&quot;</span>: [                            <span class="comment">// 文章URL列表</span></span><br><span class="line">    <span class="string">&quot;https://mp.weixin.qq.com/s/xxx&quot;</span>,</span><br><span class="line">    <span class="string">&quot;https://mp.weixin.qq.com/s/yyy&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;reviewIds&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://mp.weixin.qq.com/s/xxx&quot;</span>,</span><br><span class="line">        <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;mp_review_123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;mp_article_789&quot;</span>,</span><br><span class="line">        <span class="string">&quot;hasReview&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;reviewCount&quot;</span>: <span class="number">25</span>,</span><br><span class="line">        <span class="string">&quot;lastReviewTime&quot;</span>: <span class="number">1640995200000</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://mp.weixin.qq.com/s/yyy&quot;</span>,</span><br><span class="line">        <span class="string">&quot;reviewId&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;mp_article_790&quot;</span>,</span><br><span class="line">        <span class="string">&quot;hasReview&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;reviewCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;lastReviewTime&quot;</span>: <span class="literal">null</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;totalUrls&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;validUrls&quot;</span>: <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="同步公众号好友书评">同步公众号好友书评</h3><h4 id="GET-review-list-6">GET /review/list</h4><p>获取好友对公众号文章的书评。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;listtype&quot;</span>: <span class="number">1</span>,                       <span class="comment">// 列表类型</span></span><br><span class="line">  <span class="string">&quot;refMpReviewId&quot;</span>: <span class="string">&quot;mp_review_123&quot;</span>,    <span class="comment">// 参考公众号书评ID</span></span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;listmode&quot;</span>: <span class="number">1</span>,                       <span class="comment">// 列表模式</span></span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;mp_article_456&quot;</span>           <span class="comment">// 公众号文章ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="同步我的公众号书评">同步我的公众号书评</h3><h4 id="GET-review-list-7">GET /review/list</h4><p>获取我对公众号文章的书评。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;listtype&quot;</span>: <span class="number">2</span>,                       <span class="comment">// 列表类型</span></span><br><span class="line">  <span class="string">&quot;mine&quot;</span>: <span class="number">1</span>,                           <span class="comment">// 我的书评标识</span></span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;mp_article_456&quot;</span>,          <span class="comment">// 公众号文章ID</span></span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;listmode&quot;</span>: <span class="number">1</span>                        <span class="comment">// 列表模式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="同步公众号热门书评">同步公众号热门书评</h3><h4 id="GET-review-list-8">GET /review/list</h4><p>获取公众号文章的热门书评。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;listtype&quot;</span>: <span class="number">3</span>,                       <span class="comment">// 列表类型（热门）</span></span><br><span class="line">  <span class="string">&quot;refMpReviewId&quot;</span>: <span class="string">&quot;mp_review_123&quot;</span>,    <span class="comment">// 参考公众号书评ID</span></span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;listmode&quot;</span>: <span class="number">1</span>,                       <span class="comment">// 列表模式</span></span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;mp_article_456&quot;</span>           <span class="comment">// 公众号文章ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="字典服务-API">字典服务 API</h2><h3 id="获取字典列表">获取字典列表</h3><h4 id="GET-dictionary">GET /dictionary</h4><p>获取可用的字典列表。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>                 <span class="comment">// 同步键</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;dictionaries&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;dictId&quot;</span>: <span class="string">&quot;dict_english&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;英汉词典&quot;</span>,</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;权威英汉双语词典&quot;</span>,</span><br><span class="line">        <span class="string">&quot;language&quot;</span>: <span class="string">&quot;en-zh&quot;</span>,</span><br><span class="line">        <span class="string">&quot;version&quot;</span>: <span class="string">&quot;2.1.0&quot;</span>,</span><br><span class="line">        <span class="string">&quot;wordCount&quot;</span>: <span class="number">150000</span>,</span><br><span class="line">        <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">        <span class="string">&quot;isDefault&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;isOffline&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;size&quot;</span>: <span class="number">52428800</span>,                <span class="comment">// 字典大小（字节）</span></span><br><span class="line">        <span class="string">&quot;downloadUrl&quot;</span>: <span class="string">&quot;https://example.com/dict_english.db&quot;</span>,</span><br><span class="line">        <span class="string">&quot;features&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;pronunciation&quot;</span>,               <span class="comment">// 发音</span></span><br><span class="line">          <span class="string">&quot;example_sentences&quot;</span>,           <span class="comment">// 例句</span></span><br><span class="line">          <span class="string">&quot;etymology&quot;</span>,                   <span class="comment">// 词源</span></span><br><span class="line">          <span class="string">&quot;synonyms&quot;</span>                     <span class="comment">// 同义词</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;dictId&quot;</span>: <span class="string">&quot;dict_chinese&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;现代汉语词典&quot;</span>,</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;现代汉语规范词典&quot;</span>,</span><br><span class="line">        <span class="string">&quot;language&quot;</span>: <span class="string">&quot;zh&quot;</span>,</span><br><span class="line">        <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.8.0&quot;</span>,</span><br><span class="line">        <span class="string">&quot;wordCount&quot;</span>: <span class="number">80000</span>,</span><br><span class="line">        <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995100000</span>,</span><br><span class="line">        <span class="string">&quot;isDefault&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;isOffline&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;size&quot;</span>: <span class="number">31457280</span>,</span><br><span class="line">        <span class="string">&quot;downloadUrl&quot;</span>: <span class="string">&quot;https://example.com/dict_chinese.db&quot;</span>,</span><br><span class="line">        <span class="string">&quot;features&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;pinyin&quot;</span>,                      <span class="comment">// 拼音</span></span><br><span class="line">          <span class="string">&quot;stroke_order&quot;</span>,                <span class="comment">// 笔画顺序</span></span><br><span class="line">          <span class="string">&quot;radical&quot;</span>,                     <span class="comment">// 部首</span></span><br><span class="line">          <span class="string">&quot;idioms&quot;</span>                       <span class="comment">// 成语</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">    <span class="string">&quot;lastUpdateTime&quot;</span>: <span class="number">1640995200000</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="查询单词">查询单词</h3><h4 id="POST-https-i-weread-qq-com-dict-query">POST <a href="https://i.weread.qq.com/dict/query">https://i.weread.qq.com/dict/query</a></h4><p>查询指定单词的详细信息。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;word&quot;</span>: <span class="string">&quot;artificial&quot;</span>                 <span class="comment">// 要查询的单词</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;word&quot;</span>: <span class="string">&quot;artificial&quot;</span>,</span><br><span class="line">    <span class="string">&quot;queryTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">    <span class="string">&quot;results&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;dictId&quot;</span>: <span class="string">&quot;dict_english&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dictName&quot;</span>: <span class="string">&quot;英汉词典&quot;</span>,</span><br><span class="line">        <span class="string">&quot;entries&quot;</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;word&quot;</span>: <span class="string">&quot;artificial&quot;</span>,</span><br><span class="line">            <span class="string">&quot;phonetic&quot;</span>: &#123;</span><br><span class="line">              <span class="string">&quot;uk&quot;</span>: <span class="string">&quot;/ˌɑːtɪˈfɪʃl/&quot;</span>,</span><br><span class="line">              <span class="string">&quot;us&quot;</span>: <span class="string">&quot;/ˌɑːrtɪˈfɪʃl/&quot;</span>,</span><br><span class="line">              <span class="string">&quot;audioUrl&quot;</span>: <span class="string">&quot;https://example.com/audio/artificial.mp3&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;partOfSpeech&quot;</span>: <span class="string">&quot;adjective&quot;</span>,</span><br><span class="line">            <span class="string">&quot;definitions&quot;</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="string">&quot;meaning&quot;</span>: <span class="string">&quot;人造的；人工的；假的&quot;</span>,</span><br><span class="line">                <span class="string">&quot;englishMeaning&quot;</span>: <span class="string">&quot;made or produced by human beings rather than occurring naturally&quot;</span>,</span><br><span class="line">                <span class="string">&quot;examples&quot;</span>: [</span><br><span class="line">                  &#123;</span><br><span class="line">                    <span class="string">&quot;sentence&quot;</span>: <span class="string">&quot;artificial intelligence&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;translation&quot;</span>: <span class="string">&quot;人工智能&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;source&quot;</span>: <span class="string">&quot;technology&quot;</span></span><br><span class="line">                  &#125;,</span><br><span class="line">                  &#123;</span><br><span class="line">                    <span class="string">&quot;sentence&quot;</span>: <span class="string">&quot;artificial flowers&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;translation&quot;</span>: <span class="string">&quot;人造花&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;source&quot;</span>: <span class="string">&quot;daily&quot;</span></span><br><span class="line">                  &#125;</span><br><span class="line">                ],</span><br><span class="line">                <span class="string">&quot;level&quot;</span>: <span class="string">&quot;intermediate&quot;</span></span><br><span class="line">              &#125;</span><br><span class="line">            ],</span><br><span class="line">            <span class="string">&quot;synonyms&quot;</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="string">&quot;word&quot;</span>: <span class="string">&quot;synthetic&quot;</span>,</span><br><span class="line">                <span class="string">&quot;meaning&quot;</span>: <span class="string">&quot;合成的&quot;</span></span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="string">&quot;word&quot;</span>: <span class="string">&quot;man-made&quot;</span>,</span><br><span class="line">                <span class="string">&quot;meaning&quot;</span>: <span class="string">&quot;人造的&quot;</span></span><br><span class="line">              &#125;</span><br><span class="line">            ],</span><br><span class="line">            <span class="string">&quot;antonyms&quot;</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="string">&quot;word&quot;</span>: <span class="string">&quot;natural&quot;</span>,</span><br><span class="line">                <span class="string">&quot;meaning&quot;</span>: <span class="string">&quot;自然的&quot;</span></span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="string">&quot;word&quot;</span>: <span class="string">&quot;genuine&quot;</span>,</span><br><span class="line">                <span class="string">&quot;meaning&quot;</span>: <span class="string">&quot;真正的&quot;</span></span><br><span class="line">              &#125;</span><br><span class="line">            ],</span><br><span class="line">            <span class="string">&quot;etymology&quot;</span>: &#123;</span><br><span class="line">              <span class="string">&quot;origin&quot;</span>: <span class="string">&quot;Latin artificialis&quot;</span>,</span><br><span class="line">              <span class="string">&quot;description&quot;</span>: <span class="string">&quot;来自拉丁语 artificialis，意为&#x27;技艺的，人工的&#x27;&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;frequency&quot;</span>: &#123;</span><br><span class="line">              <span class="string">&quot;rank&quot;</span>: <span class="number">2500</span>,</span><br><span class="line">              <span class="string">&quot;level&quot;</span>: <span class="string">&quot;common&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;relatedWords&quot;</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="string">&quot;word&quot;</span>: <span class="string">&quot;artificially&quot;</span>,</span><br><span class="line">                <span class="string">&quot;partOfSpeech&quot;</span>: <span class="string">&quot;adverb&quot;</span>,</span><br><span class="line">                <span class="string">&quot;meaning&quot;</span>: <span class="string">&quot;人工地&quot;</span></span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="string">&quot;word&quot;</span>: <span class="string">&quot;artificiality&quot;</span>,</span><br><span class="line">                <span class="string">&quot;partOfSpeech&quot;</span>: <span class="string">&quot;noun&quot;</span>,</span><br><span class="line">                <span class="string">&quot;meaning&quot;</span>: <span class="string">&quot;人工性&quot;</span></span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;suggestions&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;artificial intelligence&quot;</span>,</span><br><span class="line">      <span class="string">&quot;artificial neural network&quot;</span>,</span><br><span class="line">      <span class="string">&quot;artificial life&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;searchHistory&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;word&quot;</span>: <span class="string">&quot;intelligence&quot;</span>,</span><br><span class="line">        <span class="string">&quot;searchTime&quot;</span>: <span class="number">1640995100000</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;word&quot;</span>: <span class="string">&quot;machine&quot;</span>,</span><br><span class="line">        <span class="string">&quot;searchTime&quot;</span>: <span class="number">1640995000000</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="通知管理-API">通知管理 API</h2><h3 id="获取通知列表">获取通知列表</h3><h4 id="GET-mine-notifications">GET /mine/notifications</h4><p>获取用户的通知列表。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;maxIdx&quot;</span>: <span class="number">100</span>,                       <span class="comment">// 最大索引</span></span><br><span class="line">  <span class="string">&quot;showAll&quot;</span>: <span class="number">1</span>                         <span class="comment">// 是否显示全部</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;notifications&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;notifId&quot;</span>: <span class="string">&quot;notif_123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;friend_request&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;好友请求&quot;</span>,</span><br><span class="line">        <span class="string">&quot;content&quot;</span>: <span class="string">&quot;用户张三想要添加您为好友&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sender&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;userId&quot;</span>: <span class="string">&quot;user_789&quot;</span>,</span><br><span class="line">          <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">          <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar1.jpg&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;relatedData&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;userId&quot;</span>: <span class="string">&quot;user_789&quot;</span>,</span><br><span class="line">          <span class="string">&quot;requestId&quot;</span>: <span class="string">&quot;req_456&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;isRead&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;createTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">        <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">        <span class="string">&quot;actions&quot;</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="string">&quot;accept&quot;</span>,</span><br><span class="line">            <span class="string">&quot;text&quot;</span>: <span class="string">&quot;接受&quot;</span>,</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;/friend/accept&quot;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="string">&quot;reject&quot;</span>, </span><br><span class="line">            <span class="string">&quot;text&quot;</span>: <span class="string">&quot;拒绝&quot;</span>,</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;/friend/reject&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;notifId&quot;</span>: <span class="string">&quot;notif_123457&quot;</span>,</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;book_recommendation&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;书籍推荐&quot;</span>,</span><br><span class="line">        <span class="string">&quot;content&quot;</span>: <span class="string">&quot;根据您的阅读偏好，为您推荐《机器学习实战》&quot;</span>,</span><br><span class="line">        <span class="string">&quot;relatedData&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_789012&quot;</span>,</span><br><span class="line">          <span class="string">&quot;title&quot;</span>: <span class="string">&quot;机器学习实战&quot;</span>,</span><br><span class="line">          <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;https://example.com/cover2.jpg&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;isRead&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;createTime&quot;</span>: <span class="number">1640995100000</span>,</span><br><span class="line">        <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995150000</span>,</span><br><span class="line">        <span class="string">&quot;actions&quot;</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="string">&quot;view&quot;</span>,</span><br><span class="line">            <span class="string">&quot;text&quot;</span>: <span class="string">&quot;查看详情&quot;</span>,</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;/book/detail&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">    <span class="string">&quot;maxIdx&quot;</span>: <span class="number">102</span>,</span><br><span class="line">    <span class="string">&quot;hasMore&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;unreadCount&quot;</span>: <span class="number">5</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="标记通知已读">标记通知已读</h3><h4 id="POST-https-i-weread-qq-com-notif-read">POST <a href="https://i.weread.qq.com/notif/read">https://i.weread.qq.com/notif/read</a></h4><p>将指定的通知标记为已读。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;notifIds&quot;</span>: <span class="string">&quot;notif_123456,notif_123457&quot;</span>,  <span class="comment">// 通知ID列表（逗号分隔）</span></span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>                      <span class="comment">// 同步键</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="删除通知">删除通知</h3><h4 id="POST-https-i-weread-qq-com-notif-delete">POST <a href="https://i.weread.qq.com/notif/delete">https://i.weread.qq.com/notif/delete</a></h4><p>删除指定的通知。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;notifIds&quot;</span>: <span class="string">&quot;notif_123456,notif_123457&quot;</span>   <span class="comment">// 通知ID列表（逗号分隔）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="取消书单通知">取消书单通知</h3><h4 id="POST-https-i-weread-qq-com-mine-cancelnotification">POST <a href="https://i.weread.qq.com/mine/cancelnotification">https://i.weread.qq.com/mine/cancelnotification</a></h4><p>取消书单相关的通知。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;booklistId&quot;</span>: <span class="string">&quot;booklist_123456&quot;</span>,     <span class="comment">// 书单ID</span></span><br><span class="line">  <span class="string">&quot;open&quot;</span>: <span class="number">0</span>                            <span class="comment">// 0: 取消通知, 1: 开启通知</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="取消书评通知">取消书评通知</h3><h4 id="POST-https-i-weread-qq-com-mine-cancelnotification-2">POST <a href="https://i.weread.qq.com/mine/cancelnotification">https://i.weread.qq.com/mine/cancelnotification</a></h4><p>取消书评相关的通知。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_123456&quot;</span>,         <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;open&quot;</span>: <span class="number">0</span>                            <span class="comment">// 0: 取消通知, 1: 开启通知</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="阅读辅助工具">阅读辅助工具</h2><h3 id="获取提醒词汇">获取提醒词汇</h3><h4 id="GET-reading-RemindWords">GET /reading/RemindWords</h4><p>获取阅读提醒词汇，用于阅读辅助和词汇学习。</p><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;remindWords&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;word&quot;</span>: <span class="string">&quot;serendipity&quot;</span>,</span><br><span class="line">        <span class="string">&quot;meaning&quot;</span>: <span class="string">&quot;意外发现珍奇事物的能力&quot;</span>,</span><br><span class="line">        <span class="string">&quot;pronunciation&quot;</span>: <span class="string">&quot;/ˌserənˈdɪpəti/&quot;</span>,</span><br><span class="line">        <span class="string">&quot;category&quot;</span>: <span class="string">&quot;高级词汇&quot;</span>,</span><br><span class="line">        <span class="string">&quot;frequency&quot;</span>: <span class="string">&quot;低频&quot;</span>,</span><br><span class="line">        <span class="string">&quot;examples&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;The discovery was pure serendipity.&quot;</span>,</span><br><span class="line">          <span class="string">&quot;这个发现纯属意外收获。&quot;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;word&quot;</span>: <span class="string">&quot;ubiquitous&quot;</span>,</span><br><span class="line">        <span class="string">&quot;meaning&quot;</span>: <span class="string">&quot;无处不在的&quot;</span>,</span><br><span class="line">        <span class="string">&quot;pronunciation&quot;</span>: <span class="string">&quot;/juːˈbɪkwɪtəs/&quot;</span>,</span><br><span class="line">        <span class="string">&quot;category&quot;</span>: <span class="string">&quot;学术词汇&quot;</span>,</span><br><span class="line">        <span class="string">&quot;frequency&quot;</span>: <span class="string">&quot;中频&quot;</span>,</span><br><span class="line">        <span class="string">&quot;examples&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;Smartphones are ubiquitous in modern society.&quot;</span>,</span><br><span class="line">          <span class="string">&quot;智能手机在现代社会无处不在。&quot;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">50</span>,</span><br><span class="line">    <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">    <span class="string">&quot;nextUpdate&quot;</span>: <span class="number">1641081600</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="短时阅读接收">短时阅读接收</h3><h4 id="POST-https-i-weread-qq-com-shorttime-book-recv">POST <a href="https://i.weread.qq.com/shorttime/book/recv">https://i.weread.qq.com/shorttime/book/recv</a></h4><p>接收短时阅读数据，用于快速阅读模式。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,        <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;readingMode&quot;</span>: <span class="string">&quot;speed&quot;</span>,          <span class="comment">// 阅读模式: speed, normal, deep</span></span><br><span class="line">  <span class="string">&quot;duration&quot;</span>: <span class="number">300</span>,                 <span class="comment">// 阅读时长（秒）</span></span><br><span class="line">  <span class="string">&quot;chapterIds&quot;</span>: [<span class="string">&quot;ch1&quot;</span>, <span class="string">&quot;ch2&quot;</span>],    <span class="comment">// 章节ID列表</span></span><br><span class="line">  <span class="string">&quot;settings&quot;</span>: &#123;                    <span class="comment">// 阅读设置</span></span><br><span class="line">    <span class="string">&quot;wordsPerMinute&quot;</span>: <span class="number">250</span>,         <span class="comment">// 每分钟阅读字数</span></span><br><span class="line">    <span class="string">&quot;autoScroll&quot;</span>: <span class="literal">true</span>,            <span class="comment">// 自动滚动</span></span><br><span class="line">    <span class="string">&quot;highlightKey&quot;</span>: <span class="literal">true</span>           <span class="comment">// 高亮关键词</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;sessionId&quot;</span>: <span class="string">&quot;session_123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;readingStats&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;wordsRead&quot;</span>: <span class="number">750</span>,</span><br><span class="line">      <span class="string">&quot;timeSpent&quot;</span>: <span class="number">300</span>,</span><br><span class="line">      <span class="string">&quot;comprehensionScore&quot;</span>: <span class="number">85</span>,</span><br><span class="line">      <span class="string">&quot;readingSpeed&quot;</span>: <span class="number">150</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;keyPoints&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;人工智能的发展历程&quot;</span>,</span><br><span class="line">      <span class="string">&quot;机器学习的基本原理&quot;</span>,</span><br><span class="line">      <span class="string">&quot;深度学习的应用场景&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;nextRecommendation&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;chapterId&quot;</span>: <span class="string">&quot;ch3&quot;</span>,</span><br><span class="line">      <span class="string">&quot;estimatedTime&quot;</span>: <span class="number">240</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="云书搜索">云书搜索</h2><h3 id="云书搜索预热">云书搜索预热</h3><h4 id="POST-https-i-weread-qq-com-cloudbooksearch-preheat">POST <a href="https://i.weread.qq.com/cloudbooksearch/preheat">https://i.weread.qq.com/cloudbooksearch/preheat</a></h4><p>预热云书搜索功能，提高搜索响应速度。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,        <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;searchType&quot;</span>: <span class="string">&quot;content&quot;</span>,         <span class="comment">// 搜索类型: content, title, author</span></span><br><span class="line">  <span class="string">&quot;preloadChapters&quot;</span>: <span class="number">5</span>,            <span class="comment">// 预加载章节数</span></span><br><span class="line">  <span class="string">&quot;indexMode&quot;</span>: <span class="string">&quot;full&quot;</span>              <span class="comment">// 索引模式: full, partial, minimal</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;preheatId&quot;</span>: <span class="string">&quot;preheat_123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;status&quot;</span>: <span class="string">&quot;completed&quot;</span>,</span><br><span class="line">    <span class="string">&quot;indexedChapters&quot;</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="string">&quot;totalChapters&quot;</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="string">&quot;indexSize&quot;</span>: <span class="string">&quot;2.5MB&quot;</span>,</span><br><span class="line">    <span class="string">&quot;searchReady&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;estimatedSearchTime&quot;</span>: <span class="string">&quot;&lt; 100ms&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="音乐服务">音乐服务</h2><h3 id="获取QQ音乐信息">获取QQ音乐信息</h3><h4 id="GET-open-music-qq-com-fcgi-bin-fcg-music-get-song-info-weixin-fcg">GET <a href="//open.music.qq.com/fcgi-bin/fcg_music_get_song_info_weixin.fcg">//open.music.qq.com/fcgi-bin/fcg_music_get_song_info_weixin.fcg</a></h4><p>获取QQ音乐歌曲信息，用于阅读背景音乐功能。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;song_id&quot;</span>: <span class="string">&quot;song_123456&quot;</span>,            <span class="comment">// 歌曲ID</span></span><br><span class="line">  <span class="string">&quot;mid&quot;</span>: <span class="string">&quot;mid_string&quot;</span>,                 <span class="comment">// 音乐ID</span></span><br><span class="line">  <span class="string">&quot;format&quot;</span>: <span class="string">&quot;json&quot;</span>,                    <span class="comment">// 返回格式</span></span><br><span class="line">  <span class="string">&quot;app_id&quot;</span>: <span class="string">&quot;weread_app&quot;</span>,              <span class="comment">// 应用ID</span></span><br><span class="line">  <span class="string">&quot;app_key&quot;</span>: <span class="string">&quot;app_key_string&quot;</span>,         <span class="comment">// 应用密钥</span></span><br><span class="line">  <span class="string">&quot;device_id&quot;</span>: <span class="string">&quot;device_123&quot;</span>,           <span class="comment">// 设备ID</span></span><br><span class="line">  <span class="string">&quot;file_type&quot;</span>: <span class="string">&quot;mp3&quot;</span>                   <span class="comment">// 文件类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;song&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;songId&quot;</span>: <span class="string">&quot;song_123456&quot;</span>,</span><br><span class="line">      <span class="string">&quot;mid&quot;</span>: <span class="string">&quot;mid_string&quot;</span>,</span><br><span class="line">      <span class="string">&quot;title&quot;</span>: <span class="string">&quot;轻音乐 - 阅读时光&quot;</span>,</span><br><span class="line">      <span class="string">&quot;artist&quot;</span>: <span class="string">&quot;背景音乐&quot;</span>,</span><br><span class="line">      <span class="string">&quot;album&quot;</span>: <span class="string">&quot;阅读专辑&quot;</span>,</span><br><span class="line">      <span class="string">&quot;duration&quot;</span>: <span class="number">240</span>,</span><br><span class="line">      <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;https://example.com/cover.jpg&quot;</span>,</span><br><span class="line">      <span class="string">&quot;playUrl&quot;</span>: <span class="string">&quot;https://music.qq.com/play/123456.mp3&quot;</span>,</span><br><span class="line">      <span class="string">&quot;quality&quot;</span>: <span class="string">&quot;128kbps&quot;</span>,</span><br><span class="line">      <span class="string">&quot;fileSize&quot;</span>: <span class="string">&quot;3.2MB&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;playInfo&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;canPlay&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">&quot;needVip&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">&quot;playCount&quot;</span>: <span class="number">1000000</span>,</span><br><span class="line">      <span class="string">&quot;downloadUrl&quot;</span>: <span class="string">&quot;https://music.qq.com/download/123456.mp3&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>安全与举报 API</h1><p>微信读书安全与举报相关的 API 接口，包括用户举报、广告举报、内容审核等功能。</p><h2 id="用户举报">用户举报</h2><h3 id="举报用户">举报用户</h3><h4 id="POST-https-i-weread-qq-com-user-accuse">POST <a href="https://i.weread.qq.com/user/accuse">https://i.weread.qq.com/user/accuse</a></h4><p>举报不当用户行为。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;accuseVid&quot;</span>: <span class="number">12345</span>,                  <span class="comment">// 被举报用户的 VID</span></span><br><span class="line">  <span class="string">&quot;accuseTypes&quot;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]             <span class="comment">// 举报类型数组</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>举报类型说明:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">AccuseTypes</span> = &#123;</span><br><span class="line">  <span class="attr">SPAM</span>: <span class="number">1</span>,                             <span class="comment">// 垃圾信息</span></span><br><span class="line">  <span class="attr">HARASSMENT</span>: <span class="number">2</span>,                       <span class="comment">// 骚扰行为</span></span><br><span class="line">  <span class="attr">INAPPROPRIATE_CONTENT</span>: <span class="number">3</span>,            <span class="comment">// 不当内容</span></span><br><span class="line">  <span class="attr">FAKE_ACCOUNT</span>: <span class="number">4</span>,                     <span class="comment">// 虚假账户</span></span><br><span class="line">  <span class="attr">COPYRIGHT_VIOLATION</span>: <span class="number">5</span>,              <span class="comment">// 版权侵犯</span></span><br><span class="line">  <span class="attr">FRAUD</span>: <span class="number">6</span>,                           <span class="comment">// 欺诈行为</span></span><br><span class="line">  <span class="attr">HATE_SPEECH</span>: <span class="number">7</span>,                     <span class="comment">// 仇恨言论</span></span><br><span class="line">  <span class="attr">VIOLENCE</span>: <span class="number">8</span>                         <span class="comment">// 暴力内容</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;reportId&quot;</span>: <span class="string">&quot;report_123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;status&quot;</span>: <span class="string">&quot;submitted&quot;</span>,</span><br><span class="line">    <span class="string">&quot;message&quot;</span>: <span class="string">&quot;举报已提交，我们会在24小时内处理&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="广告举报">广告举报</h2><h3 id="举报广告">举报广告</h3><h4 id="POST-https-i-weread-qq-com-ad-accuse">POST <a href="https://i.weread.qq.com/ad/accuse">https://i.weread.qq.com/ad/accuse</a></h4><p>举报不当广告内容。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;user_vid&quot;</span>,                   <span class="comment">// 举报用户的 VID</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: [<span class="string">&quot;spam&quot;</span>, <span class="string">&quot;inappropriate&quot;</span>],   <span class="comment">// 举报类型数组</span></span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id&quot;</span>,                 <span class="comment">// 相关书籍ID</span></span><br><span class="line">  <span class="string">&quot;adId&quot;</span>: <span class="string">&quot;ad_id&quot;</span>,                     <span class="comment">// 广告ID</span></span><br><span class="line">  <span class="string">&quot;description&quot;</span>: <span class="string">&quot;举报描述&quot;</span>,           <span class="comment">// 详细描述（可选）</span></span><br><span class="line">  <span class="string">&quot;evidence&quot;</span>: [<span class="string">&quot;url1&quot;</span>, <span class="string">&quot;url2&quot;</span>]         <span class="comment">// 证据链接（可选）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>举报类型说明:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">AdAccuseTypes</span> = &#123;</span><br><span class="line">  <span class="attr">SPAM</span>: <span class="string">&#x27;spam&#x27;</span>,                        <span class="comment">// 垃圾广告</span></span><br><span class="line">  <span class="attr">INAPPROPRIATE</span>: <span class="string">&#x27;inappropriate&#x27;</span>,       <span class="comment">// 不当内容</span></span><br><span class="line">  <span class="attr">MISLEADING</span>: <span class="string">&#x27;misleading&#x27;</span>,            <span class="comment">// 误导性广告</span></span><br><span class="line">  <span class="attr">ADULT_CONTENT</span>: <span class="string">&#x27;adult_content&#x27;</span>,      <span class="comment">// 成人内容</span></span><br><span class="line">  <span class="attr">VIOLENCE</span>: <span class="string">&#x27;violence&#x27;</span>,                <span class="comment">// 暴力内容</span></span><br><span class="line">  <span class="attr">FRAUD</span>: <span class="string">&#x27;fraud&#x27;</span>,                      <span class="comment">// 欺诈广告</span></span><br><span class="line">  <span class="attr">COPYRIGHT</span>: <span class="string">&#x27;copyright&#x27;</span>               <span class="comment">// 版权侵犯</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;reportId&quot;</span>: <span class="string">&quot;ad_report_789012&quot;</span>,</span><br><span class="line">    <span class="string">&quot;status&quot;</span>: <span class="string">&quot;submitted&quot;</span>,</span><br><span class="line">    <span class="string">&quot;message&quot;</span>: <span class="string">&quot;广告举报已提交&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="内容举报">内容举报</h2><h3 id="举报书评-评论">举报书评/评论</h3><h4 id="POST-https-i-weread-qq-com-content-report">POST <a href="https://i.weread.qq.com/content/report">https://i.weread.qq.com/content/report</a></h4><p>举报书评、评论等用户生成内容。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;contentType&quot;</span>: <span class="string">&quot;review&quot;</span>,             <span class="comment">// 内容类型: review, comment, note</span></span><br><span class="line">  <span class="string">&quot;contentId&quot;</span>: <span class="string">&quot;content_123&quot;</span>,          <span class="comment">// 内容ID</span></span><br><span class="line">  <span class="string">&quot;authorVid&quot;</span>: <span class="string">&quot;author_456&quot;</span>,           <span class="comment">// 内容作者VID</span></span><br><span class="line">  <span class="string">&quot;reportTypes&quot;</span>: [<span class="number">1</span>, <span class="number">2</span>],               <span class="comment">// 举报类型</span></span><br><span class="line">  <span class="string">&quot;description&quot;</span>: <span class="string">&quot;举报描述&quot;</span>,           <span class="comment">// 详细描述</span></span><br><span class="line">  <span class="string">&quot;evidence&quot;</span>: [<span class="string">&quot;url1&quot;</span>, <span class="string">&quot;url2&quot;</span>]         <span class="comment">// 证据（可选）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;note flat&quot;&gt;&lt;p&gt;CC BY-NC-SA 4.0&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;通用&lt;code&gt;headers&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class</summary>
      
    
    
    
    <category term="微信读书客户端逆向" scheme="https://yumi1.top/categories/%E5%BE%AE%E4%BF%A1%E8%AF%BB%E4%B9%A6%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%80%86%E5%90%91/"/>
    
    
    <category term="漏洞分析" scheme="https://yumi1.top/tags/%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>微信读书客户端 逆向 api文档</title>
    <link href="https://yumi1.top/weread-security-analysis-2/"/>
    <id>https://yumi1.top/weread-security-analysis-2/</id>
    <published>2025-08-04T12:31:00.000Z</published>
    <updated>2025-08-04T14:24:54.783Z</updated>
    
    <content type="html"><![CDATA[<div class="note flat"><p>CC BY-NC-SA 4.0</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">API_BASE</span> = <span class="string">&#x27;https://i.weread.qq.com&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">USER_AGENT</span> = <span class="string">&#x27;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通用请求头</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getHeaders</span> = (<span class="params">vid, skey</span>) =&gt; (&#123;</span><br><span class="line">  <span class="string">&#x27;vid&#x27;</span>: vid.<span class="title function_">toString</span>(),</span><br><span class="line">  <span class="string">&#x27;skey&#x27;</span>: skey,</span><br><span class="line">  <span class="string">&#x27;User-Agent&#x27;</span>: <span class="variable constant_">USER_AGENT</span>,</span><br><span class="line">  <span class="string">&#x27;v&#x27;</span>: <span class="string">&#x27;7.4.2.23&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>基础<code>headers</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">      <span class="string">&#x27;vid&#x27;</span>: vid.<span class="title function_">toString</span>(),</span><br><span class="line">      <span class="string">&#x27;skey&#x27;</span>: skey,</span><br><span class="line">      <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 使用 refresh_token 登录</span></span><br><span class="line"><span class="keyword">const</span> loginResponse = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`<span class="subst">$&#123;API_BASE&#125;</span>/login`</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123; <span class="string">&#x27;User-Agent&#x27;</span>: <span class="variable constant_">USER_AGENT</span> &#125;,</span><br><span class="line">  <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">    <span class="attr">deviceId</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">    <span class="attr">refCgi</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">refreshToken</span>: <span class="string">&#x27;your_refresh_token&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; vid, skey &#125; = <span class="keyword">await</span> loginResponse.<span class="title function_">json</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 使用 vid 和 skey 调用其他 API</span></span><br><span class="line"><span class="keyword">const</span> userProfile = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`<span class="subst">$&#123;API_BASE&#125;</span>/user/profile`</span>, &#123;</span><br><span class="line">  <span class="attr">headers</span>: <span class="title function_">getHeaders</span>(vid, skey)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1>错误码</h1><h2 id="通用错误码">通用错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>0</td><td>SUCCESS</td><td>成功</td></tr><tr><td>-2001</td><td>ErrorUnknown</td><td>未知错误</td></tr><tr><td>-2002</td><td>ErrorUndone</td><td>未完成</td></tr><tr><td>-2003</td><td>ErrorInvalidParam</td><td>无效参数</td></tr><tr><td>-2014</td><td>ErrorOverFreq</td><td>请求过于频繁</td></tr><tr><td>-2016</td><td>ErrorSvrReadOnly</td><td>服务器只读模式</td></tr><tr><td>-2018</td><td>ErrorAppVersionOut</td><td>应用版本过期</td></tr><tr><td>-2020</td><td>ErrorConnFail</td><td>连接失败</td></tr><tr><td>-2051</td><td>ErrorOverLimit</td><td>超出限制</td></tr><tr><td>-2053</td><td>ErrorSensitiveWord</td><td>敏感词汇</td></tr></tbody></table><h2 id="认证相关错误码">认证相关错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2004</td><td>ErrorInvalidVid</td><td>无效的用户ID</td></tr><tr><td>-2005</td><td>ErrorInvalidSkey</td><td>无效的会话密钥</td></tr><tr><td>-2006</td><td>ErrorInvalidOpenid</td><td>无效的OpenID</td></tr><tr><td>-2010</td><td>ErrorNoVid</td><td>用户不存在</td></tr><tr><td>-2011</td><td>ErrorGenSkey</td><td>生成会话密钥失败</td></tr><tr><td>-2012</td><td>ErrorSessionTimeout</td><td>登录超时</td></tr><tr><td>-2013</td><td>ErrorAuth</td><td>认证失败</td></tr><tr><td>-2017</td><td>ErrorVidReadOnly</td><td>用户只读模式</td></tr><tr><td>-2041</td><td>ErrorNeedVerify</td><td>需要验证</td></tr><tr><td>-2050</td><td>ErrorVidBlacked</td><td>用户被拉黑</td></tr><tr><td>-2054</td><td>ErrorInvalidToken</td><td>无效的令牌</td></tr><tr><td>-2063</td><td>ErrorVerExpired</td><td>验证过期</td></tr><tr><td>-2080</td><td>ErrorWeChatComm</td><td>微信通信错误</td></tr><tr><td>-2081</td><td>ErrorWeChatConnect</td><td>微信连接错误</td></tr></tbody></table><h2 id="用户相关错误码">用户相关错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2026</td><td>ErrorAccountSvrFail</td><td>账户服务失败</td></tr><tr><td>-2060</td><td>ErrorNotFriend</td><td>不是好友</td></tr><tr><td>-2061</td><td>ErrorUserInfoFail</td><td>获取用户信息失败</td></tr><tr><td>-2090</td><td>ErrorAntispamComm</td><td>反垃圾通信错误</td></tr><tr><td>-2704</td><td>ErrorUserForbidChat</td><td>用户禁止聊天</td></tr><tr><td>-2997</td><td>ErrorAccountAlreadyDeleted</td><td>账户已删除</td></tr><tr><td>-2998</td><td>ErrorAccountRevoked</td><td>账户已撤销</td></tr></tbody></table><h2 id="书籍相关错误码">书籍相关错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2008</td><td>ErrorInvalidBookid</td><td>无效的书籍ID</td></tr><tr><td>-2024</td><td>ErrorBookSvrFail</td><td>书籍服务失败</td></tr><tr><td>-2030</td><td>ErrorNoBook</td><td>书籍不存在</td></tr><tr><td>-2031</td><td>ErrorNoReview</td><td>书评不存在</td></tr><tr><td>-2032</td><td>ErrorNoRate</td><td>评分不存在</td></tr><tr><td>-2033</td><td>ErrorNoBookInfo</td><td>书籍信息不存在</td></tr><tr><td>-2034</td><td>ErrorNoMark</td><td>标记不存在</td></tr><tr><td>-2035</td><td>ErrorNoComment</td><td>评论不存在</td></tr><tr><td>-2037</td><td>ErrorNoBookInventory</td><td>书籍库存不足</td></tr><tr><td>-2040</td><td>ErrorBookLackContent</td><td>书籍缺少内容</td></tr><tr><td>-2311</td><td>ErrorBorrowFreeBook</td><td>借阅免费书籍错误</td></tr><tr><td>-2312</td><td>ErrorBorrowPaid</td><td>借阅已付费</td></tr><tr><td>-2313</td><td>ErrorBorrowNotPaid</td><td>借阅未付费</td></tr><tr><td>-2314</td><td>ErrorBorrowInvalidStatus</td><td>借阅状态无效</td></tr><tr><td>-2315</td><td>ErrorBorrowInvalidData</td><td>借阅数据无效</td></tr><tr><td>-2316</td><td>ErrorBorrowOut</td><td>借阅超时</td></tr><tr><td>-2317</td><td>ErrorBorrowing</td><td>正在借阅中</td></tr><tr><td>-2531</td><td>ErrorBookRunning</td><td>书籍处理中</td></tr><tr><td>-2533</td><td>ErrorInvalidBookInfo</td><td>无效的书籍信息</td></tr><tr><td>-2534</td><td>ErrorNoChapterInData</td><td>数据中无章节</td></tr><tr><td>-2538</td><td>ErrorPreSellBook</td><td>预售书籍</td></tr><tr><td>-2999</td><td>ErrorUploadBookOverLimit</td><td>上传书籍超出限制</td></tr></tbody></table><h2 id="支付相关错误码">支付相关错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2009</td><td>ErrorInvalidPrice</td><td>无效价格</td></tr><tr><td>-2027</td><td>ErrorPaySvrFail</td><td>支付服务失败</td></tr><tr><td>-2101</td><td>ErrorPayKvSelect</td><td>支付KV查询失败</td></tr><tr><td>-2102</td><td>ErrorPayKvInsert</td><td>支付KV插入失败</td></tr><tr><td>-2103</td><td>ErrorPayKvUpdate</td><td>支付KV更新失败</td></tr><tr><td>-2104</td><td>ErrorPayKvParse</td><td>支付KV解析失败</td></tr><tr><td>-2105</td><td>ErrorPayKvDump</td><td>支付KV导出失败</td></tr><tr><td>-2111</td><td>ErrorPayFetchBalance</td><td>获取余额失败</td></tr><tr><td>-2112</td><td>ErrorPayBalanceNotEnough</td><td>余额不足</td></tr><tr><td>-2113</td><td>ErrorPayPayApi</td><td>支付API错误</td></tr><tr><td>-2114</td><td>ErrorPayPresentApi</td><td>赠送API错误</td></tr><tr><td>-2115</td><td>ErrorPayMidasSysErr</td><td>米大师系统错误</td></tr><tr><td>-2116</td><td>ErrorPayMidasLogicErr</td><td>米大师逻辑错误</td></tr><tr><td>-2117</td><td>ErrorPayRollbackSucc</td><td>支付回滚成功</td></tr><tr><td>-2118</td><td>ErrorPayRollbackFail</td><td>支付回滚失败</td></tr><tr><td>-2119</td><td>ErrorPayAppType</td><td>支付应用类型错误</td></tr><tr><td>-2121</td><td>ErrorPayPresentAuth</td><td>赠送授权错误</td></tr><tr><td>-2123</td><td>ErrPayMemberCardNotEnough</td><td>会员卡不足</td></tr><tr><td>-2201</td><td>ErrorPayPayingBook</td><td>书籍支付中</td></tr><tr><td>-2202</td><td>ErrorPayBookPaidAlready</td><td>书籍已付费</td></tr><tr><td>-2203</td><td>ErrorPayBookNotExist</td><td>支付书籍不存在</td></tr><tr><td>-2204</td><td>ErrorPayFetchBookPrice</td><td>获取书籍价格失败</td></tr><tr><td>-2205</td><td>ErrorPayFetchNotEntireBook</td><td>获取非完整书籍失败</td></tr><tr><td>-2206</td><td>ErrorPayFreeBook</td><td>支付免费书籍</td></tr><tr><td>-2207</td><td>ErrorPayLimitFreeBook</td><td>限制免费书籍</td></tr><tr><td>-2208</td><td>ErrorPayNoBillno</td><td>无账单号</td></tr><tr><td>-2221</td><td>ErrorPayChaptersPaying</td><td>章节支付中</td></tr><tr><td>-2222</td><td>ErrorPayChapterIdsNull</td><td>章节ID为空</td></tr><tr><td>-2223</td><td>ErrorPayChapterAutoPayDisable</td><td>章节自动支付禁用</td></tr><tr><td>-2224</td><td>ErrorPayChapterFree</td><td>章节免费</td></tr><tr><td>-2225</td><td>ErrorPayChapterPriceEntireBook</td><td>章节价格为整本书</td></tr><tr><td>-2226</td><td>ErrorPayChapterPriceLack</td><td>章节价格不足</td></tr><tr><td>-2227</td><td>ErrorPayChaptersPartBoughtAlready</td><td>章节部分已购买</td></tr><tr><td>-2228</td><td>ErrorPayChaptersAllBoughtAlready</td><td>章节全部已购买</td></tr><tr><td>-2229</td><td>ErrorPayChaptersAutoPayClosed</td><td>章节自动支付关闭</td></tr><tr><td>-2281</td><td>ErrorPayPriceChanged</td><td>价格已变更</td></tr><tr><td>-2282</td><td>ErrorPayBookNumLimit</td><td>书籍数量限制</td></tr><tr><td>-2283</td><td>ErrorPayChargeNumLimit</td><td>充值数量限制</td></tr><tr><td>-2284</td><td>ErrorPaySoldOut</td><td>已售罄</td></tr><tr><td>-2285</td><td>ErrorPayDuplicated</td><td>重复支付</td></tr><tr><td>-2288</td><td>ErrorPayCollageCard</td><td>拼团卡错误</td></tr><tr><td>-2290</td><td>ErrorCouponUsed</td><td>优惠券已使用</td></tr><tr><td>-2298</td><td>ErrPayMoneyNotSendBook</td><td>付费未发书</td></tr><tr><td>-2299</td><td>ErrorPayUnknown</td><td>支付未知错误</td></tr></tbody></table><h2 id="书评相关错误码">书评相关错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2301</td><td>ErrorReviewUid</td><td>书评UID错误</td></tr><tr><td>-2302</td><td>ErrorReviewNotFound</td><td>书评不存在</td></tr><tr><td>-2303</td><td>ErrorReviewDeleted</td><td>书评已删除</td></tr><tr><td>-2304</td><td>ErrorReviewRefactorFail</td><td>书评重构失败</td></tr><tr><td>-2305</td><td>ErrorReviewFljBlock</td><td>书评被屏蔽</td></tr><tr><td>-2306</td><td>ErrorReviewTooLarge</td><td>书评过大</td></tr><tr><td>-2307</td><td>ErrorReviewInfoCorrupted</td><td>书评信息损坏</td></tr><tr><td>-2351</td><td>ErrorBookmarkUid</td><td>书签UID错误</td></tr><tr><td>-2352</td><td>ErrorBookmarkNotFound</td><td>书签不存在</td></tr></tbody></table><h2 id="网络相关错误码">网络相关错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2021</td><td>ErrorSQLTruncated</td><td>SQL截断</td></tr><tr><td>-2022</td><td>ErrorSQLExecFail</td><td>SQL执行失败</td></tr><tr><td>-2023</td><td>ErrorStrkvFail</td><td>字符串KV失败</td></tr><tr><td>-2025</td><td>ErrorStoreSvrFail</td><td>商店服务失败</td></tr><tr><td>-2028</td><td>ErrorKvFail</td><td>KV操作失败</td></tr><tr><td>-2029</td><td>ErrorOtherSvrFail</td><td>其他服务失败</td></tr><tr><td>-2500</td><td>ErrorRemoteFail</td><td>远程调用失败</td></tr><tr><td>-2539</td><td>ErrorXingeErr</td><td>信鸽推送错误</td></tr></tbody></table><h2 id="文件操作错误码">文件操作错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2501</td><td>ErrorDbOpErr</td><td>数据库操作错误</td></tr><tr><td>-2502</td><td>ErrorParseFail</td><td>解析失败</td></tr><tr><td>-2503</td><td>ErrorArgsMiss</td><td>参数缺失</td></tr><tr><td>-2504</td><td>ErrorTypeErr</td><td>类型错误</td></tr><tr><td>-2505</td><td>ErrorArgsErr</td><td>参数错误</td></tr><tr><td>-2506</td><td>ErrorHttpDownload</td><td>HTTP下载错误</td></tr><tr><td>-2507</td><td>ErrorFileNotExist</td><td>文件不存在</td></tr><tr><td>-2508</td><td>ErrorConvert</td><td>转换错误</td></tr><tr><td>-2509</td><td>ErrorDocNotObejct</td><td>文档非对象</td></tr><tr><td>-2510</td><td>ErrorOpenFile</td><td>打开文件错误</td></tr><tr><td>-2511</td><td>ErrorWriteFile</td><td>写文件错误</td></tr><tr><td>-2512</td><td>ErrorUnknownArgs</td><td>未知参数</td></tr><tr><td>-2513</td><td>ErrorLoadFile</td><td>加载文件错误</td></tr><tr><td>-2514</td><td>ErrorFileOutTime</td><td>文件超时</td></tr><tr><td>-2515</td><td>ErrorGetInfo</td><td>获取信息错误</td></tr><tr><td>-2516</td><td>ErrorNotLoadFile</td><td>未加载文件</td></tr><tr><td>-2517</td><td>ErrorNotArray</td><td>非数组类型</td></tr><tr><td>-2518</td><td>ErrorFileContent</td><td>文件内容错误</td></tr><tr><td>-2519</td><td>ErrorStatFileFail</td><td>文件状态失败</td></tr><tr><td>-2520</td><td>ErrorChapSzNotMatch</td><td>章节大小不匹配</td></tr><tr><td>-2521</td><td>ErrorDBNoUpdate</td><td>数据库无更新</td></tr><tr><td>-2522</td><td>ErrorUnknow</td><td>未知错误</td></tr><tr><td>-2523</td><td>ErrorkvTypeErr</td><td>KV类型错误</td></tr><tr><td>-2524</td><td>ErrorEpubDownloadErr</td><td>EPUB下载错误</td></tr><tr><td>-2525</td><td>ErrorParseCss</td><td>CSS解析错误</td></tr><tr><td>-2526</td><td>ErrorZipOp</td><td>ZIP操作错误</td></tr><tr><td>-2527</td><td>ErrorHTMLOP</td><td>HTML操作错误</td></tr><tr><td>-2528</td><td>ErrorParseXML</td><td>XML解析错误</td></tr><tr><td>-2529</td><td>ErrorPosTrans</td><td>位置转换错误</td></tr><tr><td>-2530</td><td>ErrorUidNotFound</td><td>UID未找到</td></tr><tr><td>-2532</td><td>ErrorSerilizeStr</td><td>序列化字符串错误</td></tr><tr><td>-2535</td><td>ErrorCheckLevel</td><td>检查级别错误</td></tr><tr><td>-2536</td><td>ErrorNoUpdate</td><td>无更新</td></tr><tr><td>-2537</td><td>ErrorSetColumnFail</td><td>设置列失败</td></tr><tr><td>-2540</td><td>ErrorPosConvertErr</td><td>位置转换错误</td></tr><tr><td>-2541</td><td>ErrorHTMLToTextErr</td><td>HTML转文本错误</td></tr><tr><td>-2542</td><td>ErrorGetAbstractErr</td><td>获取摘要错误</td></tr><tr><td>-2062</td><td>ErrorZipFail</td><td>ZIP失败</td></tr></tbody></table><h2 id="特殊功能错误码">特殊功能错误码</h2><table><thead><tr><th>错误码</th><th>常量名</th><th>说明</th></tr></thead><tbody><tr><td>-2015</td><td>ErrorPwd</td><td>密码错误</td></tr><tr><td>-2600</td><td>ErrorForgetSendMail</td><td>忘记发送邮件</td></tr><tr><td>-2601</td><td>ErrorCheckTokenFail</td><td>检查令牌失败</td></tr><tr><td>-2602</td><td>ErrorEmailFormat</td><td>邮件格式错误</td></tr><tr><td>-2603</td><td>ErrorEmail</td><td>邮件错误</td></tr><tr><td>-2650</td><td>ErrorInvalidAssistCount</td><td>无效助力次数</td></tr><tr><td>-2651</td><td>ErrorInvalidPromoBook</td><td>无效推广书籍</td></tr><tr><td>-2652</td><td>ErrorInvalidSelfAssist</td><td>无效自助</td></tr><tr><td>-2653</td><td>ErrorLimitCount</td><td>限制次数</td></tr><tr><td>-2654</td><td>ErrorGenerateGiftErr</td><td>生成礼品错误</td></tr><tr><td>-2655</td><td>ErrorSelfReceive</td><td>自己接收</td></tr><tr><td>-2656</td><td>ErrorActivityEnd</td><td>活动结束</td></tr><tr><td>-2657</td><td>ErrorGiftBagReceived</td><td>礼品袋已接收</td></tr><tr><td>-2666</td><td>ErrorLimitFreeNoQualified</td><td>限免无资格</td></tr><tr><td>-2700</td><td>ErrorMissImg</td><td>缺少图片</td></tr><tr><td>-2701</td><td>ErrorReject</td><td>拒绝</td></tr><tr><td>-2801</td><td>ErrorArticleLockOccupied</td><td>文章锁定被占用</td></tr><tr><td>-2809</td><td>ErrorArticleReleaseAgain</td><td>文章重复发布</td></tr><tr><td>-2810</td><td>ErrorArticleNoArticle</td><td>无文章</td></tr><tr><td>-2880</td><td>ErrorReadFundAlreadyObtained</td><td>阅读基金已获得</td></tr><tr><td>-2910</td><td>ErrorArticleQRScanLoginTimeOut</td><td>文章二维码扫描登录超时</td></tr><tr><td>-2924</td><td>ErrorTeenRestrict</td><td>青少年限制</td></tr><tr><td>-2958</td><td>ErrorMPArticleDeleted</td><td>公众号文章已删除</td></tr><tr><td>-2992</td><td>ErrorCollageExpired</td><td>拼团过期</td></tr></tbody></table><h1>认证与登录 API</h1><p>微信读书的认证和登录相关 API 接口，包括多种登录方式和二维码登录。</p><h2 id="刷新令牌登录">刷新令牌登录</h2><h3 id="POST-https-i-weread-qq-com-login-刷新令牌">POST <a href="https://i.weread.qq.com/login">https://i.weread.qq.com/login</a> (刷新令牌)</h3><p>使用刷新令牌进行登录，这是最常用的登录方式。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;refreshToken&quot;</span>: <span class="string">&quot;your_refresh_token&quot;</span>,</span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_id_here&quot;</span>,</span><br><span class="line">  <span class="string">&quot;wxToken&quot;</span>: <span class="literal">null</span>,                    <span class="comment">// 微信令牌，可选</span></span><br><span class="line">  <span class="string">&quot;inBackground&quot;</span>: <span class="number">0</span>,                  <span class="comment">// 是否后台登录</span></span><br><span class="line">  <span class="string">&quot;trackId&quot;</span>: <span class="string">&quot;track_id_here&quot;</span>,         <span class="comment">// 跟踪ID</span></span><br><span class="line">  <span class="string">&quot;kickType&quot;</span>: <span class="number">0</span>,                      <span class="comment">// 踢出类型</span></span><br><span class="line">  <span class="string">&quot;refCgi&quot;</span>: <span class="string">&quot;&quot;</span>,                       <span class="comment">// 引用CGI</span></span><br><span class="line">  <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200</span>,            <span class="comment">// 时间戳</span></span><br><span class="line">  <span class="string">&quot;random&quot;</span>: <span class="number">12345</span>,                    <span class="comment">// 随机数</span></span><br><span class="line">  <span class="string">&quot;signature&quot;</span>: <span class="string">&quot;signature_string&quot;</span>,    <span class="comment">// 签名</span></span><br><span class="line">  <span class="string">&quot;virtualChannelId&quot;</span>: <span class="string">&quot;channel_id&quot;</span>,   <span class="comment">// 虚拟渠道ID</span></span><br><span class="line">  <span class="string">&quot;deviceName&quot;</span>: <span class="string">&quot;device_name&quot;</span>         <span class="comment">// 设备名称</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;vid&quot;</span>: <span class="number">12345</span>,</span><br><span class="line">    <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey_here&quot;</span>,</span><br><span class="line">    <span class="string">&quot;accessToken&quot;</span>: <span class="string">&quot;access_token_here&quot;</span>,</span><br><span class="line">    <span class="string">&quot;refreshToken&quot;</span>: <span class="string">&quot;new_refresh_token&quot;</span>,</span><br><span class="line">    <span class="string">&quot;user&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;用户昵称&quot;</span>,</span><br><span class="line">      <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;头像URL&quot;</span>,</span><br><span class="line">      <span class="string">&quot;gender&quot;</span>: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;expireTime&quot;</span>: <span class="number">1641599999</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="微信登录">微信登录</h2><h3 id="POST-https-i-weread-qq-com-login-微信登录">POST <a href="https://i.weread.qq.com/login">https://i.weread.qq.com/login</a> (微信登录)</h3><p>使用微信授权码进行登录。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;code&quot;</span>: <span class="string">&quot;wx_auth_code&quot;</span>,             <span class="comment">// 微信授权码</span></span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_id_here&quot;</span>,</span><br><span class="line">  <span class="string">&quot;trackId&quot;</span>: <span class="string">&quot;track_id_here&quot;</span>,</span><br><span class="line">  <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">  <span class="string">&quot;random&quot;</span>: <span class="number">12345</span>,</span><br><span class="line">  <span class="string">&quot;signature&quot;</span>: <span class="string">&quot;signature_string&quot;</span>,</span><br><span class="line">  <span class="string">&quot;wxToken&quot;</span>: <span class="number">1</span>,                       <span class="comment">// 微信令牌标识</span></span><br><span class="line">  <span class="string">&quot;appFirstInstall&quot;</span>: <span class="number">0</span>,               <span class="comment">// 是否首次安装</span></span><br><span class="line">  <span class="string">&quot;virtualChannelId&quot;</span>: <span class="string">&quot;channel_id&quot;</span>,</span><br><span class="line">  <span class="string">&quot;installId&quot;</span>: <span class="string">&quot;install_id_here&quot;</span>,</span><br><span class="line">  <span class="string">&quot;isFromQrcode&quot;</span>: <span class="number">0</span>,                  <span class="comment">// 是否来自二维码</span></span><br><span class="line">  <span class="string">&quot;isAutoLogout&quot;</span>: <span class="number">0</span>,                  <span class="comment">// 是否自动登出</span></span><br><span class="line">  <span class="string">&quot;deviceName&quot;</span>: <span class="string">&quot;device_name&quot;</span>,</span><br><span class="line">  <span class="string">&quot;deviceType&quot;</span>: <span class="number">1</span>                     <span class="comment">// 设备类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="访客登录">访客登录</h2><h3 id="POST-https-i-weread-qq-com-guestLogin">POST <a href="https://i.weread.qq.com/guestLogin">https://i.weread.qq.com/guestLogin</a></h3><p>创建访客账户。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_id_here&quot;</span>,</span><br><span class="line">  <span class="string">&quot;newDeviceId&quot;</span>: <span class="literal">null</span>,                <span class="comment">// 新设备ID，可选</span></span><br><span class="line">  <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">  <span class="string">&quot;random&quot;</span>: <span class="number">12345</span>,</span><br><span class="line">  <span class="string">&quot;signature&quot;</span>: <span class="string">&quot;signature_string&quot;</span>,</span><br><span class="line">  <span class="string">&quot;appFirstInstall&quot;</span>: <span class="number">1</span>,               <span class="comment">// 首次安装标识</span></span><br><span class="line">  <span class="string">&quot;virtualChannelId&quot;</span>: <span class="string">&quot;channel_id&quot;</span>,</span><br><span class="line">  <span class="string">&quot;installId&quot;</span>: <span class="string">&quot;install_id_here&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="POST-https-i-weread-qq-com-login-访客转正式登录">POST <a href="https://i.weread.qq.com/login">https://i.weread.qq.com/login</a> (访客转正式登录)</h3><p>将访客账户转换为正式账户。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;code&quot;</span>: <span class="string">&quot;auth_code&quot;</span>,</span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_id_here&quot;</span>,</span><br><span class="line">  <span class="string">&quot;trackId&quot;</span>: <span class="string">&quot;track_id_here&quot;</span>,</span><br><span class="line">  <span class="string">&quot;guestVid&quot;</span>: <span class="number">12345</span>,                  <span class="comment">// 访客VID</span></span><br><span class="line">  <span class="string">&quot;guestAccessToken&quot;</span>: <span class="string">&quot;guest_token&quot;</span>,  <span class="comment">// 访客访问令牌</span></span><br><span class="line">  <span class="string">&quot;pf&quot;</span>: <span class="string">&quot;platform_identifier&quot;</span>,       <span class="comment">// 平台标识</span></span><br><span class="line">  <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">  <span class="string">&quot;random&quot;</span>: <span class="number">12345</span>,</span><br><span class="line">  <span class="string">&quot;signature&quot;</span>: <span class="string">&quot;signature_string&quot;</span>,</span><br><span class="line">  <span class="string">&quot;appFirstInstall&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;virtualChannelId&quot;</span>: <span class="string">&quot;channel_id&quot;</span>,</span><br><span class="line">  <span class="string">&quot;installId&quot;</span>: <span class="string">&quot;install_id_here&quot;</span>,</span><br><span class="line">  <span class="string">&quot;isFromQrcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;isAutoLogout&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;deviceName&quot;</span>: <span class="string">&quot;device_name&quot;</span>,</span><br><span class="line">  <span class="string">&quot;deviceType&quot;</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="二维码登录">二维码登录</h2><h3 id="POST-https-i-weread-qq-com-web-qrlogin">POST <a href="https://i.weread.qq.com/web/qrlogin">https://i.weread.qq.com/web/qrlogin</a></h3><p>使用二维码进行网页登录。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;uid&quot;</span>: <span class="string">&quot;qr_uid_here&quot;</span>,      <span class="comment">// 二维码UID</span></span><br><span class="line">  <span class="string">&quot;url&quot;</span>: <span class="string">&quot;callback_url&quot;</span>,     <span class="comment">// 回调URL</span></span><br><span class="line">  <span class="string">&quot;pf&quot;</span>: <span class="number">1</span>                    <span class="comment">// 平台标识</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;qrCode&quot;</span>: <span class="string">&quot;https://weread.qq.com/qr/abc123&quot;</span>,</span><br><span class="line">    <span class="string">&quot;qrCodeId&quot;</span>: <span class="string">&quot;abc123&quot;</span>,</span><br><span class="line">    <span class="string">&quot;expireTime&quot;</span>: <span class="number">300</span>,  <span class="comment">// 过期时间（秒）</span></span><br><span class="line">    <span class="string">&quot;status&quot;</span>: <span class="string">&quot;waiting&quot;</span> <span class="comment">// waiting, scanned, confirmed, expired</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="微信票据相关">微信票据相关</h2><h3 id="GET-wx-jsapiticket">GET /wx/jsapiticket</h3><p>获取微信 JS API 票据。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;user_vid_here&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="GET-wxticket">GET /wxticket</h3><p>获取微信票据。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;nonceStr&quot;</span>: <span class="string">&quot;random_nonce_string&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="设备登出">设备登出</h2><h3 id="POST-https-i-weread-qq-com-device-logout">POST <a href="https://i.weread.qq.com/device/logout">https://i.weread.qq.com/device/logout</a></h3><p>登出指定设备，结束设备会话。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_id_here&quot;</span>,        <span class="comment">// 设备ID</span></span><br><span class="line">  <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200</span>,             <span class="comment">// 时间戳</span></span><br><span class="line">  <span class="string">&quot;random&quot;</span>: <span class="number">12345</span>,                     <span class="comment">// 随机数</span></span><br><span class="line">  <span class="string">&quot;signature&quot;</span>: <span class="string">&quot;signature_string&quot;</span>      <span class="comment">// 签名</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;errmsg&quot;</span>: <span class="string">&quot;success&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>应用服务 API</h1><p>微信读书应用服务相关的 API 接口，包括日志报告、数据同步、知识检索等功能。</p><h2 id="日志报告-API">日志报告 API</h2><h3 id="POST-https-i-weread-qq-com-logReport">POST <a href="https://i.weread.qq.com/logReport">https://i.weread.qq.com/logReport</a></h3><p>用于上报各种日志数据，支持多种数据格式。</p><h4 id="方式一：字符串数据报告">方式一：字符串数据报告</h4><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: <span class="string">&quot;log_data_string&quot;</span>  <span class="comment">// 日志数据字符串</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;success&quot;</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="方式二：对象数据报告">方式二：对象数据报告</h4><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;action&quot;</span>: <span class="string">&quot;page_view&quot;</span>,</span><br><span class="line">    <span class="string">&quot;page&quot;</span>: <span class="string">&quot;book_detail&quot;</span>,</span><br><span class="line">    <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">    <span class="string">&quot;duration&quot;</span>: <span class="number">30</span>,</span><br><span class="line">    <span class="string">&quot;userAgent&quot;</span>: <span class="string">&quot;WeRead/7.0.0&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="方式三：离线数据报告">方式三：离线数据报告</h4><p>用于离线状态下的数据上报。</p><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span>,</span><br><span class="line">  <span class="string">&quot;offline&quot;</span>: <span class="string">&quot;1&quot;</span>  <span class="comment">// 离线标识</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="移动同步-API">移动同步 API</h2><h3 id="POST-https-i-weread-qq-com-mobileSync">POST <a href="https://i.weread.qq.com/mobileSync">https://i.weread.qq.com/mobileSync</a></h3><p>同步移动端的各种数据，包括书架、通知、配置等。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;shelf&quot;</span>: <span class="number">123456789</span>,                    <span class="comment">// 书架同步键</span></span><br><span class="line">  <span class="string">&quot;inventory&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 库存同步键</span></span><br><span class="line">  <span class="string">&quot;shelfLecture&quot;</span>: <span class="number">123456789</span>,             <span class="comment">// 书架讲座同步键</span></span><br><span class="line">  <span class="string">&quot;notifications&quot;</span>: <span class="number">123456789</span>,            <span class="comment">// 通知同步键</span></span><br><span class="line">  <span class="string">&quot;config&quot;</span>: <span class="number">123456789</span>,                   <span class="comment">// 配置同步键</span></span><br><span class="line">  <span class="string">&quot;gift&quot;</span>: <span class="number">123456789</span>,                     <span class="comment">// 礼品同步键</span></span><br><span class="line">  <span class="string">&quot;payItem&quot;</span>: <span class="number">123456789</span>,                  <span class="comment">// 付费项目同步键</span></span><br><span class="line">  <span class="string">&quot;balance&quot;</span>: <span class="number">100.50</span>,                     <span class="comment">// 余额</span></span><br><span class="line">  <span class="string">&quot;reviewTimeline&quot;</span>: <span class="number">123456789</span>,           <span class="comment">// 书评时间线同步键</span></span><br><span class="line">  <span class="string">&quot;follower&quot;</span>: <span class="number">123456789</span>,                 <span class="comment">// 粉丝同步键</span></span><br><span class="line">  <span class="string">&quot;readingExchange&quot;</span>: <span class="number">1</span>,                  <span class="comment">// 阅读兑换</span></span><br><span class="line">  <span class="string">&quot;chat&quot;</span>: <span class="number">123456789</span>,                     <span class="comment">// 聊天同步键</span></span><br><span class="line">  <span class="string">&quot;chatRemovedSynckey&quot;</span>: <span class="number">123456789</span>,       <span class="comment">// 聊天删除同步键</span></span><br><span class="line">  <span class="string">&quot;wechatFriend&quot;</span>: <span class="number">123456789</span>,             <span class="comment">// 微信好友同步键</span></span><br><span class="line">  <span class="string">&quot;inBackground&quot;</span>: <span class="number">0</span>,                     <span class="comment">// 后台状态</span></span><br><span class="line">  <span class="string">&quot;refluxSynckey&quot;</span>: <span class="number">123456789</span>,            <span class="comment">// 回流同步键</span></span><br><span class="line">  <span class="string">&quot;following&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 关注同步键</span></span><br><span class="line">  <span class="string">&quot;applyList&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 申请列表同步键</span></span><br><span class="line">  <span class="string">&quot;mcard&quot;</span>: <span class="number">123456789</span>,                    <span class="comment">// 会员卡同步键</span></span><br><span class="line">  <span class="string">&quot;discoverFeedSynckey&quot;</span>: <span class="number">123456789</span>,      <span class="comment">// 发现信息流同步键</span></span><br><span class="line">  <span class="string">&quot;rateSynckey&quot;</span>: <span class="number">123456789</span>,              <span class="comment">// 评分同步键</span></span><br><span class="line">  <span class="string">&quot;browse&quot;</span>: <span class="number">123456789</span>,                   <span class="comment">// 浏览同步键</span></span><br><span class="line">  <span class="string">&quot;medal&quot;</span>: <span class="number">123456789</span>,                    <span class="comment">// 勋章同步键</span></span><br><span class="line">  <span class="string">&quot;medalUrl&quot;</span>: <span class="number">123456789</span>,                 <span class="comment">// 勋章URL同步键</span></span><br><span class="line">  <span class="string">&quot;regionResource&quot;</span>: <span class="number">123456789</span>,           <span class="comment">// 地区资源同步键</span></span><br><span class="line">  <span class="string">&quot;discoverColumnSynckey&quot;</span>: <span class="number">123456789</span>,    <span class="comment">// 发现栏目同步键</span></span><br><span class="line">  <span class="string">&quot;friendReviewSynckey&quot;</span>: <span class="number">123456789</span>,      <span class="comment">// 好友书评同步键</span></span><br><span class="line">  <span class="string">&quot;wehearSyncKey&quot;</span>: <span class="number">123456789</span>,            <span class="comment">// WeHear同步键</span></span><br><span class="line">  <span class="string">&quot;preferTab&quot;</span>: <span class="number">1</span>,                        <span class="comment">// 偏好标签</span></span><br><span class="line">  <span class="string">&quot;localBrowseTab&quot;</span>: <span class="string">&quot;recommend&quot;</span>,         <span class="comment">// 本地浏览标签</span></span><br><span class="line">  <span class="string">&quot;localCommunityTab&quot;</span>: <span class="string">&quot;following&quot;</span>       <span class="comment">// 本地社区标签</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;shelf&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">      <span class="string">&quot;books&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">          <span class="string">&quot;title&quot;</span>: <span class="string">&quot;书名&quot;</span>,</span><br><span class="line">          <span class="string">&quot;author&quot;</span>: <span class="string">&quot;作者&quot;</span>,</span><br><span class="line">          <span class="string">&quot;progress&quot;</span>: <span class="number">0.5</span>,</span><br><span class="line">          <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995200</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;notifications&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">      <span class="string">&quot;items&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;id&quot;</span>: <span class="string">&quot;notif_1&quot;</span>,</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="string">&quot;system&quot;</span>,</span><br><span class="line">          <span class="string">&quot;title&quot;</span>: <span class="string">&quot;系统通知&quot;</span>,</span><br><span class="line">          <span class="string">&quot;content&quot;</span>: <span class="string">&quot;通知内容&quot;</span>,</span><br><span class="line">          <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;config&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">      <span class="string">&quot;settings&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;theme&quot;</span>: <span class="string">&quot;light&quot;</span>,</span><br><span class="line">        <span class="string">&quot;fontSize&quot;</span>: <span class="number">16</span>,</span><br><span class="line">        <span class="string">&quot;autoSync&quot;</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="知识检索-API">知识检索 API</h2><h3 id="POST-https-i-weread-qq-com-knowledge-retrieval">POST <a href="https://i.weread.qq.com/knowledge/retrieval">https://i.weread.qq.com/knowledge/retrieval</a></h3><p>在指定书籍中检索知识内容。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,              <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;query&quot;</span>: <span class="string">&quot;search_query&quot;</span>,               <span class="comment">// 搜索查询</span></span><br><span class="line">  <span class="string">&quot;scene&quot;</span>: <span class="number">1</span>,                            <span class="comment">// 场景ID</span></span><br><span class="line">  <span class="string">&quot;v&quot;</span>: <span class="number">1</span>,                                <span class="comment">// 版本</span></span><br><span class="line">  <span class="string">&quot;queryContext&quot;</span>: &#123;                      <span class="comment">// 查询上下文（可选）</span></span><br><span class="line">    <span class="string">&quot;chapterId&quot;</span>: <span class="string">&quot;chapter_1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;pageNumber&quot;</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="string">&quot;previousQuery&quot;</span>: <span class="string">&quot;previous_search&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;results&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;chapterId&quot;</span>: <span class="string">&quot;chapter_1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;chapterTitle&quot;</span>: <span class="string">&quot;第一章&quot;</span>,</span><br><span class="line">        <span class="string">&quot;content&quot;</span>: <span class="string">&quot;匹配的内容片段...&quot;</span>,</span><br><span class="line">        <span class="string">&quot;pageNumber&quot;</span>: <span class="number">15</span>,</span><br><span class="line">        <span class="string">&quot;relevanceScore&quot;</span>: <span class="number">0.95</span>,</span><br><span class="line">        <span class="string">&quot;highlights&quot;</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;start&quot;</span>: <span class="number">10</span>,</span><br><span class="line">            <span class="string">&quot;end&quot;</span>: <span class="number">20</span>,</span><br><span class="line">            <span class="string">&quot;text&quot;</span>: <span class="string">&quot;关键词&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="string">&quot;queryTime&quot;</span>: <span class="number">150</span>,</span><br><span class="line">    <span class="string">&quot;suggestions&quot;</span>: [<span class="string">&quot;相关搜索1&quot;</span>, <span class="string">&quot;相关搜索2&quot;</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="在线时间统计">在线时间统计</h2><h3 id="POST-https-i-weread-qq-com-app-onlinetime">POST <a href="https://i.weread.qq.com/app/onlinetime">https://i.weread.qq.com/app/onlinetime</a></h3><p>报告用户的在线时间。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;time&quot;</span>: <span class="number">300</span>  <span class="comment">// 在线时间（秒）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="推送配置-API">推送配置 API</h2><h3 id="绑定推送令牌">绑定推送令牌</h3><h4 id="POST-https-i-weread-qq-com-updateConfig">POST <a href="https://i.weread.qq.com/updateConfig">https://i.weread.qq.com/updateConfig</a></h4><p>绑定设备的推送令牌。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;deviceToken&quot;</span>: <span class="string">&quot;device_token_string&quot;</span>,    <span class="comment">// 设备令牌</span></span><br><span class="line">  <span class="string">&quot;bundleId&quot;</span>: <span class="string">&quot;com.tencent.weread&quot;</span>,        <span class="comment">// 应用包ID</span></span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_id_string&quot;</span>           <span class="comment">// 设备ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="开启推送令牌">开启推送令牌</h3><h4 id="POST-https-i-weread-qq-com-updateConfig-2">POST <a href="https://i.weread.qq.com/updateConfig">https://i.weread.qq.com/updateConfig</a></h4><p>开启设备的推送功能。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;openDeviceToken&quot;</span>: <span class="string">&quot;device_token_string&quot;</span>, <span class="comment">// 开启设备令牌</span></span><br><span class="line">  <span class="string">&quot;bundleId&quot;</span>: <span class="string">&quot;com.tencent.weread&quot;</span>,         <span class="comment">// 应用包ID</span></span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_id_string&quot;</span>            <span class="comment">// 设备ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="关闭推送令牌">关闭推送令牌</h3><h4 id="POST-https-i-weread-qq-com-updateConfig-3">POST <a href="https://i.weread.qq.com/updateConfig">https://i.weread.qq.com/updateConfig</a></h4><p>关闭设备的推送功能。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;closeDeviceToken&quot;</span>: <span class="string">&quot;device_token_string&quot;</span>, <span class="comment">// 关闭设备令牌</span></span><br><span class="line">  <span class="string">&quot;bundleId&quot;</span>: <span class="string">&quot;com.tencent.weread&quot;</span>,          <span class="comment">// 应用包ID</span></span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_id_string&quot;</span>             <span class="comment">// 设备ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="解绑推送令牌">解绑推送令牌</h3><h4 id="POST-https-i-weread-qq-com-updateConfig-4">POST <a href="https://i.weread.qq.com/updateConfig">https://i.weread.qq.com/updateConfig</a></h4><p>解绑设备的推送令牌。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;disDeviceToken&quot;</span>: <span class="string">&quot;device_token_string&quot;</span>,  <span class="comment">// 解绑设备令牌</span></span><br><span class="line">  <span class="string">&quot;bundleId&quot;</span>: <span class="string">&quot;com.tencent.weread&quot;</span>,         <span class="comment">// 应用包ID</span></span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_id_string&quot;</span>            <span class="comment">// 设备ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="解绑Hub令牌">解绑Hub令牌</h3><h4 id="POST-https-i-weread-qq-com-updateConfig-5">POST <a href="https://i.weread.qq.com/updateConfig">https://i.weread.qq.com/updateConfig</a></h4><p>解绑Hub推送令牌。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;disHubToken&quot;</span>: <span class="number">123456789</span>,            <span class="comment">// 解绑Hub令牌</span></span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_id_string&quot;</span>       <span class="comment">// 设备ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="上传新Gap令牌">上传新Gap令牌</h3><h4 id="POST-https-i-weread-qq-com-updateConfig-6">POST <a href="https://i.weread.qq.com/updateConfig">https://i.weread.qq.com/updateConfig</a></h4><p>上传新的Gap推送令牌。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;gapToken&quot;</span>: <span class="number">123456789</span>,               <span class="comment">// Gap令牌</span></span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_id_string&quot;</span>       <span class="comment">// 设备ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="报告服务-API">报告服务 API</h2><h3 id="上报数据到OSS">上报数据到OSS</h3><h4 id="POST-https-oss-weread-qq-com-wrbus-report-oss">POST <a href="https://oss.weread.qq.com/wrbus/report/oss">https://oss.weread.qq.com/wrbus/report/oss</a></h4><p>向OSS（对象存储服务）上报数据。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;content&quot;</span>: <span class="string">&quot;report_content_string&quot;</span>    <span class="comment">// 报告内容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;success&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&quot;reportId&quot;</span>: <span class="string">&quot;report_123456&quot;</span>,</span><br><span class="line">  <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200000</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="应用日志报告">应用日志报告</h3><h4 id="POST-https-i-weread-qq-com-logReport-2">POST <a href="https://i.weread.qq.com/logReport">https://i.weread.qq.com/logReport</a></h4><p>向服务器报告应用日志数据。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_123456&quot;</span>,         <span class="comment">// 设备ID</span></span><br><span class="line">  <span class="string">&quot;reportMethod&quot;</span>: <span class="number">1</span>,                   <span class="comment">// 报告方法</span></span><br><span class="line">  <span class="string">&quot;os&quot;</span>: <span class="string">&quot;Android&quot;</span>,                     <span class="comment">// 操作系统</span></span><br><span class="line">  <span class="string">&quot;appver&quot;</span>: <span class="string">&quot;7.0.0&quot;</span>,                   <span class="comment">// 应用版本</span></span><br><span class="line">  <span class="string">&quot;data&quot;</span>: <span class="string">&quot;log_data_string&quot;</span>,           <span class="comment">// 日志数据</span></span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;user_789012&quot;</span>,                <span class="comment">// 用户VID</span></span><br><span class="line">  <span class="string">&quot;model&quot;</span>: <span class="string">&quot;Huawei P40&quot;</span>                <span class="comment">// 设备型号</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;success&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&quot;reportId&quot;</span>: <span class="string">&quot;log_report_123456&quot;</span>,</span><br><span class="line">  <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">  <span class="string">&quot;processed&quot;</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="日志报告工具类">日志报告工具类</h3><h2 id="OSS-服务-API">OSS 服务 API</h2><h3 id="OSS-日志上传">OSS 日志上传</h3><h4 id="POST-https-i-weread-qq-com-cgi-bin-oss-log">POST <a href="https://i.weread.qq.com/cgi-bin/oss_log">https://i.weread.qq.com/cgi-bin/oss_log</a></h4><p>向 OSS（对象存储服务）上传日志数据。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;inputf&quot;</span>: <span class="string">&quot;log_format&quot;</span>,              <span class="comment">// 输入格式</span></span><br><span class="line">  <span class="string">&quot;func&quot;</span>: <span class="string">&quot;upload_function&quot;</span>            <span class="comment">// 上传功能</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求体参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;baseinfo&quot;</span>: &#123;                        <span class="comment">// 基础信息</span></span><br><span class="line">    <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;appVersion&quot;</span>: <span class="string">&quot;7.0.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;osVersion&quot;</span>: <span class="string">&quot;Android 11&quot;</span>,</span><br><span class="line">    <span class="string">&quot;deviceModel&quot;</span>: <span class="string">&quot;Huawei P40&quot;</span>,</span><br><span class="line">    <span class="string">&quot;userId&quot;</span>: <span class="string">&quot;user_789012&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sessionId&quot;</span>: <span class="string">&quot;session_345678&quot;</span>,</span><br><span class="line">    <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">    <span class="string">&quot;timezone&quot;</span>: <span class="string">&quot;Asia/Shanghai&quot;</span>,</span><br><span class="line">    <span class="string">&quot;networkType&quot;</span>: <span class="string">&quot;wifi&quot;</span>,</span><br><span class="line">    <span class="string">&quot;batteryLevel&quot;</span>: <span class="number">85</span>,</span><br><span class="line">    <span class="string">&quot;memoryUsage&quot;</span>: <span class="number">512</span>,</span><br><span class="line">    <span class="string">&quot;storageUsage&quot;</span>: <span class="number">1024</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;logsize&quot;</span>: <span class="number">2048</span>,                     <span class="comment">// 日志大小（字节）</span></span><br><span class="line">  <span class="string">&quot;logcontent&quot;</span>: <span class="string">&quot;compressed_log_data&quot;</span>  <span class="comment">// 压缩后的日志内容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;uploadId&quot;</span>: <span class="string">&quot;upload_123456789&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ossUrl&quot;</span>: <span class="string">&quot;https://oss.weread.qq.com/logs/upload_123456789.log&quot;</span>,</span><br><span class="line">    <span class="string">&quot;uploadTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">    <span class="string">&quot;fileSize&quot;</span>: <span class="number">2048</span>,</span><br><span class="line">    <span class="string">&quot;checksum&quot;</span>: <span class="string">&quot;md5_hash_string&quot;</span>,</span><br><span class="line">    <span class="string">&quot;status&quot;</span>: <span class="string">&quot;uploaded&quot;</span>,</span><br><span class="line">    <span class="string">&quot;retention&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;days&quot;</span>: <span class="number">30</span>,</span><br><span class="line">      <span class="string">&quot;deleteTime&quot;</span>: <span class="number">1643587200000</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>AI 聊天 API</h1><p>微信读书的 AI 聊天功能相关 API 接口。</p><h2 id="获取-AI-HTML">获取 AI HTML</h2><h3 id="POST-https-i-weread-qq-com-ai-wink-proxy">POST <a href="https://i.weread.qq.com/ai/wink/proxy">https://i.weread.qq.com/ai/wink/proxy</a></h3><p>获取 AI 聊天的 HTML 内容，这是一个代理接口，用于获取 AI 聊天界面。</p><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// 具体参数需要根据实际需求传递</span></span><br><span class="line">  <span class="comment">// 可能包括聊天上下文、用户偏好等</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;html&quot;</span>: <span class="string">&quot;&lt;div class=&#x27;ai-chat-container&#x27;&gt;...&lt;/div&gt;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;css&quot;</span>: <span class="string">&quot;.ai-chat-container &#123; ... &#125;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;js&quot;</span>: <span class="string">&quot;function initAiChat() &#123; ... &#125;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;config&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;apiEndpoint&quot;</span>: <span class="string">&quot;https://ai.weread.qq.com/chat&quot;</span>,</span><br><span class="line">      <span class="string">&quot;wsEndpoint&quot;</span>: <span class="string">&quot;wss://ai.weread.qq.com/ws&quot;</span>,</span><br><span class="line">      <span class="string">&quot;features&quot;</span>: [<span class="string">&quot;text&quot;</span>, <span class="string">&quot;voice&quot;</span>, <span class="string">&quot;image&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>书籍 API</h1><p>书籍相关的 API 接口，包括阅读状态管理、章节操作等。</p><h2 id="标记阅读状态">标记阅读状态</h2><h3 id="POST-https-i-weread-qq-com-book-markstatus">POST <a href="https://i.weread.qq.com/book/markstatus">https://i.weread.qq.com/book/markstatus</a></h3><p>标记书籍的阅读状态，支持在读、读过、读完等状态。</p><p><strong>阅读状态枚举:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ReadingStatus</span> = &#123;</span><br><span class="line">  <span class="attr">READING</span>: <span class="number">2</span>,   <span class="comment">// 在读</span></span><br><span class="line">  <span class="attr">READED</span>: <span class="number">3</span>,    <span class="comment">// 读过</span></span><br><span class="line">  <span class="attr">FINISHED</span>: <span class="number">4</span>   <span class="comment">// 读完</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;status&quot;</span>: <span class="number">2</span>,           <span class="comment">// 阅读状态 (ReadingStatus)</span></span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id&quot;</span>,   <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;isCancel&quot;</span>: <span class="number">0</span>,         <span class="comment">// 是否取消标记 (0: 标记, 1: 取消)</span></span><br><span class="line">  <span class="string">&quot;finishInfo&quot;</span>: <span class="number">0</span>        <span class="comment">// 完成信息</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;v&quot;</span>: <span class="string">&quot;7.4.2.23&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;errmsg&quot;</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id&quot;</span>,</span><br><span class="line">    <span class="string">&quot;status&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995200</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="获取章节信息">获取章节信息</h2><h3 id="POST-https-i-weread-qq-com-book-chapterInfos">POST <a href="https://i.weread.qq.com/book/chapterInfos">https://i.weread.qq.com/book/chapterInfos</a></h3><p>获取指定书籍的章节信息列表。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookIds&quot;</span>: [<span class="string">&quot;book_id1&quot;</span>, <span class="string">&quot;book_id2&quot;</span>],  <span class="comment">// 书籍ID数组</span></span><br><span class="line">  <span class="string">&quot;synckeys&quot;</span>: [<span class="number">0</span>, <span class="number">0</span>]                    <span class="comment">// 同步键数组</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;v&quot;</span>: <span class="string">&quot;7.4.2.23&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;book_id&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;chapters&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="string">&quot;title&quot;</span>: <span class="string">&quot;第一章&quot;</span>,</span><br><span class="line">          <span class="string">&quot;level&quot;</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="string">&quot;wordCount&quot;</span>: <span class="number">2500</span>,</span><br><span class="line">          <span class="string">&quot;readingTime&quot;</span>: <span class="number">300</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;chapterUid&quot;</span>: <span class="number">2</span>,</span><br><span class="line">          <span class="string">&quot;title&quot;</span>: <span class="string">&quot;第二章&quot;</span>,</span><br><span class="line">          <span class="string">&quot;level&quot;</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="string">&quot;wordCount&quot;</span>: <span class="number">3000</span>,</span><br><span class="line">          <span class="string">&quot;readingTime&quot;</span>: <span class="number">360</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="下载章节内容">下载章节内容</h2><h3 id="GET-book-chapterdownload">GET /book/chapterdownload</h3><p>下载书籍章节的具体内容。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;3300071749&quot;</span>,           <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;bookType&quot;</span>: <span class="string">&quot;epub&quot;</span>,               <span class="comment">// 书籍类型</span></span><br><span class="line">  <span class="string">&quot;bookVersion&quot;</span>: <span class="string">&quot;462704133&quot;</span>,       <span class="comment">// 书籍版本</span></span><br><span class="line">  <span class="string">&quot;chapters&quot;</span>: <span class="string">&quot;311-320&quot;</span>,            <span class="comment">// 章节范围</span></span><br><span class="line">  <span class="string">&quot;modernVersion&quot;</span>: <span class="string">&quot;7.4.2.23&quot;</span>,     <span class="comment">// 现代版本</span></span><br><span class="line">  <span class="string">&quot;offline&quot;</span>: <span class="number">1</span>,                     <span class="comment">// 离线标识</span></span><br><span class="line">  <span class="string">&quot;pf&quot;</span>: <span class="string">&quot;weread_wx-2001-iap-2001-iphone&quot;</span>,  <span class="comment">// 平台标识</span></span><br><span class="line">  <span class="string">&quot;pfkey&quot;</span>: <span class="string">&quot;pfkey&quot;</span>,                 <span class="comment">// 平台密钥</span></span><br><span class="line">  <span class="string">&quot;release&quot;</span>: <span class="number">1</span>,                     <span class="comment">// 发布标识</span></span><br><span class="line">  <span class="string">&quot;screenSize&quot;</span>: <span class="string">&quot;16x9&quot;</span>,             <span class="comment">// 屏幕尺寸</span></span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="string">&quot;462704133&quot;</span>,           <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;zoneId&quot;</span>: <span class="number">1</span>                       <span class="comment">// 区域ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="黑名单管理">黑名单管理</h2><h3 id="拉黑-取消拉黑书籍">拉黑/取消拉黑书籍</h3><h4 id="GET-blacklist-books">GET /blacklist/books</h4><p>将书籍加入黑名单或从黑名单移除。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,        <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="number">12345</span>,                    <span class="comment">// 用户VID</span></span><br><span class="line">  <span class="string">&quot;cancelBlack&quot;</span>: <span class="number">0</span>                 <span class="comment">// 0: 拉黑, 1: 取消拉黑</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;success&quot;</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>书籍详情与报告 API</h1><p>微信读书书籍详情和阅读报告相关的 API 接口，包括播客、分享图片、阅读进度报告等功能。</p><h2 id="书籍详情-API">书籍详情 API</h2><h3 id="加载书籍播客">加载书籍播客</h3><h4 id="GET-book-podcasts">GET /book/podcasts</h4><p>获取书籍相关的播客内容列表。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,        <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,            <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;count&quot;</span>: <span class="number">20</span>,                     <span class="comment">// 返回数量</span></span><br><span class="line">  <span class="string">&quot;listType&quot;</span>: <span class="number">1</span>,                   <span class="comment">// 列表类型</span></span><br><span class="line">  <span class="string">&quot;reviewListType&quot;</span>: <span class="number">1</span>              <span class="comment">// 书评列表类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;podcasts&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="string">&quot;podcast_1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;第一章解读&quot;</span>,</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;深度解读第一章内容&quot;</span>,</span><br><span class="line">        <span class="string">&quot;duration&quot;</span>: <span class="number">1800</span>,           <span class="comment">// 时长（秒）</span></span><br><span class="line">        <span class="string">&quot;audioUrl&quot;</span>: <span class="string">&quot;https://example.com/audio1.mp3&quot;</span>,</span><br><span class="line">        <span class="string">&quot;coverUrl&quot;</span>: <span class="string">&quot;https://example.com/cover1.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: <span class="string">&quot;解读者姓名&quot;</span>,</span><br><span class="line">        <span class="string">&quot;publishTime&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">        <span class="string">&quot;playCount&quot;</span>: <span class="number">1000</span>,</span><br><span class="line">        <span class="string">&quot;likeCount&quot;</span>: <span class="number">50</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">    <span class="string">&quot;hasMore&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">100</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="生成分享图片">生成分享图片</h3><h4 id="POST-https-weread-qq-com-shareimage-generate">POST <a href="https://weread.qq.com/shareimage/generate">https://weread.qq.com/shareimage/generate</a></h4><p>生成书籍分享用的图片。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;templateId&quot;</span>: <span class="string">&quot;template_id_here&quot;</span>,    <span class="comment">// 模板ID</span></span><br><span class="line">  <span class="string">&quot;cacheKey&quot;</span>: <span class="string">&quot;cache_key_here&quot;</span>,        <span class="comment">// 缓存键</span></span><br><span class="line">  <span class="string">&quot;replacements&quot;</span>: &#123;                    <span class="comment">// 替换内容</span></span><br><span class="line">    <span class="string">&quot;bookTitle&quot;</span>: <span class="string">&quot;书籍标题&quot;</span>,</span><br><span class="line">    <span class="string">&quot;bookAuthor&quot;</span>: <span class="string">&quot;作者姓名&quot;</span>,</span><br><span class="line">    <span class="string">&quot;bookCover&quot;</span>: <span class="string">&quot;封面URL&quot;</span>,</span><br><span class="line">    <span class="string">&quot;userAvatar&quot;</span>: <span class="string">&quot;用户头像URL&quot;</span>,</span><br><span class="line">    <span class="string">&quot;userName&quot;</span>: <span class="string">&quot;用户昵称&quot;</span>,</span><br><span class="line">    <span class="string">&quot;readingProgress&quot;</span>: <span class="string">&quot;已读 50%&quot;</span>,</span><br><span class="line">    <span class="string">&quot;readingTime&quot;</span>: <span class="string">&quot;阅读时长 2小时&quot;</span>,</span><br><span class="line">    <span class="string">&quot;quote&quot;</span>: <span class="string">&quot;精彩摘录内容&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;prefersBinary&quot;</span>: <span class="number">1</span>                   <span class="comment">// 是否偏好二进制格式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;imageUrl&quot;</span>: <span class="string">&quot;https://weread.qq.com/shareimage/abc123.jpg&quot;</span>,</span><br><span class="line">    <span class="string">&quot;imageData&quot;</span>: <span class="string">&quot;base64_encoded_image_data&quot;</span>,</span><br><span class="line">    <span class="string">&quot;width&quot;</span>: <span class="number">750</span>,</span><br><span class="line">    <span class="string">&quot;height&quot;</span>: <span class="number">1334</span>,</span><br><span class="line">    <span class="string">&quot;format&quot;</span>: <span class="string">&quot;jpeg&quot;</span>,</span><br><span class="line">    <span class="string">&quot;size&quot;</span>: <span class="number">102400</span>,</span><br><span class="line">    <span class="string">&quot;cacheKey&quot;</span>: <span class="string">&quot;cache_key_here&quot;</span>,</span><br><span class="line">    <span class="string">&quot;expireTime&quot;</span>: <span class="number">1641081600</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="阅读报告-API">阅读报告 API</h2><h3 id="书架内书籍阅读报告">书架内书籍阅读报告</h3><h4 id="POST-https-i-weread-qq-com-book-read">POST <a href="https://i.weread.qq.com/book/read">https://i.weread.qq.com/book/read</a></h4><p>报告书架内书籍的阅读数据。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,            <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,                     <span class="comment">// 章节UID</span></span><br><span class="line">  <span class="string">&quot;chapterIdx&quot;</span>: <span class="number">0</span>,                     <span class="comment">// 章节索引</span></span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_id_here&quot;</span>,        <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;chapterOffset&quot;</span>: <span class="number">1000</span>,               <span class="comment">// 章节偏移</span></span><br><span class="line">  <span class="string">&quot;chapterProgress&quot;</span>: <span class="number">50</span>,               <span class="comment">// 章节进度（百分比）</span></span><br><span class="line">  <span class="string">&quot;readingTime&quot;</span>: <span class="number">1800</span>,                 <span class="comment">// 阅读时长（秒）</span></span><br><span class="line">  <span class="string">&quot;ttsTime&quot;</span>: <span class="number">0</span>,                        <span class="comment">// TTS时长</span></span><br><span class="line">  <span class="string">&quot;lectureTime&quot;</span>: <span class="number">0</span>,                    <span class="comment">// 讲座时长</span></span><br><span class="line">  <span class="string">&quot;lectureTextTime&quot;</span>: <span class="number">0</span>,                <span class="comment">// 讲座文本时长</span></span><br><span class="line">  <span class="string">&quot;novalTime&quot;</span>: <span class="number">0</span>,                      <span class="comment">// 小说时长</span></span><br><span class="line">  <span class="string">&quot;appId&quot;</span>: <span class="string">&quot;app_id_here&quot;</span>,              <span class="comment">// 应用ID</span></span><br><span class="line">  <span class="string">&quot;installId&quot;</span>: <span class="string">&quot;install_id_here&quot;</span>,      <span class="comment">// 安装ID</span></span><br><span class="line">  <span class="string">&quot;bookVersion&quot;</span>: <span class="number">1</span>,                    <span class="comment">// 书籍版本</span></span><br><span class="line">  <span class="string">&quot;summary&quot;</span>: <span class="string">&quot;阅读摘要&quot;</span>,               <span class="comment">// 阅读摘要</span></span><br><span class="line">  <span class="string">&quot;isLecture&quot;</span>: <span class="number">0</span>,                      <span class="comment">// 是否为讲座</span></span><br><span class="line">  <span class="string">&quot;voiceType&quot;</span>: <span class="number">0</span>,                      <span class="comment">// 语音类型</span></span><br><span class="line">  <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200</span>,             <span class="comment">// 时间戳</span></span><br><span class="line">  <span class="string">&quot;random&quot;</span>: <span class="number">12345</span>,                     <span class="comment">// 随机数</span></span><br><span class="line">  <span class="string">&quot;signature&quot;</span>: <span class="string">&quot;signature_string&quot;</span>,     <span class="comment">// 签名</span></span><br><span class="line">  <span class="string">&quot;autoTime&quot;</span>: <span class="number">0</span>,                       <span class="comment">// 自动时长</span></span><br><span class="line">  <span class="string">&quot;isStoryFeed&quot;</span>: <span class="number">0</span>,                    <span class="comment">// 是否为故事流</span></span><br><span class="line">  <span class="string">&quot;wordCount&quot;</span>: <span class="number">2500</span>,                   <span class="comment">// 字数</span></span><br><span class="line">  <span class="string">&quot;curType&quot;</span>: <span class="string">&quot;reading&quot;</span>,                <span class="comment">// 当前类型</span></span><br><span class="line">  <span class="string">&quot;hours&quot;</span>: [                           <span class="comment">// 小时数据</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;hour&quot;</span>: <span class="number">14</span>,</span><br><span class="line">      <span class="string">&quot;readingTime&quot;</span>: <span class="number">1800</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_id_here&quot;</span>,        <span class="comment">// 设备ID</span></span><br><span class="line">  <span class="string">&quot;risk&quot;</span>: <span class="number">0</span>,                           <span class="comment">// 风险等级</span></span><br><span class="line">  <span class="string">&quot;recordCreateTimeZone&quot;</span>: <span class="string">&quot;+08:00&quot;</span>     <span class="comment">// 记录创建时区</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="非书架书籍阅读报告">非书架书籍阅读报告</h3><h4 id="POST-https-i-weread-qq-com-book-read-2">POST <a href="https://i.weread.qq.com/book/read">https://i.weread.qq.com/book/read</a></h4><p>报告非书架书籍的阅读数据（参数较少）。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,            <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_id_here&quot;</span>,        <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;readingTime&quot;</span>: <span class="number">1800</span>,                 <span class="comment">// 阅读时长（秒）</span></span><br><span class="line">  <span class="string">&quot;ttsTime&quot;</span>: <span class="number">0</span>,                        <span class="comment">// TTS时长</span></span><br><span class="line">  <span class="string">&quot;lectureTime&quot;</span>: <span class="number">0</span>,                    <span class="comment">// 讲座时长</span></span><br><span class="line">  <span class="string">&quot;lectureTextTime&quot;</span>: <span class="number">0</span>,                <span class="comment">// 讲座文本时长</span></span><br><span class="line">  <span class="string">&quot;novalTime&quot;</span>: <span class="number">0</span>,                      <span class="comment">// 小说时长</span></span><br><span class="line">  <span class="string">&quot;voiceType&quot;</span>: <span class="number">0</span>,                      <span class="comment">// 语音类型</span></span><br><span class="line">  <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200</span>,             <span class="comment">// 时间戳</span></span><br><span class="line">  <span class="string">&quot;random&quot;</span>: <span class="number">12345</span>,                     <span class="comment">// 随机数</span></span><br><span class="line">  <span class="string">&quot;signature&quot;</span>: <span class="string">&quot;signature_string&quot;</span>,     <span class="comment">// 签名</span></span><br><span class="line">  <span class="string">&quot;autoTime&quot;</span>: <span class="number">0</span>,                       <span class="comment">// 自动时长</span></span><br><span class="line">  <span class="string">&quot;chapterProgress&quot;</span>: <span class="number">50</span>,               <span class="comment">// 章节进度</span></span><br><span class="line">  <span class="string">&quot;wordCount&quot;</span>: <span class="number">2500</span>,                   <span class="comment">// 字数</span></span><br><span class="line">  <span class="string">&quot;hours&quot;</span>: [],                         <span class="comment">// 小时数据</span></span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;device_id_here&quot;</span>,        <span class="comment">// 设备ID</span></span><br><span class="line">  <span class="string">&quot;risk&quot;</span>: <span class="number">0</span>,                           <span class="comment">// 风险等级</span></span><br><span class="line">  <span class="string">&quot;appId&quot;</span>: <span class="string">&quot;app_id_here&quot;</span>,              <span class="comment">// 应用ID</span></span><br><span class="line">  <span class="string">&quot;recordCreateTimeZone&quot;</span>: <span class="string">&quot;+08:00&quot;</span>     <span class="comment">// 记录创建时区</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="标记阅读状态-2">标记阅读状态</h3><h4 id="POST-https-i-weread-qq-com-book-markstatus-2">POST <a href="https://i.weread.qq.com/book/markstatus">https://i.weread.qq.com/book/markstatus</a></h4><p>标记书籍的阅读状态。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;status&quot;</span>: <span class="number">2</span>,                         <span class="comment">// 阅读状态</span></span><br><span class="line">  <span class="string">&quot;isCancel&quot;</span>: <span class="number">0</span>,                       <span class="comment">// 是否取消标记</span></span><br><span class="line">  <span class="string">&quot;bookIds&quot;</span>: [<span class="string">&quot;book1&quot;</span>, <span class="string">&quot;book2&quot;</span>]        <span class="comment">// 书籍ID数组（可选）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="进度上传-API">进度上传 API</h2><h3 id="上传-TTS-进度">上传 TTS 进度</h3><h4 id="POST-https-i-weread-qq-com-book-uploadProgress">POST <a href="https://i.weread.qq.com/book/uploadProgress">https://i.weread.qq.com/book/uploadProgress</a></h4><p>上传文本转语音的播放进度。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,            <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;tts&quot;</span>: &#123;                             <span class="comment">// TTS进度信息</span></span><br><span class="line">    <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;progress&quot;</span>: <span class="number">0.5</span>,</span><br><span class="line">    <span class="string">&quot;position&quot;</span>: <span class="number">1000</span>,</span><br><span class="line">    <span class="string">&quot;duration&quot;</span>: <span class="number">2000</span>,</span><br><span class="line">    <span class="string">&quot;speed&quot;</span>: <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">&quot;voice&quot;</span>: <span class="string">&quot;female&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="批量上传进度">批量上传进度</h3><h4 id="POST-https-i-weread-qq-com-book-batchUploadProgress">POST <a href="https://i.weread.qq.com/book/batchUploadProgress">https://i.weread.qq.com/book/batchUploadProgress</a></h4><p>批量上传多本书籍的阅读进度。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;books&quot;</span>: [                           <span class="comment">// 书籍进度数组</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="string">&quot;progress&quot;</span>: <span class="number">0.5</span>,</span><br><span class="line">      <span class="string">&quot;readingTime&quot;</span>: <span class="number">1800</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book2&quot;</span>,</span><br><span class="line">      <span class="string">&quot;chapterUid&quot;</span>: <span class="number">2</span>,</span><br><span class="line">      <span class="string">&quot;progress&quot;</span>: <span class="number">0.3</span>,</span><br><span class="line">      <span class="string">&quot;readingTime&quot;</span>: <span class="number">1200</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200</span>,             <span class="comment">// 时间戳</span></span><br><span class="line">  <span class="string">&quot;random&quot;</span>: <span class="number">12345</span>,                     <span class="comment">// 随机数</span></span><br><span class="line">  <span class="string">&quot;signature&quot;</span>: <span class="string">&quot;signature_string&quot;</span>,     <span class="comment">// 签名</span></span><br><span class="line">  <span class="string">&quot;recordCreateTimeZone&quot;</span>: <span class="string">&quot;+08:00&quot;</span>     <span class="comment">// 记录创建时区</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>书籍搜索 API</h1><p>微信读书书籍搜索相关的 API 接口，包括基础搜索、高级搜索、书店搜索等功能。</p><h2 id="基础搜索-API">基础搜索 API</h2><h3 id="书店综合搜索">书店综合搜索</h3><h4 id="GET-store-search">GET /store/search</h4><p>在书店中进行综合搜索。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;keyword&quot;</span>: <span class="string">&quot;人工智能&quot;</span>,               <span class="comment">// 搜索关键词</span></span><br><span class="line">  <span class="string">&quot;author&quot;</span>: <span class="string">&quot;作者名&quot;</span>,                  <span class="comment">// 作者名称</span></span><br><span class="line">  <span class="string">&quot;authorVids&quot;</span>: <span class="string">&quot;123,456&quot;</span>,             <span class="comment">// 作者VID列表</span></span><br><span class="line">  <span class="string">&quot;categoryId&quot;</span>: <span class="string">&quot;tech&quot;</span>,                <span class="comment">// 分类ID</span></span><br><span class="line">  <span class="string">&quot;count&quot;</span>: <span class="number">20</span>,                         <span class="comment">// 获取数量（可选）</span></span><br><span class="line">  <span class="string">&quot;maxIdx&quot;</span>: <span class="number">100</span>,                       <span class="comment">// 最大索引（可选）</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">1</span>,                           <span class="comment">// 搜索类型（可选）</span></span><br><span class="line">  <span class="string">&quot;v&quot;</span>: <span class="number">2</span>,                              <span class="comment">// 版本（可选）</span></span><br><span class="line">  <span class="string">&quot;outer&quot;</span>: <span class="number">0</span>,                          <span class="comment">// 外部标识</span></span><br><span class="line">  <span class="string">&quot;fromBookId&quot;</span>: <span class="string">&quot;book_123&quot;</span>,            <span class="comment">// 来源书籍ID</span></span><br><span class="line">  <span class="string">&quot;scope&quot;</span>: <span class="number">1</span>,                          <span class="comment">// 搜索范围</span></span><br><span class="line">  <span class="string">&quot;scene&quot;</span>: <span class="number">1</span>,                          <span class="comment">// 搜索场景</span></span><br><span class="line">  <span class="string">&quot;filterType&quot;</span>: <span class="number">0</span>,                     <span class="comment">// 过滤类型</span></span><br><span class="line">  <span class="string">&quot;filterField&quot;</span>: <span class="string">&quot;all&quot;</span>,                <span class="comment">// 过滤字段</span></span><br><span class="line">  <span class="string">&quot;queryUid&quot;</span>: <span class="string">&quot;query_456&quot;</span>,             <span class="comment">// 查询UID</span></span><br><span class="line">  <span class="string">&quot;isQueryWord&quot;</span>: <span class="number">1</span>                     <span class="comment">// 是否查询词</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;books&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;人工智能简史&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">        <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;https://example.com/cover1.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;isbn&quot;</span>: <span class="string">&quot;9787111234567&quot;</span>,</span><br><span class="line">        <span class="string">&quot;publisher&quot;</span>: <span class="string">&quot;机械工业出版社&quot;</span>,</span><br><span class="line">        <span class="string">&quot;publishTime&quot;</span>: <span class="string">&quot;2023-01-15&quot;</span>,</span><br><span class="line">        <span class="string">&quot;category&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;categoryId&quot;</span>: <span class="string">&quot;tech&quot;</span>,</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;科技&quot;</span>,</span><br><span class="line">          <span class="string">&quot;subCategory&quot;</span>: <span class="string">&quot;人工智能&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;rating&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;score&quot;</span>: <span class="number">4.5</span>,</span><br><span class="line">          <span class="string">&quot;count&quot;</span>: <span class="number">1250</span>,</span><br><span class="line">          <span class="string">&quot;distribution&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;5&quot;</span>: <span class="number">650</span>,</span><br><span class="line">            <span class="string">&quot;4&quot;</span>: <span class="number">400</span>,</span><br><span class="line">            <span class="string">&quot;3&quot;</span>: <span class="number">150</span>,</span><br><span class="line">            <span class="string">&quot;2&quot;</span>: <span class="number">30</span>,</span><br><span class="line">            <span class="string">&quot;1&quot;</span>: <span class="number">20</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;price&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;original&quot;</span>: <span class="number">59.0</span>,</span><br><span class="line">          <span class="string">&quot;current&quot;</span>: <span class="number">29.5</span>,</span><br><span class="line">          <span class="string">&quot;discount&quot;</span>: <span class="number">0.5</span>,</span><br><span class="line">          <span class="string">&quot;currency&quot;</span>: <span class="string">&quot;CNY&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;stats&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;readCount&quot;</span>: <span class="number">15600</span>,</span><br><span class="line">          <span class="string">&quot;reviewCount&quot;</span>: <span class="number">89</span>,</span><br><span class="line">          <span class="string">&quot;noteCount&quot;</span>: <span class="number">234</span>,</span><br><span class="line">          <span class="string">&quot;wordCount&quot;</span>: <span class="number">180000</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;tags&quot;</span>: [<span class="string">&quot;人工智能&quot;</span>, <span class="string">&quot;科技&quot;</span>, <span class="string">&quot;入门&quot;</span>],</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;深入浅出地介绍人工智能的发展历程和核心技术...&quot;</span>,</span><br><span class="line">        <span class="string">&quot;availability&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;isAvailable&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="string">&quot;isFree&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="string">&quot;hasTrialReading&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="string">&quot;trialChapters&quot;</span>: <span class="number">3</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;authors&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;authorVid&quot;</span>: <span class="string">&quot;author_789&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">        <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/author_avatar.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;人工智能领域专家&quot;</span>,</span><br><span class="line">        <span class="string">&quot;bookCount&quot;</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="string">&quot;followerCount&quot;</span>: <span class="number">2580</span>,</span><br><span class="line">        <span class="string">&quot;tags&quot;</span>: [<span class="string">&quot;AI专家&quot;</span>, <span class="string">&quot;教授&quot;</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;categories&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;categoryId&quot;</span>: <span class="string">&quot;tech&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;科技&quot;</span>,</span><br><span class="line">        <span class="string">&quot;bookCount&quot;</span>: <span class="number">1250</span>,</span><br><span class="line">        <span class="string">&quot;subCategories&quot;</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;categoryId&quot;</span>: <span class="string">&quot;ai&quot;</span>,</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;人工智能&quot;</span>,</span><br><span class="line">            <span class="string">&quot;bookCount&quot;</span>: <span class="number">156</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;searchStats&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;totalCount&quot;</span>: <span class="number">1250</span>,</span><br><span class="line">      <span class="string">&quot;searchTime&quot;</span>: <span class="number">0.15</span>,</span><br><span class="line">      <span class="string">&quot;hasMore&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">&quot;nextMaxIdx&quot;</span>: <span class="number">120</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;suggestions&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;人工智能入门&quot;</span>,</span><br><span class="line">      <span class="string">&quot;机器学习&quot;</span>,</span><br><span class="line">      <span class="string">&quot;深度学习&quot;</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="按标题搜索书籍">按标题搜索书籍</h3><h4 id="POST-https-i-weread-qq-com-store-titlesearch">POST <a href="https://i.weread.qq.com/store/titlesearch">https://i.weread.qq.com/store/titlesearch</a></h4><p>通过书籍标题进行精确搜索。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;keywords&quot;</span>: [                        <span class="comment">// 关键词列表</span></span><br><span class="line">    <span class="string">&quot;人工智能简史&quot;</span>,</span><br><span class="line">    <span class="string">&quot;机器学习实战&quot;</span>,</span><br><span class="line">    <span class="string">&quot;深度学习&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;books&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;人工智能简史&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">        <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;https://example.com/cover1.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;isbn&quot;</span>: <span class="string">&quot;9787111234567&quot;</span>,</span><br><span class="line">        <span class="string">&quot;matchScore&quot;</span>: <span class="number">0.95</span>,              <span class="comment">// 匹配度评分</span></span><br><span class="line">        <span class="string">&quot;matchType&quot;</span>: <span class="string">&quot;exact_title&quot;</span>,      <span class="comment">// 匹配类型</span></span><br><span class="line">        <span class="string">&quot;highlightTitle&quot;</span>: <span class="string">&quot;&lt;em&gt;人工智能简史&lt;/em&gt;&quot;</span>, <span class="comment">// 高亮标题</span></span><br><span class="line">        <span class="string">&quot;publisher&quot;</span>: <span class="string">&quot;机械工业出版社&quot;</span>,</span><br><span class="line">        <span class="string">&quot;publishTime&quot;</span>: <span class="string">&quot;2023-01-15&quot;</span>,</span><br><span class="line">        <span class="string">&quot;rating&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;score&quot;</span>: <span class="number">4.5</span>,</span><br><span class="line">          <span class="string">&quot;count&quot;</span>: <span class="number">1250</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;price&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;current&quot;</span>: <span class="number">29.5</span>,</span><br><span class="line">          <span class="string">&quot;currency&quot;</span>: <span class="string">&quot;CNY&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;availability&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;isAvailable&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="string">&quot;isFree&quot;</span>: <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;searchStats&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;totalMatches&quot;</span>: <span class="number">3</span>,</span><br><span class="line">      <span class="string">&quot;exactMatches&quot;</span>: <span class="number">2</span>,</span><br><span class="line">      <span class="string">&quot;partialMatches&quot;</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="string">&quot;searchTime&quot;</span>: <span class="number">0.08</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;unmatchedKeywords&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;不存在的书名&quot;</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>书籍服务 API</h1><p>微信读书书籍服务相关的 API 接口，包括书籍信息、AI 功能、搜索、订阅等。</p><h2 id="书籍信息-API">书籍信息 API</h2><h3 id="获取单本书籍信息">获取单本书籍信息</h3><h4 id="GET-book-info">GET /book/info</h4><p>获取指定书籍的详细信息。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,    <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;teenmode&quot;</span>: <span class="number">0</span>,               <span class="comment">// 青少年模式 (0: 关闭, 1: 开启)</span></span><br><span class="line">  <span class="string">&quot;myzy&quot;</span>: <span class="number">0</span>,                   <span class="comment">// 可选参数</span></span><br><span class="line">  <span class="string">&quot;source&quot;</span>: <span class="string">&quot;source_name&quot;</span>      <span class="comment">// 来源</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;title&quot;</span>: <span class="string">&quot;书籍标题&quot;</span>,</span><br><span class="line">    <span class="string">&quot;author&quot;</span>: <span class="string">&quot;作者姓名&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;https://example.com/cover.jpg&quot;</span>,</span><br><span class="line">    <span class="string">&quot;intro&quot;</span>: <span class="string">&quot;书籍简介&quot;</span>,</span><br><span class="line">    <span class="string">&quot;category&quot;</span>: <span class="string">&quot;科技&quot;</span>,</span><br><span class="line">    <span class="string">&quot;publishTime&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">    <span class="string">&quot;wordCount&quot;</span>: <span class="number">200000</span>,</span><br><span class="line">    <span class="string">&quot;chapterCount&quot;</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="string">&quot;price&quot;</span>: <span class="number">29.99</span>,</span><br><span class="line">    <span class="string">&quot;rating&quot;</span>: <span class="number">4.5</span>,</span><br><span class="line">    <span class="string">&quot;ratingCount&quot;</span>: <span class="number">1000</span>,</span><br><span class="line">    <span class="string">&quot;tags&quot;</span>: [<span class="string">&quot;人工智能&quot;</span>, <span class="string">&quot;科技&quot;</span>],</span><br><span class="line">    <span class="string">&quot;publisher&quot;</span>: <span class="string">&quot;出版社名称&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="批量获取书籍信息">批量获取书籍信息</h3><h4 id="POST-https-i-weread-qq-com-book-infos">POST <a href="https://i.weread.qq.com/book/infos">https://i.weread.qq.com/book/infos</a></h4><p>批量获取多本书籍的信息。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookIds&quot;</span>: [<span class="string">&quot;book1&quot;</span>, <span class="string">&quot;book2&quot;</span>, <span class="string">&quot;book3&quot;</span>],  <span class="comment">// 书籍ID数组</span></span><br><span class="line">  <span class="string">&quot;teenmode&quot;</span>: <span class="number">0</span>                            <span class="comment">// 青少年模式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取书籍更新信息">获取书籍更新信息</h3><h4 id="POST-https-i-weread-qq-com-book-lastchapteridx">POST <a href="https://i.weread.qq.com/book/lastchapteridx">https://i.weread.qq.com/book/lastchapteridx</a></h4><p>检查书籍是否有更新。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookIds&quot;</span>: [<span class="string">&quot;book1&quot;</span>, <span class="string">&quot;book2&quot;</span>],           <span class="comment">// 书籍ID数组</span></span><br><span class="line">  <span class="string">&quot;lastChapterIdxs&quot;</span>: [<span class="number">10</span>, <span class="number">15</span>],             <span class="comment">// 最后章节索引数组</span></span><br><span class="line">  <span class="string">&quot;synckeys&quot;</span>: [<span class="number">123456789</span>, <span class="number">123456790</span>]       <span class="comment">// 同步键数组</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="书籍详细信息">书籍详细信息</h2><h3 id="获取书籍页脚">获取书籍页脚</h3><h4 id="GET-book-footer">GET /book/footer</h4><p>获取书籍页面的页脚信息，包括版权、出版信息等。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>         <span class="comment">// 书籍ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;copyright&quot;</span>: <span class="string">&quot;© 2023 出版社名称&quot;</span>,</span><br><span class="line">    <span class="string">&quot;isbn&quot;</span>: <span class="string">&quot;978-7-111-12345-6&quot;</span>,</span><br><span class="line">    <span class="string">&quot;publishDate&quot;</span>: <span class="string">&quot;2023年1月&quot;</span>,</span><br><span class="line">    <span class="string">&quot;publisher&quot;</span>: <span class="string">&quot;机械工业出版社&quot;</span>,</span><br><span class="line">    <span class="string">&quot;edition&quot;</span>: <span class="string">&quot;第1版&quot;</span>,</span><br><span class="line">    <span class="string">&quot;printDate&quot;</span>: <span class="string">&quot;2023年1月第1次印刷&quot;</span>,</span><br><span class="line">    <span class="string">&quot;legalNotice&quot;</span>: <span class="string">&quot;版权所有，侵权必究&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取书籍付费时间">获取书籍付费时间</h3><h4 id="GET-book-paytime">GET /book/paytime</h4><p>获取书籍的付费时间信息，支持批量查询。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookIds&quot;</span>: <span class="string">&quot;book1,book2,book3&quot;</span>   <span class="comment">// 书籍ID列表（逗号分隔）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;payTimes&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;book1&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;payTime&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">        <span class="string">&quot;payMethod&quot;</span>: <span class="string">&quot;wechat_pay&quot;</span>,</span><br><span class="line">        <span class="string">&quot;amount&quot;</span>: <span class="number">29.99</span>,</span><br><span class="line">        <span class="string">&quot;currency&quot;</span>: <span class="string">&quot;CNY&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;book2&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;payTime&quot;</span>: <span class="number">1641081600</span>,</span><br><span class="line">        <span class="string">&quot;payMethod&quot;</span>: <span class="string">&quot;alipay&quot;</span>,</span><br><span class="line">        <span class="string">&quot;amount&quot;</span>: <span class="number">19.99</span>,</span><br><span class="line">        <span class="string">&quot;currency&quot;</span>: <span class="string">&quot;CNY&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;book3&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;payTime&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&quot;isFree&quot;</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="AI-功能-API">AI 功能 API</h2><h3 id="AI-内容生成">AI 内容生成</h3><h4 id="POST-https-i-weread-qq-com-ai-readbook">POST <a href="https://i.weread.qq.com/ai/readbook">https://i.weread.qq.com/ai/readbook</a></h4><p>使用 AI 生成书籍相关内容，如要点总结、实体词等。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,                <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;chapterUids&quot;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],                <span class="comment">// 章节UID数组</span></span><br><span class="line">  <span class="string">&quot;reqType&quot;</span>: <span class="string">&quot;keyPoint&quot;</span>                    <span class="comment">// 请求类型: keyPoint, keyWordRange</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;keyPoints&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;points&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;要点1：人工智能的定义&quot;</span>,</span><br><span class="line">          <span class="string">&quot;要点2：机器学习的基本概念&quot;</span>,</span><br><span class="line">          <span class="string">&quot;要点3：深度学习的应用&quot;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;summary&quot;</span>: <span class="string">&quot;本章主要介绍了人工智能的基础概念...&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="AI-索引生成">AI 索引生成</h3><h4 id="POST-https-i-weread-qq-com-ai-readbook-2">POST <a href="https://i.weread.qq.com/ai/readbook">https://i.weread.qq.com/ai/readbook</a></h4><p>生成书籍的 AI 索引。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,                <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;reqType&quot;</span>: <span class="string">&quot;keyPoint&quot;</span>,                   <span class="comment">// 请求类型</span></span><br><span class="line">  <span class="string">&quot;needChapterInfos&quot;</span>: <span class="literal">true</span>                 <span class="comment">// 是否需要章节信息</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="实体词提取">实体词提取</h3><h4 id="POST-https-i-weread-qq-com-ai-readbook-3">POST <a href="https://i.weread.qq.com/ai/readbook">https://i.weread.qq.com/ai/readbook</a></h4><p>提取书籍章节中的实体词。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,                <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;chapterUids&quot;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],                <span class="comment">// 章节UID数组</span></span><br><span class="line">  <span class="string">&quot;reqType&quot;</span>: <span class="string">&quot;keyWordRange&quot;</span>                <span class="comment">// 请求类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="知识检索">知识检索</h3><h4 id="POST-https-i-weread-qq-com-knowledge-retrieval-2">POST <a href="https://i.weread.qq.com/knowledge/retrieval">https://i.weread.qq.com/knowledge/retrieval</a></h4><p>在书籍中检索相关知识。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;book_id&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,               <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;query&quot;</span>: <span class="string">&quot;search_query&quot;</span>,                 <span class="comment">// 搜索查询</span></span><br><span class="line">  <span class="string">&quot;question_recall&quot;</span>: <span class="literal">true</span>,                 <span class="comment">// 是否问题召回</span></span><br><span class="line">  <span class="string">&quot;scene&quot;</span>: <span class="number">1</span>,                              <span class="comment">// 场景ID</span></span><br><span class="line">  <span class="string">&quot;count&quot;</span>: <span class="number">10</span>                              <span class="comment">// 返回数量</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="搜索功能-API">搜索功能 API</h2><h3 id="内容搜索">内容搜索</h3><h4 id="GET-book-search">GET /book/search</h4><p>在书籍内容中搜索关键词。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,                <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;keyword&quot;</span>: <span class="string">&quot;search_keyword&quot;</span>,             <span class="comment">// 搜索关键词</span></span><br><span class="line">  <span class="string">&quot;mode&quot;</span>: <span class="string">&quot;search_mode&quot;</span>,                   <span class="comment">// 搜索模式</span></span><br><span class="line">  <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,                         <span class="comment">// 章节UID（可选）</span></span><br><span class="line">  <span class="string">&quot;posBegin&quot;</span>: <span class="number">0</span>,                           <span class="comment">// 开始位置（可选）</span></span><br><span class="line">  <span class="string">&quot;posEnd&quot;</span>: <span class="number">100</span>,                           <span class="comment">// 结束位置（可选）</span></span><br><span class="line">  <span class="string">&quot;v&quot;</span>: <span class="number">2</span>,                                  <span class="comment">// 版本</span></span><br><span class="line">  <span class="string">&quot;count&quot;</span>: <span class="number">10</span>                              <span class="comment">// 返回数量</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="内容定位">内容定位</h3><h4 id="POST-https-i-weread-qq-com-book-locate">POST <a href="https://i.weread.qq.com/book/locate">https://i.weread.qq.com/book/locate</a></h4><p>定位书籍中的特定文本内容。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,                <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,                         <span class="comment">// 章节UID（可选）</span></span><br><span class="line">  <span class="string">&quot;text&quot;</span>: <span class="string">&quot;target_text&quot;</span>,                   <span class="comment">// 目标文本</span></span><br><span class="line">  <span class="string">&quot;matchWords&quot;</span>: [<span class="string">&quot;word1&quot;</span>, <span class="string">&quot;word2&quot;</span>]         <span class="comment">// 匹配词数组</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="书籍请求-API">书籍请求 API</h2><h3 id="请求添加书籍">请求添加书籍</h3><h4 id="POST-https-i-weread-qq-com-book-notfound">POST <a href="https://i.weread.qq.com/book/notfound">https://i.weread.qq.com/book/notfound</a></h4><p>报告书籍未找到，请求平台添加该书籍。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;globalId&quot;</span>: <span class="string">&quot;global_id_here&quot;</span>,            <span class="comment">// 全局ID</span></span><br><span class="line">  <span class="string">&quot;title&quot;</span>: <span class="string">&quot;book_title&quot;</span>,                   <span class="comment">// 书籍标题</span></span><br><span class="line">  <span class="string">&quot;author&quot;</span>: <span class="string">&quot;author_name&quot;</span>,                 <span class="comment">// 作者姓名</span></span><br><span class="line">  <span class="string">&quot;addReview&quot;</span>: <span class="number">1</span>,                          <span class="comment">// 是否添加书评（可选）</span></span><br><span class="line">  <span class="string">&quot;bookCover&quot;</span>: <span class="string">&quot;cover_url&quot;</span>                 <span class="comment">// 书籍封面URL（可选）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="音频功能-API">音频功能 API</h2><h3 id="获取音频-URL">获取音频 URL</h3><h4 id="GET-audio-geturl">GET /audio/geturl</h4><p>获取音频资源的播放 URL。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;audioId&quot;</span>: <span class="string">&quot;audio_id_here&quot;</span>,              <span class="comment">// 音频ID</span></span><br><span class="line">  <span class="string">&quot;reviewId&quot;</span>: <span class="string">&quot;review_id_here&quot;</span>,            <span class="comment">// 书评ID</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">1</span>,                               <span class="comment">// 类型</span></span><br><span class="line">  <span class="string">&quot;quality&quot;</span>: <span class="number">1</span>                             <span class="comment">// 音质</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="上传音频">上传音频</h3><h4 id="POST-https-i-weread-qq-com-audio-apply">POST <a href="https://i.weread.qq.com/audio/apply">https://i.weread.qq.com/audio/apply</a></h4><p>申请上传音频文件。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;md5&quot;</span>: <span class="string">&quot;file_md5_hash&quot;</span>,                  <span class="comment">// 文件MD5哈希</span></span><br><span class="line">  <span class="string">&quot;sha&quot;</span>: <span class="string">&quot;file_sha_hash&quot;</span>,                  <span class="comment">// 文件SHA哈希</span></span><br><span class="line">  <span class="string">&quot;datalen&quot;</span>: <span class="number">1024000</span>,                      <span class="comment">// 数据长度</span></span><br><span class="line">  <span class="string">&quot;filetype&quot;</span>: <span class="string">&quot;mp3&quot;</span>,                       <span class="comment">// 文件类型</span></span><br><span class="line">  <span class="string">&quot;addrtype&quot;</span>: <span class="number">1</span>                            <span class="comment">// 地址类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="书籍分享-API">书籍分享 API</h2><h3 id="分享到发现页">分享到发现页</h3><h4 id="POST-https-i-weread-qq-com-book-shareToDiscover">POST <a href="https://i.weread.qq.com/book/shareToDiscover">https://i.weread.qq.com/book/shareToDiscover</a></h4><p>将书籍分享到发现页面，让其他用户可以发现和阅读。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,        <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;isLecture&quot;</span>: <span class="number">0</span>,                  <span class="comment">// 是否为讲座 (0: 否, 1: 是)</span></span><br><span class="line">  <span class="string">&quot;lectureVid&quot;</span>: <span class="number">0</span>,                 <span class="comment">// 讲座VID（当isLecture为1时使用）</span></span><br><span class="line">  <span class="string">&quot;isUnshare&quot;</span>: <span class="number">0</span>,                  <span class="comment">// 是否取消分享 (0: 分享, 1: 取消分享)</span></span><br><span class="line">  <span class="string">&quot;shareText&quot;</span>: <span class="string">&quot;推荐理由&quot;</span>,          <span class="comment">// 分享文本（可选）</span></span><br><span class="line">  <span class="string">&quot;tags&quot;</span>: [<span class="string">&quot;标签1&quot;</span>, <span class="string">&quot;标签2&quot;</span>]        <span class="comment">// 分享标签（可选）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;success&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;shareId&quot;</span>: <span class="string">&quot;share_123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;shareUrl&quot;</span>: <span class="string">&quot;https://weread.qq.com/share/123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;message&quot;</span>: <span class="string">&quot;分享成功&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="订阅管理">订阅管理</h2><h3 id="订阅作者">订阅作者</h3><h4 id="POST-https-i-weread-qq-com-subscription-operation">POST <a href="https://i.weread.qq.com/subscription/operation">https://i.weread.qq.com/subscription/operation</a></h4><p>订阅或取消订阅作者，获取作者的最新作品推送。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">1</span>,                       <span class="comment">// 订阅类型 (1: 作者订阅)</span></span><br><span class="line">  <span class="string">&quot;isUnSubscribe&quot;</span>: <span class="number">0</span>,              <span class="comment">// 是否取消订阅 (0: 订阅, 1: 取消订阅)</span></span><br><span class="line">  <span class="string">&quot;authorNames&quot;</span>: [<span class="string">&quot;作者1&quot;</span>, <span class="string">&quot;作者2&quot;</span>], <span class="comment">// 作者姓名数组</span></span><br><span class="line">  <span class="string">&quot;authorIds&quot;</span>: [<span class="string">&quot;id1&quot;</span>, <span class="string">&quot;id2&quot;</span>],     <span class="comment">// 作者ID数组</span></span><br><span class="line">  <span class="string">&quot;fromBookIds&quot;</span>: [<span class="string">&quot;book1&quot;</span>, <span class="string">&quot;book2&quot;</span>], <span class="comment">// 来源书籍ID数组</span></span><br><span class="line">  <span class="string">&quot;cpName&quot;</span>: [<span class="string">&quot;出版社1&quot;</span>, <span class="string">&quot;出版社2&quot;</span>]   <span class="comment">// 出版社名称数组</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;success&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;subscribed&quot;</span>: [<span class="string">&quot;作者1&quot;</span>, <span class="string">&quot;作者2&quot;</span>],</span><br><span class="line">    <span class="string">&quot;failed&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;message&quot;</span>: <span class="string">&quot;订阅成功&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="取消书籍订阅">取消书籍订阅</h3><h4 id="POST-https-i-weread-qq-com-subscription-cancel">POST <a href="https://i.weread.qq.com/subscription/cancel">https://i.weread.qq.com/subscription/cancel</a></h4><p>取消对特定书籍的订阅通知。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookIds&quot;</span>: [<span class="string">&quot;book1&quot;</span>, <span class="string">&quot;book2&quot;</span>, <span class="string">&quot;book3&quot;</span>]   <span class="comment">// 要取消订阅的书籍ID数组</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;success&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;cancelledBooks&quot;</span>: [<span class="string">&quot;book1&quot;</span>, <span class="string">&quot;book2&quot;</span>, <span class="string">&quot;book3&quot;</span>],</span><br><span class="line">    <span class="string">&quot;message&quot;</span>: <span class="string">&quot;取消订阅成功&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取订阅状态">获取订阅状态</h3><h4 id="GET-shelf-uncertifiedopus">GET /shelf/uncertifiedopus</h4><p>获取作者订阅状态信息和相关作品。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_id_here&quot;</span>,        <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_vid_here&quot;</span>,      <span class="comment">// 用户VID</span></span><br><span class="line">  <span class="string">&quot;authorId&quot;</span>: <span class="string">&quot;author_id_here&quot;</span>,    <span class="comment">// 作者ID</span></span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;author_name&quot;</span>,           <span class="comment">// 作者姓名</span></span><br><span class="line">  <span class="string">&quot;nameType&quot;</span>: <span class="number">1</span>,                   <span class="comment">// 姓名类型 (1: 作者名)</span></span><br><span class="line">  <span class="string">&quot;opType&quot;</span>: <span class="number">1</span>,                     <span class="comment">// 操作类型 (1: 查询订阅状态)</span></span><br><span class="line">  <span class="string">&quot;maxIdx&quot;</span>: <span class="number">0</span>,                     <span class="comment">// 最大索引</span></span><br><span class="line">  <span class="string">&quot;count&quot;</span>: <span class="number">20</span>                      <span class="comment">// 返回数量</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;isSubscribed&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;authorInfo&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;authorId&quot;</span>: <span class="string">&quot;author_123&quot;</span>,</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">      <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;https://example.com/avatar.jpg&quot;</span>,</span><br><span class="line">      <span class="string">&quot;description&quot;</span>: <span class="string">&quot;知名作家&quot;</span>,</span><br><span class="line">      <span class="string">&quot;bookCount&quot;</span>: <span class="number">15</span>,</span><br><span class="line">      <span class="string">&quot;followerCount&quot;</span>: <span class="number">10000</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;recentBooks&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;最新作品&quot;</span>,</span><br><span class="line">        <span class="string">&quot;publishTime&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">        <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;https://example.com/cover.jpg&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;subscriptionTime&quot;</span>: <span class="number">1640995200</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>书单 API</h1><p>微信读书书单服务相关的 API 接口，包括书单创建、管理、评论、点赞、收藏等功能。</p><h2 id="书单管理-API">书单管理 API</h2><h3 id="创建书单">创建书单</h3><h4 id="POST-https-i-weread-qq-com-booklist-add">POST <a href="https://i.weread.qq.com/booklist/add">https://i.weread.qq.com/booklist/add</a></h4><p>创建新的书单。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;我的推荐书单&quot;</span>,                <span class="comment">// 书单名称</span></span><br><span class="line">  <span class="string">&quot;description&quot;</span>: <span class="string">&quot;精选好书推荐&quot;</span>,        <span class="comment">// 书单描述</span></span><br><span class="line">  <span class="string">&quot;bookItems&quot;</span>: [                       <span class="comment">// 书籍列表</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;推荐理由1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;order&quot;</span>: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book2&quot;</span>, </span><br><span class="line">      <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;推荐理由2&quot;</span>,</span><br><span class="line">      <span class="string">&quot;order&quot;</span>: <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;shareToDiscover&quot;</span>: <span class="number">1</span>                 <span class="comment">// 是否分享到发现页</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;booklistId&quot;</span>: <span class="string">&quot;booklist_123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;我的推荐书单&quot;</span>,</span><br><span class="line">    <span class="string">&quot;description&quot;</span>: <span class="string">&quot;精选好书推荐&quot;</span>,</span><br><span class="line">    <span class="string">&quot;createTime&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">    <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">    <span class="string">&quot;bookCount&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;collectCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;likeCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;readCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;shareToDiscover&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;books&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;书籍1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: <span class="string">&quot;作者1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;cover&quot;</span>: <span class="string">&quot;封面URL1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;推荐理由1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;order&quot;</span>: <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="更新书单">更新书单</h3><h4 id="POST-https-i-weread-qq-com-booklist-update">POST <a href="https://i.weread.qq.com/booklist/update">https://i.weread.qq.com/booklist/update</a></h4><p>更新现有书单的信息。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;booklistId&quot;</span>: <span class="string">&quot;booklist_123456&quot;</span>,     <span class="comment">// 书单ID</span></span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;更新后的书单名称&quot;</span>,           <span class="comment">// 新名称</span></span><br><span class="line">  <span class="string">&quot;description&quot;</span>: <span class="string">&quot;更新后的描述&quot;</span>,        <span class="comment">// 新描述</span></span><br><span class="line">  <span class="string">&quot;bookItems&quot;</span>: [                       <span class="comment">// 更新后的书籍列表</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;更新的推荐理由&quot;</span>,</span><br><span class="line">      <span class="string">&quot;order&quot;</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;shareToDiscover&quot;</span>: <span class="number">0</span>                 <span class="comment">// 是否分享到发现页</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><pre><code>  'skey': skey,  'User-Agent': 'WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0',  'Content-Type': 'application/json'&#125;,body: JSON.stringify(&#123;  booklistId: booklistId,  name: name,  description: description,  bookItems: bookItems,  shareToDiscover: shareToDiscover&#125;)</code></pre><p>});</p><p>return await response.json();<br>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 删除书单</span><br><span class="line"></span><br><span class="line">#### POST https://i.weread.qq.com/booklist/delete</span><br><span class="line"></span><br><span class="line">删除指定的书单。</span><br><span class="line"></span><br><span class="line">**请求参数:**</span><br><span class="line">```javascript</span><br><span class="line">&#123;</span><br><span class="line">  &quot;booklistId&quot;: &quot;booklist_123456&quot;      // 要删除的书单ID</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取书单详情">获取书单详情</h3><h4 id="GET-booklist-single">GET /booklist/single</h4><p>获取指定书单的详细信息。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;booklistId&quot;</span>: <span class="string">&quot;booklist_123456&quot;</span>,     <span class="comment">// 书单ID</span></span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>                 <span class="comment">// 同步键</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取书单列表">获取书单列表</h3><h4 id="GET-booklists">GET /booklists</h4><p>获取用户的书单列表或书架书单列表。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;vid_123456&quot;</span>,                 <span class="comment">// 用户ID</span></span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;skey_123456&quot;</span>,              </span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> <span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">## 书单内容 API</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### 添加书籍到书单</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### POST https://i.weread.qq.com/booklist/addBook</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">向现有书单添加书籍。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**请求参数:**</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>javascript</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;booklistId&quot;</span>: <span class="string">&quot;booklist_123456&quot;</span>,     <span class="comment">// 书单ID</span></span><br><span class="line">  <span class="string">&quot;bookItems&quot;</span>: [                       <span class="comment">// 要添加的书籍</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;new_book_1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;新增推荐理由&quot;</span>,</span><br><span class="line">      <span class="string">&quot;order&quot;</span>: <span class="number">3</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="从书单删除书籍">从书单删除书籍</h3><h4 id="POST-https-i-weread-qq-com-booklist-delBook">POST <a href="https://i.weread.qq.com/booklist/delBook">https://i.weread.qq.com/booklist/delBook</a></h4><p>从书单中删除指定书籍。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;booklistId&quot;</span>: <span class="string">&quot;booklist_123456&quot;</span>,     <span class="comment">// 书单ID</span></span><br><span class="line">  <span class="string">&quot;bookItems&quot;</span>: [                       <span class="comment">// 要删除的书籍</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_to_remove&quot;</span>,</span><br><span class="line">      <span class="string">&quot;order&quot;</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="书单互动-API">书单互动 API</h2><h3 id="点赞书单">点赞书单</h3><h4 id="POST-https-i-weread-qq-com-booklist-like">POST <a href="https://i.weread.qq.com/booklist/like">https://i.weread.qq.com/booklist/like</a></h4><p>对书单进行点赞或取消点赞。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;booklistId&quot;</span>: <span class="string">&quot;booklist_123456&quot;</span>,     <span class="comment">// 书单ID</span></span><br><span class="line">  <span class="string">&quot;isUnlike&quot;</span>: <span class="number">0</span>                        <span class="comment">// 0: 点赞, 1: 取消点赞</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="收藏书单">收藏书单</h3><h4 id="POST-https-i-weread-qq-com-booklist-collect">POST <a href="https://i.weread.qq.com/booklist/collect">https://i.weread.qq.com/booklist/collect</a></h4><p>收藏或取消收藏书单。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;booklistId&quot;</span>: <span class="string">&quot;booklist_123456&quot;</span>,     <span class="comment">// 书单ID</span></span><br><span class="line">  <span class="string">&quot;isCancel&quot;</span>: <span class="number">0</span>                        <span class="comment">// 0: 收藏, 1: 取消收藏</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="分享书单到发现页">分享书单到发现页</h3><h4 id="POST-https-i-weread-qq-com-booklist-shareToDiscover">POST <a href="https://i.weread.qq.com/booklist/shareToDiscover">https://i.weread.qq.com/booklist/shareToDiscover</a></h4><p>将书单分享到发现页面。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;booklistId&quot;</span>: <span class="string">&quot;booklist_123456&quot;</span>,     <span class="comment">// 书单ID</span></span><br><span class="line">  <span class="string">&quot;isCancel&quot;</span>: <span class="number">0</span>                        <span class="comment">// 0: 分享, 1: 取消分享</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="阅读书单">阅读书单</h3><h4 id="POST-https-i-weread-qq-com-booklist-read">POST <a href="https://i.weread.qq.com/booklist/read">https://i.weread.qq.com/booklist/read</a></h4><p>标记书单为已阅读。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;booklistId&quot;</span>: <span class="string">&quot;booklist_123456&quot;</span>      <span class="comment">// 书单ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="书单评论-API">书单评论 API</h2><h3 id="添加评论">添加评论</h3><h4 id="POST-https-i-weread-qq-com-booklist-comment">POST <a href="https://i.weread.qq.com/booklist/comment">https://i.weread.qq.com/booklist/comment</a></h4><p>对书单添加评论。</p><h5 id="发送评论">发送评论</h5><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;booklistId&quot;</span>: <span class="string">&quot;booklist_123456&quot;</span>,     <span class="comment">// 书单ID</span></span><br><span class="line">  <span class="string">&quot;content&quot;</span>: <span class="string">&quot;评论内容&quot;</span>                 <span class="comment">// 评论内容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;errmsg&quot;</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;commentId&quot;</span>: <span class="string">&quot;comment_123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;content&quot;</span>: <span class="string">&quot;评论内容&quot;</span>,</span><br><span class="line">    <span class="string">&quot;createAt&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">    <span class="string">&quot;updateAt&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">    <span class="string">&quot;likeCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;replyCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;user&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;user_123456&quot;</span>,</span><br><span class="line">      <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;用户昵称&quot;</span>,</span><br><span class="line">      <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;用户头像URL&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="回复评论">回复评论</h5><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;booklistId&quot;</span>: <span class="string">&quot;booklist_123456&quot;</span>,     <span class="comment">// 书单ID</span></span><br><span class="line">  <span class="string">&quot;content&quot;</span>: <span class="string">&quot;评论内容&quot;</span>,                 <span class="comment">// 评论内容</span></span><br><span class="line">  <span class="string">&quot;toUserVid&quot;</span>: <span class="string">&quot;user_123456&quot;</span>,          <span class="comment">// 被回复用户ID</span></span><br><span class="line">  <span class="string">&quot;toCommentId&quot;</span>: <span class="string">&quot;comment_123456&quot;</span>      <span class="comment">// 被回复评论ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;errmsg&quot;</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;commentId&quot;</span>: <span class="string">&quot;comment_123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;content&quot;</span>: <span class="string">&quot;评论内容&quot;</span>,</span><br><span class="line">    <span class="string">&quot;createAt&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">    <span class="string">&quot;updateAt&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">    <span class="string">&quot;likeCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;replyCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;user&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;user_123456&quot;</span>,</span><br><span class="line">      <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;用户昵称&quot;</span>,</span><br><span class="line">      <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;用户头像URL&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="删除评论">删除评论</h3><h4 id="POST-https-i-weread-qq-com-booklist-delComment">POST <a href="https://i.weread.qq.com/booklist/delComment">https://i.weread.qq.com/booklist/delComment</a></h4><p>删除指定的评论。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;commentId&quot;</span>: <span class="string">&quot;comment_123456&quot;</span>        <span class="comment">// 评论ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="点赞评论">点赞评论</h3><h4 id="POST-https-i-weread-qq-com-booklist-commentlike">POST <a href="https://i.weread.qq.com/booklist/commentlike">https://i.weread.qq.com/booklist/commentlike</a></h4><p>对评论进行点赞或取消点赞。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;commentId&quot;</span>: <span class="string">&quot;comment_123456&quot;</span>,       <span class="comment">// 评论ID</span></span><br><span class="line">  <span class="string">&quot;isUnlike&quot;</span>: <span class="number">0</span>                        <span class="comment">// 0: 点赞, 1: 取消点赞</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>书签管理 API</h1><p>微信读书书签管理相关的 API 接口，包括书签的添加、删除、更新、查询和分享功能。</p><h2 id="添加书签">添加书签</h2><h3 id="添加普通书籍书签">添加普通书籍书签</h3><h4 id="POST-https-i-weread-qq-com-book-addBookmark">POST <a href="https://i.weread.qq.com/book/addBookmark">https://i.weread.qq.com/book/addBookmark</a></h4><p>添加普通书籍的书签。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,             <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,                     <span class="comment">// 章节UID</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">1</span>,                           <span class="comment">// 书签类型</span></span><br><span class="line">  <span class="string">&quot;range&quot;</span>: <span class="string">&quot;0-100&quot;</span>,                    <span class="comment">// 选中范围</span></span><br><span class="line">  <span class="string">&quot;markText&quot;</span>: <span class="string">&quot;这是一段重要的内容&quot;</span>,     <span class="comment">// 标记文本</span></span><br><span class="line">  <span class="string">&quot;bookVersion&quot;</span>: <span class="number">1</span>,                    <span class="comment">// 书籍版本</span></span><br><span class="line">  <span class="string">&quot;style&quot;</span>: <span class="number">1</span>,                          <span class="comment">// 样式</span></span><br><span class="line">  <span class="string">&quot;colorStyle&quot;</span>: <span class="number">2</span>,                     <span class="comment">// 颜色样式</span></span><br><span class="line">  <span class="string">&quot;chapterName&quot;</span>: <span class="string">&quot;第一章&quot;</span>,             <span class="comment">// 章节名称（可选）</span></span><br><span class="line">  <span class="string">&quot;translateMode&quot;</span>: <span class="string">&quot;zh&quot;</span>,               <span class="comment">// 翻译模式（可选）</span></span><br><span class="line">  <span class="string">&quot;contextAbstract&quot;</span>: <span class="string">&quot;上下文摘要&quot;</span>      <span class="comment">// 上下文摘要（可选）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;bookmarkId&quot;</span>: <span class="string">&quot;bookmark_789012&quot;</span>,</span><br><span class="line">    <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;range&quot;</span>: <span class="string">&quot;0-100&quot;</span>,</span><br><span class="line">    <span class="string">&quot;markText&quot;</span>: <span class="string">&quot;这是一段重要的内容&quot;</span>,</span><br><span class="line">    <span class="string">&quot;style&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;colorStyle&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;createTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">    <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">    <span class="string">&quot;chapterName&quot;</span>: <span class="string">&quot;第一章&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="添加公众号书签">添加公众号书签</h3><h4 id="POST-https-i-weread-qq-com-book-addBookmark-2">POST <a href="https://i.weread.qq.com/book/addBookmark">https://i.weread.qq.com/book/addBookmark</a></h4><p>添加公众号文章的书签。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;mp_article_123&quot;</span>,          <span class="comment">// 公众号文章ID</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">1</span>,                           <span class="comment">// 书签类型</span></span><br><span class="line">  <span class="string">&quot;range&quot;</span>: <span class="string">&quot;0-100&quot;</span>,                    <span class="comment">// 选中范围</span></span><br><span class="line">  <span class="string">&quot;markText&quot;</span>: <span class="string">&quot;重要内容&quot;</span>,              <span class="comment">// 标记文本</span></span><br><span class="line">  <span class="string">&quot;style&quot;</span>: <span class="number">1</span>,                          <span class="comment">// 样式</span></span><br><span class="line">  <span class="string">&quot;refMpInfo&quot;</span>: &#123;                       <span class="comment">// 公众号信息</span></span><br><span class="line">    <span class="string">&quot;mpId&quot;</span>: <span class="string">&quot;mp_123&quot;</span>,</span><br><span class="line">    <span class="string">&quot;title&quot;</span>: <span class="string">&quot;文章标题&quot;</span>,</span><br><span class="line">    <span class="string">&quot;author&quot;</span>: <span class="string">&quot;公众号名称&quot;</span>,</span><br><span class="line">    <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://mp.weixin.qq.com/s/xxx&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="获取书签列表">获取书签列表</h2><h3 id="GET-book-bookmarklist">GET /book/bookmarklist</h3><p>获取指定书籍的书签列表。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,             <span class="comment">// 书籍ID</span></span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>                 <span class="comment">// 同步键</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;bookmarks&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;bookmarkId&quot;</span>: <span class="string">&quot;bookmark_789012&quot;</span>,</span><br><span class="line">        <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;chapterUid&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;chapterName&quot;</span>: <span class="string">&quot;第一章&quot;</span>,</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;range&quot;</span>: <span class="string">&quot;0-100&quot;</span>,</span><br><span class="line">        <span class="string">&quot;markText&quot;</span>: <span class="string">&quot;这是一段重要的内容&quot;</span>,</span><br><span class="line">        <span class="string">&quot;style&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;colorStyle&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="string">&quot;createTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">        <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">        <span class="string">&quot;contextAbstract&quot;</span>: <span class="string">&quot;上下文摘要&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">    <span class="string">&quot;hasMore&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">&quot;totalCount&quot;</span>: <span class="number">15</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="删除书签">删除书签</h2><h3 id="POST-https-i-weread-qq-com-book-removeBookmark">POST <a href="https://i.weread.qq.com/book/removeBookmark">https://i.weread.qq.com/book/removeBookmark</a></h3><p>删除书签，支持单个删除、批量删除和按书籍删除。</p><h4 id="单个删除"><strong>单个删除:</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">removeBookmark</span>(<span class="params">bookmarkId, vid, skey</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://i.weread.qq.com/book/removeBookmark&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;vid&#x27;</span>: vid.<span class="title function_">toString</span>(),</span><br><span class="line">      <span class="string">&#x27;skey&#x27;</span>: skey,</span><br><span class="line">      <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">      <span class="attr">bookmarkId</span>: bookmarkId</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="批量删除"><strong>批量删除:</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">removeBookmarks</span>(<span class="params">bookmarkIds, vid, skey</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://i.weread.qq.com/book/removeBookmark&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;vid&#x27;</span>: vid.<span class="title function_">toString</span>(),</span><br><span class="line">      <span class="string">&#x27;skey&#x27;</span>: skey,</span><br><span class="line">      <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">      <span class="attr">bookmarkIds</span>: bookmarkIds</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="按书籍删除"><strong>按书籍删除:</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">removeBookmarksByBook</span>(<span class="params">bookId, vid, skey</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://i.weread.qq.com/book/removeBookmark&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;vid&#x27;</span>: vid.<span class="title function_">toString</span>(),</span><br><span class="line">      <span class="string">&#x27;skey&#x27;</span>: skey,</span><br><span class="line">      <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">      <span class="attr">deleteWithBookId</span>: bookId</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="更新书签">更新书签</h2><h3 id="POST-https-i-weread-qq-com-book-updateBookmark">POST <a href="https://i.weread.qq.com/book/updateBookmark">https://i.weread.qq.com/book/updateBookmark</a></h3><p>更新书签的样式和颜色。</p><p><strong>更新样式和颜色:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">updateBookmarkStyle</span>(<span class="params">bookmarkId, style, colorStyle, vid, skey</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://i.weread.qq.com/book/updateBookmark&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;vid&#x27;</span>: vid.<span class="title function_">toString</span>(),</span><br><span class="line">      <span class="string">&#x27;skey&#x27;</span>: skey,</span><br><span class="line">      <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">      <span class="attr">bookmarkId</span>: bookmarkId,</span><br><span class="line">      <span class="attr">style</span>: style,</span><br><span class="line">      <span class="attr">colorStyle</span>: colorStyle</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="分享书签">分享书签</h2><h3 id="POST-https-i-weread-qq-com-bookmark-shareToDiscover">POST <a href="https://i.weread.qq.com/bookmark/shareToDiscover">https://i.weread.qq.com/bookmark/shareToDiscover</a></h3><p>将书签分享到发现页面。</p><h4 id="普通书籍书签分享"><strong>普通书籍书签分享:</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">shareBookmarkToDiscover</span>(<span class="params">bookmarkId, bookId, content, refMpInfo = <span class="literal">null</span>, hideInMyNotes = <span class="literal">false</span>, type = <span class="number">1</span>, vid, skey</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://i.weread.qq.com/bookmark/shareToDiscover&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;vid&#x27;</span>: vid.<span class="title function_">toString</span>(),</span><br><span class="line">      <span class="string">&#x27;skey&#x27;</span>: skey,</span><br><span class="line">      <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">      <span class="attr">bookmarkId</span>: bookmarkId,</span><br><span class="line">      <span class="attr">bookId</span>: bookId,</span><br><span class="line">      <span class="attr">content</span>: content,</span><br><span class="line">      <span class="attr">refMpInfo</span>: refMpInfo,</span><br><span class="line">      <span class="attr">hideInMyNotes</span>: hideInMyNotes,</span><br><span class="line">      <span class="attr">type</span>: type</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="公众号书签分享"><strong>公众号书签分享:</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">shareMpBookmarkToDiscover</span>(<span class="params">bookId, range, markText, shareMsg, backgroundColor, fontColor, fontFamily, refMpInfo, hideInMyNotes, type, vid, skey</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://i.weread.qq.com/bookmark/shareToDiscover&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;vid&#x27;</span>: vid.<span class="title function_">toString</span>(),</span><br><span class="line">      <span class="string">&#x27;skey&#x27;</span>: skey,</span><br><span class="line">      <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">      <span class="attr">bookId</span>: bookId,</span><br><span class="line">      <span class="attr">range</span>: range,</span><br><span class="line">      <span class="attr">markText</span>: markText,</span><br><span class="line">      <span class="attr">shareMsg</span>: shareMsg,</span><br><span class="line">      <span class="attr">backgroundColor</span>: backgroundColor,</span><br><span class="line">      <span class="attr">fontColor</span>: fontColor,</span><br><span class="line">      <span class="attr">fontFamily</span>: fontFamily,</span><br><span class="line">      <span class="attr">refMpInfo</span>: refMpInfo,</span><br><span class="line">      <span class="attr">hideInMyNotes</span>: hideInMyNotes,</span><br><span class="line">      <span class="attr">type</span>: type</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1>聊天、存储与反馈 API</h1><p>微信读书聊天服务、云对象存储（COS）服务和反馈服务相关的 API 接口。</p><h2 id="聊天服务-API">聊天服务 API</h2><h3 id="发送消息">发送消息</h3><h4 id="POST-https-i-weread-qq-com-chat-send">POST <a href="https://i.weread.qq.com/chat/send">https://i.weread.qq.com/chat/send</a></h4><p>发送聊天消息。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">1</span>,                           <span class="comment">// 消息类型</span></span><br><span class="line">  <span class="string">&quot;sid&quot;</span>: <span class="string">&quot;session_id_here&quot;</span>,            <span class="comment">// 会话ID</span></span><br><span class="line">  <span class="string">&quot;content&quot;</span>: &#123;                         <span class="comment">// 消息内容</span></span><br><span class="line">    <span class="string">&quot;text&quot;</span>: <span class="string">&quot;Hello, world!&quot;</span>,</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>,</span><br><span class="line">    <span class="string">&quot;extra&quot;</span>: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;clientTime&quot;</span>: <span class="number">1640995200000</span>,         <span class="comment">// 客户端时间戳</span></span><br><span class="line">  <span class="string">&quot;patchVersion&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>              <span class="comment">// 补丁版本（可选）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;messageId&quot;</span>: <span class="string">&quot;msg_123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">    <span class="string">&quot;status&quot;</span>: <span class="string">&quot;sent&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sessionId&quot;</span>: <span class="string">&quot;session_id_here&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="标记消息已读">标记消息已读</h3><h4 id="POST-https-i-weread-qq-com-chat-read">POST <a href="https://i.weread.qq.com/chat/read">https://i.weread.qq.com/chat/read</a></h4><p>标记会话中的消息为已读状态。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;sid&quot;</span>: <span class="string">&quot;session_id_here&quot;</span>,            <span class="comment">// 会话ID</span></span><br><span class="line">  <span class="string">&quot;latestMsgId&quot;</span>: <span class="string">&quot;msg_123456&quot;</span>          <span class="comment">// 最新消息ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="删除会话">删除会话</h3><h4 id="POST-https-i-weread-qq-com-chat-delete">POST <a href="https://i.weread.qq.com/chat/delete">https://i.weread.qq.com/chat/delete</a></h4><p>删除指定的聊天会话。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;sid&quot;</span>: <span class="string">&quot;session_id_here&quot;</span>             <span class="comment">// 要删除的会话ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取会话列表">获取会话列表</h3><h4 id="GET-chat-sessionlist">GET /chat/sessionlist</h4><p>获取用户的聊天会话列表。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;synckey&quot;</span>: <span class="number">123456789</span>,                <span class="comment">// 同步键</span></span><br><span class="line">  <span class="string">&quot;removedSynckey&quot;</span>: <span class="number">123456788</span>          <span class="comment">// 已删除消息同步键</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;sessions&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;sessionId&quot;</span>: <span class="string">&quot;session_123&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;AI 助手&quot;</span>,</span><br><span class="line">        <span class="string">&quot;lastMessage&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;messageId&quot;</span>: <span class="string">&quot;msg_456&quot;</span>,</span><br><span class="line">          <span class="string">&quot;content&quot;</span>: <span class="string">&quot;最后一条消息内容&quot;</span>,</span><br><span class="line">          <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;unreadCount&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="string">&quot;participants&quot;</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;userId&quot;</span>: <span class="string">&quot;user_123&quot;</span>,</span><br><span class="line">            <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;用户昵称&quot;</span>,</span><br><span class="line">            <span class="string">&quot;avatar&quot;</span>: <span class="string">&quot;头像URL&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995200000</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;synckey&quot;</span>: <span class="number">123456790</span>,</span><br><span class="line">    <span class="string">&quot;removedSynckey&quot;</span>: <span class="number">123456789</span>,</span><br><span class="line">    <span class="string">&quot;hasMore&quot;</span>: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="云对象存储-API">云对象存储 API</h2><h3 id="获取上传凭证">获取上传凭证</h3><h4 id="GET-cos-getcredential">GET /cos/getcredential</h4><p>获取云存储上传凭证。</p><h5 id="方式一：基础凭证获取"><strong>方式一：基础凭证获取</strong></h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getCredential</span>(<span class="params">mode, suffix = <span class="literal">null</span>, <span class="keyword">from</span> = <span class="literal">null</span>, vid, skey</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> params = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(&#123;</span><br><span class="line">    <span class="attr">mode</span>: mode.<span class="title function_">toString</span>()</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (suffix) params.<span class="title function_">append</span>(<span class="string">&#x27;suffix&#x27;</span>, suffix);</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">from</span>) params.<span class="title function_">append</span>(<span class="string">&#x27;from&#x27;</span>, <span class="keyword">from</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`https://i.weread.qq.com/cos/getcredential?<span class="subst">$&#123;params&#125;</span>`</span>, &#123;</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;vid&#x27;</span>: vid.<span class="title function_">toString</span>(),</span><br><span class="line">      <span class="string">&#x27;skey&#x27;</span>: skey,</span><br><span class="line">      <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="方式二：详细凭证获取"><strong>方式二：详细凭证获取</strong></h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getDetailedCredential</span>(<span class="params">name = <span class="literal">null</span>, suffix = <span class="literal">null</span>, pictype = <span class="literal">null</span>, cbid = <span class="literal">null</span>, scene = <span class="literal">null</span>, <span class="keyword">from</span> = <span class="literal">null</span>, vid, skey</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> params = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (name) params.<span class="title function_">append</span>(<span class="string">&#x27;name&#x27;</span>, name);</span><br><span class="line">  <span class="keyword">if</span> (suffix) params.<span class="title function_">append</span>(<span class="string">&#x27;suffix&#x27;</span>, suffix);</span><br><span class="line">  <span class="keyword">if</span> (pictype) params.<span class="title function_">append</span>(<span class="string">&#x27;pictype&#x27;</span>, pictype);</span><br><span class="line">  <span class="keyword">if</span> (cbid) params.<span class="title function_">append</span>(<span class="string">&#x27;cbid&#x27;</span>, cbid);</span><br><span class="line">  <span class="keyword">if</span> (scene) params.<span class="title function_">append</span>(<span class="string">&#x27;scene&#x27;</span>, scene);</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">from</span>) params.<span class="title function_">append</span>(<span class="string">&#x27;from&#x27;</span>, <span class="keyword">from</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`https://i.weread.qq.com/cos/getcredential?<span class="subst">$&#123;params&#125;</span>`</span>, &#123;</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;vid&#x27;</span>: vid.<span class="title function_">toString</span>(),</span><br><span class="line">      <span class="string">&#x27;skey&#x27;</span>: skey,</span><br><span class="line">      <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/</span><br></pre></td></tr></table></figure><h3 id="接收上传结果">接收上传结果</h3><h4 id="POST-https-i-weread-qq-com-cos-receive">POST <a href="https://i.weread.qq.com/cos/receive">https://i.weread.qq.com/cos/receive</a></h4><p>接收云存储上传完成的通知。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;md5&quot;</span>: <span class="string">&quot;file_md5_hash&quot;</span>,              <span class="comment">// 文件MD5（可选）</span></span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;filename.jpg&quot;</span>,              <span class="comment">// 文件名（可选）</span></span><br><span class="line">  <span class="string">&quot;bookId&quot;</span>: <span class="string">&quot;book_123&quot;</span>,                <span class="comment">// 关联书籍ID（可选）</span></span><br><span class="line">  <span class="string">&quot;timestamp&quot;</span>: <span class="number">1640995200</span>,             <span class="comment">// 时间戳</span></span><br><span class="line">  <span class="string">&quot;random&quot;</span>: <span class="number">12345</span>,                     <span class="comment">// 随机数</span></span><br><span class="line">  <span class="string">&quot;signature&quot;</span>: <span class="string">&quot;signature_string&quot;</span>,     <span class="comment">// 签名</span></span><br><span class="line">  <span class="string">&quot;from&quot;</span>: <span class="string">&quot;app&quot;</span>                        <span class="comment">// 来源</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="反馈服务-API">反馈服务 API</h2><h3 id="发送文本反馈">发送文本反馈</h3><h4 id="POST-https-i-weread-qq-com-cgi-bin-sync-msg">POST <a href="https://i.weread.qq.com/cgi-bin/sync_msg">https://i.weread.qq.com/cgi-bin/sync_msg</a></h4><p>发送文本类型的用户反馈。</p><p><strong>请求参数:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;screenresolution&quot;</span>: <span class="string">&quot;1920x1080&quot;</span>,     <span class="comment">// 屏幕分辨率</span></span><br><span class="line">  <span class="string">&quot;screenscale&quot;</span>: <span class="number">2.0</span>,                  <span class="comment">// 屏幕缩放比例</span></span><br><span class="line">  <span class="string">&quot;baseinfo&quot;</span>: &#123;                        <span class="comment">// 基础信息</span></span><br><span class="line">    <span class="string">&quot;appId&quot;</span>: <span class="number">123</span>,</span><br><span class="line">    <span class="string">&quot;authtype&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;sid&quot;</span>: <span class="string">&quot;session_id&quot;</span>,</span><br><span class="line">    <span class="string">&quot;vid&quot;</span>: <span class="number">456</span>,</span><br><span class="line">    <span class="string">&quot;appversion&quot;</span>: <span class="string">&quot;7.0.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;platform&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;os&quot;</span>: <span class="string">&quot;Android&quot;</span>,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;device_name&quot;</span>,</span><br><span class="line">    <span class="string">&quot;deviceid&quot;</span>: <span class="string">&quot;device_id&quot;</span>,</span><br><span class="line">    <span class="string">&quot;imei&quot;</span>: <span class="string">&quot;imei_number&quot;</span>,</span><br><span class="line">    <span class="string">&quot;clitime&quot;</span>: <span class="number">1640995200000</span>,</span><br><span class="line">    <span class="string">&quot;channelid&quot;</span>: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;seqid&quot;</span>: <span class="number">1</span>,                          <span class="comment">// 序列号</span></span><br><span class="line">  <span class="string">&quot;msgdata&quot;</span>: [                         <span class="comment">// 消息数据</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;datatype&quot;</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="string">&quot;content&quot;</span>: <span class="string">&quot;这是用户反馈内容&quot;</span>,</span><br><span class="line">      <span class="string">&quot;localtime&quot;</span>: <span class="number">1640995200000</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="发送图片反馈">发送图片反馈</h3><h4 id="POST-https-i-weread-qq-com-cgi-bin-sync-msg-2">POST <a href="https://i.weread.qq.com/cgi-bin/sync_msg">https://i.weread.qq.com/cgi-bin/sync_msg</a></h4><p>发送包含图片的用户反馈。</p><p><strong>请求参数（Multipart）:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这是一个 multipart/form-data 请求</span></span><br><span class="line"><span class="keyword">const</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;func&#x27;</span>, <span class="string">&#x27;sync_msg&#x27;</span>);</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;screenresolution&#x27;</span>, <span class="string">&#x27;1920x1080&#x27;</span>);</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;screenscale&#x27;</span>, <span class="string">&#x27;2.0&#x27;</span>);</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;seqid&#x27;</span>, <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;datatype&#x27;</span>, <span class="string">&#x27;2&#x27;</span>); <span class="comment">// 图片类型</span></span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;appId&#x27;</span>, <span class="string">&#x27;123&#x27;</span>);</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;authtype&#x27;</span>, <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;sid&#x27;</span>, <span class="string">&#x27;session_id&#x27;</span>);</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;vid&#x27;</span>, vid.<span class="title function_">toString</span>());</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;appversion&#x27;</span>, <span class="string">&#x27;7.0.0&#x27;</span>);</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;platform&#x27;</span>, <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;os&#x27;</span>, <span class="string">&#x27;Android&#x27;</span>);</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;device_name&#x27;</span>);</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;deviceid&#x27;</span>, <span class="string">&#x27;device_id&#x27;</span>);</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;imei&#x27;</span>, <span class="string">&#x27;imei_number&#x27;</span>);</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;clitime&#x27;</span>, <span class="title class_">Date</span>.<span class="title function_">now</span>().<span class="title function_">toString</span>());</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;channelid&#x27;</span>, <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;localtime&#x27;</span>, <span class="title class_">Date</span>.<span class="title function_">now</span>().<span class="title function_">toString</span>());</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;nickname&#x27;</span>, <span class="string">&#x27;user_nickname&#x27;</span>);</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, imageFile); <span class="comment">// 图片文件</span></span><br></pre></td></tr></table></figure><h3 id="上传日志文件">上传日志文件</h3><h4 id="POST-https-i-weread-qq-com-cgi-bin-log-upload">POST <a href="https://i.weread.qq.com/cgi-bin/log_upload">https://i.weread.qq.com/cgi-bin/log_upload</a></h4><p>上传应用日志文件用于问题诊断。</p><p><strong>前端实现:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> params = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(&#123;</span><br><span class="line">  <span class="attr">inputc</span>: <span class="string">&#x27;multipart&#x27;</span>,</span><br><span class="line">  <span class="attr">func</span>: <span class="string">&#x27;log_upload&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">entries</span>(deviceInfo).<span class="title function_">forEach</span>(<span class="function">(<span class="params">[key, value]</span>) =&gt;</span> &#123;</span><br><span class="line">  formData.<span class="title function_">append</span>(key, value.<span class="title function_">toString</span>());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;logfile&#x27;</span>, logFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`https://feedback.weread.qq.com/cgi-bin/log_upload?<span class="subst">$&#123;params&#125;</span>`</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;vid&#x27;</span>: vid.<span class="title function_">toString</span>(),</span><br><span class="line">    <span class="string">&#x27;skey&#x27;</span>: skey,</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">body</span>: formData</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="对话框管理">对话框管理</h2><h3 id="获取对话框信息">获取对话框信息</h3><h4 id="GET-dialog-detail">GET /dialog/detail</h4><p>获取指定对话框的详细信息。</p><p><strong>请求参数 (Query):</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;dialogId&quot;</span>: <span class="string">&quot;dialog_id_here&quot;</span>         <span class="comment">// 对话框ID</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>请求头:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;vid&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  <span class="string">&quot;skey&quot;</span>: <span class="string">&quot;your_skey&quot;</span>,</span><br><span class="line">  <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;WeRead/7.0.0 WRBrand/huawei Dalvik/2.1.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>响应示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;errcode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;dialogId&quot;</span>: <span class="string">&quot;dialog_123&quot;</span>,</span><br><span class="line">    <span class="string">&quot;title&quot;</span>: <span class="string">&quot;对话框标题&quot;</span>,</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;feedback&quot;</span>,</span><br><span class="line">    <span class="string">&quot;status&quot;</span>: <span class="string">&quot;active&quot;</span>,</span><br><span class="line">    <span class="string">&quot;createTime&quot;</span>: <span class="number">1640995200</span>,</span><br><span class="line">    <span class="string">&quot;updateTime&quot;</span>: <span class="number">1640995300</span>,</span><br><span class="line">    <span class="string">&quot;participants&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;user_123&quot;</span>,</span><br><span class="line">        <span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;用户名&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;userVid&quot;</span>: <span class="string">&quot;admin_456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;role&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;客服&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;lastMessage&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;messageId&quot;</span>: <span class="string">&quot;msg_789&quot;</span>,</span><br><span class="line">      <span class="string">&quot;content&quot;</span>: <span class="string">&quot;最后一条消息&quot;</span>,</span><br><span class="line">      <span class="string">&quot;sendTime&quot;</span>: <span class="number">1640995300</span>,</span><br><span class="line">      <span class="string">&quot;sender&quot;</span>: <span class="string">&quot;user_123&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;note flat&quot;&gt;&lt;p&gt;CC BY-NC-SA 4.0&lt;/p&gt;
&lt;/div&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;li</summary>
      
    
    
    
    <category term="微信读书客户端逆向" scheme="https://yumi1.top/categories/%E5%BE%AE%E4%BF%A1%E8%AF%BB%E4%B9%A6%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%80%86%E5%90%91/"/>
    
    
    <category term="漏洞分析" scheme="https://yumi1.top/tags/%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>微信读书客户端 逆向分析</title>
    <link href="https://yumi1.top/weread-security-analysis-1/"/>
    <id>https://yumi1.top/weread-security-analysis-1/</id>
    <published>2025-08-01T12:26:00.000Z</published>
    <updated>2025-08-04T12:45:04.134Z</updated>
    
    <content type="html"><![CDATA[<h2 id="🔍-执行摘要">🔍 执行摘要</h2><p>基于对wx读书Android客户端的逆向工程分析,仅供学习交流<br>微信读书客户端无加固,使用<a href="https://github.com/skylot/jadx">jadx</a>反编译</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/weread-security-analysis-1/2025-08-01-18-27-04.png" alt="开启unicode字符转译"/></div><span class="image-caption">开启unicode字符转译</span></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/weread-security-analysis-1/2025-08-01-18-28-57.png" alt="开启反混淆"/></div><span class="image-caption">开启反混淆</span></div><p>反混淆后的包已经相对较好阅读,使用jadx导出为gradle项目,使用idea/android studio方便阅读</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/weread-security-analysis-1/2025-08-01-19-57-07.png"/></div></div><h2 id="安全风险分析">安全风险分析</h2><h3 id="会话管理安全缺陷">会话管理安全缺陷</h3><h4 id="可预测的Session-ID生成">可预测的Session ID生成</h4><ul><li><code>sources/com/tencent/weread/model/domain/Session.java</code></li><li><code>sources/moai/storage/Domain.java</code></li><li><code>sources/com/tencent/weread/WeReadFragmentActivity.java</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Session.java - 会话ID生成逻辑</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Session</span> <span class="keyword">extends</span> <span class="title class_">Domain</span> <span class="keyword">implements</span> <span class="title class_">Parcelable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">generateId</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Domain.hashId(str);  <span class="comment">// 调用Domain层哈希方法</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">generateId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Domain.hashId(<span class="built_in">this</span>.sid);  <span class="comment">// 基于sid生成会话ID</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Domain.java - 哈希算法实现</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">BKDRHashPositiveInt</span><span class="params">(String str)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">iCharAt</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i10</span> <span class="operator">=</span> <span class="number">0</span>; i10 &lt; str.length(); i10++) &#123;</span><br><span class="line">        iCharAt = (iCharAt * WeReadFragmentActivity.ARG_GOTO_SWITCH_LOGIN) + str.charAt(i10);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Integer.MAX_VALUE &amp; iCharAt;  <span class="comment">// 确保返回正整数</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">hashId</span><span class="params">(Object... objArr)</span> &#123;</span><br><span class="line">    <span class="type">Joiner</span> <span class="variable">joiner2</span> <span class="operator">=</span> joiner;</span><br><span class="line">    <span class="keyword">return</span> BKDRHashPositiveInt(joiner2.b(Arrays.asList(objArr)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// WeReadFragmentActivity.java - 哈希乘数常量</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">ARG_GOTO_SWITCH_LOGIN</span> <span class="operator">=</span> <span class="number">131</span>;  <span class="comment">// BKDR哈希乘数</span></span><br></pre></td></tr></table></figure><p><strong>风险评估</strong>：</p><table><thead><tr><th>风险类别</th><th>严重程度</th><th>描述</th></tr></thead><tbody><tr><td>算法可预测性</td><td>高危</td><td>使用确定性BKDR哈希，相同输入产生相同输出</td></tr><tr><td>参数暴露</td><td>高危</td><td>哈希乘数(131)硬编码在客户端代码中</td></tr><tr><td>会话劫持</td><td>高危</td><td>攻击者可计算任意用户的Session ID</td></tr></tbody></table><p><strong>攻击向量</strong>：</p><ol><li><strong>会话ID预测</strong>：通过已知sid值计算对应的Session ID</li><li><strong>用户冒充</strong>：利用计算出的Session ID冒充其他用户</li><li><strong>数据操作</strong>：修改或删除他人的聊天记录和会话数据</li></ol><h3 id="财务数据安全风险">财务数据安全风险</h3><h4 id="敏感财务信息明文存储">敏感财务信息明文存储</h4><ul><li><code>sources/com/tencent/weread/model/domain/Account.java</code></li><li><code>app/src/main/java/com/tencent/weread/model/domain/Account.java</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Account.java - 用户账户数据模型</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> <span class="keyword">extends</span> <span class="title class_">Domain</span> <span class="keyword">implements</span> <span class="title class_">Parcelable</span> &#123;</span><br><span class="line">    <span class="comment">// 财务相关敏感字段</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> balance;           <span class="comment">// 账户余额</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> expiryBalance;     <span class="comment">// 过期余额</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> giftBalance;       <span class="comment">// 礼品余额</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> peerBalance;       <span class="comment">// 对等余额</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> peerGiftBalance;   <span class="comment">// 对等礼品余额</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 认证相关敏感字段</span></span><br><span class="line">    <span class="keyword">private</span> String accessToken;       <span class="comment">// 访问令牌</span></span><br><span class="line">    <span class="keyword">private</span> String refreshToken;      <span class="comment">// 刷新令牌</span></span><br><span class="line">    <span class="keyword">private</span> String wxAccessToken;     <span class="comment">// 微信访问令牌</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 数据库表结构定义</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        LinkedHashMap&lt;String, String&gt; linkedHashMap = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;&gt;();</span><br><span class="line">        COLUMNS = linkedHashMap;</span><br><span class="line">        linkedHashMap.put(<span class="string">&quot;accessToken&quot;</span>, <span class="string">&quot;varchar&quot;</span>);      </span><br><span class="line">        linkedHashMap.put(<span class="string">&quot;refreshToken&quot;</span>, <span class="string">&quot;varchar&quot;</span>);     </span><br><span class="line">        linkedHashMap.put(<span class="string">&quot;balance&quot;</span>, <span class="string">&quot;double&quot;</span>);           </span><br><span class="line">        linkedHashMap.put(<span class="string">&quot;peerBalance&quot;</span>, <span class="string">&quot;double&quot;</span>);       </span><br><span class="line">        linkedHashMap.put(<span class="string">&quot;giftBalance&quot;</span>, <span class="string">&quot;double&quot;</span>);       </span><br><span class="line">        linkedHashMap.put(<span class="string">&quot;expiryBalance&quot;</span>, <span class="string">&quot;double&quot;</span>);     </span><br><span class="line">        linkedHashMap.put(<span class="string">&quot;wxAccessToken&quot;</span>, <span class="string">&quot;varchar&quot;</span>);    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>安全风险评估</strong>：</p><table><thead><tr><th>数据类型</th><th>存储方式</th><th>风险等级</th><th>潜在影响</th></tr></thead><tbody><tr><td>账户余额</td><td>明文存储</td><td>严重</td><td>财务数据泄露，可被任意修改</td></tr><tr><td>访问令牌</td><td>明文存储</td><td>严重</td><td>账户完全接管</td></tr><tr><td>刷新令牌</td><td>明文存储</td><td>严重</td><td>长期账户控制</td></tr><tr><td>微信令牌</td><td>明文存储</td><td>高危</td><td>跨平台账户风险</td></tr></tbody></table><p><strong>数据暴露风险</strong>：</p><ol><li><strong>直接数据库访问</strong>：Root设备可直接读取SQLite文件</li><li><strong>应用间数据泄露</strong>：恶意应用可能获取数据库访问权限</li><li><strong>备份数据泄露</strong>：系统备份可能包含明文敏感数据</li></ol><h3 id="认证凭证泄露风险">认证凭证泄露风险</h3><h4 id="敏感信息记录到日志">敏感信息记录到日志</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AccountManager.java</span></span><br><span class="line">ELog.INSTANCE.log(<span class="number">3</span>, TAG, <span class="string">&quot;getLoginAccount from db:&quot;</span> + </span><br><span class="line">    account.getVid() + <span class="string">&#x27;,&#x27;</span> + </span><br><span class="line">    account.getAccessToken() + <span class="string">&#x27;,&#x27;</span> + </span><br><span class="line">    account.getRefreshToken() + <span class="string">&#x27;,&#x27;</span> + </span><br><span class="line">    account.getFirstLogin());</span><br></pre></td></tr></table></figure><p><strong>安全隐患</strong>：</p><ul><li>访问令牌和刷新令牌被明文记录到日志文件</li><li>日志文件可本地随意读取 易导致令牌泄露</li></ul><h3 id="硬编码加密密钥风险">硬编码加密密钥风险</h3><h4 id="AES密钥硬编码在客户端">AES密钥硬编码在客户端</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AESEncrypt.java - 加密工具类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AESEncrypt</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ALGORITHM</span> <span class="operator">=</span> <span class="string">&quot;AES&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TRANSFORMATION</span> <span class="operator">=</span> <span class="string">&quot;AES/CTR/NoPadding&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 硬编码的AES密钥 - 严重安全缺陷</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SDK_APP_SECRET</span> <span class="operator">=</span> <span class="string">&quot;isvrbeT7qUywVEZ1Ia0/aUVA/TcFaeV0wC8qFLc8rg4=&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 默认加密方法直接使用硬编码密钥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">encrypt</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> encrypt(SDK_APP_SECRET, str);  <span class="comment">// 所有用户共享同一密钥</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e10) &#123;</span><br><span class="line">            e10.getLocalizedMessage();</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 解密方法同样使用硬编码密钥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">decrypt</span><span class="params">(String str, String str2)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 使用硬编码密钥进行解密操作</span></span><br><span class="line">        <span class="type">SecretKeySpec</span> <span class="variable">secretKeySpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecretKeySpec</span>(a.b(str), ALGORITHM);</span><br><span class="line">        <span class="comment">// ... 解密逻辑</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>该硬编码密钥在以下位置被引用：</p><ul><li><code>sources/ga/b.java</code> - 数据解密操作</li><li><code>app/src/main/java/ga/C9415b.java</code> - 加密标签处理</li></ul><p><strong>安全风险评估</strong>：</p><table><thead><tr><th>风险维度</th><th>严重程度</th><th>具体描述</th></tr></thead><tbody><tr><td>密钥暴露</td><td>严重</td><td>AES-256密钥完全暴露在客户端代码中</td></tr><tr><td>全局影响</td><td>严重</td><td>所有用户共享同一加密密钥</td></tr><tr><td>密钥轮换</td><td>严重</td><td>无法进行密钥更新和轮换</td></tr><tr><td>数据保护</td><td>严重</td><td>加密形同虚设，任何人都可解密数据</td></tr></tbody></table><p><strong>攻击场景</strong>：</p><ul><li>静态分析攻击：直接从APK中提取密钥</li><li>数据库攻击：解密本地存储的加密数据</li><li>中间人攻击：解密网络传输中的加密数据（如果使用了该密钥）</li><li>批量数据泄露：处理大量用户的加密数据</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 攻击者可以直接使用硬编码密钥解密数据</span><br><span class="line">String hardcodedKey = &quot;isvrbeT7qUywVEZ1Ia0/aUVA/TcFaeV0wC8qFLc8rg4=&quot;;</span><br><span class="line">String decryptedData = AESEncrypt.decrypt(hardcodedKey, encryptedUserData);</span><br></pre></td></tr></table></figure><h3 id="支付系统绕过漏洞">支付系统绕过漏洞</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// PaySQLiteHelper.java - 支付相关SQL操作</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">sqlUpdateChapterPaid</span> <span class="operator">=</span> </span><br><span class="line">    <span class="string">&quot;UPDATE Chapter SET paid=1 WHERE bookId=? AND chapterUid IN $inClause$&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">sqlUpdateAllChapterPaid</span> <span class="operator">=</span> </span><br><span class="line">    <span class="string">&quot;UPDATE Chapter SET paid=1 WHERE bookId=?&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">sqlSetBookChapterPaid</span> <span class="operator">=</span> </span><br><span class="line">    <span class="string">&quot;UPDATE Book SET intergrateAttr = intergrateAttr | 128 WHERE bookId=?&quot;</span>;</span><br></pre></td></tr></table></figure><p>小问题 只是本地状态 仍有多个api进行付费状态同步 (当然全hook了也行)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@POST(&quot;/book/chapterInfos&quot;)</span></span><br><span class="line">Observable&lt;ChapterInfoList&gt; <span class="title function_">GetChapterInfos</span><span class="params">(</span></span><br><span class="line"><span class="params">    <span class="meta">@JSONField(&quot;bookIds&quot;)</span> Iterable&lt;String&gt; bookIds,</span></span><br><span class="line"><span class="params">    <span class="meta">@JSONField(&quot;synckeys&quot;)</span> Iterable&lt;Long&gt; syncKeys,</span></span><br><span class="line"><span class="params">    <span class="meta">@JSONField(&quot;paidCount&quot;)</span> Iterable&lt;Integer&gt; paidCounts,  // 付费数量验证</span></span><br><span class="line"><span class="params">    <span class="meta">@JSONField(&quot;price&quot;)</span> Iterable&lt;Double&gt; prices,           // 价格验证</span></span><br><span class="line"><span class="params">    <span class="meta">@JSONField(&quot;maxfreeIdx&quot;)</span> Iterable&lt;Integer&gt; iterable,</span></span><br><span class="line"><span class="params">    <span class="meta">@JSONField(&quot;teenmode&quot;)</span> <span class="type">int</span> i10</span></span><br><span class="line"><span class="params">)</span>;</span><br></pre></td></tr></table></figure><p>章节付费检查</p><ul><li>TTSBookPlayer.java:376</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TTSBookPlayer.java - 阅读时检查付费状态</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">z12</span> <span class="operator">=</span> !BookHelper.isLimitedFree(bookInfoFromDB) &amp;&amp; </span><br><span class="line">              BookHelper.isChapterCostMoney(bookInfoFromDB, </span><br><span class="line">                  chapter.getChapterIdx(), </span><br><span class="line">                  chapter.getPrice(), </span><br><span class="line">                  chapter.getPaid());  <span class="comment">// 综合检查付费状态</span></span><br></pre></td></tr></table></figure><p>会员状态验证</p><ul><li>ComicFragment.java:2560-2562</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ComicFragment.java - 会员和付费状态综合验证</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">zIsNeedPayChapter</span> <span class="operator">=</span> <span class="built_in">this</span>.mReaderCursor.isNeedPayChapter(getMBook(), chapter.getChapterUid());</span><br><span class="line">WRLog.log(<span class="number">3</span>, getTAG(), <span class="string">&quot;checkReaderTips membership:&quot;</span> + isMemberShipValid() + <span class="string">&quot; paid:&quot;</span> + zIsNeedPayChapter);</span><br><span class="line"><span class="keyword">if</span> (!(isMemberShipValid() &amp;&amp; zIsNeedPayChapter &amp;&amp; !AccountManager.Companion.getInstance().getMemberCardSummary().isFreeUsing()))</span><br></pre></td></tr></table></figure><hr><p><em>本文仅用于技术研究和安全教育目的，请勿用于恶意攻击</em></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;🔍-执行摘要&quot;&gt;🔍 执行摘要&lt;/h2&gt;
&lt;p&gt;基于对wx读书Android客户端的逆向工程分析,仅供学习交流&lt;br&gt;
微信读书客户端无加固,使用&lt;a href=&quot;https://github.com/skylot/jadx&quot;&gt;jadx&lt;/a&gt;反编译&lt;/p&gt;
&lt;</summary>
      
    
    
    
    <category term="微信读书客户端逆向" scheme="https://yumi1.top/categories/%E5%BE%AE%E4%BF%A1%E8%AF%BB%E4%B9%A6%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%80%86%E5%90%91/"/>
    
    
    <category term="漏洞分析" scheme="https://yumi1.top/tags/%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序实战：WebView上悬浮操作组件</title>
    <link href="https://yumi1.top/unicloud-7/"/>
    <id>https://yumi1.top/unicloud-7/</id>
    <published>2025-03-16T19:48:04.000Z</published>
    <updated>2025-08-04T12:47:21.430Z</updated>
    
    <content type="html"><![CDATA[<h1>微信小程序WebView上的悬浮组件实现</h1><p>在微信小程序开发中，经常会遇到需要加载H5页面的场景，特别是需要展示公众号文章内容时。但由于微信的WebView组件的限制，实现在WebView上方显示任何原生组件都是<font color="red">不允许的</font>。本文将分享如何在小程序WebView上实现悬浮点赞、评论等交互组件的解决方案。</p><h1>问题背景</h1><p>在我的小程序项目中，需要展示大量公众号文章。然而，我们希望用户在跳转阅读公众号文章的同时，能够使用小程序自带的点赞、评论等功能，而不必打开退出公众号文章去进行。这就要求在WebView上方叠加显示悬浮操作按钮。</p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html">官方文档</a>指出，web-view是一个特殊的原生组件，默认会覆盖其它所有组件。这意味着普通的小程序组件无法显示在WebView上方。基本使用方式如下：</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/unicloud-7/2025-03-17-04-02-53.png"/></div></div><h1>解决方案</h1><p>为了实现在WebView上方显示悬浮操作按钮，我们需要使用微信小程序的cover-view和cover-image组件。</p><h2 id="使用cover-view覆盖">使用cover-view覆盖</h2><p>cover-view和cover-image。我们可以利用这两个组件在WebView上方实现悬浮按钮。<br>实现代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">web-view</span> <span class="attr">:src</span>=<span class="string">&quot;url&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">web-view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">v-if</span>=<span class="string">&quot;showActions&quot;</span> <span class="attr">class</span>=<span class="string">&quot;float-actions&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">class</span>=<span class="string">&quot;action-btn view&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cover-image</span> <span class="attr">class</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/icons/view.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">cover-image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">class</span>=<span class="string">&quot;count&quot;</span>&gt;</span>&#123;&#123;views || 0&#125;&#125;<span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">class</span>=<span class="string">&quot;action-btn like&quot;</span> @<span class="attr">tap</span>=<span class="string">&quot;handleLike&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cover-image</span> <span class="attr">class</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;isLiked ? &#x27;/static/icons/liked.png&#x27; : &#x27;/static/icons/like.png&#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">cover-image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">class</span>=<span class="string">&quot;count&quot;</span>&gt;</span>&#123;&#123;likes || 0&#125;&#125;<span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">class</span>=<span class="string">&quot;action-btn comment&quot;</span> @<span class="attr">tap</span>=<span class="string">&quot;handleComment&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cover-image</span> <span class="attr">class</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/icons/comment.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">cover-image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">class</span>=<span class="string">&quot;count&quot;</span>&gt;</span>&#123;&#123;totalComments || 0&#125;&#125;<span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p><font color="red">注意：<br>使用cover-view时，可能pc测试时看不到效果,需要真机测试,而且部分机型可能存在问题</font></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.float-actions</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">999999</span>; <span class="comment">/* 尽可能高的层级 */</span></span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.action-btn</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.6</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">2</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.count</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接下来实现功能逻辑就行 就不进行演示了</p><h2 id="总结">总结</h2><p>通过使用cover-view和cover-image组件，在WebView上方实现悬浮操作按钮, 但是并不确定此方法是微信官方所支持的(或许能在网站上插广告?) ,同时此方法在pc上测试时看不到效果,需要真机测试,而且部分机型可能存在问题</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;微信小程序WebView上的悬浮组件实现&lt;/h1&gt;
&lt;p&gt;在微信小程序开发中，经常会遇到需要加载H5页面的场景，特别是需要展示公众号文章内容时。但由于微信的WebView组件的限制，实现在WebView上方显示任何原生组件都是&lt;font color=&quot;red&quot;&gt;不允许的&lt;</summary>
      
    
    
    
    <category term="技术学习" scheme="https://yumi1.top/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="微信小程序" scheme="https://yumi1.top/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    <category term="uniapp" scheme="https://yumi1.top/tags/uniapp/"/>
    
    <category term="unicloud" scheme="https://yumi1.top/tags/unicloud/"/>
    
    <category term="VUE" scheme="https://yumi1.top/tags/VUE/"/>
    
    <category term="WebView" scheme="https://yumi1.top/tags/WebView/"/>
    
    <category term="悬浮操作组件" scheme="https://yumi1.top/tags/%E6%82%AC%E6%B5%AE%E6%93%8D%E4%BD%9C%E7%BB%84%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序图片优化实战：缓存+压缩</title>
    <link href="https://yumi1.top/unicloud-6/"/>
    <id>https://yumi1.top/unicloud-6/</id>
    <published>2025-03-16T19:36:44.000Z</published>
    <updated>2025-08-04T12:47:43.042Z</updated>
    
    <content type="html"><![CDATA[<h1>问题描述</h1><p>在项目开发后期，我们发现系统存在大量未经压缩的图片资源，导致：</p><ol><li><strong>CDN流量消耗过大</strong>：每次用户浏览页面都会重新请求原图，流量费用激增</li><li><strong>页面加载缓慢</strong>：特别是在网络不佳的情况下，用户体验极差</li><li><strong>反复请求相同图片</strong>：即使是同一张图片（如用户头像），每次展示都会发起新请求<br>由于项目已经接近完工，系统中已有巨量图片资源，重新批量下载并上传压缩后的图片工作量巨大且风险高(主要是怕图片链接改)，需要一个无需修改现有图片URL的解决方案。</li></ol><h1>问题原因</h1><ol><li><strong>前期忽视图片优化</strong>：开发初期未重视图片资源优化</li><li><strong>多端兼容性考虑不足</strong>：未针对微信小程序环境的特点进行适配</li><li><strong>缺乏自动化处理机制</strong>：没有在图片使用环节自动进行压缩和缓存</li></ol><h1>解决方案</h1><p>我们实现了一套完整的图片缓存和压缩解决方案，核心思路是：</p><ol><li><strong>客户端图片压缩</strong>：根据不同场景（列表/详情/头像）智能压缩</li><li><strong>本地缓存机制</strong>：首次加载后缓存到本地，再次请求直接使用缓存</li><li><strong>自动化处理流程</strong>：拦截图片请求，无需手动修改现有代码</li></ol><h1>实现架构</h1><p>该方案包含以下核心组件：</p><ol><li><strong>图片缓存管理器</strong>（<code>utils/imageCache.js</code>）：<br>自动缓存远程图片到本地文件系统<br>设置缓存过期时间（默认7天）<br>限制缓存数量（默认200张）<br>提供同步/异步查询方法</li><li><strong>缓存图片组件</strong>（<code>components/CachedImage.vue</code>）：<br>采用<code>monkey patch</code>覆盖原生&lt;image&gt;标签</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils/globalImageCompression.js 中的关键代码</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">registerGlobalImageCompression</span>(<span class="params">app</span>) &#123;</span><br><span class="line">  <span class="comment">// 获取原始Image组件</span></span><br><span class="line">  <span class="keyword">const</span> originalImage = app.<span class="title function_">component</span>(<span class="string">&#x27;image&#x27;</span>) || app.<span class="title function_">component</span>(<span class="string">&#x27;u-image&#x27;</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (!originalImage) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;无法找到原始Image组件，全局图片压缩可能无法正常工作&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 重新定义Image组件，添加URL处理逻辑 - 这就是Monkey Patch!</span></span><br><span class="line">  app.<span class="title function_">component</span>(<span class="string">&#x27;image&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params">ctx</span>) &#123;</span><br><span class="line">      <span class="comment">// 处理src属性</span></span><br><span class="line">      <span class="keyword">if</span> (ctx.<span class="property">src</span> &amp;&amp; <span class="keyword">typeof</span> ctx.<span class="property">src</span> === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">        ctx.<span class="property">src</span> = <span class="title function_">smartCompressImage</span>(ctx.<span class="property">src</span>, ctx.<span class="property">$el</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// 调用原始Image组件渲染</span></span><br><span class="line">      <span class="keyword">return</span> originalImage.<span class="title function_">render</span>(ctx)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;全局图片压缩已启用&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>自动处理缓存逻辑<br>支持加载状态、错误处理<br>提供强制刷新功能<br>3. <strong>全局压缩工具</strong>（<code>utils/globalImageCompression.js</code>）：<br>集成缓存机制<br>智能识别图片类型（头像/封面/详情图等）<br>根据实际显示尺寸动态调整压缩参数</p><h1>代码实现</h1><h2 id="图片缓存管理器">图片缓存管理器</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils/imageCache.js</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ImageCacheManager</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 缓存配置</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cacheConfig</span> = &#123;</span><br><span class="line">      <span class="attr">expireTime</span>: <span class="number">7</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>, <span class="comment">// 7天</span></span><br><span class="line">      <span class="attr">maxCacheCount</span>: <span class="number">200</span>,</span><br><span class="line">      <span class="attr">cacheKeyPrefix</span>: <span class="string">&#x27;IMG_CACHE_&#x27;</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cacheInfo</span> = &#123;&#125;;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">init</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 从缓存获取图片路径</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getImagePath</span>(<span class="params">url</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!url) <span class="keyword">return</span> url;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 本地图片不处理</span></span><br><span class="line">    <span class="keyword">if</span> (url.<span class="title function_">startsWith</span>(<span class="string">&#x27;/&#x27;</span>) || url.<span class="title function_">startsWith</span>(<span class="string">&#x27;data:&#x27;</span>)) &#123;</span><br><span class="line">      <span class="keyword">return</span> url;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// 尝试从缓存获取</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">cacheImage</span>(url);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;获取图片路径失败:&#x27;</span>, e);</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">compressImageUrl</span>(url);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 缓存图片到本地</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">cacheImage</span>(<span class="params">url</span>) &#123;</span><br><span class="line">    <span class="comment">// 检查缓存</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">isCached</span>(url)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">getCachePath</span>(url);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 下载并缓存</span></span><br><span class="line">    <span class="keyword">const</span> downloadRes = <span class="keyword">await</span> uni.<span class="title function_">downloadFile</span>(&#123; url &#125;);</span><br><span class="line">    <span class="keyword">const</span> saveRes = <span class="keyword">await</span> uni.<span class="title function_">saveFile</span>(&#123; <span class="attr">tempFilePath</span>: downloadRes.<span class="property">tempFilePath</span> &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 更新缓存信息</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">updateCacheInfo</span>(url, saveRes.<span class="property">savedFilePath</span>);</span><br><span class="line">    <span class="keyword">return</span> saveRes.<span class="property">savedFilePath</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出全局方法</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getCachedImagePath</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> imageCacheManager.<span class="title function_">getImagePath</span>(url);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="缓存图片组件">缓存图片组件</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- components/CachedImage.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">image</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">:src</span>=<span class="string">&quot;imageSrc&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">:mode</span>=<span class="string">&quot;mode&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">:lazy-load</span>=<span class="string">&quot;lazyLoad&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">:class</span>=<span class="string">&quot;customClass&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">error</span>=<span class="string">&quot;handleError&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">load</span>=<span class="string">&quot;handleLoad&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; getCachedImagePath, getCachedImagePathSync &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/imageCache.js&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;CachedImage&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">src</span>: &#123; <span class="attr">type</span>: <span class="title class_">String</span>, <span class="attr">default</span>: <span class="string">&#x27;&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">mode</span>: &#123; <span class="attr">type</span>: <span class="title class_">String</span>, <span class="attr">default</span>: <span class="string">&#x27;aspectFill&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">lazyLoad</span>: &#123; <span class="attr">type</span>: <span class="title class_">Boolean</span>, <span class="attr">default</span>: <span class="literal">true</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">forceRefresh</span>: &#123; <span class="attr">type</span>: <span class="title class_">Boolean</span>, <span class="attr">default</span>: <span class="literal">false</span> &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">imageSrc</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">isLoading</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">hasError</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">src</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handler</span>(<span class="params">newSrc</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">loadImage</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">immediate</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">forceRefresh</span>(<span class="params">val</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (val) <span class="variable language_">this</span>.<span class="title function_">loadImage</span>(<span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">async</span> <span class="title function_">loadImage</span>(<span class="params">force = <span class="literal">false</span></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">src</span>) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 本地图片直接使用</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">src</span>.<span class="title function_">startsWith</span>(<span class="string">&#x27;/&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">imageSrc</span> = <span class="variable language_">this</span>.<span class="property">src</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">isLoading</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 尝试使用同步方法获取缓存</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> syncPath = <span class="title function_">getCachedImagePathSync</span>(<span class="variable language_">this</span>.<span class="property">src</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (syncPath !== <span class="variable language_">this</span>.<span class="property">src</span> &amp;&amp; !force) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">imageSrc</span> = syncPath;</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 异步加载和缓存</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">imageSrc</span> = <span class="keyword">await</span> <span class="title function_">getCachedImagePath</span>(<span class="variable language_">this</span>.<span class="property">src</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">catch</span> (e) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">imageSrc</span> = <span class="variable language_">this</span>.<span class="property">src</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">finally</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">isLoading</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>全局压缩拦截器</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils/globalImageCompression.js</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">smartCompressImage</span>(<span class="params">url, element</span>) &#123;</span><br><span class="line">  <span class="comment">// 首先检查缓存</span></span><br><span class="line">  <span class="keyword">const</span> cachedPath = <span class="title function_">getCachedImagePathSync</span>(url);</span><br><span class="line">  <span class="keyword">if</span> (cachedPath &amp;&amp; cachedPath !== url) &#123;</span><br><span class="line">    <span class="keyword">return</span> cachedPath;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 获取元素尺寸</span></span><br><span class="line">  <span class="keyword">const</span> &#123; width, height &#125; = <span class="title function_">getElementSize</span>(element);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 根据不同场景选择压缩策略</span></span><br><span class="line">  <span class="keyword">const</span> classList = (element.<span class="title function_">getAttribute</span>(<span class="string">&#x27;class&#x27;</span>) || <span class="string">&#x27;&#x27;</span>).<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 头像图片</span></span><br><span class="line">  <span class="keyword">if</span> (classList.<span class="title function_">includes</span>(<span class="string">&#x27;avatar&#x27;</span>) || url.<span class="title function_">includes</span>(<span class="string">&#x27;avatar&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">getThumbnailUrl</span>(url, width || <span class="number">150</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 列表缩略图</span></span><br><span class="line">  <span class="keyword">if</span> (classList.<span class="title function_">includes</span>(<span class="string">&#x27;thumbnail&#x27;</span>) || classList.<span class="title function_">includes</span>(<span class="string">&#x27;cover&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">getThumbnailUrl</span>(url, width || <span class="number">200</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 详情大图</span></span><br><span class="line">  <span class="keyword">if</span> (classList.<span class="title function_">includes</span>(<span class="string">&#x27;detail-image&#x27;</span>) || classList.<span class="title function_">includes</span>(<span class="string">&#x27;banner&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">getResponsiveImageUrl</span>(url, <span class="number">95</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 默认压缩</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">getCompressedImageUrl</span>(url, &#123; <span class="attr">quality</span>: <span class="number">80</span> &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册全局拦截器</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">registerGlobalImageCompression</span>(<span class="params">app</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> originalImage = app.<span class="title function_">component</span>(<span class="string">&#x27;image&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  app.<span class="title function_">component</span>(<span class="string">&#x27;image&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params">ctx</span>) &#123;</span><br><span class="line">      <span class="comment">// 处理src属性</span></span><br><span class="line">      <span class="keyword">if</span> (ctx.<span class="property">src</span> &amp;&amp; <span class="keyword">typeof</span> ctx.<span class="property">src</span> === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">        ctx.<span class="property">src</span> = <span class="title function_">smartCompressImage</span>(ctx.<span class="property">src</span>, ctx.<span class="property">$el</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">return</span> originalImage.<span class="title function_">render</span>(ctx);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>优化效果</h1><p>经过实际应用，该方案带来的优化效果显著：<br>1.CDN流量减少约70%：重复图片不再重复请求<br>2.页面加载速度提升约60%：缓存图片秒开<br>3.离线浏览体验改善：已浏览过的图片在离线情况下仍可查看<br>4.零侵入性：现有代码几乎无需修改</p><h1>待优化改进有</h1><ol><li>图片页面预加载</li><li>缓存控制清理</li><li>性能监控</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;问题描述&lt;/h1&gt;
&lt;p&gt;在项目开发后期，我们发现系统存在大量未经压缩的图片资源，导致：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;CDN流量消耗过大&lt;/strong&gt;：每次用户浏览页面都会重新请求原图，流量费用激增&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;页面加载缓慢&lt;/st</summary>
      
    
    
    
    <category term="技术学习" scheme="https://yumi1.top/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="微信小程序" scheme="https://yumi1.top/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    <category term="uniapp" scheme="https://yumi1.top/tags/uniapp/"/>
    
    <category term="unicloud" scheme="https://yumi1.top/tags/unicloud/"/>
    
    <category term="VUE" scheme="https://yumi1.top/tags/VUE/"/>
    
    <category term="图片缓存" scheme="https://yumi1.top/tags/%E5%9B%BE%E7%89%87%E7%BC%93%E5%AD%98/"/>
    
    <category term="图片压缩" scheme="https://yumi1.top/tags/%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序 自定义tabbar switchTab报错 can not switch to xxx page</title>
    <link href="https://yumi1.top/unicloud-5/"/>
    <id>https://yumi1.top/unicloud-5/</id>
    <published>2025-03-04T18:20:09.000Z</published>
    <updated>2025-08-04T12:47:57.580Z</updated>
    
    <content type="html"><![CDATA[<h1>问题描述</h1><p>微信小程序 自定义tabbar switchTab报错 can not switch to xxx page</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Error: MiniProgramError</span><br><span class="line">&#123;&quot;errMsg&quot;:&quot;switchTab:fail can not switch to no-tabBar page&quot;&#125;</span><br><span class="line">    at Object.errorReport (WAServiceMainContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1)</span><br><span class="line">    at Function.thirdErrorReport (WAServiceMainContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1)</span><br><span class="line">    at Object.thirdErrorReport (WAServiceMainContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1)</span><br><span class="line">    at i (WASubContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1)</span><br><span class="line">    at Object.cb (WASubContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1)</span><br><span class="line">    at V._privEmit (WASubContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1)</span><br><span class="line">    at V.emit (WASubContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1)</span><br><span class="line">    at WASubContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1</span><br><span class="line">    at n (WASubContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1)</span><br><span class="line">    at Fe (WASubContext.js?t=wechat&amp;s=1741106172521&amp;v=3.6.5:1)(env: Windows,mp,1.06.2412050; lib: 3.6.5)</span><br></pre></td></tr></table></figure><h1>问题原因</h1><p>在pages.json中注释掉了原生tabBar配置， 但在页面中仍然使用了switchTab方法</p><h1>解决方案</h1><ol><li><p>恢复<code>pages.json</code>中的tabBar配置</p></li><li><p>设为隐藏状态<code>&quot;custom&quot;: true</code></p></li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;tabBar&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;custom&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> </span><br><span class="line">    <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#999999&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;selectedColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#B92525&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#ffffff&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;borderStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;height&quot;</span><span class="punctuation">:</span> <span class="string">&quot;120rpx&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>在页面中使用<code>uni.switchTab</code>方法</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uni.switchTab(&#123;</span><br><span class="line">  url: &#x27;/pages/index/index&#x27;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1>水一篇 下播</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;问题描述&lt;/h1&gt;
&lt;p&gt;微信小程序 自定义tabbar switchTab报错 can not switch to xxx page&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter</summary>
      
    
    
    
    <category term="技术学习" scheme="https://yumi1.top/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="微信小程序" scheme="https://yumi1.top/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    <category term="uniapp" scheme="https://yumi1.top/tags/uniapp/"/>
    
    <category term="unicloud" scheme="https://yumi1.top/tags/unicloud/"/>
    
    <category term="VUE" scheme="https://yumi1.top/tags/VUE/"/>
    
  </entry>
  
  <entry>
    <title>今天,2025.02.09,最大的油猴脚本网站greasyfork已被gfw屏蔽</title>
    <link href="https://yumi1.top/greasyfork/"/>
    <id>https://yumi1.top/greasyfork/</id>
    <published>2025-02-08T16:09:08.000Z</published>
    <updated>2025-02-08T16:38:26.028Z</updated>
    
    <content type="html"><![CDATA[<p>日前,最大的油猴脚本网站greasyfork已被gfw屏蔽,全国无法访问.<br>无法访问</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/greasyfork/2025-02-09-00-12-21.png"/></div></div><p>全国无法解析</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/greasyfork/2025-02-09-00-11-09.png"/></div></div><p>正常dns解析</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/greasyfork/2025-02-09-00-32-45.png"/></div></div><p>被污染的dns</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/greasyfork/2025-02-09-00-32-57.png"/></div></div><blockquote><p>greasyfork 是一个下载油猴脚本的网站<br>油猴脚本是一段代码，它们能够<strong>优化您的网页浏览体验</strong>。安装之后，有些脚本能为网站添加新的功能，有些能使网站的界面更加易用，有些则能隐藏网站上烦人的部分内容。在 Greasy Fork 上的用户脚本都是由用户编写并向全世界发表的，您可以免费安装，轻松体验。</p></blockquote><h2 id="相关链接">相关链接</h2><ul><li><a href="https://yumi1.top/windows-optimize-1">Windows 浏览器优化指南</a> 获取更多油猴脚本资源</li><li><a href="http://yumi1.top/vpn">科学上网如何使用</a> 绕过 GFW 访问</li><li><a href="https://greasyfork.org">Greasy Fork 官网</a></li><li><a href="https://www.tampermonkey.net/">Tampermonkey 官网</a></li><li><a href="https://greasyfork.org/zh-CN/help/installing-user-scripts">如何安装油猴脚本</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;日前,最大的油猴脚本网站greasyfork已被gfw屏蔽,全国无法访问.&lt;br&gt;
无法访问&lt;/p&gt;
&lt;div class=&quot;img-wrap&quot;&gt;&lt;div class=&quot;img-bg&quot;&gt;&lt;img class=&quot;img&quot; src=&quot;/image/../image/greasy</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>微信小程序提审小技巧</title>
    <link href="https://yumi1.top/unicloud-4/"/>
    <id>https://yumi1.top/unicloud-4/</id>
    <published>2025-01-31T16:53:09.000Z</published>
    <updated>2025-08-04T12:48:03.528Z</updated>
    
    <content type="html"><![CDATA[<h2 id="写在最前">写在最前</h2><p>审核失败: 原因存在运营内容不完整问题，违反<a href="https://developers.weixin.qq.com/miniprogram/product/reject.html#_3-3-%E5%8F%AF%E7%94%A8%E6%80%A7%E5%92%8C%E5%AE%8C%E6%95%B4%E6%80%A7">《微信小程序平台运营规范常见拒绝情形3.3》</a></p><p>这里我通过云函数对部分未完成的项目进行隐藏,审核过后再进行显示:<br>即: 审核时,数据库对未完成的项目进行隐藏(设为false),审核过后,再进行显示(设为true) 通过云函数进行判断</p><h2 id="示例">示例</h2><h3 id="数据库">数据库</h3><p>在数据库中创建 <code>project</code> 集合，示例数据结构如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;项目名称&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;项目描述&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;isShow&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 控制显示状态</span></span><br><span class="line"><span class="attr">&quot;isAudit&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span> <span class="comment">// 是否处于审核状态</span></span><br><span class="line"><span class="attr">&quot;createTime&quot;</span><span class="punctuation">:</span> <span class="number">1643673600000</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="云函数">云函数</h3><p>创建 <code>getProjects</code> 云函数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> db = uniCloud.<span class="title function_">database</span>()</span><br><span class="line"><span class="keyword">const</span> collection = db.<span class="title function_">collection</span>(<span class="string">&#x27;project&#x27;</span>)</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">main</span> = <span class="keyword">async</span> (event, context) =&gt; &#123;</span><br><span class="line"><span class="comment">// 获取环境信息</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="variable constant_">PLATFORM</span> &#125; = context</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">let</span> query = &#123;&#125;</span><br><span class="line"><span class="comment">// 如果是微信小程序环境</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable constant_">PLATFORM</span> === <span class="string">&#x27;mp-weixin&#x27;</span>) &#123;</span><br><span class="line"><span class="comment">// 获取当前是否为体验版或审核版本</span></span><br><span class="line"><span class="keyword">const</span> &#123; version &#125; = <span class="keyword">await</span> uniCloud.<span class="title function_">getWXContext</span>()</span><br><span class="line"><span class="comment">// 审核版本时只显示 isShow 为 true 的项目</span></span><br><span class="line"><span class="keyword">if</span> (version === <span class="string">&#x27;trial&#x27;</span> || version === <span class="string">&#x27;audit&#x27;</span>) &#123;</span><br><span class="line">query.<span class="property">isShow</span> = <span class="literal">true</span></span><br><span class="line"><span class="comment">// 更新审核状态</span></span><br><span class="line"><span class="keyword">await</span> collection.<span class="title function_">where</span>(&#123;</span><br><span class="line"><span class="attr">isAudit</span>: <span class="literal">false</span></span><br><span class="line">&#125;).<span class="title function_">update</span>(&#123;</span><br><span class="line"><span class="attr">isAudit</span>: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> &#123; data &#125; = <span class="keyword">await</span> collection</span><br><span class="line">.<span class="title function_">where</span>(query)</span><br><span class="line">.<span class="title function_">orderBy</span>(<span class="string">&#x27;createTime&#x27;</span>, <span class="string">&#x27;desc&#x27;</span>)</span><br><span class="line">.<span class="title function_">get</span>()</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line"><span class="attr">code</span>: <span class="number">0</span>,</span><br><span class="line"><span class="attr">msg</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">data</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line"><span class="attr">code</span>: -<span class="number">1</span>,</span><br><span class="line"><span class="attr">msg</span>: e.<span class="property">message</span>,</span><br><span class="line"><span class="attr">data</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="前端">前端</h3><p>在页面中调用云函数：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">v-for</span>=<span class="string">&quot;item in projectList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span> <span class="attr">class</span>=<span class="string">&quot;project-item&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;project-name&quot;</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;project-desc&quot;</span>&gt;</span>&#123;&#123;item.description&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">projectList</span>: []</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onLoad</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="title function_">getProjectList</span>()</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">async</span> <span class="title function_">getProjectList</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> &#123; result &#125; = <span class="keyword">await</span> uniCloud.<span class="title function_">callFunction</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">name</span>: <span class="string">&#x27;getProjects&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">if</span> (result.<span class="property">code</span> === <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">projectList</span> = result.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">uni.<span class="title function_">showToast</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">title</span>: result.<span class="property">msg</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125; <span class="keyword">catch</span>(e) &#123;</span></span><br><span class="line"><span class="language-javascript">uni.<span class="title function_">showToast</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">title</span>: <span class="string">&#x27;获取项目列表失败&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">padding</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.project-item</span> &#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">margin-bottom</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css"><span class="attribute">padding</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css"><span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css"><span class="attribute">border-radius</span>: <span class="number">8</span>rpx;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.project-name</span> &#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">font-size</span>: <span class="number">32</span>rpx;</span></span><br><span class="line"><span class="language-css"><span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.project-desc</span> &#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span></span><br><span class="line"><span class="language-css"><span class="attribute">color</span>: <span class="number">#666</span>;</span></span><br><span class="line"><span class="language-css"><span class="attribute">margin-top</span>: <span class="number">10</span>rpx;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="实现原理">实现原理</h2><ol><li>在数据库中通过 <code>isShow</code> 字段控制项目是否显示</li><li>通过云函数获取当前环境，判断是否为审核版本</li><li>在审核版本中只返回 <code>isShow</code> 为 true 的项目</li><li>审核通过后，可以通过管理后台或云函数修改 <code>isShow</code> 状态</li></ol><h2 id="注意事项">注意事项</h2><p>可能不符合微信小程序审核规范, 后续被发现违规可能会被官方下线小程序, 但是无奈于小程序的xx审核,所有版块在上线的时候都强制需要有内容</p>]]></content>
    
    
    <summary type="html">审核失败:原因存在运营内容不完整问题，违反《微信小程序平台运营规范常见拒绝情形3.3》</summary>
    
    
    
    <category term="技术学习" scheme="https://yumi1.top/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="微信小程序" scheme="https://yumi1.top/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    <category term="uniapp" scheme="https://yumi1.top/tags/uniapp/"/>
    
    <category term="unicloud" scheme="https://yumi1.top/tags/unicloud/"/>
    
    <category term="VUE" scheme="https://yumi1.top/tags/VUE/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序开发笔记-3  VUE uniapp unicloud</title>
    <link href="https://yumi1.top/unicloud-3/"/>
    <id>https://yumi1.top/unicloud-3/</id>
    <published>2025-01-31T16:45:51.000Z</published>
    <updated>2025-08-04T12:48:07.613Z</updated>
    
    <content type="html"><![CDATA[<h2 id="写在最前">写在最前</h2><p>小型项目中 使用VUE 和 uniapp 开发 使用uniCloud作为云开发服务 技术栈为VUE3+uniapp3+uniCloud,第一个项目纯手撸没用模板框架,应该考虑tdesign的</p><h2 id="一、组件通信">一、组件通信</h2><ol><li>父子组件通信</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">child-component</span> <span class="attr">:msg</span>=<span class="string">&quot;message&quot;</span> @<span class="attr">onCallback</span>=<span class="string">&quot;handleCallback&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 子组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">msg</span>: <span class="title class_">String</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">sendToParent</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;onCallback&#x27;</span>, <span class="string">&#x27;来自子组件的数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="二、状态管理">二、状态管理</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">userInfo</span>: <span class="literal">null</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">SET_USER_INFO</span>(<span class="params">state, userInfo</span>) &#123;</span><br><span class="line">      state.<span class="property">userInfo</span> = userInfo</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">getUserInfo</span>(<span class="params">&#123; commit &#125;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> userInfo = <span class="keyword">await</span> uniCloud.<span class="title function_">callFunction</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;getUserInfo&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="title function_">commit</span>(<span class="string">&#x27;SET_USER_INFO&#x27;</span>, userInfo)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="三、常用工具函数">三、常用工具函数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils/index.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">formatDate</span> = (<span class="params">date, fmt = <span class="string">&#x27;yyyy-MM-dd hh:mm:ss&#x27;</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 日期格式化</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">showToast</span> = (<span class="params">title, duration = <span class="number">2000</span></span>) =&gt; &#123;</span><br><span class="line">  uni.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">    title,</span><br><span class="line">    duration,</span><br><span class="line">    <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">navigateTo</span> = (<span class="params">url</span>) =&gt; &#123;</span><br><span class="line">  uni.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">    url</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="四、全局化富文本编辑器">四、全局化富文本编辑器</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;editor-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 非全屏状态的编辑器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;editor-box&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;!editorFullscreen&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">editor</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;editor&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:id</span>=<span class="string">&quot;editorId&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:placeholder</span>=<span class="string">&quot;placeholder&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">ready</span>=<span class="string">&quot;onEditorReady&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">input</span>=<span class="string">&quot;onEditorInput&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">statuschange</span>=<span class="string">&quot;onStatusChange&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span><span class="tag">&lt;/<span class="name">editor</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;fullscreen-btn&quot;</span> @<span class="attr">tap</span>=<span class="string">&quot;enterFullscreen&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe623;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;btn-text&quot;</span>&gt;</span>全屏编辑<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 全屏状态的编辑器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">v-if</span>=<span class="string">&quot;editorFullscreen&quot;</span> <span class="attr">class</span>=<span class="string">&quot;editor-fullscreen&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;editor-toolbar&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.bold &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;bold&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe61f;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>加粗<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.italic &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;italic&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe61e;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>斜体<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.underline &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;underline&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe61d;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>下划线<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.header === 1 &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;header&#x27;, 1)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe623;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>H1<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.header === 3 &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;header&#x27;, 3)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe622;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>H3<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.align === &#x27;left&#x27; &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;justify&#x27;, &#x27;left&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe648;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>左对齐<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.align === &#x27;center&#x27; &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;justify&#x27;, &#x27;center&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe643;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>居中<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.align === &#x27;right&#x27; &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;justify&#x27;, &#x27;right&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe644;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>右对齐<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.list === &#x27;ordered&#x27; &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;list&#x27;, &#x27;ordered&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe65b;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>有序列表<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;&#123; active: formats.list === &#x27;bullet&#x27; &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;execCommand(&#x27;list&#x27;, &#x27;bullet&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe647;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>无序列表<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;tool-item&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">tap</span>=<span class="string">&quot;insertImage&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe63e;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tool-tip&quot;</span>&gt;</span>插入图片<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">editor</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;editor&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:id</span>=<span class="string">&quot;fullscreenEditorId&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:placeholder</span>=<span class="string">&quot;placeholder&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">ready</span>=<span class="string">&quot;onEditorReady&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">input</span>=<span class="string">&quot;onEditorInput&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">statuschange</span>=<span class="string">&quot;onStatusChange&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span><span class="tag">&lt;/<span class="name">editor</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;return-btn&quot;</span> @<span class="attr">tap</span>=<span class="string">&quot;exitFullscreen&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe64f;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;btn-text&quot;</span>&gt;</span>退出全屏<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;RichEditor&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">modelValue</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">default</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">placeholder</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">default</span>: <span class="string">&#x27;请输入内容&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">editorId</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">default</span>: <span class="string">&#x27;editor&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">fullscreenEditorId</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">default</span>: <span class="string">&#x27;editor-fullscreen&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">editorCtx</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">editorFullscreenCtx</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">editorFullscreen</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">formats</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">currentContent</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">modelValue</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handler</span>(<span class="params">newVal</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;编辑器modelValue变化:&#x27;</span>, newVal)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (newVal !== <span class="variable language_">this</span>.<span class="property">currentContent</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">currentContent</span> = newVal</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;更新编辑器内容为:&#x27;</span>, <span class="variable language_">this</span>.<span class="property">currentContent</span>)</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">updateEditorContent</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">immediate</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">updateEditorContent</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> ctx = <span class="variable language_">this</span>.<span class="property">editorFullscreen</span> ? <span class="variable language_">this</span>.<span class="property">editorFullscreenCtx</span> : <span class="variable language_">this</span>.<span class="property">editorCtx</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;准备更新编辑器内容，当前上下文:&#x27;</span>, ctx ? <span class="string">&#x27;存在&#x27;</span> : <span class="string">&#x27;不存在&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;当前编辑器状态:&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">isFullscreen</span>: <span class="variable language_">this</span>.<span class="property">editorFullscreen</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">hasFullscreenCtx</span>: !!<span class="variable language_">this</span>.<span class="property">editorFullscreenCtx</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">hasNormalCtx</span>: !!<span class="variable language_">this</span>.<span class="property">editorCtx</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">content</span>: <span class="variable language_">this</span>.<span class="property">currentContent</span></span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (ctx &amp;&amp; <span class="variable language_">this</span>.<span class="property">currentContent</span> !== <span class="literal">undefined</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;开始设置编辑器内容:&#x27;</span>, <span class="variable language_">this</span>.<span class="property">currentContent</span>)</span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="title function_">setContents</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">html</span>: <span class="variable language_">this</span>.<span class="property">currentContent</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">success</span>: <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;设置编辑器内容成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;设置编辑器内容失败:&#x27;</span>, err)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 失败后重试一次</span></span></span><br><span class="line"><span class="language-javascript">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;重试设置编辑器内容&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">              ctx.<span class="title function_">setContents</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">html</span>: <span class="variable language_">this</span>.<span class="property">currentContent</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">success</span>: <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;重试设置编辑器内容成功&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;重试设置编辑器内容失败:&#x27;</span>, err)</span></span><br><span class="line"><span class="language-javascript">              &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;, <span class="number">300</span>)</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;无法更新编辑器内容：上下文不存在或内容未定义&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 编辑器准备就绪</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">onEditorReady</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 添加延时，确保编辑器DOM已经渲染完成</span></span></span><br><span class="line"><span class="language-javascript">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">initEditor</span>()</span></span><br><span class="line"><span class="language-javascript">      &#125;, <span class="number">100</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 初始化编辑器</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">initEditor</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> query = uni.<span class="title function_">createSelectorQuery</span>().<span class="title function_">in</span>(<span class="variable language_">this</span>)</span></span><br><span class="line"><span class="language-javascript">        query.<span class="title function_">select</span>(<span class="string">`#<span class="subst">$&#123;<span class="variable language_">this</span>.editorFullscreen ? <span class="variable language_">this</span>.fullscreenEditorId : <span class="variable language_">this</span>.editorId&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">context</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;获取编辑器上下文:&#x27;</span>, res)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (!res || !res.<span class="property">context</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;编辑器上下文不存在，将在300ms后重试&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">              <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">initEditor</span>()</span></span><br><span class="line"><span class="language-javascript">              &#125;, <span class="number">300</span>)</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">editorFullscreen</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">editorFullscreenCtx</span> = res.<span class="property">context</span></span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;设置全屏编辑器上下文成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">editorCtx</span> = res.<span class="property">context</span></span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;设置普通编辑器上下文成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 初始化完成后设置内容</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">updateEditorContent</span>()</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">exec</span>()</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">catch</span> (e) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;初始化编辑器失败:&#x27;</span>, e)</span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">initEditor</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;, <span class="number">300</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 编辑器输入</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">onEditorInput</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!e || !e.<span class="property">detail</span>) <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> html = e.<span class="property">detail</span>.<span class="property">html</span> || <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;编辑器输入:&#x27;</span>, html)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">currentContent</span> = html</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;update:modelValue&#x27;</span>, html)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 编辑器状态变化</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">onStatusChange</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!e || !e.<span class="property">detail</span>) <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">formats</span> = e.<span class="property">detail</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 执行编辑器命令</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">execCommand</span>(<span class="params">name, value = <span class="literal">null</span></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> ctx = <span class="variable language_">this</span>.<span class="property">editorFullscreen</span> ? <span class="variable language_">this</span>.<span class="property">editorFullscreenCtx</span> : <span class="variable language_">this</span>.<span class="property">editorCtx</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!ctx) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;编辑器未准备好&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">switch</span>(name) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">case</span> <span class="string">&#x27;header&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">format</span>(<span class="string">&#x27;header&#x27;</span>, value)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">break</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">case</span> <span class="string">&#x27;justify&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">format</span>(<span class="string">&#x27;align&#x27;</span>, value)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">break</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">case</span> <span class="string">&#x27;list&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">format</span>(<span class="string">&#x27;list&#x27;</span>, value)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">break</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">default</span>:</span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">format</span>(name, value)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">catch</span> (e) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;执行编辑器命令失败:&#x27;</span>, e)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 插入图片</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">insertImage</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> ctx = <span class="variable language_">this</span>.<span class="property">editorFullscreen</span> ? <span class="variable language_">this</span>.<span class="property">editorFullscreenCtx</span> : <span class="variable language_">this</span>.<span class="property">editorCtx</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!ctx) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;编辑器未准备好&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      uni.<span class="title function_">chooseImage</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">count</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          uni.<span class="title function_">showLoading</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">title</span>: <span class="string">&#x27;上传中...&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">          </span></span><br><span class="line"><span class="language-javascript">          uniCloud.<span class="title function_">uploadFile</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">filePath</span>: res.<span class="property">tempFilePaths</span>[<span class="number">0</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">cloudPath</span>: <span class="string">`content/<span class="subst">$&#123;<span class="built_in">Date</span>.now()&#125;</span>-<span class="subst">$&#123;<span class="built_in">Math</span>.random().toString(<span class="number">36</span>).slice(-<span class="number">6</span>)&#125;</span>.<span class="subst">$&#123;res.tempFilePaths[<span class="number">0</span>].split(<span class="string">&#x27;.&#x27;</span>).pop()&#125;</span>`</span></span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">insertImage</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">src</span>: result.<span class="property">fileID</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">success</span>: <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                uni.<span class="title function_">hideLoading</span>()</span></span><br><span class="line"><span class="language-javascript">              &#125;,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;插入图片失败:&#x27;</span>, err)</span></span><br><span class="line"><span class="language-javascript">                uni.<span class="title function_">hideLoading</span>()</span></span><br><span class="line"><span class="language-javascript">                uni.<span class="title function_">showToast</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">title</span>: <span class="string">&#x27;插入图片失败&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;上传图片失败:&#x27;</span>, err)</span></span><br><span class="line"><span class="language-javascript">            uni.<span class="title function_">hideLoading</span>()</span></span><br><span class="line"><span class="language-javascript">            uni.<span class="title function_">showToast</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">title</span>: <span class="string">&#x27;上传图片失败&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 进入全屏</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">enterFullscreen</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;进入全屏，当前内容:&#x27;</span>, <span class="variable language_">this</span>.<span class="property">currentContent</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">editorFullscreen</span> = <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 延时等待全屏编辑器渲染完成后设置内容</span></span></span><br><span class="line"><span class="language-javascript">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> query = uni.<span class="title function_">createSelectorQuery</span>().<span class="title function_">in</span>(<span class="variable language_">this</span>)</span></span><br><span class="line"><span class="language-javascript">        query.<span class="title function_">select</span>(<span class="string">`#<span class="subst">$&#123;<span class="variable language_">this</span>.fullscreenEditorId&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">context</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;获取全屏编辑器上下文:&#x27;</span>, res)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (!res || !res.<span class="property">context</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;全屏编辑器上下文不存在，将在300ms后重试&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">              <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">enterFullscreen</span>()</span></span><br><span class="line"><span class="language-javascript">              &#125;, <span class="number">300</span>)</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">editorFullscreenCtx</span> = res.<span class="property">context</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;设置全屏编辑器上下文成功，准备设置内容:&#x27;</span>, <span class="variable language_">this</span>.<span class="property">currentContent</span>)</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 直接设置内容</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">currentContent</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">editorFullscreenCtx</span>.<span class="title function_">setContents</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">html</span>: <span class="variable language_">this</span>.<span class="property">currentContent</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">success</span>: <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;全屏模式：设置内容成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;全屏模式：设置内容失败&#x27;</span>, err)</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">// 失败后重试一次</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;重试设置全屏编辑器内容&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">editorFullscreenCtx</span>.<span class="title function_">setContents</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">html</span>: <span class="variable language_">this</span>.<span class="property">currentContent</span>,</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">success</span>: <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;重试设置全屏编辑器内容成功&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;重试设置全屏编辑器内容失败:&#x27;</span>, err)</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                  &#125;, <span class="number">300</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">              &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">exec</span>()</span></span><br><span class="line"><span class="language-javascript">      &#125;, <span class="number">300</span>)  <span class="comment">// 增加延时，确保DOM完全渲染</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 退出全屏</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">exitFullscreen</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;退出全屏，当前内容:&#x27;</span>, <span class="variable language_">this</span>.<span class="property">currentContent</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">editorFullscreen</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 延时等待主编辑器渲染完成后设置内容</span></span></span><br><span class="line"><span class="language-javascript">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> query = uni.<span class="title function_">createSelectorQuery</span>().<span class="title function_">in</span>(<span class="variable language_">this</span>)</span></span><br><span class="line"><span class="language-javascript">        query.<span class="title function_">select</span>(<span class="string">`#<span class="subst">$&#123;<span class="variable language_">this</span>.editorId&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">context</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;获取普通编辑器上下文:&#x27;</span>, res)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (!res || !res.<span class="property">context</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;普通编辑器上下文不存在，将在300ms后重试&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">              <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">exitFullscreen</span>()</span></span><br><span class="line"><span class="language-javascript">              &#125;, <span class="number">300</span>)</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">editorCtx</span> = res.<span class="property">context</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;设置普通编辑器上下文成功，准备设置内容:&#x27;</span>, <span class="variable language_">this</span>.<span class="property">currentContent</span>)</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 直接设置内容</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">currentContent</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">editorCtx</span>.<span class="title function_">setContents</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">html</span>: <span class="variable language_">this</span>.<span class="property">currentContent</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">success</span>: <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;退出全屏：设置内容成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;退出全屏：设置内容失败&#x27;</span>, err)</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">// 失败后重试一次</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;重试设置普通编辑器内容&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">editorCtx</span>.<span class="title function_">setContents</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">html</span>: <span class="variable language_">this</span>.<span class="property">currentContent</span>,</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">success</span>: <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;重试设置普通编辑器内容成功&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;重试设置普通编辑器内容失败:&#x27;</span>, err)</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                  &#125;, <span class="number">300</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">              &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">exec</span>()</span></span><br><span class="line"><span class="language-javascript">      &#125;, <span class="number">300</span>)  <span class="comment">// 增加延时，确保DOM完全渲染</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.editor-container</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: <span class="number">1</span>rpx solid <span class="number">#eee</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">8</span>rpx;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">  </span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.editor-box</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.editor</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">min-height</span>: <span class="number">400</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">30</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">word-wrap</span>: break-word;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">word-break</span>: break-all;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">white-space</span>: pre-wrap;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">line-height</span>: <span class="number">1.8</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">      </span></span><br><span class="line"><span class="language-css">      :<span class="built_in">deep</span>() &#123;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">max-width</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">height</span>: auto <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.fullscreen-btn</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">right</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">bottom</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>);</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border-radius</span>: <span class="number">8</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">12</span>rpx <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">gap</span>: <span class="number">8</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">z-index</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">      </span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.iconfont</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      </span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.btn-text</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      </span></span><br><span class="line"><span class="language-css">      &amp;<span class="selector-pseudo">:active</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.editor-fullscreen</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">z-index</span>: <span class="number">9999</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">  </span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.editor-toolbar</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: auto;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">min-height</span>: <span class="number">160</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#f8f8f8</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-bottom</span>: <span class="number">1</span>rpx solid <span class="number">#eee</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex-direction</span>: row;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex-wrap</span>: wrap;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">gap</span>: <span class="number">16</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">z-index</span>: <span class="number">10000</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.tool-item</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">80</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">80</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border-radius</span>: <span class="number">8</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2</span>rpx <span class="number">6</span>rpx <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.05</span>);</span></span><br><span class="line"><span class="language-css">      <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">z-index</span>: <span class="number">10001</span>;</span></span><br><span class="line"><span class="language-css">      </span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.iconfont</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">32</span>rpx;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#666</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin-bottom</span>: <span class="number">4</span>rpx;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      </span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.tool-tip</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#999</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      </span></span><br><span class="line"><span class="language-css">      &amp;<span class="selector-class">.active</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: <span class="number">#e6f7ff</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#2979ff</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2</span>rpx <span class="number">6</span>rpx <span class="built_in">rgba</span>(<span class="number">41</span>, <span class="number">121</span>, <span class="number">255</span>, <span class="number">0.2</span>);</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.iconfont</span> &#123;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">color</span>: <span class="number">#2979ff</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.tool-tip</span> &#123;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">color</span>: <span class="number">#2979ff</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  </span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.editor</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">80</span>rpx <span class="number">30</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-top</span>: <span class="number">160</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">100vh</span> - <span class="number">160</span>rpx);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">1.8</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">word-wrap</span>: break-word;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">word-break</span>: break-all;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">white-space</span>: pre-wrap;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">overflow-y</span>: auto;</span></span><br><span class="line"><span class="language-css">    -webkit-<span class="attribute">overflow</span>-scrolling: touch;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    :<span class="built_in">deep</span>() &#123;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">max-width</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: auto <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      </span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  </span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.return-btn</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">left</span>: <span class="number">30</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">bottom</span>: <span class="number">30</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">z-index</span>: <span class="number">10002</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">100</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.iconfont</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">40</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.btn-text</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-top</span>: <span class="number">4</span>rpx;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span> </span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;写在最前&quot;&gt;写在最前&lt;/h2&gt;
&lt;p&gt;小型项目中 使用VUE 和 uniapp 开发 使用uniCloud作为云开发服务 技术栈为VUE3+uniapp3+uniCloud,第一个项目纯手撸没用模板框架,应该考虑tdesign的&lt;/p&gt;
&lt;h2 id=&quot;一、组件通</summary>
      
    
    
    
    <category term="技术学习" scheme="https://yumi1.top/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="微信小程序" scheme="https://yumi1.top/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    <category term="uniapp" scheme="https://yumi1.top/tags/uniapp/"/>
    
    <category term="unicloud" scheme="https://yumi1.top/tags/unicloud/"/>
    
    <category term="VUE" scheme="https://yumi1.top/tags/VUE/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序开发笔记-2 基础语法</title>
    <link href="https://yumi1.top/unicloud-2/"/>
    <id>https://yumi1.top/unicloud-2/</id>
    <published>2024-11-20T18:38:40.000Z</published>
    <updated>2025-08-04T12:48:11.912Z</updated>
    
    <content type="html"><![CDATA[<h2 id="写在最前">写在最前</h2><div class="tip "><p>本文总结微信小程序开发中的基础语法知识</p></div><h2 id="一、文件结构">一、文件结构</h2><h3 id="1-主要文件类型">1. 主要文件类型</h3><ul><li>.wxml: 页面结构文件(类似HTML)</li><li>.wxss: 样式文件(类似CSS)</li><li>.js: 逻辑文件</li><li>.json: 配置文件</li></ul><h3 id="2-项目结构">2. 项目结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">├── pages // 页面文件夹</span><br><span class="line">│ ├── index // 首页</span><br><span class="line">│ └── logs // 日志页</span><br><span class="line">├── utils // 工具函数</span><br><span class="line">├── app.js // 全局逻辑</span><br><span class="line">├── app.json // 全局配置</span><br><span class="line">└── app.wxss // 全局样式</span><br></pre></td></tr></table></figure><h2 id="二、WXML语法">二、WXML语法</h2><h3 id="1-数据绑定">1. 数据绑定</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; object.key &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; array[0] &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-列表渲染">2. 列表渲染</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;array&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;unique&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123;item&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-条件渲染">3. 条件渲染</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;condition&#125;&#125;&quot;</span>&gt;</span>True<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:elif</span>=<span class="string">&quot;&#123;&#123;condition&#125;&#125;&quot;</span>&gt;</span>Else if<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>&gt;</span>Else<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-事件绑定">4. 事件绑定</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;handleClick&quot;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">bindinput</span>=<span class="string">&quot;handleInput&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5-模板使用">5. 模板使用</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 定义模板 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">name</span>=<span class="string">&quot;msgItem&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;index&#125;&#125;: &#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 使用模板 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">&quot;msgItem&quot;</span> <span class="attr">data</span>=<span class="string">&quot;&#123;&#123;...item&#125;&#125;&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h3 id="6-引用">6. 引用</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">src</span>=<span class="string">&quot;template.wxml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">src</span>=<span class="string">&quot;header.wxml&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h2 id="三、WXSS样式">三、WXSS样式</h2><h3 id="1-尺寸单位">1. 尺寸单位</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">750</span>rpx; <span class="comment">/* rpx是响应式单位,750rpx = 屏幕宽度 */</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>; <span class="comment">/* vh表示视口高度 */</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">28</span>rpx; <span class="comment">/* 一般字体大小 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-选择器">2. 选择器</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.class-name</span> &#123;&#125; <span class="comment">/* 类选择器 */</span></span><br><span class="line"><span class="selector-id">#id-name</span> &#123;&#125; <span class="comment">/* ID选择器 */</span></span><br><span class="line">view &#123;&#125; <span class="comment">/* 标签选择器 */</span></span><br><span class="line"><span class="selector-class">.parent</span> <span class="selector-class">.child</span> &#123;&#125; <span class="comment">/* 后代选择器 */</span></span><br></pre></td></tr></table></figure><h3 id="3-样式导入">3. 样式导入</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;common.wxss&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="4-常用布局">4. 常用布局</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* flex布局 */</span></span><br><span class="line"><span class="selector-class">.flex-container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* grid布局 */</span></span><br><span class="line"><span class="selector-class">.grid-container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(<span class="number">3</span>, <span class="number">1</span>fr);</span><br><span class="line">  <span class="attribute">gap</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="四、JS逻辑">四、JS逻辑</h2><h3 id="1-页面配置">1. 页面配置</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;Hello&#x27;</span>,</span><br><span class="line">    <span class="attr">list</span>: []</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 生命周期函数</span></span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 页面加载时执行</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">onShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 页面显示时执行</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 自定义函数</span></span><br><span class="line">  <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;World&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="2-数据操作">2. 数据操作</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修改数据</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">  <span class="string">&#x27;message&#x27;</span>: <span class="string">&#x27;new value&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;object.key&#x27;</span>: <span class="string">&#x27;value&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;array[0]&#x27;</span>: <span class="string">&#x27;value&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 获取数据</span></span><br><span class="line"><span class="keyword">const</span> value = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">message</span></span><br></pre></td></tr></table></figure><h3 id="3-网络请求">3. 网络请求</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://api.example.com/data&#x27;</span>,</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">fail</span>(<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="4-生命周期函数">4. 生命周期函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;&#125;, <span class="comment">// 页面加载</span></span><br><span class="line">  <span class="title function_">onShow</span>(<span class="params"></span>) &#123;&#125;, <span class="comment">// 页面显示</span></span><br><span class="line">  <span class="title function_">onReady</span>(<span class="params"></span>) &#123;&#125;, <span class="comment">// 页面初次渲染完成</span></span><br><span class="line">  <span class="title function_">onHide</span>(<span class="params"></span>) &#123;&#125;, <span class="comment">// 页面隐藏</span></span><br><span class="line">  <span class="title function_">onUnload</span>(<span class="params"></span>) &#123;&#125;, <span class="comment">// 页面卸载</span></span><br><span class="line">  <span class="title function_">onPullDownRefresh</span>(<span class="params"></span>) &#123;&#125;, <span class="comment">// 下拉刷新</span></span><br><span class="line">  <span class="title function_">onReachBottom</span>(<span class="params"></span>) &#123;&#125;, <span class="comment">// 上拉触底</span></span><br><span class="line">  <span class="title function_">onShareAppMessage</span>(<span class="params"></span>) &#123;&#125; <span class="comment">// 用户分享</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="五、常用API">五、常用API</h2><h3 id="1-界面交互">1. 界面交互</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 显示提示框</span></span><br><span class="line">wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;成功&#x27;</span>,</span><br><span class="line">  <span class="attr">icon</span>: <span class="string">&#x27;success&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 显示加载框</span></span><br><span class="line">wx.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;加载中&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 显示模态框</span></span><br><span class="line">wx.<span class="title function_">showModal</span>(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;提示&#x27;</span>,</span><br><span class="line">  <span class="attr">content</span>: <span class="string">&#x27;确认删除?&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="2-路由跳转">2. 路由跳转</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 保留当前页面</span></span><br><span class="line">wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;/pages/detail/detail?id=1&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 关闭当前页面</span></span><br><span class="line">wx.<span class="title function_">redirectTo</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;/pages/index/index&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 返回上一页</span></span><br><span class="line">wx.<span class="title function_">navigateBack</span>()</span><br></pre></td></tr></table></figure><h3 id="3-数据存储">3. 数据存储</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 存储数据</span></span><br><span class="line">wx.<span class="title function_">setStorage</span>(&#123;</span><br><span class="line">  <span class="attr">key</span>: <span class="string">&#x27;userInfo&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;test&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 获取数据</span></span><br><span class="line">wx.<span class="title function_">getStorage</span>(&#123;</span><br><span class="line">  <span class="attr">key</span>: <span class="string">&#x27;userInfo&#x27;</span>,</span><br><span class="line">  <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="4-图片操作">4. 图片操作</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 选择图片</span></span><br><span class="line">wx.<span class="title function_">chooseImage</span>(&#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">sizeType</span>: [<span class="string">&#x27;original&#x27;</span>, <span class="string">&#x27;compressed&#x27;</span>],</span><br><span class="line">  <span class="attr">sourceType</span>: [<span class="string">&#x27;album&#x27;</span>, <span class="string">&#x27;camera&#x27;</span>],</span><br><span class="line">  <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> tempFilePaths = res.<span class="property">tempFilePaths</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 预览图片</span></span><br><span class="line">wx.<span class="title function_">previewImage</span>(&#123;</span><br><span class="line">  <span class="attr">urls</span>: [<span class="string">&#x27;url1&#x27;</span>, <span class="string">&#x27;url2&#x27;</span>]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="5-位置服务">5. 位置服务</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取位置</span></span><br><span class="line">wx.<span class="title function_">getLocation</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;gcj02&#x27;</span>,</span><br><span class="line">  <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;latitude, longitude&#125; = res</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打开位置</span></span><br><span class="line">wx.<span class="title function_">openLocation</span>(&#123;</span><br><span class="line">  latitude,</span><br><span class="line">  longitude,</span><br><span class="line">  <span class="attr">scale</span>: <span class="number">18</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="6-设备信息">6. 设备信息</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取系统信息</span></span><br><span class="line">wx.<span class="title function_">getSystemInfo</span>(&#123;</span><br><span class="line">  <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">model</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">pixelRatio</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">windowWidth</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">windowHeight</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">language</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">version</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">platform</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="六、组件系统">六、组件系统</h2><h3 id="1-视图容器">1. 视图容器</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span>           <span class="comment">&lt;!-- 块级元素 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span>&gt;</span><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span>   <span class="comment">&lt;!-- 可滚动视图 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">swiper</span>&gt;</span><span class="tag">&lt;/<span class="name">swiper</span>&gt;</span>       <span class="comment">&lt;!-- 轮播图 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">movable-view</span>&gt;</span><span class="tag">&lt;/<span class="name">movable-view</span>&gt;</span> <span class="comment">&lt;!-- 可移动视图 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cover-view</span>&gt;</span><span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span>     <span class="comment">&lt;!-- 覆盖原生组件 --&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-基础内容">2. 基础内容</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span>           </span><br><span class="line"><span class="tag">&lt;<span class="name">rich-text</span>&gt;</span><span class="tag">&lt;/<span class="name">rich-text</span>&gt;</span> <span class="comment">&lt;!-- 富文本 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">icon</span>&gt;</span><span class="tag">&lt;/<span class="name">icon</span>&gt;</span>           <span class="comment">&lt;!-- 图标 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">progress</span>&gt;</span><span class="tag">&lt;/<span class="name">progress</span>&gt;</span>   <span class="comment">&lt;!-- 进度条 --&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-表单组件">3. 表单组件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>       </span><br><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span>           </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span>        </span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span>   <span class="comment">&lt;!-- 多行输入 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span>&gt;</span><span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span>   <span class="comment">&lt;!-- 复选框 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">radio</span>&gt;</span><span class="tag">&lt;/<span class="name">radio</span>&gt;</span>         <span class="comment">&lt;!-- 单选框 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">picker</span>&gt;</span><span class="tag">&lt;/<span class="name">picker</span>&gt;</span>       <span class="comment">&lt;!-- 选择器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">slider</span>&gt;</span><span class="tag">&lt;/<span class="name">slider</span>&gt;</span>       <span class="comment">&lt;!-- 滑动选择器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">switch</span>&gt;</span><span class="tag">&lt;/<span class="name">switch</span>&gt;</span>       <span class="comment">&lt;!-- 开关选择器 --&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-媒体组件">4. 媒体组件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span>        </span><br><span class="line"><span class="tag">&lt;<span class="name">video</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span>        </span><br><span class="line"><span class="tag">&lt;<span class="name">audio</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span>       </span><br><span class="line"><span class="tag">&lt;<span class="name">camera</span>&gt;</span><span class="tag">&lt;/<span class="name">camera</span>&gt;</span>       </span><br><span class="line"><span class="tag">&lt;<span class="name">live-player</span>&gt;</span><span class="tag">&lt;/<span class="name">live-player</span>&gt;</span> <span class="comment">&lt;!-- 直播播放 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">live-pusher</span>&gt;</span><span class="tag">&lt;/<span class="name">live-pusher</span>&gt;</span> <span class="comment">&lt;!-- 直播推流 --&gt;</span></span><br></pre></td></tr></table></figure><h2 id="七、自定义组件">七、自定义组件</h2><h3 id="1-组件定义">1. 组件定义</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// components/custom/custom.js</span></span><br><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">  <span class="comment">// 组件属性</span></span><br><span class="line">  <span class="attr">properties</span>: &#123;</span><br><span class="line">    <span class="attr">title</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">      <span class="attr">value</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 组件内部数据</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 组件方法</span></span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">handleTap</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">count</span> + <span class="number">1</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">// 触发自定义事件</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">triggerEvent</span>(<span class="string">&#x27;customEvent&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">count</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 生命周期</span></span><br><span class="line">  <span class="attr">lifetimes</span>: &#123;</span><br><span class="line">    <span class="title function_">created</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">    <span class="title function_">attached</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">    <span class="title function_">detached</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 页面生命周期</span></span><br><span class="line">  <span class="attr">pageLifetimes</span>: &#123;</span><br><span class="line">    <span class="title function_">show</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">    <span class="title function_">hide</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="2-组件使用">2. 组件使用</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;custom&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/components/custom/custom&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">custom</span> <span class="attr">title</span>=<span class="string">&quot;标题&quot;</span> <span class="attr">bind:customEvent</span>=<span class="string">&quot;onCustomEvent&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h2 id="八、事件系统">八、事件系统</h2><h3 id="1-事件类型">1. 事件类型</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 点击事件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">bindtap</span>=<span class="string">&quot;handleTap&quot;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">catchtap</span>=<span class="string">&quot;handleTap&quot;</span>&gt;</span>阻止冒泡的点击<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 长按事件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">bindlongpress</span>=<span class="string">&quot;handleLongPress&quot;</span>&gt;</span>长按<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 触摸事件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">bindtouchstart</span>=<span class="string">&quot;handleTouchStart&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">bindtouchmove</span>=<span class="string">&quot;handleTouchMove&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">bindtouchend</span>=<span class="string">&quot;handleTouchEnd&quot;</span>&gt;</span></span><br><span class="line">  触摸</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 输入事件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">bindinput</span>=<span class="string">&quot;handleInput&quot;</span> <span class="attr">bindfocus</span>=<span class="string">&quot;handleFocus&quot;</span> <span class="attr">bindblur</span>=<span class="string">&quot;handleBlur&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-事件对象">2. 事件对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="title function_">handleTap</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">type</span>)        <span class="comment">// 事件类型</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>)      <span class="comment">// 触发事件的组件</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">currentTarget</span>) <span class="comment">// 事件绑定的组件</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>)      <span class="comment">// 额外信息</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">touches</span>)     <span class="comment">// 触摸点信息</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="九、页面通信">九、页面通信</h2><h3 id="1-页面间通信">1. 页面间通信</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 页面A: 传递参数</span></span><br><span class="line">wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;/pages/pageB/pageB?id=1&amp;name=test&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 页面B: 接收参数</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(options.<span class="property">id</span>, options.<span class="property">name</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="2-组件通信">2. 组件通信</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父组件向子组件传值</span></span><br><span class="line">&lt;custom-component prop-a=<span class="string">&quot;&#123;&#123;valueA&#125;&#125;&quot;</span> <span class="attr">bind</span>:myevent=<span class="string">&quot;onMyEvent&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子组件向父组件传值</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">triggerEvent</span>(<span class="string">&#x27;myevent&#x27;</span>, &#123; <span class="attr">data</span>: <span class="string">&#x27;value&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 父组件接收</span></span><br><span class="line"><span class="title function_">onMyEvent</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>.<span class="property">data</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-全局状态管理">3. 全局状态管理</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.js</span></span><br><span class="line"><span class="title class_">App</span>(&#123;</span><br><span class="line">  <span class="attr">globalData</span>: &#123;</span><br><span class="line">    <span class="attr">userInfo</span>: <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 页面中使用</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">getApp</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(app.<span class="property">globalData</span>.<span class="property">userInfo</span>)</span><br></pre></td></tr></table></figure><h2 id="十、小程序登录流程">十、小程序登录流程</h2><h3 id="1-登录流程">1. 登录流程</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 获取code</span></span><br><span class="line">wx.<span class="title function_">login</span>(&#123;</span><br><span class="line">  <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">code</span>) &#123;</span><br><span class="line">      <span class="comment">// 2. 发送code到后端</span></span><br><span class="line">      wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://api.example.com/login&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;</span><br><span class="line">          <span class="attr">code</span>: res.<span class="property">code</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">          <span class="comment">// 3. 保存登录状态</span></span><br><span class="line">          wx.<span class="title function_">setStorageSync</span>(<span class="string">&#x27;token&#x27;</span>, res.<span class="property">data</span>.<span class="property">token</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="2-用户信息获取">2. 用户信息获取</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取用户信息</span></span><br><span class="line">wx.<span class="title function_">getUserProfile</span>(&#123;</span><br><span class="line">  <span class="attr">desc</span>: <span class="string">&#x27;用于完善会员资料&#x27;</span>,</span><br><span class="line">  <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">userInfo</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="十一、性能优化">十一、性能优化</h2><h3 id="1-启动优化">1. 启动优化</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 分包加载</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;subpackages&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;root&quot;</span>: <span class="string">&quot;packageA&quot;</span>,</span><br><span class="line">      <span class="string">&quot;pages&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;pages/cat&quot;</span>,</span><br><span class="line">        <span class="string">&quot;pages/dog&quot;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-渲染优化">2. 渲染优化</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用懒加载 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">lazy-load</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;imageUrl&#125;&#125;&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 长列表优化 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">bindscrolltolower</span>=<span class="string">&quot;loadMore&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;list&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;item.name&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-内存优化">3. 内存优化</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 及时清理不需要的数据</span></span><br><span class="line"><span class="title function_">onUnload</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    <span class="attr">list</span>: []</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 合并setData调用</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">  <span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="十二、常见问题">十二、常见问题</h2><h3 id="1-网络请求">1. 网络请求</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置请求拦截</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">request</span> = (<span class="params">options</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      ...options,</span><br><span class="line">      <span class="attr">header</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;Authorization&#x27;</span>: wx.<span class="title function_">getStorageSync</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">success</span>: resolve,</span><br><span class="line">      <span class="attr">fail</span>: reject</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-图片处理">2. 图片处理</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 图片压缩</span></span><br><span class="line">wx.<span class="title function_">compressImage</span>(&#123;</span><br><span class="line">  <span class="attr">src</span>: tempFilePath,</span><br><span class="line">  <span class="attr">quality</span>: <span class="number">80</span>,</span><br><span class="line">  <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">tempFilePath</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 图片上传</span></span><br><span class="line">wx.<span class="title function_">uploadFile</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://api.example.com/upload&#x27;</span>,</span><br><span class="line">  <span class="attr">filePath</span>: tempFilePath,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;file&#x27;</span>,</span><br><span class="line">  <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="3-页面返回刷新">3. 页面返回刷新</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 页面A</span></span><br><span class="line">wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;/pages/pageB/pageB&#x27;</span>,</span><br><span class="line">  <span class="attr">events</span>: &#123;</span><br><span class="line">    <span class="attr">refreshData</span>: <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">loadData</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 页面B</span></span><br><span class="line"><span class="keyword">const</span> eventChannel = <span class="variable language_">this</span>.<span class="title function_">getOpenerEventChannel</span>()</span><br><span class="line">eventChannel.<span class="title function_">emit</span>(<span class="string">&#x27;refreshData&#x27;</span>, &#123; <span class="attr">data</span>: <span class="string">&#x27;refresh&#x27;</span> &#125;)</span><br></pre></td></tr></table></figure><h2 id="拓展阅读">拓展阅读</h2><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^1]"></span><a class="reference-anchor" href="#referto_[^1]">[^1]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://developers.weixin.qq.com/miniprogram/dev/framework/">微信小程序开发文档</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^2]"></span><a class="reference-anchor" href="#referto_[^2]">[^2]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://developers.weixin.qq.com/ebook?action=get_post_info&token=935589521&volumn=1&lang=zh_CN&book=miniprogram&docid=0008aeea9a8978ab0086a685851c0a">小程序框架指南</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^3]"></span><a class="reference-anchor" href="#referto_[^3]">[^3]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://developers.weixin.qq.com/miniprogram/dev/framework/performance/">小程序性能优化指南</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^4]"></span><a class="reference-anchor" href="#referto_[^4]">[^4]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html">小程序登录流程</a></div>]]></content>
    
    
    <summary type="html">微信小程序开发基础语法总结,包括文件结构、生命周期、数据绑定等核心概念</summary>
    
    
    
    <category term="技术学习" scheme="https://yumi1.top/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="微信小程序" scheme="https://yumi1.top/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    <category term="前端" scheme="https://yumi1.top/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序开发笔记-1 云函数环境准备 和 基础配置</title>
    <link href="https://yumi1.top/unicloud-1/"/>
    <id>https://yumi1.top/unicloud-1/</id>
    <published>2024-11-20T17:38:40.000Z</published>
    <updated>2025-08-04T12:48:15.191Z</updated>
    
    <content type="html"><![CDATA[<h2 id="写在最前">写在最前</h2><div class="tip "><p>本系列文章记录我在unicloud开发过程中的一些流程和踩坑</p></div><h2 id="一、安装HBuilderX">一、安装HBuilderX</h2><ol><li>前往<a href="https://www.dcloud.io/hbuilderx.html">DCloud官网</a>下载HBuilderX</li><li>安装完成后打开HBuilderX</li><li>安装插件<ul><li>内置浏览器</li><li>scss/sass编译</li><li>uniapp编译</li><li>eslint语法检查</li></ul></li></ol><h2 id="二、创建uniCloud项目">二、创建uniCloud项目</h2><ol><li>文件-&gt;新建-&gt;项目</li><li>选择uni-app Vue3/Vite</li><li>勾选&quot;启用uniCloud&quot;</li><li>选择阿里云作为服务商</li></ol><h2 id="三、配置云服务空间">三、配置云服务空间</h2><ol><li>打开<a href="https://unicloud.dcloud.net.cn/">uniCloud Web控制台</a></li><li>登录DCloud账号</li><li>创建服务空间</li><li>在HBuilderX中关联服务空间</li></ol><h2 id="四、安装依赖">四、安装依赖</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装项目依赖</span></span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装uniCloud核心依赖</span></span><br><span class="line">npm install @dcloudio/uniCloud-admin <span class="comment"># uniCloud管理后台框架</span></span><br><span class="line">npm install @dcloudio/uni-app <span class="comment"># uni-app框架核心</span></span><br><span class="line">npm install @dcloudio/uni-mp-weixin <span class="comment"># 微信小程序平台支持</span></span><br><span class="line">npm install @dcloudio/uni-h5 <span class="comment"># H5平台支持</span></span><br><span class="line">npm install sass <span class="comment"># CSS预处理器</span></span><br><span class="line">npm install sass-loader <span class="comment"># sass加载器</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 开发依赖</span></span><br><span class="line">npm install -D @dcloudio/types <span class="comment"># TypeScript类型支持</span></span><br><span class="line">npm install -D @dcloudio/uni-automator <span class="comment"># 自动化测试</span></span><br><span class="line">npm install -D @dcloudio/uni-cli-shared <span class="comment"># CLI共享工具</span></span><br><span class="line">npm install -D @dcloudio/vite-plugin-uni <span class="comment"># Vite插件</span></span><br></pre></td></tr></table></figure><h2 id="五、目录结构说明">五、目录结构说明</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">├── uniCloud                    // 云开发目录</span><br><span class="line">│   ├── cloudfunctions         // 云函数</span><br><span class="line">│   └── database               // 数据库</span><br><span class="line">├── src                        // 前端源码</span><br><span class="line">└── pages                      // 页面文件</span><br></pre></td></tr></table></figure><h2 id="六、常用命令">六、常用命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 本地运行</span></span><br><span class="line">npm run dev:h5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发布</span></span><br><span class="line">npm run build:h5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 上传云函数</span></span><br><span class="line">右键cloudfunctions -&gt; 上传所有云函数</span><br></pre></td></tr></table></figure><h1>第二部分：基础配置</h1><h2 id="一、项目配置">一、项目配置</h2><h3 id="1-manifest-json配置">1. manifest.json配置</h3><p>打开项目根目录下的manifest.json,配置基本信息:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;你的应用名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;appid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;应用描述&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;versionName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;versionCode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;100&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;uniCloud&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;provider&quot;</span><span class="punctuation">:</span> <span class="string">&quot;aliyun&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;spaceId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;你的服务空间ID&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;clientSecret&quot;</span><span class="punctuation">:</span> <span class="string">&quot;你的客户端密钥&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="2-pages-json配置">2. pages.json配置</h3><p>配置页面路由和导航栏样式:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;首页&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;globalStyle&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uniCloud示例&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarBackgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#F8F8F8&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#F8F8F8&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="二、云函数配置">二、云函数配置</h2><h3 id="1-创建云函数">1. 创建云函数</h3><ol><li>在<code>uniCloud/cloudfunctions</code>目录右键</li><li>选择&quot;新建云函数&quot;</li><li>输入函数名称(如: hello-world)</li></ol><h3 id="2-云函数示例">2. 云函数示例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">main</span> = <span class="keyword">async</span> (event, context) =&gt; &#123;</span><br><span class="line">  <span class="comment">// event为客户端上传的参数</span></span><br><span class="line">  <span class="comment">// context包含了调用信息和运行状态</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: event</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="3-调用云函数">3. 调用云函数</h3><p>在前端页面中调用:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;view&gt;</span><br><span class="line">    &lt;button @click=&quot;callFunction&quot;&gt;调用云函数&lt;/button&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async callFunction() &#123;</span><br><span class="line">      try &#123;</span><br><span class="line">        const res = await uniCloud.callFunction(&#123;</span><br><span class="line">          name: &#x27;hello-world&#x27;,</span><br><span class="line">          data: &#123;</span><br><span class="line">            name: &#x27;test&#x27;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        console.log(res)</span><br><span class="line">      &#125; catch (e) &#123;</span><br><span class="line">        console.error(e)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="三、数据库配置">三、数据库配置</h2><h3 id="1-创建集合">1. 创建集合</h3><ol><li>在<code>uniCloud/database</code>目录右键</li><li>选择&quot;新建Collection&quot;</li><li>输入集合名称(如: users)</li></ol><h3 id="2-数据库操作示例">2. 数据库操作示例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 云函数中操作数据库</span></span><br><span class="line"><span class="keyword">const</span> db = uniCloud.<span class="title function_">database</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入数据</span></span><br><span class="line"><span class="keyword">await</span> db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询数据</span></span><br><span class="line"><span class="keyword">const</span> res = <span class="keyword">await</span> db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">get</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新数据</span></span><br><span class="line"><span class="keyword">await</span> db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">where</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;test&#x27;</span></span><br><span class="line">&#125;).<span class="title function_">update</span>(&#123;</span><br><span class="line">  <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除数据</span></span><br><span class="line"><span class="keyword">await</span> db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">where</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;test&#x27;</span></span><br><span class="line">&#125;).<span class="title function_">remove</span>()</span><br></pre></td></tr></table></figure><h2 id="拓展阅读">拓展阅读</h2><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^1]"></span><a class="reference-anchor" href="#referto_[^1]">[^1]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://uniapp.dcloud.net.cn/uniCloud/">uniCloud官方文档</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^2]"></span><a class="reference-anchor" href="#referto_[^2]">[^2]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://uniapp.dcloud.net.cn/">uni-app官方教程</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^3]"></span><a class="reference-anchor" href="#referto_[^3]">[^3]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://uniapp.dcloud.net.cn/uniCloud/cf-functions.html">uniCloud云函数文档</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^4]"></span><a class="reference-anchor" href="#referto_[^4]">[^4]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://uniapp.dcloud.net.cn/uniCloud/cf-database.html">uniCloud数据库文档</a></div>]]></content>
    
    
    <summary type="html">unicloud开发环境准备,包括HBuilderX安装、插件配置、云开发环境搭建等</summary>
    
    
    
    <category term="技术学习" scheme="https://yumi1.top/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="微信小程序" scheme="https://yumi1.top/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    <category term="uniapp" scheme="https://yumi1.top/tags/uniapp/"/>
    
    <category term="unicloud" scheme="https://yumi1.top/tags/unicloud/"/>
    
    <category term="vue" scheme="https://yumi1.top/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>搜索引擎高级搜索语法完全指南</title>
    <link href="https://yumi1.top/search-operators/"/>
    <id>https://yumi1.top/search-operators/</id>
    <published>2024-11-17T10:50:22.000Z</published>
    <updated>2024-11-17T11:24:32.518Z</updated>
    
    <content type="html"><![CDATA[<div class="note info flat"><p>本文将介绍常用搜索引擎的高级搜索语法，帮助你更快地找到所需信息。</p></div><h2 id="搜索语法">搜索语法</h2><h3 id="1-精确匹配">1. 精确匹配</h3><p>使用双引号可以进行精确匹配搜索</p><div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">语法</button><button type="button" class="tab">示例</button></div><div class="tab-contents"><div class="tab-item-content active"><p><code>&quot;关键词&quot;</code></p></div><div class="tab-item-content"><p><code>&quot;什么是人工智能&quot;</code></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h3 id="2-排除特定词">2. 排除特定词</h3><p>使用减号排除不想要的搜索结果</p><div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">语法</button><button type="button" class="tab">示例</button></div><div class="tab-contents"><div class="tab-item-content active"><p><code>关键词 -排除词</code></p></div><div class="tab-item-content"><p><code>Python -蟒蛇</code>（搜索Python编程而不是蟒蛇）</p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h3 id="3-站内搜索">3. 站内搜索</h3><div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">语法</button><button type="button" class="tab">示例</button></div><div class="tab-contents"><div class="tab-item-content active"><p><code>site:网站域名 关键词</code></p></div><div class="tab-item-content"><p><code>site:github.com 开源项目</code></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h3 id="4-文件类型搜索">4. 文件类型搜索</h3><div class="note primary flat"><p>使用 filetype: 可以搜索特定类型的文件</p></div><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">filetype:pdf 编程教程</span><br><span class="line">filetype:ppt 项目管理</span><br></pre></td></tr></table></figure><h3 id="5-标题搜索">5. 标题搜索</h3><div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">语法</button><button type="button" class="tab">示例</button></div><div class="tab-contents"><div class="tab-item-content active"><p><code>intitle:关键词</code></p></div><div class="tab-item-content"><p><code>intitle:如何学习编程</code></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h3 id="6-时间范围">6. 时间范围</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">关键词 after:2023</span><br><span class="line">关键词 before:2024</span><br></pre></td></tr></table></figure><h2 id="组合使用技巧">组合使用技巧</h2><div class="note warning flat"><p>多个搜索语法可以组合使用，实现更精准的搜索</p></div><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">site:github.com &quot;machine learning&quot; filetype:pdf after:2023</span><br></pre></td></tr></table></figure><h2 id="实用搜索场景">实用搜索场景</h2><details class="folding-tag" ><summary> 学习资料搜索 </summary>              <div class='content'>              <ul><li><code>filetype:pdf site:edu 机器学习</code></li><li><code>intitle:教程 Python site:github.com</code></li></ul>              </div>            </details><details class="folding-tag" ><summary> 技术文档搜索 </summary>              <div class='content'>              <ul><li><code>site:docs.microsoft.com &quot;Azure&quot;</code></li><li><code>site:developer.mozilla.org &quot;JavaScript&quot;</code></li></ul>              </div>            </details><h2 id="搜索引擎特有语法">搜索引擎特有语法</h2><h3 id="Google-特有">Google 特有</h3><div class="note info flat"><ul><li><code>cache:</code> - 查看网页缓存</li><li><code>related:</code> - 查找相似网站</li><li><code>info:</code> - 查看网站信息</li></ul></div><h3 id="Bing-特有">Bing 特有</h3><div class="note info flat"><ul><li><code>contains:</code> - 包含特定文件</li><li><code>language:</code> - 指定语言</li></ul></div><h2 id="相关资源">相关资源</h2><p><a href="https://support.google.com/websearch">Google 搜索帮助</a><br><a href="https://support.microsoft.com/bing">Bing 搜索技巧</a></p>]]></content>
    
    
    <summary type="html">掌握搜索引擎高级搜索语法，让你的搜索更加精准高效</summary>
    
    
    
    <category term="技术教程" scheme="https://yumi1.top/categories/%E6%8A%80%E6%9C%AF%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="搜索技巧" scheme="https://yumi1.top/tags/%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/"/>
    
    <category term="Google" scheme="https://yumi1.top/tags/Google/"/>
    
    <category term="效率工具" scheme="https://yumi1.top/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>mysql 8.0 error 1130 - Host &#39;my.lan&#39; is not allowed to connect to this MySQL server</title>
    <link href="https://yumi1.top/mysql-connecterror/"/>
    <id>https://yumi1.top/mysql-connecterror/</id>
    <published>2024-10-20T03:52:42.000Z</published>
    <updated>2024-11-17T11:27:26.599Z</updated>
    
    <content type="html"><![CDATA[<h2 id="问题描述">问题描述</h2><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/page/2024-10-20-11-54-01.png"/></div></div><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1130 - Host &#x27;my.lan&#x27; is not allowed to connect to this MySQL server</span><br></pre></td></tr></table></figure><p>无法连接至远程mysql服务器，提示<code>Host 'my.lan' is not allowed to connect to this MySQL server</code></p><h2 id="解决方法">解决方法</h2><h3 id="1-mysql配置问题">1.mysql配置问题</h3><p>可能是mysql配置问题导致不允许远程连接，下面提供两种方式解决</p><ol><li>命令行修改权限<br>ssh或rdp进入服务器,root用户下执行<code>mysql -u root -p</code>输入密码，连接到mysql服务器</li></ol><p><em>更改用户权限</em>以允许远程连接：在MySQL命令行中，运行以下命令，其中 <code>user</code> 和 <code>password </code>修改为你允许远程连接的用户名和密码：<br>以下为mysql8.0版本的命令,mysql5.7版本的命令有所不同</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;user&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;password&#x27;</span>;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;user&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><ol start="2"><li>修改mysql配置文件<br>找到mysql配置文件，一般在<code>/etc/my.cnf</code>或<code>/etc/mysql/mysql.conf.d/mysqld.cnf</code><br>搜索<code>bind-address</code>关键字，将<code>bind-address</code>改为<code>0.0.0.0</code>即可允许远程连接</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bind-address = 0.0.0.0</span><br></pre></td></tr></table></figure><h3 id="2-防火墙问题">2.防火墙问题</h3><p>可能是防火墙问题导致不允许远程连接<br><em>查看防火墙状态</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld.service</span><br></pre></td></tr></table></figure><p><em>开启防火墙</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start firewalld.service</span><br></pre></td></tr></table></figure><p><em>允许mysql端口</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p><em>重启mysql服务</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart mysqld.service</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">无法连接至远程mysql服务器，提示`Host &#39;my.lan&#39; is not allowed to connect to this MySQL server`,mysql 8.0 error 1130 - Host &#39;my.an&#39; is not allowed to connect to this MySQL server</summary>
    
    
    
    <category term="问题解决" scheme="https://yumi1.top/categories/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    
    
    <category term="mysql" scheme="https://yumi1.top/tags/mysql/"/>
    
    <category term="error" scheme="https://yumi1.top/tags/error/"/>
    
  </entry>
  
  <entry>
    <title>如何翻阅外国文献(翻墙)-Clash v2rayN 绿色上网</title>
    <link href="https://yumi1.top/vpn/"/>
    <id>https://yumi1.top/vpn/</id>
    <published>2024-10-02T02:51:00.000Z</published>
    <updated>2024-10-02T02:51:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>零 原理</h1><div class="note warning flat"><p>仅做技术探讨分享,请使用时遵守相关法律法规,本站不承担任何责任<br><font color=red >如果你不能自主学会翻墙,那就请你不要翻墙!!健全独立心智,明辨是非,切勿发表不当言论!!!</font></p></div><p>以clash为例 通过配置文件判断,对流量进行分流,使用clash内核进行转发加密</p><div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">架构图</button><button type="button" class="tab">核心组件</button></div><div class="tab-contents"><div class="tab-item-content active"><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/connection-flow.a72146ab.png" style="width:500px;"/></div></div></div><div class="tab-item-content"><ul><li><code>clash.meta</code>是以go语言开发的一个网络转发内核</li><li><code>Inbound</code> 入站是在本地端监听的部分, 它通过打开一个本地端口并监听传入的连接来工作. 当连接进来时, Clash 会查询配置文件中配置的规则, 并决定连接应该去哪个 Outbound 出站.</li><li><code>Outbound</code> 出站是连接到远程端的部分. 根据配置的不同, 它可以是一个特定的网络接口、一个代理服务器或一个策略组.</li></ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><div class="note info flat"><p>clash只是一个网络转发内核,真正提供服务的是你所购买的服务(我们叫做&quot;机场&quot;)<br>通过<code>机场</code>(服务器提供商)+ <code>软件</code> 通过内核转发即可<br>相当于一次购买,全平台全软件支持加速代理</p></div><h1>一 机场购买</h1><p>博主目前用了一年的机场 很干净的ip</p><a class="btn-beautify outline" href="https://going.cngpt-edu.top/#/register?code=FTA1piFp" title="91merry机场"><i class="fa-solid fa-download"></i><span>91merry机场</span></a><p>33元90天 300 Mbps 300GB一月 可同时连接 16 IP</p><!-- # 2.软件下载  根据系统选择相应软件# 3.配置文件  根据软件进行文件配置 详见下文 --> <h1>二 软件下载</h1><p>根据系统选择相应软件</p>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/vpn/2024-10-06-17-54-11.png"/></div></div><h1>Windows</h1><h2 id="1-Clash-for-windows-推荐">1.Clash for windows(推荐)</h2><h3 id="1-1下载Clash-for-windows">1.1下载Clash for windows</h3><div class="note warning flat"><p>因为某些不可抗因素 clash.meta及clash for windows不再提供更新删库或存档,本文提供以下版本</p></div><ul><li>英文版</li></ul><a class="btn-beautify outline" href="https://yumi1.lanzouw.com/igxpo1fv2rqd" title="蓝奏盘 密码:gs4q"><i class="fa-solid fa-download"></i><span>蓝奏盘 密码:gs4q</span></a><a class="btn-beautify outline" href="https://share.weiyun.com/BEuEsAWr" title="腾讯微云"><i class="fa-solid fa-download"></i><span>腾讯微云</span></a><ul><li>中文版(版本稍落后英文版)</li></ul><a class="btn-beautify outline" href="https://share.weiyun.com/VZYqS9aH" title="腾讯微云"><i class="fa-solid fa-download"></i><span>腾讯微云</span></a><a class="btn-beautify outline" href="https://cdn.91merry-2.top/files/Windows.zip" title="其他源"><i class="fa-solid fa-download"></i><span>其他源</span></a><a class="btn-beautify outline" href="https://new.91merry-6.top/cdn/client/Clash.Nyanpasu_1.6.1_x64-setup.exe" title="其他源2"><i class="fa-solid fa-download"></i><span>其他源2</span></a><h3 id="1-2导入配置">1.2导入配置</h3><ol><li>进入你购买好的机场<br>选择<code>配置</code><br><code>允许浏览器打开clash</code></li></ol>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/61502db0d68995da7dc2d4661c19e933.webp"/></div></div><p>在clash中配置页选择刚刚导入的配置</p>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/2d733b7129e6913c3af385fafd8a3145.webp"/></div></div><p>选择好配置</p>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/96fbd3d5e39ab2878859cc14a717f259.webp"/></div></div><p>右键设置配置</p>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/62efcebb14fced82d18c1eedc9be836b.webp"/></div></div><p>设置自动更新为1小时<br>2. 或者你也可以<br>复制clash配置</p>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-05-26-17-02-07.png"/></div></div> <p>粘贴到配置区</p>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-05-26-17-03-29.png"/></div></div><p>选择刚刚导入的配置</p>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/2d733b7129e6913c3af385fafd8a3145.webp"/></div></div><p>选择好配置</p>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/96fbd3d5e39ab2878859cc14a717f259.webp"/></div></div><p>右键设置配置</p>  <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/62efcebb14fced82d18c1eedc9be836b.webp"/></div></div><p>设置自动更新为1小时</p><h3 id="1-3基础使用">1.3基础使用</h3><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/{7B619BDD-D13A-4e60-8399-088C8CDA5EC8}.webp"/></div></div><p>开启<code>系统代理</code>即可正常使用</p><p>前往Proxies页面选择一个延迟低的节点使用即可</p><h3 id="1-4进阶使用">1.4进阶使用</h3><h4 id="（1）局域网代理共享">（1）局域网代理共享</h4><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/{0946ABFE-232E-48f2-AB04-198A0D21B879}.webp"/></div></div><p>关闭随机端口 开启允许局域网,随后链接本机ip:端口号<br>ep:<br><code>192.168.1.230:9102</code><br>详细信息可看<a href="https://yumi1.top/linux-proxy">linux-proxy/#VMware ubuntu 走本机代理</a><br>同理可用于Switch等设备的代理链接</p><div class="note flat"><p>为保障安全,请无需使用此功能时开启随机端口且关闭允许局域网</p></div><h4 id="（2）TUN-转发模式">（2）TUN 转发模式</h4><p>基于网络侧流量代理,可以用来处理 TCP、UDP、ICMP 流量,简单点说对电脑全局软件强制进行代理,使其无法绕过</p><ul><li>点击<code>服务模式</code></li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/{97E238EA-1A03-46a0-89D1-BB7D3843F212}.png"/></div></div><ul><li><code>安装</code></li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/{46CC7103-8EFF-4a99-8CBE-841F54C7759A}.png"/></div></div><ul><li>开启<code>tun模式</code> <code>同时关闭系统代理模式</code></li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/{4A0E2C1B-6ABE-485c-8F89-0A6A381E2591}.png"/></div></div><p>此时你会发现你的网络连接里多了一个clash tunnel</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/{5783C84B-203D-43fb-B119-DAB0F76FCB9F}.png"/></div></div><p>成功</p><h4 id="（3）clash自定规则绕过网站-不对某些网站进行代理">（3）clash自定规则绕过网站,不对某些网站进行代理</h4><p>1.系统代理绕过(全局模式仍然绕过)<br>进入Settings–点击 System proxy – Bypass Domain、IPNet–右边 Edit–打开编辑界面</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/e6197c5c7c18be9c18f176c7c41361a7.png"/></div></div><p>要增加绕过example.com域名,增加绕过abc.com的所有子域名，<a href="http://xn--d-fr8an20c.abc.com">包括d.abc.com</a>,<a href="http://e.abc.com">e.abc.com</a>，则增加：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bypass:</span><br><span class="line">  - &quot;example.com&quot; # 下面字段可不删除</span><br><span class="line">  - 127.0.0.1</span><br><span class="line">  - &quot;*.abc.com&quot;</span><br><span class="line">  - ...</span><br></pre></td></tr></table></figure><p>2.Mixin模式绕过</p><ul><li>进入 Settings 页面</li><li>滚动至 Profile Mixin 栏</li><li>点击 YAML 右边 Edit 小字打开编辑界面</li><li>修改配置</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mixin: # 注意下面缩进</span><br><span class="line">  rules:</span><br><span class="line">    - &quot;DOMAIN-SUFFIX,bing.com,DIRECT&quot; #直连</span><br><span class="line">    - &quot;DOMAIN-SUFFIX,asodjojasodjasdf.com,REJECT&quot; #丢弃</span><br><span class="line">    - &quot;DOMAIN-SUFFIX,asdfgf.com,Proxy&quot; #代理</span><br></pre></td></tr></table></figure><p>回到 General 页面，打开 Mixin 开关即可。<br>mixin我用的较少 详情请看<a href="https://clash.wiki/configuration/rules.html#%E7%AD%96%E7%95%A5">clash_wiki/规则</a></p><h3 id="1-1-6拓展阅读">1.1.6拓展阅读</h3><div class="reference-source"><span class="hidden-anchor" id="referfrom_[^1]"></span><a class="reference-anchor" href="#referto_[^1]">[^1]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://show.91merry-01.top/doc/#/Windows/Clash-for-Windows">clash for Windows问题大全</a></div><h2 id="2-ShadowsocksR">2.ShadowsocksR</h2><h3 id="2-1-订阅填写">2.1 订阅填写</h3><div class="tag link"><a class="link-card" title="github链接" href="https://github.com/ShadowsocksR-Live/shadowsocksr-native/releases"><div class="left"><img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"/></div><div class="right"><p class="text">github链接</p><p class="url">https://github.com/ShadowsocksR-Live/shadowsocksr-native/releases</p></div></a></div><a class="btn-beautify outline" href="https://yumi1.lanzn.com/ir9yE2bba09e" title="蓝奏云"><i class="fa-solid fa-download"></i><span>蓝奏云</span></a><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-09-13.png" alt="双击打开"/></div><span class="image-caption">双击打开</span></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-08-53.png"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-10-19.png" alt="add 填入你购买后机场所提供的订阅地址"/></div><span class="image-caption">add 填入你购买后机场所提供的订阅地址</span></div> <div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-27-26.png"/></div></div><p>记得打开自动更新</p><h3 id="2-2-切换节点">2.2 切换节点</h3><p>鼠标右键托盘小飞机图标，选择「服务器-&gt;网站名称」里任意节点。</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-13-16.png"/></div></div><h3 id="2-3-启动代理">2.3 启动代理</h3><p>1.鼠标右键托盘小飞机图标，选择「系统代理-&gt;PAC」即可自动代理网站。</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-14-59.png"/></div></div><h2 id="3-v2rayN自改去广告版">3.v2rayN自改去广告版</h2><a class="btn-beautify outline" href="https://yumi1.lanzouw.com/iT0yc1c4yxoj" title="点击下载"><i class="fa-solid fa-download"></i><span>点击下载</span></a><p>v2rayN不过多赘述,下载时记得检查是否有带有内核</p><div class="tag link"><a class="link-card" title="github链接" href="https://github.com/2dust/v2rayn/releases?after=latest"><div class="left"><img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"/></div><div class="right"><p class="text">github链接</p><p class="url">https://github.com/2dust/v2rayn/releases?after=latest</p></div></a></div><h2 id="4-SSTap">4.SSTap</h2><a class="btn-beautify outline" href="https://91merry.lanzoui.com/icujkvc" title="蓝奏云"><i class="fa-solid fa-download"></i><span>蓝奏云</span></a><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-15-44-47.png" alt="点击打开"/></div><span class="image-caption">点击打开</span></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-15-55-10.png" alt="允许安装"/></div><span class="image-caption">允许安装</span></div><p><code>设置</code>–<code>SSR订阅</code>–<code>SSR订阅管理</code>–将你在机场中购买后获取到的订阅链接复制进 ，点击<code>添加</code></p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-27-15.png"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-15-56-14.png"/></div></div><p>「代理：」选择一个节点，「模式：」仅网页浏览器跳过中国站点；选择后点击「连接」即可用浏览器访问目标站点了</p><h1>Android</h1><h2 id="1-Clash-for-Android">1.Clash for Android</h2><p>与cfw(clash for windows)大差不差</p><ul><li>安装apk</li><li>进入机场 导入配置</li><li>设置自动更新<div class="img-wrap"><div class="img-bg"><img class="img" src="/image/{97542B49-BEA2-4a1f-A0EC-BD10EEE20EEA}.png"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/{3039087E-048B-4c0d-9D4B-D25ECA10FD13}.png"/></div></div></li><li>开启代理</li><li>选择节点</li></ul><a class="btn-beautify outline" href="https://yumi1.lanzouw.com/i8Nwr1fv8apg" title="蓝奏盘"><i class="fa-solid fa-download"></i><span>蓝奏盘</span></a><a class="btn-beautify outline" href="https://share.weiyun.com/lW6PRrLb" title="腾讯微云"><i class="fa-solid fa-download"></i><span>腾讯微云</span></a><div class="tag link"><a class="link-card" title="github项目链接" href="https://github.com/naicfeng/ClashRForAndroid/releases"><div class="left"><img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"/></div><div class="right"><p class="text">github项目链接</p><p class="url">https://github.com/naicfeng/ClashRForAndroid/releases</p></div></a></div><h2 id="2-ShadowsocksR-2">2.ShadowsocksR</h2><div class="tag link"><a class="link-card" title="github项目链接" href="https://github.com/shadowsocksRb/shadowsocksRb-android/releases"><div class="left"><img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"/></div><div class="right"><p class="text">github项目链接</p><p class="url">https://github.com/shadowsocksRb/shadowsocksRb-android/releases</p></div></a></div><a class="btn-beautify outline" href="https://yumi1.lanzn.com/iEVPF2bbb1zc" title="蓝奏盘"><i class="fa-solid fa-download"></i><span>蓝奏盘</span></a><h3 id="2-1-导入节点">2.1 导入节点</h3><ol><li>点击左上角 “ShadowsocksR ▼”；</li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-24-11.png"/></div></div><ol start="2"><li>点击右下角 “+”，选择 “添加/升级 SSR 订阅”；</li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-25-28.png"/></div></div><ol start="3"><li>点击 “添加订阅地址”；</li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-26-03.png"/></div></div><ol start="4"><li>填入你购买后机场所提供的订阅地址</li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-27-01.png"/></div></div><ol start="5"><li>打开自动更新，点击「确定并升级」。</li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-28-01.png"/></div></div><h3 id="2-2-选择节点">2.2 选择节点</h3><p>在节点列表中，点击闪电图标检测节点延迟，选择一个可用节点。</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-28-28.png"/></div></div><p>右上角点击小飞机启动代理</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-28-53.png"/></div></div><p>首次启动会弹出一个 “网络连接请求”，点击 “确定” 即可</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-01-16-28-59.png"/></div></div><p>注：如果需要全网代理，下划找到 “路由”列表，切换为 “全局”。</p><h2 id="3-v2rayNG">3.v2rayNG</h2><div class="tag link"><a class="link-card" title="github项目链接" href="https://github.com/2dust/v2rayNG/releases"><div class="left"><img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"/></div><div class="right"><p class="text">github项目链接</p><p class="url">https://github.com/2dust/v2rayNG/releases</p></div></a></div><a class="btn-beautify outline" href="https://yumi1.lanzn.com/i25cy2bbbdkj" title="蓝奏盘"><i class="fa-solid fa-download"></i><span>蓝奏盘</span></a><h1>iOS</h1><h2 id="Shadowrocket">Shadowrocket</h2><p>外区Apple账号 商店搜索<code>Shadowrocket</code>购买安装 2.99$<br>一般机场会送一个apple账号里面带有,登录他人账号有一定风险</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-02-10-28-56.png"/></div></div><h2 id="1-1-配置订阅">1.1 配置订阅</h2><p>safari打开官网–点击<code>配置</code>即可导入</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-02-10-13-56.png"/></div></div><details class="folding-tag" ><summary> 点击`配置`没反应 </summary>              <div class='content'>              <p><code>通用订阅</code>–<code>复制通用订阅Clash</code></p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-02-10-25-39.png"/></div></div>打开Shadowrocket，点击右上角”+“号<div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-02-10-36-47.png"/></div></div>点击类型，选择「Subscribe」类型<div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-02-10-41-45.png"/></div></div>返回,在URL处粘贴刚刚复制的订阅链接保存后点击刷新即可<div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-02-10-44-52.png"/></div></div>`设置`--`订阅`--`打开时更新`<div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-02-10-46-36.png"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/vpn/2024-10-02-10-47-04.png"/></div></div>              </div>            </details><h1>macOS/linux</h1><p>同Windows,不做赘述<br>无Gui linux使用命令行安装 配置文件进行配置<br>有Gui linux可安装v2ray客户端</p><h1>openWRT</h1><p>有点复杂 给我玩崩了几次 有空再更新</p>]]></content>
    
    
    <summary type="html">本文为大家提供了clash的使用方法,以及clash的一些高级用法,如局域网共享,自定规则绕过网站等</summary>
    
    
    
    <category term="技术学习" scheme="https://yumi1.top/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="vpn" scheme="https://yumi1.top/tags/vpn/"/>
    
    <category term="clash" scheme="https://yumi1.top/tags/clash/"/>
    
  </entry>
  
  <entry>
    <title>免费游戏修改器整合管理工具：Game Cheats Manager使用指南</title>
    <link href="https://yumi1.top/game-cheats-manage/"/>
    <id>https://yumi1.top/game-cheats-manage/</id>
    <published>2024-08-21T16:15:03.000Z</published>
    <updated>2024-11-21T22:39:30.378Z</updated>
    
    <content type="html"><![CDATA[<p>3DM<font color=red >整合</font>风灵月影 居然开始收会员费<br>最近找到一个非常方便的风灵月影整合器,可搜索游戏 自动翻译</p><blockquote><p>Game Cheats Manager 为玩家提供了一个高效管理游戏修改器的一站式解决方案。它允许用户在一个便捷的位置浏览、下载和管理所有修改器。每个修改器，通常是一个独立的可执行文件，都可以通过应用程序直接启动或删除，从而简化您的游戏体验。</p></blockquote><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/game-cheats-manage/2024-08-22-00-38-56.png"/></div></div><p>不多说 直接甩仓库地址 <a href="https://github.com/dyang886/Game-Cheats-Manager/releases">GameCheatsManager GITHUB仓库地址</a> 连不上github的<a class="btn-beautify outline blue larger" href="https://share.weiyun.com/qLfKuw3r" title="腾迅微云点我下载"><i class="fa-solid fa-download"></i><span>腾迅微云点我下载</span></a></p><h2 id="使用指南">使用指南</h2><ol><li><p>打开软件后，点击<strong>更新</strong>按钮。<br><img src="../image/game-cheats-manage/2024-08-22-00-49-40.png" alt="点击更新"></p> <div class="tip warning"><p>如果更新过程中显示“更新风灵月影数据库失败”，可能需要使用VPN翻墙。</p></div></li><li><p>更新完成后，你可以在右侧的搜索框中进行联网搜索，并一键下载你需要的修改器。<br><img src="../image/game-cheats-manage/2024-08-22-00-50-25.png" alt="搜索并下载"></p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;3DM&lt;font color=red &gt;整合&lt;/font&gt;风灵月影 居然开始收会员费&lt;br&gt;
最近找到一个非常方便的风灵月影整合器,可搜索游戏 自动翻译&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Game Cheats Manager 为玩家提供了一个高效管理游戏修改器的一站</summary>
      
    
    
    
    
    <category term="游戏修改器" scheme="https://yumi1.top/tags/%E6%B8%B8%E6%88%8F%E4%BF%AE%E6%94%B9%E5%99%A8/"/>
    
    <category term="游戏管理" scheme="https://yumi1.top/tags/%E6%B8%B8%E6%88%8F%E7%AE%A1%E7%90%86/"/>
    
    <category term="风灵月影" scheme="https://yumi1.top/tags/%E9%A3%8E%E7%81%B5%E6%9C%88%E5%BD%B1/"/>
    
    <category term="Game Cheats Manager" scheme="https://yumi1.top/tags/Game-Cheats-Manager/"/>
    
    <category term="免费工具" scheme="https://yumi1.top/tags/%E5%85%8D%E8%B4%B9%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>IDM 最强下载工具2024.8.9激活教程</title>
    <link href="https://yumi1.top/idm-crack/"/>
    <id>https://yumi1.top/idm-crack/</id>
    <published>2024-08-09T15:01:47.000Z</published>
    <updated>2024-11-21T22:40:27.943Z</updated>
    
    <content type="html"><![CDATA[<p>2024.8.9 解决弹窗烦恼<br><a href="https://www.internetdownloadmanager.com/download.html">IDM</a><br>下载神器,支持断点续传,多线程下载,windows一般为单线程下载,网速可能只有2~3MB/s,但是多线程下载可以将文件分成多个部分同时下载,这样下载速度可达到你的网速上限</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/idm.png"/></div></div>可在选项->连接->最大链接数 可将线程数设置为16或更高<div class="img-wrap"><div class="img-bg"><img class="img" src="/image/idm1.png"/></div></div><p>搭配油猴的<a href="https://greasyfork.org/zh-CN/scripts/436446-%E7%BD%91%E7%9B%98%E7%9B%B4%E9%93%BE%E4%B8%8B%E8%BD%BD%E5%8A%A9%E6%89%8B">网盘直链下载助手</a>可实现各大网盘的全速下载,如百度阿里夸克等<br>详情<a href="https://yumi1.top/windows-optimize-1/#%E7%BD%91%E7%9B%98%E7%9B%B4%E9%93%BE%E4%B8%8B%E8%BD%BD%E5%8A%A9%E6%89%8B">windows-optimize-1/#网盘直链下载助手</a></p><div class="tip bell"><p>在安装IDM本体时<font color=red size=6>请不要更改默认安装地址</font>,同时<font color=red size=6>允许IDM安装浏览器拓展</font></p></div><div class="tag link"><a class="link-card" title="IDM官网链接" href="https://www.internetdownloadmanager.com/download.html"><div class="left"><img src="https://www.internetdownloadmanager.com/favicon.ico"/></div><div class="right"><p class="text">IDM官网链接</p><p class="url">https://www.internetdownloadmanager.com/download.html</p></div></a></div><p>同时IDM是一款付费软件,可在官网支持正版 119r永久会员,下载前30天免费使用,以下提供两份破解的方法</p><details class="folding-tag" open><summary> 第一种方法 </summary>              <div class='content'>              <p><a class="btn-beautify outline blue larger" href="https://yumi1.lanzn.com/ijce826zzq5a" title="下载链接"><i class="fa-solid fa-download"></i><span>下载链接</span></a><br>下载后打开<div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/windows-optimize-2/2024-08-09-23-01-05.png"/></div></div>点击crack-&gt;finsh 即可</p>              </div>            </details>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;2024.8.9 解决弹窗烦恼&lt;br&gt;
&lt;a href=&quot;https://www.internetdownloadmanager.com/download.html&quot;&gt;IDM&lt;/a&gt;&lt;br&gt;
下载神器,支持断点续传,多线程下载,windows一般为单线程下载,网速可能只有2</summary>
      
    
    
    
    
    <category term="IDM" scheme="https://yumi1.top/tags/IDM/"/>
    
    <category term="破解" scheme="https://yumi1.top/tags/%E7%A0%B4%E8%A7%A3/"/>
    
  </entry>
  
  <entry>
    <title>刷题日记-906超级回文数</title>
    <link href="https://yumi1.top/exercise-solving-diary-2/"/>
    <id>https://yumi1.top/exercise-solving-diary-2/</id>
    <published>2024-06-09T18:22:31.000Z</published>
    <updated>2024-07-30T10:14:16.450Z</updated>
    
    <content type="html"><![CDATA[<h1>LeetCode 687. 最长同值路径</h1><table><thead><tr><th>Category</th><th>Difficulty</th><th>Total Accepted:</th><th>Total Submissions:</th></tr></thead><tbody><tr><td>algorithms</td><td>Hard (33.09%)</td><td>5.7K</td><td>17.3K</td></tr></tbody></table><p><B>Tags</B><br>greedy</p><p><strong>Companies</strong></p><p>无</p><hr><h2 id="题目">题目:</h2><p>如果一个正整数自身是回文数，而且它也是一个回文数的平方，那么我们称这个数为超级回文数。<br>现在，给定两个正整数 L 和 R （以字符串形式表示），返回包含在范围 [L, R] 中的超级回文数的数目。</p><p>示例:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入：L = &quot;4&quot;, R = &quot;1000&quot;</span><br><span class="line">输出：4</span><br><span class="line">解释：</span><br><span class="line">4，9，121，以及 484 是超级回文数。</span><br><span class="line">注意 676 不是一个超级回文数： 26 * 26 = 676，但是 26 不是回文数。</span><br></pre></td></tr></table></figure><p>提示:</p><ul><li>1 &lt;= len( L ) &lt;= 18</li><li>1 &lt;= len( R ) &lt;= 18</li><li>L 和 R 是表示 [1, 10^18) 范围的整数的字符串。</li><li>int( L ) &lt;= int( R )</li></ul><hr><h2 id="思路">思路</h2><p><strong>greedy</strong></p><p>贪心算法,将数倒置然后进行==运算,最后判断是否在[L,R]区间内. 注意i为右值的平方根</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @lc code=start</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">superpalindromesInRange</span><span class="params">(string left, string right)</span> </span>&#123;</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> leftNum = <span class="built_in">stoll</span>(left);</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> rightNum = <span class="built_in">stoll</span>(right);</span><br><span class="line">        <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">long</span> <span class="type">long</span> i = <span class="built_in">sqrt</span>(leftNum); i &lt;= <span class="built_in">sqrt</span>(rightNum); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">dfsNumber</span>(i) &amp;&amp; <span class="built_in">dfsNumber</span>(i * i)) &#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">dfsNumber</span><span class="params">(<span class="type">long</span> <span class="type">long</span> number)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (number &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> x = number, y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (number &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            y = y * <span class="number">10</span> + number % <span class="number">10</span>;number /= <span class="number">10</span>;<span class="comment">//反转</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> x == y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @lc code=end</span></span><br></pre></td></tr></table></figure><h2 id="测试用例">测试用例</h2><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/exercise-solving-diary-2/2024-06-10-02-31-01.png"/></div></div><center><font color=red size=6>悲</font></center><h2 id="leetcode评论区">leetcode评论区</h2><ol><li><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/exercise-solving-diary-2/2024-06-10-03-05-18.png"/></div></div></li></ol><p>难绷</p><ol start="2"><li>来自评论区<a href="https://leetcode-cn.com/u/ffreturn/">ffreturn</a>佬的<a href="https://leetcode.cn/problems/super-palindromes/solutions/697703/906-czhong-gui-zhong-ju-de-bian-li-jie-f-fxl7">解答</a></li></ol><blockquote><p><strong>解题思路</strong><br>思路其实很直观</p><p>按照范围去找基础数字i，然后构建回文数字m， 然后判断p=r^2是否在范围内和p是回文，是的话则计数器+1<br>i的查找范围： 题目告诉我们范围是10^18，那么R就是10^9,而i保守可以设置到10^5,范围是[1,100000]<br>回文存在两种情况： 偶数和奇数，为了处理简单，也分开来遍历<br>注意事项： 考虑到数值范围，计算得用long</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">&gt;<span class="keyword">public</span>:</span><br><span class="line">   <span class="function"><span class="type">int</span> <span class="title">superpalindromesInRange</span><span class="params">(string left, string right)</span> </span>&#123;</span><br><span class="line">       <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">       <span class="type">long</span> l = <span class="built_in">stol</span>(left);</span><br><span class="line">       <span class="type">long</span> r = <span class="built_in">stol</span>(right);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 先判断偶数的情况 ABCCBA</span></span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; <span class="number">100000</span>; ++i)</span><br><span class="line">       &#123;</span><br><span class="line">           string s = <span class="built_in">to_string</span>(i);</span><br><span class="line">           string s2 = s;</span><br><span class="line">           <span class="built_in">reverse</span>(s2.<span class="built_in">begin</span>(), s2.<span class="built_in">end</span>());</span><br><span class="line">           <span class="type">long</span> m= <span class="built_in">stol</span>(s + s2);</span><br><span class="line">           m *= m;</span><br><span class="line">           <span class="comment">// 超过范围提前结束遍历</span></span><br><span class="line">           <span class="keyword">if</span> (m &gt; r)</span><br><span class="line">           &#123;</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span> <span class="keyword">if</span> (m &gt;= l &amp;&amp; <span class="built_in">IsPalindrom</span>(m))</span><br><span class="line">           &#123;</span><br><span class="line">               ++res;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 再判断奇数的情况 ABCBA</span></span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; <span class="number">100000</span>; ++i)</span><br><span class="line">       &#123;</span><br><span class="line">           string s = <span class="built_in">to_string</span>(i);</span><br><span class="line">           string s2 = s;</span><br><span class="line">           <span class="built_in">reverse</span>(s2.<span class="built_in">begin</span>(), s2.<span class="built_in">end</span>());</span><br><span class="line">           <span class="type">long</span> m= <span class="built_in">stol</span>(s.<span class="built_in">append</span>(s2.<span class="built_in">begin</span>()+<span class="number">1</span>, s2.<span class="built_in">end</span>()));</span><br><span class="line">           m *= m;</span><br><span class="line">           <span class="comment">// 超过范围提前结束遍历</span></span><br><span class="line">           <span class="keyword">if</span> (m &gt; r)</span><br><span class="line">           &#123;</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span> <span class="keyword">if</span> (m &gt;= l &amp;&amp; <span class="built_in">IsPalindrom</span>(m))</span><br><span class="line">           &#123;</span><br><span class="line">               ++res;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> res;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="type">bool</span> <span class="title">IsPalindrom</span><span class="params">(<span class="type">long</span> num)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">       <span class="type">long</span> n = num;</span><br><span class="line">       <span class="comment">// 倒序的数字</span></span><br><span class="line">       <span class="type">long</span> revNum = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">while</span> (n &gt; <span class="number">0</span>)</span><br><span class="line">       &#123;</span><br><span class="line">           revNum = revNum * <span class="number">10</span> + n % <span class="number">10</span>;</span><br><span class="line">           n /= <span class="number">10</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// 直接比较是否相等即可</span></span><br><span class="line">       <span class="keyword">return</span> revNum == num;</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;;</span><br></pre></td></tr></table></figure></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;LeetCode 687. 最长同值路径&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Category&lt;/th&gt;
&lt;th&gt;Difficulty&lt;/th&gt;
&lt;th&gt;Total Accepted:&lt;/th&gt;
&lt;th&gt;Total Submissions:&lt;/th</summary>
      
    
    
    
    <category term="刷题日记" scheme="https://yumi1.top/categories/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0/"/>
    
    <category term="algorithms" scheme="https://yumi1.top/categories/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0/algorithms/"/>
    
    
    <category term="leetcode" scheme="https://yumi1.top/tags/leetcode/"/>
    
    <category term="刷题日记" scheme="https://yumi1.top/tags/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0/"/>
    
    <category term="greedy" scheme="https://yumi1.top/tags/greedy/"/>
    
  </entry>
  
  <entry>
    <title>刷题日记-687最长同值路径</title>
    <link href="https://yumi1.top/exercise-solving-diary-1/"/>
    <id>https://yumi1.top/exercise-solving-diary-1/</id>
    <published>2024-06-06T07:11:19.000Z</published>
    <updated>2024-06-09T18:30:54.060Z</updated>
    
    <content type="html"><![CDATA[<h1>LeetCode 687. 最长同值路径</h1><table><thead><tr><th>Category</th><th>Difficulty</th><th>Likes</th><th>Dislikes</th></tr></thead><tbody><tr><td>algorithms</td><td>Medium (48.06%)</td><td>805</td><td>-</td></tr></tbody></table><p><B>Tags</B></p><p>tree | recursion</p><p><strong>Companies</strong></p><p>google</p><hr><h2 id="题目">题目:</h2><p>给定一个二叉树的 <code>root</code> ，返回最长的路径的长度 ，这个路径中的每个节点具有相同值 。 这条路径可以经过也可以不经过根节点。<br><strong>两个节点之间的路径长度</strong>由它们之间的边数表示。</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/exercise-solving-diary-1/2024-06-06-18-55-46.png"/></div></div><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入：root = [5,4,5,1,1,5]</span><br><span class="line">输出：2</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/exercise-solving-diary-1/2024-06-06-19-11-30.png"/></div></div><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入：root = [1,4,5,4,4,5]</span><br><span class="line">输出：2</span><br></pre></td></tr></table></figure><p>提示:</p><ul><li>树的节点数的范围是 [0, 10<sup>4</sup>]</li><li>-1000 &lt;= Node.val &lt;= 1000</li><li>树的深度将不超过 1000</li></ul><hr><h2 id="思路">思路</h2><p><strong>recursion</strong><br>递归问题,找最长同值路径.从根节点开始,<strong>分别</strong>访问左右子树,如果左右子树的值和根节点的值相同,那么路径长度+1,否则置为0.最后返回左右子树的最长同值路径.</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/exercise-solving-diary-1/5f21629f-3766-4466-b75d-9445f0d46646.svg"/></div></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @lc app=leetcode.cn id=687 lang=cpp</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * [687] 最长同值路径</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// Definition for a binary tree node.</span></span><br><span class="line"><span class="comment">// @lc code=start</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * struct TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode *left;</span></span><br><span class="line"><span class="comment"> *     TreeNode *right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestPath</span><span class="params">(TreeNode *root)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">int</span> longest = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">ArrowLength</span>(root, longest);</span><br><span class="line">        <span class="keyword">return</span> longest;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">ArrowLength</span><span class="params">(TreeNode *node, <span class="type">int</span> &amp;longest)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!node)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> leftLength = <span class="built_in">ArrowLength</span>(node-&gt;left, longest);</span><br><span class="line">        <span class="type">int</span> rightLength = <span class="built_in">ArrowLength</span>(node-&gt;right, longest);</span><br><span class="line">        <span class="type">int</span> left_length = <span class="number">0</span>, right_length = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;left &amp;&amp; node-&gt;left-&gt;val == node-&gt;val)&#123;</span><br><span class="line">            left_length = leftLength + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;right &amp;&amp; node-&gt;right-&gt;val == node-&gt;val)&#123;</span><br><span class="line">            right_length = rightLength + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        longest = std::<span class="built_in">max</span>(longest, left_length + right_length);<span class="comment">//可能包含当前节点以及从左右子节点开始的最长同值路径</span></span><br><span class="line">        <span class="keyword">return</span> std::<span class="built_in">max</span>(left_length, right_length);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>首先看题所给<code>TreeNode</code>二叉树的结构,每个节点有一个<code>val</code>值,以及左右子节点.并含有三种构造函数</p><p>定义一个<code>longest</code>变量,用于存储最长同值路径.<br>定义一个<code>ArrowLength</code>递归函数,用于计算从当前节点开始的最长同值路径.如果当前节点为空,返回0.计算左右子树的最长同值路径,并且判断左右子节点是否和当前节点的值相同,如果相同,路径长度+1.最后返回左右子树的最长同值路径.最后返回<code>longest</code>变量.</p><p><strong>值得注意的是</strong>,在计算<code>longest</code>时,可能包含当前节点以及从左右子节点开始的最长同值路径,所以需要取最大值.</p><pre><code>longest = std::max(longest, left_length + right_length);</code></pre><hr><h2 id="测试用例">测试用例</h2><p>C++:</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/exercise-solving-diary-1/2024-06-08-19-41-18.png"/></div></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;LeetCode 687. 最长同值路径&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Category&lt;/th&gt;
&lt;th&gt;Difficulty&lt;/th&gt;
&lt;th&gt;Likes&lt;/th&gt;
&lt;th&gt;Dislikes&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tb</summary>
      
    
    
    
    <category term="刷题日记" scheme="https://yumi1.top/categories/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0/"/>
    
    <category term="algorithms" scheme="https://yumi1.top/categories/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0/algorithms/"/>
    
    
    <category term="leetcode" scheme="https://yumi1.top/tags/leetcode/"/>
    
    <category term="刷题日记" scheme="https://yumi1.top/tags/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0/"/>
    
    <category term="tree" scheme="https://yumi1.top/tags/tree/"/>
    
    <category term="recursion" scheme="https://yumi1.top/tags/recursion/"/>
    
  </entry>
  
  <entry>
    <title>大学网课自动播放-2.学习通作业自动答题 | 智慧树</title>
    <link href="https://yumi1.top/school-chaoxing-class-2/"/>
    <id>https://yumi1.top/school-chaoxing-class-2/</id>
    <published>2024-05-28T05:35:18.000Z</published>
    <updated>2024-11-13T13:11:38.513Z</updated>
    
    <content type="html"><![CDATA[<h2 id="写在最前">写在最前</h2><div class="tip "><p>此贴仅为技术研究分析,请勿将此教程用于贩卖,使用程序造成的后果自行承担</p></div><div class="note success modern"><p>摆脱学校布置的无用网课 释放垃圾时间(<a href="https://www.bilibili.com/">bilibili</a>,<a href="https://www.icourse163.org/">MOOC</a>,<a href="https://www.youtube.com/">YouTube</a>上有优质课程资源)</p></div><div class="site-card-group"><a class="site-card" href="https://www.yumi1.top/windows-optimize-1/#3-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%A9%E5%B1%95%E5%AE%89%E8%A3%85"><div class="img"><img src="/image/src2.png"/></div><div class="info"><img src="/image/yumi.png"/><span class="title">3.浏览器拓展安装</span><span class="desc">yumi</span></div></a><a class="site-card" href="https://www.yumi1.top/school-chaoxing-class/"><div class="img"><img src="/image/background.jpeg"/></div><div class="info"><img src="/image/yumi.png"/><span class="title">网课自动播放-1</span><span class="desc">yumi</span></div></a></div><h2 id="前置条件">前置条件</h2><ol><li><p>edge浏览器</p></li><li><p>打开拓展 开启开发者模式</p></li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-11-13-21-11-05.png"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-11-13-21-11-30.png"/></div></div><ol start="3"><li>安装<a href="https://microsoftedge.microsoft.com/addons/detail/%E7%AF%A1%E6%94%B9%E7%8C%B4/iikmkjmpaadaobahmlepeloendndfphd">篡改猴</a> (油猴)       <img no-lazy class="inline" src="/image/4.png" style="height:40px;"/><br>(又名Tampermonkey/油猴) 以下称油猴 <a class="btn-beautify outline blue larger" href="https://microsoftedge.microsoft.com/addons/detail/%E7%AF%A1%E6%94%B9%E7%8C%B4/iikmkjmpaadaobahmlepeloendndfphd" title="下载链接"><i class="fa-solid fa-download"></i><span>下载链接</span></a></li></ol><p>油猴安装可见:<br><a href="https://www.yumi1.top/windows-optimize-1/#3-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%A9%E5%B1%95%E5%AE%89%E8%A3%85">浏览器拓展安装</a></p><h2 id="一-学习通作业自动答题">一.学习通作业自动答题</h2><ol><li>安装脚本<br>FCQ网课通助手[全网题库][通用智能适配答题][刷课] <a class="btn-beautify outline} 2. 在弹出的页面中点击安装即可 3. 打开学习通 在右上角开启脚本 {% image /image/../image/school-chaoxing-class-2/2024-05-28-13-28-24.png" href="https://greasyfork.org/zh-CN/scripts/477942-fcq%E7%BD%91%E8%AF%BE%E9%80%9A%E5%8A%A9%E6%89%8B-%E5%85%A8%E7%BD%91%E9%A2%98%E5%BA%93-%E9%80%9A%E7%94%A8%E6%99%BA%E8%83%BD%E9%80%82%E9%85%8D%E7%AD%94%E9%A2%98-%E5%88%B7%E8%AF%BE" title="安装链接"><i class="fa-solid fa-download"></i><span>安装链接</span></a></li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-05-28-13-29-10.png"/></div></div><p>这个脚本的网页适配比较广,不用的时候可以在油猴中关闭</p><ol start="4"><li>刷新网页后在右下角看见如下图标即为开启</li></ol><div class="tip "><p>如果没看到脚本界面可以试试按del</p></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-05-28-13-31-29.png"/></div></div><ol start="5"><li>进入作业界面点击自动做题即可</li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-05-28-13-38-37.png"/></div></div><p><strong>他家题库很全,答题可以识图,是目前最好用的答题脚本,可以考虑买,5000积分够用好久了</strong></p><div class="tip "><p>设置界面可以购买题库,购买时有账户切换选项 <font color=red>账户与学习通账户绑定,其他账户不能使用,通用账户则通用</font></p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-05-29-02-08-53.png"/></div></div></div><h2 id="二-学习通网课自动播放">二.学习通网课自动播放</h2><h3 id="2-1-OCS-网课助手">2.1 OCS 网课助手</h3><p>同样好用 可见<br><a href="https://www.yumi1.top/school-chaoxing-class">大学网课自动播放 1.学习通  OCS</a></p><h3 id="2-2-【超星学习通小助手】【完全免费】视频-章节测试-自动挂机-防清进度-不占资源">2.2 【超星学习通小助手】【完全免费】视频-章节测试|自动挂机|防清进度|不占资源</h3><p>这里我介绍一个正则改的超星脚本 个人感觉比OCS好用</p><a class="btn-beautify outline blue larger" href="https://greasyfork.org/zh-CN/scripts/462748" title="下载链接"><i class="fa-solid fa-download"></i><span>下载链接</span></a><p>同样 安装 打开需要刷课的课程 同时保证没有其他的刷课脚本在运行 需要用时开启即可</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-05-28-13-54-19.png"/></div></div><p>优点: <strong>免费</strong> <strong>挂机</strong> <strong>不占资源</strong></p><h2 id="三-智慧树">三.智慧树</h2><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-06-03-04-51-43.png"/></div></div><p>OCS助手需要下载app 我没有试过 这里提供FCQ的教程</p><h3 id="3-1-安装脚本">3.1 安装脚本</h3><ol><li>安装脚本<br>FCQ网课通助手[全网题库][通用智能适配答题][刷课] <a class="btn-beautify outline" href="/(https:/tcb-w644nfbyxrttaih-2cpr71dbf4b7-1304481250.tcloudbaseapp.com/extra2.user.js)" title="安装链接"><i class="fa-solid fa-download"></i><span>安装链接</span></a> <a class="btn-beautify outline} 2. 在弹出的页面中点击安装即可 3. 打开学习通 在右上角开启脚本 {% image /image/../image/school-chaoxing-class-2/2024-05-28-13-28-24.png" href="https://greasyfork.org/zh-CN/scripts/477942-fcq%E7%BD%91%E8%AF%BE%E9%80%9A%E5%8A%A9%E6%89%8B-%E5%85%A8%E7%BD%91%E9%A2%98%E5%BA%93-%E9%80%9A%E7%94%A8%E6%99%BA%E8%83%BD%E9%80%82%E9%85%8D%E7%AD%94%E9%A2%98-%E5%88%B7%E8%AF%BE" title="安装链接"><i class="fa-solid fa-download"></i><span>安装链接</span></a></li></ol><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-05-28-13-29-10.png"/></div></div><p>这个脚本的网页适配比较广,不用的时候可以在油猴中关闭</p><ol start="4"><li>刷新网页后在右下角看见如下图标即为开启</li></ol><div class="tip "><p>如果没看到脚本界面可以试试按del</p></div><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-05-28-13-31-29.png"/></div></div><h3 id="3-2-开始刷课">3.2 开始刷课</h3><p>快进两百倍-&gt;完成当前课件视频</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-06-03-04-43-09.png"/></div></div><p>然后看到右边变成100%皆可切换下一个视频</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-06-03-04-48-09.png"/></div></div><p>这个脚本的章节切换有点问题 自己手动切一下就行 因为脚本加速200倍的原因可能按键较为难按 狂点即可</p><div class="tip "><p>亲测是不会封号,直接刷完也是够及格的,不用担心</p></div><p>建议一次性把课程刷完后再刷平时测试</p><h3 id="3-3-平时测试">3.3 平时测试</h3><p>使用OCS 或者 FCQ都是可以的 注意使用FCQ时记得把刚刚开的200倍速还原<br>这里不再赘述</p><div class="img-wrap"><div class="img-bg"><img class="img" src="/image/../image/school-chaoxing-class-2/2024-06-03-04-51-12.png"/></div></div>]]></content>
    
    
    <summary type="html">摆脱学校布置的无用网课 释放垃圾时间,自动刷课,自动答题,网课助手,油猴,篡改猴,网课答题,网课刷课,网课自动答题,网课自动刷课,网课自动播放,网课自动播放器,网课自动播放脚本,网课自动播放插件,网课自动播放器插件,网课自动播放脚本插件,网课自动播放器脚本,网课自动播放器脚本插件</summary>
    
    
    
    <category term="大学小技巧" scheme="https://yumi1.top/categories/%E5%A4%A7%E5%AD%A6%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="school" scheme="https://yumi1.top/tags/school/"/>
    
    <category term="油猴" scheme="https://yumi1.top/tags/%E6%B2%B9%E7%8C%B4/"/>
    
    <category term="超星" scheme="https://yumi1.top/tags/%E8%B6%85%E6%98%9F/"/>
    
    <category term="学习通" scheme="https://yumi1.top/tags/%E5%AD%A6%E4%B9%A0%E9%80%9A/"/>
    
  </entry>
  
</feed>
